var gL=Object.defineProperty;var y_=e=>{throw TypeError(e)};var vL=(e,t,r)=>t in e?gL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fr=(e,t,r)=>vL(e,typeof t!="symbol"?t+"":t,r),X0=(e,t,r)=>t.has(e)||y_("Cannot "+r);var Ee=(e,t,r)=>(X0(e,t,"read from private field"),r?r.call(e):t.get(e)),zt=(e,t,r)=>t.has(e)?y_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),vt=(e,t,r,n)=>(X0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),hr=(e,t,r)=>(X0(e,t,"access private method"),r);var zg=(e,t,r,n)=>({set _(i){vt(e,t,i,r)},get _(){return Ee(e,t,n)}});function S4(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Nae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yL(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var k4={exports:{}},cx={},C4={exports:{}},mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=Symbol.for("react.element"),xL=Symbol.for("react.portal"),bL=Symbol.for("react.fragment"),wL=Symbol.for("react.strict_mode"),NL=Symbol.for("react.profiler"),jL=Symbol.for("react.provider"),_L=Symbol.for("react.context"),SL=Symbol.for("react.forward_ref"),PL=Symbol.for("react.suspense"),kL=Symbol.for("react.memo"),CL=Symbol.for("react.lazy"),x_=Symbol.iterator;function TL(e){return e===null||typeof e!="object"?null:(e=x_&&e[x_]||e["@@iterator"],typeof e=="function"?e:null)}var T4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O4=Object.assign,E4={};function Jh(e,t,r){this.props=e,this.context=t,this.refs=E4,this.updater=r||T4}Jh.prototype.isReactComponent={};Jh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function A4(){}A4.prototype=Jh.prototype;function oN(e,t,r){this.props=e,this.context=t,this.refs=E4,this.updater=r||T4}var lN=oN.prototype=new A4;lN.constructor=oN;O4(lN,Jh.prototype);lN.isPureReactComponent=!0;var b_=Array.isArray,D4=Object.prototype.hasOwnProperty,cN={current:null},M4={key:!0,ref:!0,__self:!0,__source:!0};function R4(e,t,r){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)D4.call(t,n)&&!M4.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Ep,type:e,key:a,ref:o,props:i,_owner:cN.current}}function OL(e,t){return{$$typeof:Ep,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dN(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ep}function EL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var w_=/\/+/g;function Q0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?EL(""+e.key):t.toString(36)}function Hv(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ep:case xL:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Q0(o,0):n,b_(i)?(r="",e!=null&&(r=e.replace(w_,"$&/")+"/"),Hv(i,t,r,"",function(d){return d})):i!=null&&(dN(i)&&(i=OL(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(w_,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",b_(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Q0(a,l);o+=Hv(a,t,r,c,i)}else if(c=TL(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Q0(a,l++),o+=Hv(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Hg(e,t,r){if(e==null)return e;var n=[],i=0;return Hv(e,n,"","",function(a){return t.call(r,a,i++)}),n}function AL(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ys={current:null},Wv={transition:null},DL={ReactCurrentDispatcher:Ys,ReactCurrentBatchConfig:Wv,ReactCurrentOwner:cN};function I4(){throw Error("act(...) is not supported in production builds of React.")}mr.Children={map:Hg,forEach:function(e,t,r){Hg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Hg(e,function(){t++}),t},toArray:function(e){return Hg(e,function(t){return t})||[]},only:function(e){if(!dN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mr.Component=Jh;mr.Fragment=bL;mr.Profiler=NL;mr.PureComponent=oN;mr.StrictMode=wL;mr.Suspense=PL;mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DL;mr.act=I4;mr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=O4({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=cN.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)D4.call(t,c)&&!M4.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ep,type:e.type,key:i,ref:a,props:n,_owner:o}};mr.createContext=function(e){return e={$$typeof:_L,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jL,_context:e},e.Consumer=e};mr.createElement=R4;mr.createFactory=function(e){var t=R4.bind(null,e);return t.type=e,t};mr.createRef=function(){return{current:null}};mr.forwardRef=function(e){return{$$typeof:SL,render:e}};mr.isValidElement=dN;mr.lazy=function(e){return{$$typeof:CL,_payload:{_status:-1,_result:e},_init:AL}};mr.memo=function(e,t){return{$$typeof:kL,type:e,compare:t===void 0?null:t}};mr.startTransition=function(e){var t=Wv.transition;Wv.transition={};try{e()}finally{Wv.transition=t}};mr.unstable_act=I4;mr.useCallback=function(e,t){return Ys.current.useCallback(e,t)};mr.useContext=function(e){return Ys.current.useContext(e)};mr.useDebugValue=function(){};mr.useDeferredValue=function(e){return Ys.current.useDeferredValue(e)};mr.useEffect=function(e,t){return Ys.current.useEffect(e,t)};mr.useId=function(){return Ys.current.useId()};mr.useImperativeHandle=function(e,t,r){return Ys.current.useImperativeHandle(e,t,r)};mr.useInsertionEffect=function(e,t){return Ys.current.useInsertionEffect(e,t)};mr.useLayoutEffect=function(e,t){return Ys.current.useLayoutEffect(e,t)};mr.useMemo=function(e,t){return Ys.current.useMemo(e,t)};mr.useReducer=function(e,t,r){return Ys.current.useReducer(e,t,r)};mr.useRef=function(e){return Ys.current.useRef(e)};mr.useState=function(e){return Ys.current.useState(e)};mr.useSyncExternalStore=function(e,t,r){return Ys.current.useSyncExternalStore(e,t,r)};mr.useTransition=function(){return Ys.current.useTransition()};mr.version="18.3.1";C4.exports=mr;var w=C4.exports;const dt=P4(w),dx=S4({__proto__:null,default:dt},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML=w,RL=Symbol.for("react.element"),IL=Symbol.for("react.fragment"),LL=Object.prototype.hasOwnProperty,FL=ML.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BL={key:!0,ref:!0,__self:!0,__source:!0};function L4(e,t,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)LL.call(t,n)&&!BL.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:RL,type:e,key:a,ref:o,props:i,_owner:FL.current}}cx.Fragment=IL;cx.jsx=L4;cx.jsxs=L4;k4.exports=cx;var s=k4.exports,F4={exports:{}},Di={},B4={exports:{}},q4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,F){var X=C.length;C.push(F);e:for(;0<X;){var re=X-1>>>1,z=C[re];if(0<i(z,F))C[re]=F,C[X]=z,X=re;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var F=C[0],X=C.pop();if(X!==F){C[0]=X;e:for(var re=0,z=C.length,Y=z>>>1;re<Y;){var J=2*(re+1)-1,ne=C[J],le=J+1,G=C[le];if(0>i(ne,X))le<z&&0>i(G,ne)?(C[re]=G,C[le]=X,re=le):(C[re]=ne,C[J]=X,re=J);else if(le<z&&0>i(G,X))C[re]=G,C[le]=X,re=le;else break e}}return F}function i(C,F){var X=C.sortIndex-F.sortIndex;return X!==0?X:C.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(C){for(var F=r(d);F!==null;){if(F.callback===null)n(d);else if(F.startTime<=C)n(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(d)}}function j(C){if(y=!1,b(C),!g)if(r(c)!==null)g=!0,U(S);else{var F=r(d);F!==null&&R(j,F.startTime-C)}}function S(C,F){g=!1,y&&(y=!1,p(I),I=-1),f=!0;var X=m;try{for(b(F),h=r(c);h!==null&&(!(h.expirationTime>F)||C&&!T());){var re=h.callback;if(typeof re=="function"){h.callback=null,m=h.priorityLevel;var z=re(h.expirationTime<=F);F=e.unstable_now(),typeof z=="function"?h.callback=z:h===r(c)&&n(c),b(F)}else n(c);h=r(c)}if(h!==null)var Y=!0;else{var J=r(d);J!==null&&R(j,J.startTime-F),Y=!1}return Y}finally{h=null,m=X,f=!1}}var P=!1,M=null,I=-1,O=5,L=-1;function T(){return!(e.unstable_now()-L<O)}function k(){if(M!==null){var C=e.unstable_now();L=C;var F=!0;try{F=M(!0,C)}finally{F?E():(P=!1,M=null)}}else P=!1}var E;if(typeof v=="function")E=function(){v(k)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,q=A.port2;A.port1.onmessage=k,E=function(){q.postMessage(null)}}else E=function(){x(k,0)};function U(C){M=C,P||(P=!0,E())}function R(C,F){I=x(function(){C(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,U(S))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var X=m;m=F;try{return C()}finally{m=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,F){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var X=m;m=C;try{return F()}finally{m=X}},e.unstable_scheduleCallback=function(C,F,X){var re=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?re+X:re):X=re,C){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,C={id:u++,callback:F,priorityLevel:C,startTime:X,expirationTime:z,sortIndex:-1},X>re?(C.sortIndex=X,t(d,C),r(c)===null&&C===r(d)&&(y?(p(I),I=-1):y=!0,R(j,X-re))):(C.sortIndex=z,t(c,C),g||f||(g=!0,U(S))),C},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(C){var F=m;return function(){var X=m;m=F;try{return C.apply(this,arguments)}finally{m=X}}}})(q4);B4.exports=q4;var qL=B4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UL=w,Ei=qL;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U4=new Set,Vm={};function lu(e,t){Mh(e,t),Mh(e+"Capture",t)}function Mh(e,t){for(Vm[e]=t,e=0;e<t.length;e++)U4.add(t[e])}var nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qw=Object.prototype.hasOwnProperty,zL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N_={},j_={};function HL(e){return qw.call(j_,e)?!0:qw.call(N_,e)?!1:zL.test(e)?j_[e]=!0:(N_[e]=!0,!1)}function WL(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VL(e,t,r,n){if(t===null||typeof t>"u"||WL(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ks(e,t,r,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var xs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xs[e]=new Ks(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xs[t]=new Ks(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xs[e]=new Ks(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xs[e]=new Ks(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xs[e]=new Ks(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xs[e]=new Ks(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xs[e]=new Ks(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xs[e]=new Ks(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xs[e]=new Ks(e,5,!1,e.toLowerCase(),null,!1,!1)});var uN=/[\-:]([a-z])/g;function hN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uN,hN);xs[t]=new Ks(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uN,hN);xs[t]=new Ks(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uN,hN);xs[t]=new Ks(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xs[e]=new Ks(e,1,!1,e.toLowerCase(),null,!1,!1)});xs.xlinkHref=new Ks("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xs[e]=new Ks(e,1,!1,e.toLowerCase(),null,!0,!0)});function fN(e,t,r,n){var i=xs.hasOwnProperty(t)?xs[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VL(t,r,i,n)&&(r=null),n||i===null?HL(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var hl=UL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wg=Symbol.for("react.element"),Ju=Symbol.for("react.portal"),Zu=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),Uw=Symbol.for("react.profiler"),z4=Symbol.for("react.provider"),H4=Symbol.for("react.context"),pN=Symbol.for("react.forward_ref"),zw=Symbol.for("react.suspense"),Hw=Symbol.for("react.suspense_list"),gN=Symbol.for("react.memo"),Hl=Symbol.for("react.lazy"),W4=Symbol.for("react.offscreen"),__=Symbol.iterator;function Kf(e){return e===null||typeof e!="object"?null:(e=__&&e[__]||e["@@iterator"],typeof e=="function"?e:null)}var pn=Object.assign,$0;function pm(e){if($0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$0=t&&t[1]||""}return`
`+$0+e}var eb=!1;function tb(e,t){if(!e||eb)return"";eb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{eb=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pm(e):""}function YL(e){switch(e.tag){case 5:return pm(e.type);case 16:return pm("Lazy");case 13:return pm("Suspense");case 19:return pm("SuspenseList");case 0:case 2:case 15:return e=tb(e.type,!1),e;case 11:return e=tb(e.type.render,!1),e;case 1:return e=tb(e.type,!0),e;default:return""}}function Ww(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zu:return"Fragment";case Ju:return"Portal";case Uw:return"Profiler";case mN:return"StrictMode";case zw:return"Suspense";case Hw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case H4:return(e.displayName||"Context")+".Consumer";case z4:return(e._context.displayName||"Context")+".Provider";case pN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gN:return t=e.displayName||null,t!==null?t:Ww(e.type)||"Memo";case Hl:t=e._payload,e=e._init;try{return Ww(e(t))}catch{}}return null}function KL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ww(t);case 8:return t===mN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function V4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GL(e){var t=V4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vg(e){e._valueTracker||(e._valueTracker=GL(e))}function Y4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V4(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function uy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vw(e,t){var r=t.checked;return pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function S_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=wc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K4(e,t){t=t.checked,t!=null&&fN(e,"checked",t,!1)}function Yw(e,t){K4(e,t);var r=wc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Kw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Kw(e,t.type,wc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function P_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Kw(e,t,r){(t!=="number"||uy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gm=Array.isArray;function lh(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+wc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Gw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function k_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ot(92));if(gm(r)){if(1<r.length)throw Error(ot(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:wc(r)}}function G4(e,t){var r=wc(t.value),n=wc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function C_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function J4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?J4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yg,Z4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yg=Yg||document.createElement("div"),Yg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ym(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JL=["Webkit","ms","Moz","O"];Object.keys(jm).forEach(function(e){JL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jm[t]=jm[e]})});function X4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jm.hasOwnProperty(e)&&jm[e]?(""+t).trim():t+"px"}function Q4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=X4(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var ZL=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zw(e,t){if(t){if(ZL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function Xw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=null;function vN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $w=null,ch=null,dh=null;function T_(e){if(e=Mp(e)){if(typeof $w!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=px(t),$w(e.stateNode,e.type,t))}}function $4(e){ch?dh?dh.push(e):dh=[e]:ch=e}function e3(){if(ch){var e=ch,t=dh;if(dh=ch=null,T_(e),t)for(e=0;e<t.length;e++)T_(t[e])}}function t3(e,t){return e(t)}function r3(){}var rb=!1;function n3(e,t,r){if(rb)return e(t,r);rb=!0;try{return t3(e,t,r)}finally{rb=!1,(ch!==null||dh!==null)&&(r3(),e3())}}function Km(e,t){var r=e.stateNode;if(r===null)return null;var n=px(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ot(231,t,typeof r));return r}var e1=!1;if(nl)try{var Gf={};Object.defineProperty(Gf,"passive",{get:function(){e1=!0}}),window.addEventListener("test",Gf,Gf),window.removeEventListener("test",Gf,Gf)}catch{e1=!1}function XL(e,t,r,n,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var _m=!1,hy=null,fy=!1,t1=null,QL={onError:function(e){_m=!0,hy=e}};function $L(e,t,r,n,i,a,o,l,c){_m=!1,hy=null,XL.apply(QL,arguments)}function e7(e,t,r,n,i,a,o,l,c){if($L.apply(this,arguments),_m){if(_m){var d=hy;_m=!1,hy=null}else throw Error(ot(198));fy||(fy=!0,t1=d)}}function cu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function s3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function O_(e){if(cu(e)!==e)throw Error(ot(188))}function t7(e){var t=e.alternate;if(!t){if(t=cu(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return O_(i),e;if(a===n)return O_(i),t;a=a.sibling}throw Error(ot(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(ot(189))}}if(r.alternate!==n)throw Error(ot(190))}if(r.tag!==3)throw Error(ot(188));return r.stateNode.current===r?e:t}function i3(e){return e=t7(e),e!==null?a3(e):null}function a3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=a3(e);if(t!==null)return t;e=e.sibling}return null}var o3=Ei.unstable_scheduleCallback,E_=Ei.unstable_cancelCallback,r7=Ei.unstable_shouldYield,n7=Ei.unstable_requestPaint,En=Ei.unstable_now,s7=Ei.unstable_getCurrentPriorityLevel,yN=Ei.unstable_ImmediatePriority,l3=Ei.unstable_UserBlockingPriority,my=Ei.unstable_NormalPriority,i7=Ei.unstable_LowPriority,c3=Ei.unstable_IdlePriority,ux=null,uo=null;function a7(e){if(uo&&typeof uo.onCommitFiberRoot=="function")try{uo.onCommitFiberRoot(ux,e,void 0,(e.current.flags&128)===128)}catch{}}var Ma=Math.clz32?Math.clz32:c7,o7=Math.log,l7=Math.LN2;function c7(e){return e>>>=0,e===0?32:31-(o7(e)/l7|0)|0}var Kg=64,Gg=4194304;function vm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function py(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=vm(l):(a&=o,a!==0&&(n=vm(a)))}else o=r&~i,o!==0?n=vm(o):a!==0&&(n=vm(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ma(t),i=1<<r,n|=e[r],t&=~i;return n}function d7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u7(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Ma(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=d7(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function r1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function d3(){var e=Kg;return Kg<<=1,!(Kg&4194240)&&(Kg=64),e}function nb(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ap(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ma(t),e[t]=r}function h7(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ma(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function xN(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ma(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Er=0;function u3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var h3,bN,f3,m3,p3,n1=!1,Jg=[],cc=null,dc=null,uc=null,Gm=new Map,Jm=new Map,Yl=[],f7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A_(e,t){switch(e){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":dc=null;break;case"mouseover":case"mouseout":uc=null;break;case"pointerover":case"pointerout":Gm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jm.delete(t.pointerId)}}function Jf(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Mp(t),t!==null&&bN(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function m7(e,t,r,n,i){switch(t){case"focusin":return cc=Jf(cc,e,t,r,n,i),!0;case"dragenter":return dc=Jf(dc,e,t,r,n,i),!0;case"mouseover":return uc=Jf(uc,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Gm.set(a,Jf(Gm.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Jm.set(a,Jf(Jm.get(a)||null,e,t,r,n,i)),!0}return!1}function g3(e){var t=xd(e.target);if(t!==null){var r=cu(t);if(r!==null){if(t=r.tag,t===13){if(t=s3(r),t!==null){e.blockedOn=t,p3(e.priority,function(){f3(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=s1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Qw=n,r.target.dispatchEvent(n),Qw=null}else return t=Mp(r),t!==null&&bN(t),e.blockedOn=r,!1;t.shift()}return!0}function D_(e,t,r){Vv(e)&&r.delete(t)}function p7(){n1=!1,cc!==null&&Vv(cc)&&(cc=null),dc!==null&&Vv(dc)&&(dc=null),uc!==null&&Vv(uc)&&(uc=null),Gm.forEach(D_),Jm.forEach(D_)}function Zf(e,t){e.blockedOn===t&&(e.blockedOn=null,n1||(n1=!0,Ei.unstable_scheduleCallback(Ei.unstable_NormalPriority,p7)))}function Zm(e){function t(i){return Zf(i,e)}if(0<Jg.length){Zf(Jg[0],e);for(var r=1;r<Jg.length;r++){var n=Jg[r];n.blockedOn===e&&(n.blockedOn=null)}}for(cc!==null&&Zf(cc,e),dc!==null&&Zf(dc,e),uc!==null&&Zf(uc,e),Gm.forEach(t),Jm.forEach(t),r=0;r<Yl.length;r++)n=Yl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Yl.length&&(r=Yl[0],r.blockedOn===null);)g3(r),r.blockedOn===null&&Yl.shift()}var uh=hl.ReactCurrentBatchConfig,gy=!0;function g7(e,t,r,n){var i=Er,a=uh.transition;uh.transition=null;try{Er=1,wN(e,t,r,n)}finally{Er=i,uh.transition=a}}function v7(e,t,r,n){var i=Er,a=uh.transition;uh.transition=null;try{Er=4,wN(e,t,r,n)}finally{Er=i,uh.transition=a}}function wN(e,t,r,n){if(gy){var i=s1(e,t,r,n);if(i===null)fb(e,t,n,vy,r),A_(e,n);else if(m7(i,e,t,r,n))n.stopPropagation();else if(A_(e,n),t&4&&-1<f7.indexOf(e)){for(;i!==null;){var a=Mp(i);if(a!==null&&h3(a),a=s1(e,t,r,n),a===null&&fb(e,t,n,vy,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else fb(e,t,n,null,r)}}var vy=null;function s1(e,t,r,n){if(vy=null,e=vN(n),e=xd(e),e!==null)if(t=cu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=s3(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vy=e,null}function v3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s7()){case yN:return 1;case l3:return 4;case my:case i7:return 16;case c3:return 536870912;default:return 16}default:return 16}}var ic=null,NN=null,Yv=null;function y3(){if(Yv)return Yv;var e,t=NN,r=t.length,n,i="value"in ic?ic.value:ic.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return Yv=i.slice(e,1<n?1-n:void 0)}function Kv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zg(){return!0}function M_(){return!1}function Mi(e){function t(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Zg:M_,this.isPropagationStopped=M_,this}return pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zg)},persist:function(){},isPersistent:Zg}),t}var Zh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jN=Mi(Zh),Dp=pn({},Zh,{view:0,detail:0}),y7=Mi(Dp),sb,ib,Xf,hx=pn({},Dp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_N,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xf&&(Xf&&e.type==="mousemove"?(sb=e.screenX-Xf.screenX,ib=e.screenY-Xf.screenY):ib=sb=0,Xf=e),sb)},movementY:function(e){return"movementY"in e?e.movementY:ib}}),R_=Mi(hx),x7=pn({},hx,{dataTransfer:0}),b7=Mi(x7),w7=pn({},Dp,{relatedTarget:0}),ab=Mi(w7),N7=pn({},Zh,{animationName:0,elapsedTime:0,pseudoElement:0}),j7=Mi(N7),_7=pn({},Zh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S7=Mi(_7),P7=pn({},Zh,{data:0}),I_=Mi(P7),k7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=T7[e])?!!t[e]:!1}function _N(){return O7}var E7=pn({},Dp,{key:function(e){if(e.key){var t=k7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_N,charCode:function(e){return e.type==="keypress"?Kv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),A7=Mi(E7),D7=pn({},hx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L_=Mi(D7),M7=pn({},Dp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_N}),R7=Mi(M7),I7=pn({},Zh,{propertyName:0,elapsedTime:0,pseudoElement:0}),L7=Mi(I7),F7=pn({},hx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B7=Mi(F7),q7=[9,13,27,32],SN=nl&&"CompositionEvent"in window,Sm=null;nl&&"documentMode"in document&&(Sm=document.documentMode);var U7=nl&&"TextEvent"in window&&!Sm,x3=nl&&(!SN||Sm&&8<Sm&&11>=Sm),F_=" ",B_=!1;function b3(e,t){switch(e){case"keyup":return q7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xu=!1;function z7(e,t){switch(e){case"compositionend":return w3(t);case"keypress":return t.which!==32?null:(B_=!0,F_);case"textInput":return e=t.data,e===F_&&B_?null:e;default:return null}}function H7(e,t){if(Xu)return e==="compositionend"||!SN&&b3(e,t)?(e=y3(),Yv=NN=ic=null,Xu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return x3&&t.locale!=="ko"?null:t.data;default:return null}}var W7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!W7[e.type]:t==="textarea"}function N3(e,t,r,n){$4(n),t=yy(t,"onChange"),0<t.length&&(r=new jN("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Pm=null,Xm=null;function V7(e){D3(e,0)}function fx(e){var t=eh(e);if(Y4(t))return e}function Y7(e,t){if(e==="change")return t}var j3=!1;if(nl){var ob;if(nl){var lb="oninput"in document;if(!lb){var U_=document.createElement("div");U_.setAttribute("oninput","return;"),lb=typeof U_.oninput=="function"}ob=lb}else ob=!1;j3=ob&&(!document.documentMode||9<document.documentMode)}function z_(){Pm&&(Pm.detachEvent("onpropertychange",_3),Xm=Pm=null)}function _3(e){if(e.propertyName==="value"&&fx(Xm)){var t=[];N3(t,Xm,e,vN(e)),n3(V7,t)}}function K7(e,t,r){e==="focusin"?(z_(),Pm=t,Xm=r,Pm.attachEvent("onpropertychange",_3)):e==="focusout"&&z_()}function G7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fx(Xm)}function J7(e,t){if(e==="click")return fx(t)}function Z7(e,t){if(e==="input"||e==="change")return fx(t)}function X7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var La=typeof Object.is=="function"?Object.is:X7;function Qm(e,t){if(La(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!qw.call(t,i)||!La(e[i],t[i]))return!1}return!0}function H_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function W_(e,t){var r=H_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=H_(r)}}function S3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function P3(){for(var e=window,t=uy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=uy(e.document)}return t}function PN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Q7(e){var t=P3(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&S3(r.ownerDocument.documentElement,r)){if(n!==null&&PN(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=W_(r,a);var o=W_(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $7=nl&&"documentMode"in document&&11>=document.documentMode,Qu=null,i1=null,km=null,a1=!1;function V_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;a1||Qu==null||Qu!==uy(n)||(n=Qu,"selectionStart"in n&&PN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),km&&Qm(km,n)||(km=n,n=yy(i1,"onSelect"),0<n.length&&(t=new jN("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Qu)))}function Xg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var $u={animationend:Xg("Animation","AnimationEnd"),animationiteration:Xg("Animation","AnimationIteration"),animationstart:Xg("Animation","AnimationStart"),transitionend:Xg("Transition","TransitionEnd")},cb={},k3={};nl&&(k3=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function mx(e){if(cb[e])return cb[e];if(!$u[e])return e;var t=$u[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in k3)return cb[e]=t[r];return e}var C3=mx("animationend"),T3=mx("animationiteration"),O3=mx("animationstart"),E3=mx("transitionend"),A3=new Map,Y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kc(e,t){A3.set(e,t),lu(t,[e])}for(var db=0;db<Y_.length;db++){var ub=Y_[db],eF=ub.toLowerCase(),tF=ub[0].toUpperCase()+ub.slice(1);kc(eF,"on"+tF)}kc(C3,"onAnimationEnd");kc(T3,"onAnimationIteration");kc(O3,"onAnimationStart");kc("dblclick","onDoubleClick");kc("focusin","onFocus");kc("focusout","onBlur");kc(E3,"onTransitionEnd");Mh("onMouseEnter",["mouseout","mouseover"]);Mh("onMouseLeave",["mouseout","mouseover"]);Mh("onPointerEnter",["pointerout","pointerover"]);Mh("onPointerLeave",["pointerout","pointerover"]);lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rF=new Set("cancel close invalid load scroll toggle".split(" ").concat(ym));function K_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,e7(n,t,void 0,e),e.currentTarget=null}function D3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;K_(i,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;K_(i,l,d),a=c}}}if(fy)throw e=t1,fy=!1,t1=null,e}function Xr(e,t){var r=t[u1];r===void 0&&(r=t[u1]=new Set);var n=e+"__bubble";r.has(n)||(M3(t,e,2,!1),r.add(n))}function hb(e,t,r){var n=0;t&&(n|=4),M3(r,e,n,t)}var Qg="_reactListening"+Math.random().toString(36).slice(2);function $m(e){if(!e[Qg]){e[Qg]=!0,U4.forEach(function(r){r!=="selectionchange"&&(rF.has(r)||hb(r,!1,e),hb(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qg]||(t[Qg]=!0,hb("selectionchange",!1,t))}}function M3(e,t,r,n){switch(v3(t)){case 1:var i=g7;break;case 4:i=v7;break;default:i=wN}r=i.bind(null,t,r,e),i=void 0,!e1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function fb(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=xd(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}n3(function(){var d=a,u=vN(r),h=[];e:{var m=A3.get(e);if(m!==void 0){var f=jN,g=e;switch(e){case"keypress":if(Kv(r)===0)break e;case"keydown":case"keyup":f=A7;break;case"focusin":g="focus",f=ab;break;case"focusout":g="blur",f=ab;break;case"beforeblur":case"afterblur":f=ab;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=R_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=b7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=R7;break;case C3:case T3:case O3:f=j7;break;case E3:f=L7;break;case"scroll":f=y7;break;case"wheel":f=B7;break;case"copy":case"cut":case"paste":f=S7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=L_}var y=(t&4)!==0,x=!y&&e==="scroll",p=y?m!==null?m+"Capture":null:m;y=[];for(var v=d,b;v!==null;){b=v;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,p!==null&&(j=Km(v,p),j!=null&&y.push(ep(v,j,b)))),x)break;v=v.return}0<y.length&&(m=new f(m,g,null,r,u),h.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&r!==Qw&&(g=r.relatedTarget||r.fromElement)&&(xd(g)||g[sl]))break e;if((f||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=d,g=g?xd(g):null,g!==null&&(x=cu(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=d),f!==g)){if(y=R_,j="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=L_,j="onPointerLeave",p="onPointerEnter",v="pointer"),x=f==null?m:eh(f),b=g==null?m:eh(g),m=new y(j,v+"leave",f,r,u),m.target=x,m.relatedTarget=b,j=null,xd(u)===d&&(y=new y(p,v+"enter",g,r,u),y.target=b,y.relatedTarget=x,j=y),x=j,f&&g)t:{for(y=f,p=g,v=0,b=y;b;b=Eu(b))v++;for(b=0,j=p;j;j=Eu(j))b++;for(;0<v-b;)y=Eu(y),v--;for(;0<b-v;)p=Eu(p),b--;for(;v--;){if(y===p||p!==null&&y===p.alternate)break t;y=Eu(y),p=Eu(p)}y=null}else y=null;f!==null&&G_(h,m,f,y,!1),g!==null&&x!==null&&G_(h,x,g,y,!0)}}e:{if(m=d?eh(d):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var S=Y7;else if(q_(m))if(j3)S=Z7;else{S=G7;var P=K7}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=J7);if(S&&(S=S(e,d))){N3(h,S,r,u);break e}P&&P(e,m,d),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&Kw(m,"number",m.value)}switch(P=d?eh(d):window,e){case"focusin":(q_(P)||P.contentEditable==="true")&&(Qu=P,i1=d,km=null);break;case"focusout":km=i1=Qu=null;break;case"mousedown":a1=!0;break;case"contextmenu":case"mouseup":case"dragend":a1=!1,V_(h,r,u);break;case"selectionchange":if($7)break;case"keydown":case"keyup":V_(h,r,u)}var M;if(SN)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Xu?b3(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(x3&&r.locale!=="ko"&&(Xu||I!=="onCompositionStart"?I==="onCompositionEnd"&&Xu&&(M=y3()):(ic=u,NN="value"in ic?ic.value:ic.textContent,Xu=!0)),P=yy(d,I),0<P.length&&(I=new I_(I,e,null,r,u),h.push({event:I,listeners:P}),M?I.data=M:(M=w3(r),M!==null&&(I.data=M)))),(M=U7?z7(e,r):H7(e,r))&&(d=yy(d,"onBeforeInput"),0<d.length&&(u=new I_("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=M))}D3(h,t)})}function ep(e,t,r){return{instance:e,listener:t,currentTarget:r}}function yy(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Km(e,r),a!=null&&n.unshift(ep(e,a,i)),a=Km(e,t),a!=null&&n.push(ep(e,a,i))),e=e.return}return n}function Eu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function G_(e,t,r,n,i){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,i?(c=Km(r,a),c!=null&&o.unshift(ep(r,c,l))):i||(c=Km(r,a),c!=null&&o.push(ep(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var nF=/\r\n?/g,sF=/\u0000|\uFFFD/g;function J_(e){return(typeof e=="string"?e:""+e).replace(nF,`
`).replace(sF,"")}function $g(e,t,r){if(t=J_(t),J_(e)!==t&&r)throw Error(ot(425))}function xy(){}var o1=null,l1=null;function c1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var d1=typeof setTimeout=="function"?setTimeout:void 0,iF=typeof clearTimeout=="function"?clearTimeout:void 0,Z_=typeof Promise=="function"?Promise:void 0,aF=typeof queueMicrotask=="function"?queueMicrotask:typeof Z_<"u"?function(e){return Z_.resolve(null).then(e).catch(oF)}:d1;function oF(e){setTimeout(function(){throw e})}function mb(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Zm(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Zm(t)}function hc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function X_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Xh=Math.random().toString(36).slice(2),io="__reactFiber$"+Xh,tp="__reactProps$"+Xh,sl="__reactContainer$"+Xh,u1="__reactEvents$"+Xh,lF="__reactListeners$"+Xh,cF="__reactHandles$"+Xh;function xd(e){var t=e[io];if(t)return t;for(var r=e.parentNode;r;){if(t=r[sl]||r[io]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=X_(e);e!==null;){if(r=e[io])return r;e=X_(e)}return t}e=r,r=e.parentNode}return null}function Mp(e){return e=e[io]||e[sl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function px(e){return e[tp]||null}var h1=[],th=-1;function Cc(e){return{current:e}}function $r(e){0>th||(e.current=h1[th],h1[th]=null,th--)}function Wr(e,t){th++,h1[th]=e.current,e.current=t}var Nc={},Rs=Cc(Nc),si=Cc(!1),Vd=Nc;function Rh(e,t){var r=e.type.contextTypes;if(!r)return Nc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ii(e){return e=e.childContextTypes,e!=null}function by(){$r(si),$r(Rs)}function Q_(e,t,r){if(Rs.current!==Nc)throw Error(ot(168));Wr(Rs,t),Wr(si,r)}function R3(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ot(108,KL(e)||"Unknown",i));return pn({},r,n)}function wy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nc,Vd=Rs.current,Wr(Rs,e),Wr(si,si.current),!0}function $_(e,t,r){var n=e.stateNode;if(!n)throw Error(ot(169));r?(e=R3(e,t,Vd),n.__reactInternalMemoizedMergedChildContext=e,$r(si),$r(Rs),Wr(Rs,e)):$r(si),Wr(si,r)}var Wo=null,gx=!1,pb=!1;function I3(e){Wo===null?Wo=[e]:Wo.push(e)}function dF(e){gx=!0,I3(e)}function Tc(){if(!pb&&Wo!==null){pb=!0;var e=0,t=Er;try{var r=Wo;for(Er=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Wo=null,gx=!1}catch(i){throw Wo!==null&&(Wo=Wo.slice(e+1)),o3(yN,Tc),i}finally{Er=t,pb=!1}}return null}var rh=[],nh=0,Ny=null,jy=0,Ji=[],Zi=0,Yd=null,Zo=1,Xo="";function od(e,t){rh[nh++]=jy,rh[nh++]=Ny,Ny=e,jy=t}function L3(e,t,r){Ji[Zi++]=Zo,Ji[Zi++]=Xo,Ji[Zi++]=Yd,Yd=e;var n=Zo;e=Xo;var i=32-Ma(n)-1;n&=~(1<<i),r+=1;var a=32-Ma(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Zo=1<<32-Ma(t)+i|r<<i|n,Xo=a+e}else Zo=1<<a|r<<i|n,Xo=e}function kN(e){e.return!==null&&(od(e,1),L3(e,1,0))}function CN(e){for(;e===Ny;)Ny=rh[--nh],rh[nh]=null,jy=rh[--nh],rh[nh]=null;for(;e===Yd;)Yd=Ji[--Zi],Ji[Zi]=null,Xo=Ji[--Zi],Ji[Zi]=null,Zo=Ji[--Zi],Ji[Zi]=null}var Pi=null,_i=null,an=!1,Ea=null;function F3(e,t){var r=ea(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pi=e,_i=hc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pi=e,_i=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yd!==null?{id:Zo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ea(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pi=e,_i=null,!0):!1;default:return!1}}function f1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function m1(e){if(an){var t=_i;if(t){var r=t;if(!eS(e,t)){if(f1(e))throw Error(ot(418));t=hc(r.nextSibling);var n=Pi;t&&eS(e,t)?F3(n,r):(e.flags=e.flags&-4097|2,an=!1,Pi=e)}}else{if(f1(e))throw Error(ot(418));e.flags=e.flags&-4097|2,an=!1,Pi=e}}}function tS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pi=e}function ev(e){if(e!==Pi)return!1;if(!an)return tS(e),an=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c1(e.type,e.memoizedProps)),t&&(t=_i)){if(f1(e))throw B3(),Error(ot(418));for(;t;)F3(e,t),t=hc(t.nextSibling)}if(tS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){_i=hc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}_i=null}}else _i=Pi?hc(e.stateNode.nextSibling):null;return!0}function B3(){for(var e=_i;e;)e=hc(e.nextSibling)}function Ih(){_i=Pi=null,an=!1}function TN(e){Ea===null?Ea=[e]:Ea.push(e)}var uF=hl.ReactCurrentBatchConfig;function Qf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ot(309));var n=r.stateNode}if(!n)throw Error(ot(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ot(284));if(!r._owner)throw Error(ot(290,e))}return e}function tv(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rS(e){var t=e._init;return t(e._payload)}function q3(e){function t(p,v){if(e){var b=p.deletions;b===null?(p.deletions=[v],p.flags|=16):b.push(v)}}function r(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=gc(p,v),p.index=0,p.sibling=null,p}function a(p,v,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<v?(p.flags|=2,v):b):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,v,b,j){return v===null||v.tag!==6?(v=Nb(b,p.mode,j),v.return=p,v):(v=i(v,b),v.return=p,v)}function c(p,v,b,j){var S=b.type;return S===Zu?u(p,v,b.props.children,j,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Hl&&rS(S)===v.type)?(j=i(v,b.props),j.ref=Qf(p,v,b),j.return=p,j):(j=ey(b.type,b.key,b.props,null,p.mode,j),j.ref=Qf(p,v,b),j.return=p,j)}function d(p,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=jb(b,p.mode,j),v.return=p,v):(v=i(v,b.children||[]),v.return=p,v)}function u(p,v,b,j,S){return v===null||v.tag!==7?(v=Id(b,p.mode,j,S),v.return=p,v):(v=i(v,b),v.return=p,v)}function h(p,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Nb(""+v,p.mode,b),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wg:return b=ey(v.type,v.key,v.props,null,p.mode,b),b.ref=Qf(p,null,v),b.return=p,b;case Ju:return v=jb(v,p.mode,b),v.return=p,v;case Hl:var j=v._init;return h(p,j(v._payload),b)}if(gm(v)||Kf(v))return v=Id(v,p.mode,b,null),v.return=p,v;tv(p,v)}return null}function m(p,v,b,j){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(p,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wg:return b.key===S?c(p,v,b,j):null;case Ju:return b.key===S?d(p,v,b,j):null;case Hl:return S=b._init,m(p,v,S(b._payload),j)}if(gm(b)||Kf(b))return S!==null?null:u(p,v,b,j,null);tv(p,b)}return null}function f(p,v,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(b)||null,l(v,p,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Wg:return p=p.get(j.key===null?b:j.key)||null,c(v,p,j,S);case Ju:return p=p.get(j.key===null?b:j.key)||null,d(v,p,j,S);case Hl:var P=j._init;return f(p,v,b,P(j._payload),S)}if(gm(j)||Kf(j))return p=p.get(b)||null,u(v,p,j,S,null);tv(v,j)}return null}function g(p,v,b,j){for(var S=null,P=null,M=v,I=v=0,O=null;M!==null&&I<b.length;I++){M.index>I?(O=M,M=null):O=M.sibling;var L=m(p,M,b[I],j);if(L===null){M===null&&(M=O);break}e&&M&&L.alternate===null&&t(p,M),v=a(L,v,I),P===null?S=L:P.sibling=L,P=L,M=O}if(I===b.length)return r(p,M),an&&od(p,I),S;if(M===null){for(;I<b.length;I++)M=h(p,b[I],j),M!==null&&(v=a(M,v,I),P===null?S=M:P.sibling=M,P=M);return an&&od(p,I),S}for(M=n(p,M);I<b.length;I++)O=f(M,p,I,b[I],j),O!==null&&(e&&O.alternate!==null&&M.delete(O.key===null?I:O.key),v=a(O,v,I),P===null?S=O:P.sibling=O,P=O);return e&&M.forEach(function(T){return t(p,T)}),an&&od(p,I),S}function y(p,v,b,j){var S=Kf(b);if(typeof S!="function")throw Error(ot(150));if(b=S.call(b),b==null)throw Error(ot(151));for(var P=S=null,M=v,I=v=0,O=null,L=b.next();M!==null&&!L.done;I++,L=b.next()){M.index>I?(O=M,M=null):O=M.sibling;var T=m(p,M,L.value,j);if(T===null){M===null&&(M=O);break}e&&M&&T.alternate===null&&t(p,M),v=a(T,v,I),P===null?S=T:P.sibling=T,P=T,M=O}if(L.done)return r(p,M),an&&od(p,I),S;if(M===null){for(;!L.done;I++,L=b.next())L=h(p,L.value,j),L!==null&&(v=a(L,v,I),P===null?S=L:P.sibling=L,P=L);return an&&od(p,I),S}for(M=n(p,M);!L.done;I++,L=b.next())L=f(M,p,I,L.value,j),L!==null&&(e&&L.alternate!==null&&M.delete(L.key===null?I:L.key),v=a(L,v,I),P===null?S=L:P.sibling=L,P=L);return e&&M.forEach(function(k){return t(p,k)}),an&&od(p,I),S}function x(p,v,b,j){if(typeof b=="object"&&b!==null&&b.type===Zu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Wg:e:{for(var S=b.key,P=v;P!==null;){if(P.key===S){if(S=b.type,S===Zu){if(P.tag===7){r(p,P.sibling),v=i(P,b.props.children),v.return=p,p=v;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Hl&&rS(S)===P.type){r(p,P.sibling),v=i(P,b.props),v.ref=Qf(p,P,b),v.return=p,p=v;break e}r(p,P);break}else t(p,P);P=P.sibling}b.type===Zu?(v=Id(b.props.children,p.mode,j,b.key),v.return=p,p=v):(j=ey(b.type,b.key,b.props,null,p.mode,j),j.ref=Qf(p,v,b),j.return=p,p=j)}return o(p);case Ju:e:{for(P=b.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(p,v.sibling),v=i(v,b.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else t(p,v);v=v.sibling}v=jb(b,p.mode,j),v.return=p,p=v}return o(p);case Hl:return P=b._init,x(p,v,P(b._payload),j)}if(gm(b))return g(p,v,b,j);if(Kf(b))return y(p,v,b,j);tv(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(p,v.sibling),v=i(v,b),v.return=p,p=v):(r(p,v),v=Nb(b,p.mode,j),v.return=p,p=v),o(p)):r(p,v)}return x}var Lh=q3(!0),U3=q3(!1),_y=Cc(null),Sy=null,sh=null,ON=null;function EN(){ON=sh=Sy=null}function AN(e){var t=_y.current;$r(_y),e._currentValue=t}function p1(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function hh(e,t){Sy=e,ON=sh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ri=!0),e.firstContext=null)}function aa(e){var t=e._currentValue;if(ON!==e)if(e={context:e,memoizedValue:t,next:null},sh===null){if(Sy===null)throw Error(ot(308));sh=e,Sy.dependencies={lanes:0,firstContext:e}}else sh=sh.next=e;return t}var bd=null;function DN(e){bd===null?bd=[e]:bd.push(e)}function z3(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,DN(t)):(r.next=i.next,i.next=r),t.interleaved=r,il(e,n)}function il(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Wl=!1;function MN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,br&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,il(e,r)}return i=n.interleaved,i===null?(t.next=t,DN(n)):(t.next=i.next,i.next=t),n.interleaved=t,il(e,r)}function Gv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xN(e,r)}}function nS(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Py(e,t,r,n){var i=e.updateQueue;Wl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,u=d=c=null,l=a;do{var m=l.lane,f=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(m=t,f=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(f,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,m=typeof g=="function"?g.call(f,h,m):g,m==null)break e;h=pn({},h,m);break e;case 2:Wl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Gd|=o,e.lanes=o,e.memoizedState=h}}function sS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ot(191,i));i.call(n)}}}var Rp={},ho=Cc(Rp),rp=Cc(Rp),np=Cc(Rp);function wd(e){if(e===Rp)throw Error(ot(174));return e}function RN(e,t){switch(Wr(np,t),Wr(rp,e),Wr(ho,Rp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jw(t,e)}$r(ho),Wr(ho,t)}function Fh(){$r(ho),$r(rp),$r(np)}function W3(e){wd(np.current);var t=wd(ho.current),r=Jw(t,e.type);t!==r&&(Wr(rp,e),Wr(ho,r))}function IN(e){rp.current===e&&($r(ho),$r(rp))}var hn=Cc(0);function ky(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gb=[];function LN(){for(var e=0;e<gb.length;e++)gb[e]._workInProgressVersionPrimary=null;gb.length=0}var Jv=hl.ReactCurrentDispatcher,vb=hl.ReactCurrentBatchConfig,Kd=0,mn=null,Xn=null,ss=null,Cy=!1,Cm=!1,sp=0,hF=0;function js(){throw Error(ot(321))}function FN(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!La(e[r],t[r]))return!1;return!0}function BN(e,t,r,n,i,a){if(Kd=a,mn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jv.current=e===null||e.memoizedState===null?gF:vF,e=r(n,i),Cm){a=0;do{if(Cm=!1,sp=0,25<=a)throw Error(ot(301));a+=1,ss=Xn=null,t.updateQueue=null,Jv.current=yF,e=r(n,i)}while(Cm)}if(Jv.current=Ty,t=Xn!==null&&Xn.next!==null,Kd=0,ss=Xn=mn=null,Cy=!1,t)throw Error(ot(300));return e}function qN(){var e=sp!==0;return sp=0,e}function to(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?mn.memoizedState=ss=e:ss=ss.next=e,ss}function oa(){if(Xn===null){var e=mn.alternate;e=e!==null?e.memoizedState:null}else e=Xn.next;var t=ss===null?mn.memoizedState:ss.next;if(t!==null)ss=t,Xn=e;else{if(e===null)throw Error(ot(310));Xn=e,e={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},ss===null?mn.memoizedState=ss=e:ss=ss.next=e}return ss}function ip(e,t){return typeof t=="function"?t(e):t}function yb(e){var t=oa(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var n=Xn,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((Kd&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,mn.lanes|=u,Gd|=u}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,La(n,t.memoizedState)||(ri=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,mn.lanes|=a,Gd|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xb(e){var t=oa(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);La(a,t.memoizedState)||(ri=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function V3(){}function Y3(e,t){var r=mn,n=oa(),i=t(),a=!La(n.memoizedState,i);if(a&&(n.memoizedState=i,ri=!0),n=n.queue,UN(J3.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ss!==null&&ss.memoizedState.tag&1){if(r.flags|=2048,ap(9,G3.bind(null,r,n,i,t),void 0,null),is===null)throw Error(ot(349));Kd&30||K3(r,t,i)}return i}function K3(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function G3(e,t,r,n){t.value=r,t.getSnapshot=n,Z3(t)&&X3(e)}function J3(e,t,r){return r(function(){Z3(t)&&X3(e)})}function Z3(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!La(e,r)}catch{return!0}}function X3(e){var t=il(e,1);t!==null&&Ra(t,e,1,-1)}function iS(e){var t=to();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:e},t.queue=e,e=e.dispatch=pF.bind(null,mn,e),[t.memoizedState,e]}function ap(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Q3(){return oa().memoizedState}function Zv(e,t,r,n){var i=to();mn.flags|=e,i.memoizedState=ap(1|t,r,void 0,n===void 0?null:n)}function vx(e,t,r,n){var i=oa();n=n===void 0?null:n;var a=void 0;if(Xn!==null){var o=Xn.memoizedState;if(a=o.destroy,n!==null&&FN(n,o.deps)){i.memoizedState=ap(t,r,a,n);return}}mn.flags|=e,i.memoizedState=ap(1|t,r,a,n)}function aS(e,t){return Zv(8390656,8,e,t)}function UN(e,t){return vx(2048,8,e,t)}function $3(e,t){return vx(4,2,e,t)}function eT(e,t){return vx(4,4,e,t)}function tT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rT(e,t,r){return r=r!=null?r.concat([e]):null,vx(4,4,tT.bind(null,t,e),r)}function zN(){}function nT(e,t){var r=oa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FN(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function sT(e,t){var r=oa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FN(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function iT(e,t,r){return Kd&21?(La(r,t)||(r=d3(),mn.lanes|=r,Gd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ri=!0),e.memoizedState=r)}function fF(e,t){var r=Er;Er=r!==0&&4>r?r:4,e(!0);var n=vb.transition;vb.transition={};try{e(!1),t()}finally{Er=r,vb.transition=n}}function aT(){return oa().memoizedState}function mF(e,t,r){var n=pc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},oT(e))lT(t,r);else if(r=z3(e,t,r,n),r!==null){var i=Vs();Ra(r,e,n,i),cT(r,t,n)}}function pF(e,t,r){var n=pc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(oT(e))lT(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,La(l,o)){var c=t.interleaved;c===null?(i.next=i,DN(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=z3(e,t,i,n),r!==null&&(i=Vs(),Ra(r,e,n,i),cT(r,t,n))}}function oT(e){var t=e.alternate;return e===mn||t!==null&&t===mn}function lT(e,t){Cm=Cy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function cT(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xN(e,r)}}var Ty={readContext:aa,useCallback:js,useContext:js,useEffect:js,useImperativeHandle:js,useInsertionEffect:js,useLayoutEffect:js,useMemo:js,useReducer:js,useRef:js,useState:js,useDebugValue:js,useDeferredValue:js,useTransition:js,useMutableSource:js,useSyncExternalStore:js,useId:js,unstable_isNewReconciler:!1},gF={readContext:aa,useCallback:function(e,t){return to().memoizedState=[e,t===void 0?null:t],e},useContext:aa,useEffect:aS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zv(4194308,4,tT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zv(4,2,e,t)},useMemo:function(e,t){var r=to();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=to();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=mF.bind(null,mn,e),[n.memoizedState,e]},useRef:function(e){var t=to();return e={current:e},t.memoizedState=e},useState:iS,useDebugValue:zN,useDeferredValue:function(e){return to().memoizedState=e},useTransition:function(){var e=iS(!1),t=e[0];return e=fF.bind(null,e[1]),to().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mn,i=to();if(an){if(r===void 0)throw Error(ot(407));r=r()}else{if(r=t(),is===null)throw Error(ot(349));Kd&30||K3(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,aS(J3.bind(null,n,a,e),[e]),n.flags|=2048,ap(9,G3.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=to(),t=is.identifierPrefix;if(an){var r=Xo,n=Zo;r=(n&~(1<<32-Ma(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=sp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=hF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vF={readContext:aa,useCallback:nT,useContext:aa,useEffect:UN,useImperativeHandle:rT,useInsertionEffect:$3,useLayoutEffect:eT,useMemo:sT,useReducer:yb,useRef:Q3,useState:function(){return yb(ip)},useDebugValue:zN,useDeferredValue:function(e){var t=oa();return iT(t,Xn.memoizedState,e)},useTransition:function(){var e=yb(ip)[0],t=oa().memoizedState;return[e,t]},useMutableSource:V3,useSyncExternalStore:Y3,useId:aT,unstable_isNewReconciler:!1},yF={readContext:aa,useCallback:nT,useContext:aa,useEffect:UN,useImperativeHandle:rT,useInsertionEffect:$3,useLayoutEffect:eT,useMemo:sT,useReducer:xb,useRef:Q3,useState:function(){return xb(ip)},useDebugValue:zN,useDeferredValue:function(e){var t=oa();return Xn===null?t.memoizedState=e:iT(t,Xn.memoizedState,e)},useTransition:function(){var e=xb(ip)[0],t=oa().memoizedState;return[e,t]},useMutableSource:V3,useSyncExternalStore:Y3,useId:aT,unstable_isNewReconciler:!1};function Pa(e,t){if(e&&e.defaultProps){t=pn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function g1(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yx={isMounted:function(e){return(e=e._reactInternals)?cu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Vs(),i=pc(e),a=el(n,i);a.payload=t,r!=null&&(a.callback=r),t=fc(e,a,i),t!==null&&(Ra(t,e,i,n),Gv(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Vs(),i=pc(e),a=el(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=fc(e,a,i),t!==null&&(Ra(t,e,i,n),Gv(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Vs(),n=pc(e),i=el(r,n);i.tag=2,t!=null&&(i.callback=t),t=fc(e,i,n),t!==null&&(Ra(t,e,n,r),Gv(t,e,n))}};function oS(e,t,r,n,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Qm(r,n)||!Qm(i,a):!0}function dT(e,t,r){var n=!1,i=Nc,a=t.contextType;return typeof a=="object"&&a!==null?a=aa(a):(i=ii(t)?Vd:Rs.current,n=t.contextTypes,a=(n=n!=null)?Rh(e,i):Nc),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yx,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function lS(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&yx.enqueueReplaceState(t,t.state,null)}function v1(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},MN(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=aa(a):(a=ii(t)?Vd:Rs.current,i.context=Rh(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(g1(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&yx.enqueueReplaceState(i,i.state,null),Py(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bh(e,t){try{var r="",n=t;do r+=YL(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function bb(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function y1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xF=typeof WeakMap=="function"?WeakMap:Map;function uT(e,t,r){r=el(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ey||(Ey=!0,C1=n),y1(e,t)},r}function hT(e,t,r){r=el(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){y1(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){y1(e,t),typeof n!="function"&&(mc===null?mc=new Set([this]):mc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function cS(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new xF;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=DF.bind(null,e,t,r),t.then(e,e))}function dS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uS(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=el(-1,1),t.tag=2,fc(r,t,1))),r.lanes|=1),e)}var bF=hl.ReactCurrentOwner,ri=!1;function zs(e,t,r,n){t.child=e===null?U3(t,null,r,n):Lh(t,e.child,r,n)}function hS(e,t,r,n,i){r=r.render;var a=t.ref;return hh(t,i),n=BN(e,t,r,n,a,i),r=qN(),e!==null&&!ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,al(e,t,i)):(an&&r&&kN(t),t.flags|=1,zs(e,t,n,i),t.child)}function fS(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!ZN(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,fT(e,t,a,n,i)):(e=ey(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Qm,r(o,n)&&e.ref===t.ref)return al(e,t,i)}return t.flags|=1,e=gc(a,n),e.ref=t.ref,e.return=t,t.child=e}function fT(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Qm(a,n)&&e.ref===t.ref)if(ri=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(ri=!0);else return t.lanes=e.lanes,al(e,t,i)}return x1(e,t,r,n,i)}function mT(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wr(ah,yi),yi|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Wr(ah,yi),yi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Wr(ah,yi),yi|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Wr(ah,yi),yi|=n;return zs(e,t,i,r),t.child}function pT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function x1(e,t,r,n,i){var a=ii(r)?Vd:Rs.current;return a=Rh(t,a),hh(t,i),r=BN(e,t,r,n,a,i),n=qN(),e!==null&&!ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,al(e,t,i)):(an&&n&&kN(t),t.flags|=1,zs(e,t,r,i),t.child)}function mS(e,t,r,n,i){if(ii(r)){var a=!0;wy(t)}else a=!1;if(hh(t,i),t.stateNode===null)Xv(e,t),dT(t,r,n),v1(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=aa(d):(d=ii(r)?Vd:Rs.current,d=Rh(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&lS(t,o,n,d),Wl=!1;var m=t.memoizedState;o.state=m,Py(t,n,o,i),c=t.memoizedState,l!==n||m!==c||si.current||Wl?(typeof u=="function"&&(g1(t,r,u,n),c=t.memoizedState),(l=Wl||oS(t,r,l,n,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,H3(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Pa(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=aa(c):(c=ii(r)?Vd:Rs.current,c=Rh(t,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&lS(t,o,n,c),Wl=!1,m=t.memoizedState,o.state=m,Py(t,n,o,i);var g=t.memoizedState;l!==h||m!==g||si.current||Wl?(typeof f=="function"&&(g1(t,r,f,n),g=t.memoizedState),(d=Wl||oS(t,r,d,n,m,g,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return b1(e,t,r,n,a,i)}function b1(e,t,r,n,i,a){pT(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&$_(t,r,!1),al(e,t,a);n=t.stateNode,bF.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Lh(t,e.child,null,a),t.child=Lh(t,null,l,a)):zs(e,t,l,a),t.memoizedState=n.state,i&&$_(t,r,!0),t.child}function gT(e){var t=e.stateNode;t.pendingContext?Q_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Q_(e,t.context,!1),RN(e,t.containerInfo)}function pS(e,t,r,n,i){return Ih(),TN(i),t.flags|=256,zs(e,t,r,n),t.child}var w1={dehydrated:null,treeContext:null,retryLane:0};function N1(e){return{baseLanes:e,cachePool:null,transitions:null}}function vT(e,t,r){var n=t.pendingProps,i=hn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Wr(hn,i&1),e===null)return m1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=wx(o,n,0,null),e=Id(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=N1(r),t.memoizedState=w1,e):HN(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return wF(e,t,o,n,l,i,r);if(a){a=n.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=gc(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=gc(l,a):(a=Id(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?N1(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=w1,n}return a=e.child,e=a.sibling,n=gc(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function HN(e,t){return t=wx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rv(e,t,r,n){return n!==null&&TN(n),Lh(t,e.child,null,r),e=HN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wF(e,t,r,n,i,a,o){if(r)return t.flags&256?(t.flags&=-257,n=bb(Error(ot(422))),rv(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=wx({mode:"visible",children:n.children},i,0,null),a=Id(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Lh(t,e.child,null,o),t.child.memoizedState=N1(o),t.memoizedState=w1,a);if(!(t.mode&1))return rv(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ot(419)),n=bb(a,n,void 0),rv(e,t,o,n)}if(l=(o&e.childLanes)!==0,ri||l){if(n=is,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,il(e,i),Ra(n,e,i,-1))}return JN(),n=bb(Error(ot(421))),rv(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=MF.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,_i=hc(i.nextSibling),Pi=t,an=!0,Ea=null,e!==null&&(Ji[Zi++]=Zo,Ji[Zi++]=Xo,Ji[Zi++]=Yd,Zo=e.id,Xo=e.overflow,Yd=t),t=HN(t,n.children),t.flags|=4096,t)}function gS(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),p1(e.return,t,r)}function wb(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function yT(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(zs(e,t,n.children,r),n=hn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gS(e,r,t);else if(e.tag===19)gS(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Wr(hn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&ky(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),wb(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ky(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}wb(t,!0,r,null,a);break;case"together":wb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function al(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Gd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,r=gc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=gc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NF(e,t,r){switch(t.tag){case 3:gT(t),Ih();break;case 5:W3(t);break;case 1:ii(t.type)&&wy(t);break;case 4:RN(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Wr(_y,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Wr(hn,hn.current&1),t.flags|=128,null):r&t.child.childLanes?vT(e,t,r):(Wr(hn,hn.current&1),e=al(e,t,r),e!==null?e.sibling:null);Wr(hn,hn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return yT(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Wr(hn,hn.current),n)break;return null;case 22:case 23:return t.lanes=0,mT(e,t,r)}return al(e,t,r)}var xT,j1,bT,wT;xT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};j1=function(){};bT=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,wd(ho.current);var a=null;switch(r){case"input":i=Vw(e,i),n=Vw(e,n),a=[];break;case"select":i=pn({},i,{value:void 0}),n=pn({},n,{value:void 0}),a=[];break;case"textarea":i=Gw(e,i),n=Gw(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=xy)}Zw(r,n);var o;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vm.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vm.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};wT=function(e,t,r,n){r!==n&&(t.flags|=4)};function $f(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function _s(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function jF(e,t,r){var n=t.pendingProps;switch(CN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(t),null;case 1:return ii(t.type)&&by(),_s(t),null;case 3:return n=t.stateNode,Fh(),$r(si),$r(Rs),LN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ev(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ea!==null&&(E1(Ea),Ea=null))),j1(e,t),_s(t),null;case 5:IN(t);var i=wd(np.current);if(r=t.type,e!==null&&t.stateNode!=null)bT(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ot(166));return _s(t),null}if(e=wd(ho.current),ev(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[io]=t,n[tp]=a,e=(t.mode&1)!==0,r){case"dialog":Xr("cancel",n),Xr("close",n);break;case"iframe":case"object":case"embed":Xr("load",n);break;case"video":case"audio":for(i=0;i<ym.length;i++)Xr(ym[i],n);break;case"source":Xr("error",n);break;case"img":case"image":case"link":Xr("error",n),Xr("load",n);break;case"details":Xr("toggle",n);break;case"input":S_(n,a),Xr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Xr("invalid",n);break;case"textarea":k_(n,a),Xr("invalid",n)}Zw(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&$g(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&$g(n.textContent,l,e),i=["children",""+l]):Vm.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Xr("scroll",n)}switch(r){case"input":Vg(n),P_(n,a,!0);break;case"textarea":Vg(n),C_(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=xy)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=J4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[io]=t,e[tp]=n,xT(e,t,!1,!1),t.stateNode=e;e:{switch(o=Xw(r,n),r){case"dialog":Xr("cancel",e),Xr("close",e),i=n;break;case"iframe":case"object":case"embed":Xr("load",e),i=n;break;case"video":case"audio":for(i=0;i<ym.length;i++)Xr(ym[i],e);i=n;break;case"source":Xr("error",e),i=n;break;case"img":case"image":case"link":Xr("error",e),Xr("load",e),i=n;break;case"details":Xr("toggle",e),i=n;break;case"input":S_(e,n),i=Vw(e,n),Xr("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=pn({},n,{value:void 0}),Xr("invalid",e);break;case"textarea":k_(e,n),i=Gw(e,n),Xr("invalid",e);break;default:i=n}Zw(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Q4(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Z4(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ym(e,c):typeof c=="number"&&Ym(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Vm.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Xr("scroll",e):c!=null&&fN(e,a,c,o))}switch(r){case"input":Vg(e),P_(e,n,!1);break;case"textarea":Vg(e),C_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+wc(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?lh(e,!!n.multiple,a,!1):n.defaultValue!=null&&lh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=xy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _s(t),null;case 6:if(e&&t.stateNode!=null)wT(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ot(166));if(r=wd(np.current),wd(ho.current),ev(t)){if(n=t.stateNode,r=t.memoizedProps,n[io]=t,(a=n.nodeValue!==r)&&(e=Pi,e!==null))switch(e.tag){case 3:$g(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$g(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[io]=t,t.stateNode=n}return _s(t),null;case 13:if($r(hn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(an&&_i!==null&&t.mode&1&&!(t.flags&128))B3(),Ih(),t.flags|=98560,a=!1;else if(a=ev(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ot(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ot(317));a[io]=t}else Ih(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_s(t),a=!1}else Ea!==null&&(E1(Ea),Ea=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||hn.current&1?ts===0&&(ts=3):JN())),t.updateQueue!==null&&(t.flags|=4),_s(t),null);case 4:return Fh(),j1(e,t),e===null&&$m(t.stateNode.containerInfo),_s(t),null;case 10:return AN(t.type._context),_s(t),null;case 17:return ii(t.type)&&by(),_s(t),null;case 19:if($r(hn),a=t.memoizedState,a===null)return _s(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)$f(a,!1);else{if(ts!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ky(e),o!==null){for(t.flags|=128,$f(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Wr(hn,hn.current&1|2),t.child}e=e.sibling}a.tail!==null&&En()>qh&&(t.flags|=128,n=!0,$f(a,!1),t.lanes=4194304)}else{if(!n)if(e=ky(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$f(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!an)return _s(t),null}else 2*En()-a.renderingStartTime>qh&&r!==1073741824&&(t.flags|=128,n=!0,$f(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=En(),t.sibling=null,r=hn.current,Wr(hn,n?r&1|2:r&1),t):(_s(t),null);case 22:case 23:return GN(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?yi&1073741824&&(_s(t),t.subtreeFlags&6&&(t.flags|=8192)):_s(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function _F(e,t){switch(CN(t),t.tag){case 1:return ii(t.type)&&by(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fh(),$r(si),$r(Rs),LN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return IN(t),null;case 13:if($r(hn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));Ih()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $r(hn),null;case 4:return Fh(),null;case 10:return AN(t.type._context),null;case 22:case 23:return GN(),null;case 24:return null;default:return null}}var nv=!1,As=!1,SF=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function ih(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Nn(e,t,n)}else r.current=null}function _1(e,t,r){try{r()}catch(n){Nn(e,t,n)}}var vS=!1;function PF(e,t){if(o1=gy,e=P3(),PN(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==r||i!==0&&h.nodeType!==3||(l=o+i),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===r&&++d===i&&(l=o),m===a&&++u===n&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(l1={focusedElem:e,selectionRange:r},gy=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){t=Nt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:Pa(t.type,y),x);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(j){Nn(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}return g=vS,vS=!1,g}function Tm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&_1(t,r,a)}i=i.next}while(i!==n)}}function xx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function S1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function NT(e){var t=e.alternate;t!==null&&(e.alternate=null,NT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[io],delete t[tp],delete t[u1],delete t[lF],delete t[cF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jT(e){return e.tag===5||e.tag===3||e.tag===4}function yS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function P1(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xy));else if(n!==4&&(e=e.child,e!==null))for(P1(e,t,r),e=e.sibling;e!==null;)P1(e,t,r),e=e.sibling}function k1(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(k1(e,t,r),e=e.sibling;e!==null;)k1(e,t,r),e=e.sibling}var gs=null,Oa=!1;function Dl(e,t,r){for(r=r.child;r!==null;)_T(e,t,r),r=r.sibling}function _T(e,t,r){if(uo&&typeof uo.onCommitFiberUnmount=="function")try{uo.onCommitFiberUnmount(ux,r)}catch{}switch(r.tag){case 5:As||ih(r,t);case 6:var n=gs,i=Oa;gs=null,Dl(e,t,r),gs=n,Oa=i,gs!==null&&(Oa?(e=gs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):gs.removeChild(r.stateNode));break;case 18:gs!==null&&(Oa?(e=gs,r=r.stateNode,e.nodeType===8?mb(e.parentNode,r):e.nodeType===1&&mb(e,r),Zm(e)):mb(gs,r.stateNode));break;case 4:n=gs,i=Oa,gs=r.stateNode.containerInfo,Oa=!0,Dl(e,t,r),gs=n,Oa=i;break;case 0:case 11:case 14:case 15:if(!As&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&_1(r,t,o),i=i.next}while(i!==n)}Dl(e,t,r);break;case 1:if(!As&&(ih(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Nn(r,t,l)}Dl(e,t,r);break;case 21:Dl(e,t,r);break;case 22:r.mode&1?(As=(n=As)||r.memoizedState!==null,Dl(e,t,r),As=n):Dl(e,t,r);break;default:Dl(e,t,r)}}function xS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new SF),t.forEach(function(n){var i=RF.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ba(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:gs=l.stateNode,Oa=!1;break e;case 3:gs=l.stateNode.containerInfo,Oa=!0;break e;case 4:gs=l.stateNode.containerInfo,Oa=!0;break e}l=l.return}if(gs===null)throw Error(ot(160));_T(a,o,i),gs=null,Oa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Nn(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ST(t,e),t=t.sibling}function ST(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ba(t,e),Qa(e),n&4){try{Tm(3,e,e.return),xx(3,e)}catch(y){Nn(e,e.return,y)}try{Tm(5,e,e.return)}catch(y){Nn(e,e.return,y)}}break;case 1:ba(t,e),Qa(e),n&512&&r!==null&&ih(r,r.return);break;case 5:if(ba(t,e),Qa(e),n&512&&r!==null&&ih(r,r.return),e.flags&32){var i=e.stateNode;try{Ym(i,"")}catch(y){Nn(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&K4(i,a),Xw(l,o);var d=Xw(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Q4(i,h):u==="dangerouslySetInnerHTML"?Z4(i,h):u==="children"?Ym(i,h):fN(i,u,h,d)}switch(l){case"input":Yw(i,a);break;case"textarea":G4(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?lh(i,!!a.multiple,f,!1):m!==!!a.multiple&&(a.defaultValue!=null?lh(i,!!a.multiple,a.defaultValue,!0):lh(i,!!a.multiple,a.multiple?[]:"",!1))}i[tp]=a}catch(y){Nn(e,e.return,y)}}break;case 6:if(ba(t,e),Qa(e),n&4){if(e.stateNode===null)throw Error(ot(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){Nn(e,e.return,y)}}break;case 3:if(ba(t,e),Qa(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zm(t.containerInfo)}catch(y){Nn(e,e.return,y)}break;case 4:ba(t,e),Qa(e);break;case 13:ba(t,e),Qa(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(YN=En())),n&4&&xS(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(As=(d=As)||u,ba(t,e),As=d):ba(t,e),Qa(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Nt=e,u=e.child;u!==null;){for(h=Nt=u;Nt!==null;){switch(m=Nt,f=m.child,m.tag){case 0:case 11:case 14:case 15:Tm(4,m,m.return);break;case 1:ih(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Nn(n,r,y)}}break;case 5:ih(m,m.return);break;case 22:if(m.memoizedState!==null){wS(h);continue}}f!==null?(f.return=m,Nt=f):wS(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=X4("display",o))}catch(y){Nn(e,e.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){Nn(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ba(t,e),Qa(e),n&4&&xS(e);break;case 21:break;default:ba(t,e),Qa(e)}}function Qa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(jT(r)){var n=r;break e}r=r.return}throw Error(ot(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ym(i,""),n.flags&=-33);var a=yS(e);k1(e,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=yS(e);P1(e,l,o);break;default:throw Error(ot(161))}}catch(c){Nn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kF(e,t,r){Nt=e,PT(e)}function PT(e,t,r){for(var n=(e.mode&1)!==0;Nt!==null;){var i=Nt,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||nv;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||As;l=nv;var d=As;if(nv=o,(As=c)&&!d)for(Nt=i;Nt!==null;)o=Nt,c=o.child,o.tag===22&&o.memoizedState!==null?NS(i):c!==null?(c.return=o,Nt=c):NS(i);for(;a!==null;)Nt=a,PT(a),a=a.sibling;Nt=i,nv=l,As=d}bS(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Nt=a):bS(e)}}function bS(e){for(;Nt!==null;){var t=Nt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:As||xx(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!As)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Pa(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&sS(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sS(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Zm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}As||t.flags&512&&S1(t)}catch(m){Nn(t,t.return,m)}}if(t===e){Nt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Nt=r;break}Nt=t.return}}function wS(e){for(;Nt!==null;){var t=Nt;if(t===e){Nt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Nt=r;break}Nt=t.return}}function NS(e){for(;Nt!==null;){var t=Nt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xx(4,t)}catch(c){Nn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){Nn(t,i,c)}}var a=t.return;try{S1(t)}catch(c){Nn(t,a,c)}break;case 5:var o=t.return;try{S1(t)}catch(c){Nn(t,o,c)}}}catch(c){Nn(t,t.return,c)}if(t===e){Nt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Nt=l;break}Nt=t.return}}var CF=Math.ceil,Oy=hl.ReactCurrentDispatcher,WN=hl.ReactCurrentOwner,ra=hl.ReactCurrentBatchConfig,br=0,is=null,zn=null,ys=0,yi=0,ah=Cc(0),ts=0,op=null,Gd=0,bx=0,VN=0,Om=null,ti=null,YN=0,qh=1/0,zo=null,Ey=!1,C1=null,mc=null,sv=!1,ac=null,Ay=0,Em=0,T1=null,Qv=-1,$v=0;function Vs(){return br&6?En():Qv!==-1?Qv:Qv=En()}function pc(e){return e.mode&1?br&2&&ys!==0?ys&-ys:uF.transition!==null?($v===0&&($v=d3()),$v):(e=Er,e!==0||(e=window.event,e=e===void 0?16:v3(e.type)),e):1}function Ra(e,t,r,n){if(50<Em)throw Em=0,T1=null,Error(ot(185));Ap(e,r,n),(!(br&2)||e!==is)&&(e===is&&(!(br&2)&&(bx|=r),ts===4&&Kl(e,ys)),ai(e,n),r===1&&br===0&&!(t.mode&1)&&(qh=En()+500,gx&&Tc()))}function ai(e,t){var r=e.callbackNode;u7(e,t);var n=py(e,e===is?ys:0);if(n===0)r!==null&&E_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&E_(r),t===1)e.tag===0?dF(jS.bind(null,e)):I3(jS.bind(null,e)),aF(function(){!(br&6)&&Tc()}),r=null;else{switch(u3(n)){case 1:r=yN;break;case 4:r=l3;break;case 16:r=my;break;case 536870912:r=c3;break;default:r=my}r=MT(r,kT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kT(e,t){if(Qv=-1,$v=0,br&6)throw Error(ot(327));var r=e.callbackNode;if(fh()&&e.callbackNode!==r)return null;var n=py(e,e===is?ys:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Dy(e,n);else{t=n;var i=br;br|=2;var a=TT();(is!==e||ys!==t)&&(zo=null,qh=En()+500,Rd(e,t));do try{EF();break}catch(l){CT(e,l)}while(!0);EN(),Oy.current=a,br=i,zn!==null?t=0:(is=null,ys=0,t=ts)}if(t!==0){if(t===2&&(i=r1(e),i!==0&&(n=i,t=O1(e,i))),t===1)throw r=op,Rd(e,0),Kl(e,n),ai(e,En()),r;if(t===6)Kl(e,n);else{if(i=e.current.alternate,!(n&30)&&!TF(i)&&(t=Dy(e,n),t===2&&(a=r1(e),a!==0&&(n=a,t=O1(e,a))),t===1))throw r=op,Rd(e,0),Kl(e,n),ai(e,En()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ot(345));case 2:ld(e,ti,zo);break;case 3:if(Kl(e,n),(n&130023424)===n&&(t=YN+500-En(),10<t)){if(py(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Vs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=d1(ld.bind(null,e,ti,zo),t);break}ld(e,ti,zo);break;case 4:if(Kl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Ma(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=En()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CF(n/1960))-n,10<n){e.timeoutHandle=d1(ld.bind(null,e,ti,zo),n);break}ld(e,ti,zo);break;case 5:ld(e,ti,zo);break;default:throw Error(ot(329))}}}return ai(e,En()),e.callbackNode===r?kT.bind(null,e):null}function O1(e,t){var r=Om;return e.current.memoizedState.isDehydrated&&(Rd(e,t).flags|=256),e=Dy(e,t),e!==2&&(t=ti,ti=r,t!==null&&E1(t)),e}function E1(e){ti===null?ti=e:ti.push.apply(ti,e)}function TF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!La(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kl(e,t){for(t&=~VN,t&=~bx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ma(t),n=1<<r;e[r]=-1,t&=~n}}function jS(e){if(br&6)throw Error(ot(327));fh();var t=py(e,0);if(!(t&1))return ai(e,En()),null;var r=Dy(e,t);if(e.tag!==0&&r===2){var n=r1(e);n!==0&&(t=n,r=O1(e,n))}if(r===1)throw r=op,Rd(e,0),Kl(e,t),ai(e,En()),r;if(r===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ld(e,ti,zo),ai(e,En()),null}function KN(e,t){var r=br;br|=1;try{return e(t)}finally{br=r,br===0&&(qh=En()+500,gx&&Tc())}}function Jd(e){ac!==null&&ac.tag===0&&!(br&6)&&fh();var t=br;br|=1;var r=ra.transition,n=Er;try{if(ra.transition=null,Er=1,e)return e()}finally{Er=n,ra.transition=r,br=t,!(br&6)&&Tc()}}function GN(){yi=ah.current,$r(ah)}function Rd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,iF(r)),zn!==null)for(r=zn.return;r!==null;){var n=r;switch(CN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&by();break;case 3:Fh(),$r(si),$r(Rs),LN();break;case 5:IN(n);break;case 4:Fh();break;case 13:$r(hn);break;case 19:$r(hn);break;case 10:AN(n.type._context);break;case 22:case 23:GN()}r=r.return}if(is=e,zn=e=gc(e.current,null),ys=yi=t,ts=0,op=null,VN=bx=Gd=0,ti=Om=null,bd!==null){for(t=0;t<bd.length;t++)if(r=bd[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}bd=null}return e}function CT(e,t){do{var r=zn;try{if(EN(),Jv.current=Ty,Cy){for(var n=mn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Cy=!1}if(Kd=0,ss=Xn=mn=null,Cm=!1,sp=0,WN.current=null,r===null||r.return===null){ts=1,op=t,zn=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=ys,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=dS(o);if(f!==null){f.flags&=-257,uS(f,o,l,a,t),f.mode&1&&cS(a,d,t),t=f,c=d;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){cS(a,d,t),JN();break e}c=Error(ot(426))}}else if(an&&l.mode&1){var x=dS(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),uS(x,o,l,a,t),TN(Bh(c,l));break e}}a=c=Bh(c,l),ts!==4&&(ts=2),Om===null?Om=[a]:Om.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=uT(a,c,t);nS(a,p);break e;case 1:l=c;var v=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(mc===null||!mc.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=hT(a,l,t);nS(a,j);break e}}a=a.return}while(a!==null)}ET(r)}catch(S){t=S,zn===r&&r!==null&&(zn=r=r.return);continue}break}while(!0)}function TT(){var e=Oy.current;return Oy.current=Ty,e===null?Ty:e}function JN(){(ts===0||ts===3||ts===2)&&(ts=4),is===null||!(Gd&268435455)&&!(bx&268435455)||Kl(is,ys)}function Dy(e,t){var r=br;br|=2;var n=TT();(is!==e||ys!==t)&&(zo=null,Rd(e,t));do try{OF();break}catch(i){CT(e,i)}while(!0);if(EN(),br=r,Oy.current=n,zn!==null)throw Error(ot(261));return is=null,ys=0,ts}function OF(){for(;zn!==null;)OT(zn)}function EF(){for(;zn!==null&&!r7();)OT(zn)}function OT(e){var t=DT(e.alternate,e,yi);e.memoizedProps=e.pendingProps,t===null?ET(e):zn=t,WN.current=null}function ET(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=_F(r,t),r!==null){r.flags&=32767,zn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ts=6,zn=null;return}}else if(r=jF(r,t,yi),r!==null){zn=r;return}if(t=t.sibling,t!==null){zn=t;return}zn=t=e}while(t!==null);ts===0&&(ts=5)}function ld(e,t,r){var n=Er,i=ra.transition;try{ra.transition=null,Er=1,AF(e,t,r,n)}finally{ra.transition=i,Er=n}return null}function AF(e,t,r,n){do fh();while(ac!==null);if(br&6)throw Error(ot(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(h7(e,a),e===is&&(zn=is=null,ys=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||sv||(sv=!0,MT(my,function(){return fh(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ra.transition,ra.transition=null;var o=Er;Er=1;var l=br;br|=4,WN.current=null,PF(e,r),ST(r,e),Q7(l1),gy=!!o1,l1=o1=null,e.current=r,kF(r),n7(),br=l,Er=o,ra.transition=a}else e.current=r;if(sv&&(sv=!1,ac=e,Ay=i),a=e.pendingLanes,a===0&&(mc=null),a7(r.stateNode),ai(e,En()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ey)throw Ey=!1,e=C1,C1=null,e;return Ay&1&&e.tag!==0&&fh(),a=e.pendingLanes,a&1?e===T1?Em++:(Em=0,T1=e):Em=0,Tc(),null}function fh(){if(ac!==null){var e=u3(Ay),t=ra.transition,r=Er;try{if(ra.transition=null,Er=16>e?16:e,ac===null)var n=!1;else{if(e=ac,ac=null,Ay=0,br&6)throw Error(ot(331));var i=br;for(br|=4,Nt=e.current;Nt!==null;){var a=Nt,o=a.child;if(Nt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Nt=d;Nt!==null;){var u=Nt;switch(u.tag){case 0:case 11:case 15:Tm(8,u,a)}var h=u.child;if(h!==null)h.return=u,Nt=h;else for(;Nt!==null;){u=Nt;var m=u.sibling,f=u.return;if(NT(u),u===d){Nt=null;break}if(m!==null){m.return=f,Nt=m;break}Nt=f}}}var g=a.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Nt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Nt=o;else e:for(;Nt!==null;){if(a=Nt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Tm(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,Nt=p;break e}Nt=a.return}}var v=e.current;for(Nt=v;Nt!==null;){o=Nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Nt=b;else e:for(o=v;Nt!==null;){if(l=Nt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xx(9,l)}}catch(S){Nn(l,l.return,S)}if(l===o){Nt=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Nt=j;break e}Nt=l.return}}if(br=i,Tc(),uo&&typeof uo.onPostCommitFiberRoot=="function")try{uo.onPostCommitFiberRoot(ux,e)}catch{}n=!0}return n}finally{Er=r,ra.transition=t}}return!1}function _S(e,t,r){t=Bh(r,t),t=uT(e,t,1),e=fc(e,t,1),t=Vs(),e!==null&&(Ap(e,1,t),ai(e,t))}function Nn(e,t,r){if(e.tag===3)_S(e,e,r);else for(;t!==null;){if(t.tag===3){_S(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mc===null||!mc.has(n))){e=Bh(r,e),e=hT(t,e,1),t=fc(t,e,1),e=Vs(),t!==null&&(Ap(t,1,e),ai(t,e));break}}t=t.return}}function DF(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Vs(),e.pingedLanes|=e.suspendedLanes&r,is===e&&(ys&r)===r&&(ts===4||ts===3&&(ys&130023424)===ys&&500>En()-YN?Rd(e,0):VN|=r),ai(e,t)}function AT(e,t){t===0&&(e.mode&1?(t=Gg,Gg<<=1,!(Gg&130023424)&&(Gg=4194304)):t=1);var r=Vs();e=il(e,t),e!==null&&(Ap(e,t,r),ai(e,r))}function MF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),AT(e,r)}function RF(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ot(314))}n!==null&&n.delete(t),AT(e,r)}var DT;DT=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||si.current)ri=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ri=!1,NF(e,t,r);ri=!!(e.flags&131072)}else ri=!1,an&&t.flags&1048576&&L3(t,jy,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Xv(e,t),e=t.pendingProps;var i=Rh(t,Rs.current);hh(t,r),i=BN(null,t,n,e,i,r);var a=qN();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ii(n)?(a=!0,wy(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,MN(t),i.updater=yx,t.stateNode=i,i._reactInternals=t,v1(t,n,e,r),t=b1(null,t,n,!0,a,r)):(t.tag=0,an&&a&&kN(t),zs(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Xv(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=LF(n),e=Pa(n,e),i){case 0:t=x1(null,t,n,e,r);break e;case 1:t=mS(null,t,n,e,r);break e;case 11:t=hS(null,t,n,e,r);break e;case 14:t=fS(null,t,n,Pa(n.type,e),r);break e}throw Error(ot(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pa(n,i),x1(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pa(n,i),mS(e,t,n,i,r);case 3:e:{if(gT(t),e===null)throw Error(ot(387));n=t.pendingProps,a=t.memoizedState,i=a.element,H3(e,t),Py(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Bh(Error(ot(423)),t),t=pS(e,t,n,r,i);break e}else if(n!==i){i=Bh(Error(ot(424)),t),t=pS(e,t,n,r,i);break e}else for(_i=hc(t.stateNode.containerInfo.firstChild),Pi=t,an=!0,Ea=null,r=U3(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ih(),n===i){t=al(e,t,r);break e}zs(e,t,n,r)}t=t.child}return t;case 5:return W3(t),e===null&&m1(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,c1(n,i)?o=null:a!==null&&c1(n,a)&&(t.flags|=32),pT(e,t),zs(e,t,o,r),t.child;case 6:return e===null&&m1(t),null;case 13:return vT(e,t,r);case 4:return RN(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lh(t,null,n,r):zs(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pa(n,i),hS(e,t,n,i,r);case 7:return zs(e,t,t.pendingProps,r),t.child;case 8:return zs(e,t,t.pendingProps.children,r),t.child;case 12:return zs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Wr(_y,n._currentValue),n._currentValue=o,a!==null)if(La(a.value,o)){if(a.children===i.children&&!si.current){t=al(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=el(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),p1(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ot(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),p1(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}zs(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,hh(t,r),i=aa(i),n=n(i),t.flags|=1,zs(e,t,n,r),t.child;case 14:return n=t.type,i=Pa(n,t.pendingProps),i=Pa(n.type,i),fS(e,t,n,i,r);case 15:return fT(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pa(n,i),Xv(e,t),t.tag=1,ii(n)?(e=!0,wy(t)):e=!1,hh(t,r),dT(t,n,i),v1(t,n,i,r),b1(null,t,n,!0,e,r);case 19:return yT(e,t,r);case 22:return mT(e,t,r)}throw Error(ot(156,t.tag))};function MT(e,t){return o3(e,t)}function IF(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(e,t,r,n){return new IF(e,t,r,n)}function ZN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LF(e){if(typeof e=="function")return ZN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pN)return 11;if(e===gN)return 14}return 2}function gc(e,t){var r=e.alternate;return r===null?(r=ea(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ey(e,t,r,n,i,a){var o=2;if(n=e,typeof e=="function")ZN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zu:return Id(r.children,i,a,t);case mN:o=8,i|=8;break;case Uw:return e=ea(12,r,t,i|2),e.elementType=Uw,e.lanes=a,e;case zw:return e=ea(13,r,t,i),e.elementType=zw,e.lanes=a,e;case Hw:return e=ea(19,r,t,i),e.elementType=Hw,e.lanes=a,e;case W4:return wx(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z4:o=10;break e;case H4:o=9;break e;case pN:o=11;break e;case gN:o=14;break e;case Hl:o=16,n=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=ea(o,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Id(e,t,r,n){return e=ea(7,e,n,t),e.lanes=r,e}function wx(e,t,r,n){return e=ea(22,e,n,t),e.elementType=W4,e.lanes=r,e.stateNode={isHidden:!1},e}function Nb(e,t,r){return e=ea(6,e,null,t),e.lanes=r,e}function jb(e,t,r){return t=ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FF(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nb(0),this.expirationTimes=nb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nb(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function XN(e,t,r,n,i,a,o,l,c){return e=new FF(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ea(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},MN(a),e}function BF(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ju,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function RT(e){if(!e)return Nc;e=e._reactInternals;e:{if(cu(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var r=e.type;if(ii(r))return R3(e,r,t)}return t}function IT(e,t,r,n,i,a,o,l,c){return e=XN(r,n,!0,e,i,a,o,l,c),e.context=RT(null),r=e.current,n=Vs(),i=pc(r),a=el(n,i),a.callback=t??null,fc(r,a,i),e.current.lanes=i,Ap(e,i,n),ai(e,n),e}function Nx(e,t,r,n){var i=t.current,a=Vs(),o=pc(i);return r=RT(r),t.context===null?t.context=r:t.pendingContext=r,t=el(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fc(i,t,o),e!==null&&(Ra(e,i,o,a),Gv(e,i,o)),o}function My(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function SS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function QN(e,t){SS(e,t),(e=e.alternate)&&SS(e,t)}function qF(){return null}var LT=typeof reportError=="function"?reportError:function(e){console.error(e)};function $N(e){this._internalRoot=e}jx.prototype.render=$N.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));Nx(e,t,null,null)};jx.prototype.unmount=$N.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jd(function(){Nx(null,e,null,null)}),t[sl]=null}};function jx(e){this._internalRoot=e}jx.prototype.unstable_scheduleHydration=function(e){if(e){var t=m3();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yl.length&&t!==0&&t<Yl[r].priority;r++);Yl.splice(r,0,e),r===0&&g3(e)}};function ej(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function PS(){}function UF(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=My(o);a.call(d)}}var o=IT(t,n,e,0,null,!1,!1,"",PS);return e._reactRootContainer=o,e[sl]=o.current,$m(e.nodeType===8?e.parentNode:e),Jd(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=My(c);l.call(d)}}var c=XN(e,0,!1,null,null,!1,!1,"",PS);return e._reactRootContainer=c,e[sl]=c.current,$m(e.nodeType===8?e.parentNode:e),Jd(function(){Nx(t,c,r,n)}),c}function Sx(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=My(o);l.call(c)}}Nx(t,o,e,i)}else o=UF(r,t,e,i,n);return My(o)}h3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vm(t.pendingLanes);r!==0&&(xN(t,r|1),ai(t,En()),!(br&6)&&(qh=En()+500,Tc()))}break;case 13:Jd(function(){var n=il(e,1);if(n!==null){var i=Vs();Ra(n,e,1,i)}}),QN(e,1)}};bN=function(e){if(e.tag===13){var t=il(e,134217728);if(t!==null){var r=Vs();Ra(t,e,134217728,r)}QN(e,134217728)}};f3=function(e){if(e.tag===13){var t=pc(e),r=il(e,t);if(r!==null){var n=Vs();Ra(r,e,t,n)}QN(e,t)}};m3=function(){return Er};p3=function(e,t){var r=Er;try{return Er=e,t()}finally{Er=r}};$w=function(e,t,r){switch(t){case"input":if(Yw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=px(n);if(!i)throw Error(ot(90));Y4(n),Yw(n,i)}}}break;case"textarea":G4(e,r);break;case"select":t=r.value,t!=null&&lh(e,!!r.multiple,t,!1)}};t3=KN;r3=Jd;var zF={usingClientEntryPoint:!1,Events:[Mp,eh,px,$4,e3,KN]},em={findFiberByHostInstance:xd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HF={bundleType:em.bundleType,version:em.version,rendererPackageName:em.rendererPackageName,rendererConfig:em.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=i3(e),e===null?null:e.stateNode},findFiberByHostInstance:em.findFiberByHostInstance||qF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iv.isDisabled&&iv.supportsFiber)try{ux=iv.inject(HF),uo=iv}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zF;Di.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ej(t))throw Error(ot(200));return BF(e,t,null,r)};Di.createRoot=function(e,t){if(!ej(e))throw Error(ot(299));var r=!1,n="",i=LT;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=XN(e,1,!1,null,null,r,!1,n,i),e[sl]=t.current,$m(e.nodeType===8?e.parentNode:e),new $N(t)};Di.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=i3(t),e=e===null?null:e.stateNode,e};Di.flushSync=function(e){return Jd(e)};Di.hydrate=function(e,t,r){if(!_x(t))throw Error(ot(200));return Sx(null,e,t,!0,r)};Di.hydrateRoot=function(e,t,r){if(!ej(e))throw Error(ot(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=LT;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=IT(t,null,e,1,r??null,i,!1,a,o),e[sl]=t.current,$m(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new jx(t)};Di.render=function(e,t,r){if(!_x(t))throw Error(ot(200));return Sx(null,e,t,!1,r)};Di.unmountComponentAtNode=function(e){if(!_x(e))throw Error(ot(40));return e._reactRootContainer?(Jd(function(){Sx(null,null,e,!1,function(){e._reactRootContainer=null,e[sl]=null})}),!0):!1};Di.unstable_batchedUpdates=KN;Di.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!_x(r))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return Sx(e,t,r,!1,n)};Di.version="18.3.1-next-f1338f8080-20240426";function FT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FT)}catch(e){console.error(e)}}FT(),F4.exports=Di;var du=F4.exports;const BT=P4(du);var qT,kS=du;qT=kS.createRoot,kS.hydrateRoot;const WF=1,VF=1e6;let _b=0;function YF(){return _b=(_b+1)%Number.MAX_SAFE_INTEGER,_b.toString()}const Sb=new Map,CS=e=>{if(Sb.has(e))return;const t=setTimeout(()=>{Sb.delete(e),Am({type:"REMOVE_TOAST",toastId:e})},VF);Sb.set(e,t)},KF=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,WF)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?CS(r):e.toasts.forEach(n=>{CS(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},ty=[];let ry={toasts:[]};function Am(e){ry=KF(ry,e),ty.forEach(t=>{t(ry)})}function GF({...e}){const t=YF(),r=i=>Am({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>Am({type:"DISMISS_TOAST",toastId:t});return Am({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function JF(){const[e,t]=w.useState(ry);return w.useEffect(()=>(ty.push(t),()=>{const r=ty.indexOf(t);r>-1&&ty.splice(r,1)}),[e]),{...e,toast:GF,dismiss:r=>Am({type:"DISMISS_TOAST",toastId:r})}}function st(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function TS(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function bo(...e){return t=>{let r=!1;const n=e.map(i=>{const a=TS(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():TS(e[i],null)}}}}function Kt(...e){return w.useCallback(bo(...e),e)}function ZF(e,t){const r=w.createContext(t),n=a=>{const{children:o,...l}=a,c=w.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function i(a){const o=w.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,i]}function Is(e,t=[]){let r=[];function n(a,o){const l=w.createContext(o),c=r.length;r=[...r,o];const d=h=>{var p;const{scope:m,children:f,...g}=h,y=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,x=w.useMemo(()=>g,Object.values(g));return s.jsx(y.Provider,{value:x,children:f})};d.displayName=a+"Provider";function u(h,m){var y;const f=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,g=w.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[n,XF(i,...t)]}function XF(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function OS(e){const t=QF(e),r=w.forwardRef((n,i)=>{const{children:a,...o}=n,l=w.Children.toArray(a),c=l.find(e9);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function QF(e){const t=w.forwardRef((r,n)=>{const{children:i,...a}=r;if(w.isValidElement(i)){const o=r9(i),l=t9(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $F=Symbol("radix.slottable");function e9(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$F}function t9(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function r9(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ip(e){const t=e+"CollectionProvider",[r,n]=Is(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:x,children:p}=y,v=dt.useRef(null),b=dt.useRef(new Map).current;return s.jsx(i,{scope:x,itemMap:b,collectionRef:v,children:p})};o.displayName=t;const l=e+"CollectionSlot",c=OS(l),d=dt.forwardRef((y,x)=>{const{scope:p,children:v}=y,b=a(l,p),j=Kt(x,b.collectionRef);return s.jsx(c,{ref:j,children:v})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=OS(u),f=dt.forwardRef((y,x)=>{const{scope:p,children:v,...b}=y,j=dt.useRef(null),S=Kt(x,j),P=a(u,p);return dt.useEffect(()=>(P.itemMap.set(j,{ref:j,...b}),()=>void P.itemMap.delete(j))),s.jsx(m,{[h]:"",ref:S,children:v})});f.displayName=u;function g(y){const x=a(e+"CollectionConsumer",y);return dt.useCallback(()=>{const v=x.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((P,M)=>b.indexOf(P.ref.current)-b.indexOf(M.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},g,n]}function n9(e){const t=s9(e),r=w.forwardRef((n,i)=>{const{children:a,...o}=n,l=w.Children.toArray(a),c=l.find(a9);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function s9(e){const t=w.forwardRef((r,n)=>{const{children:i,...a}=r;if(w.isValidElement(i)){const o=l9(i),l=o9(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var i9=Symbol("radix.slottable");function a9(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===i9}function o9(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function l9(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var c9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ot=c9.reduce((e,t)=>{const r=n9(`Primitive.${t}`),n=w.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function tj(e,t){e&&du.flushSync(()=>e.dispatchEvent(t))}function Rn(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function d9(e,t=globalThis==null?void 0:globalThis.document){const r=Rn(e);w.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var u9="DismissableLayer",A1="dismissableLayer.update",h9="dismissableLayer.pointerDownOutside",f9="dismissableLayer.focusOutside",ES,UT=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uu=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=w.useContext(UT),[u,h]=w.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=w.useState({}),g=Kt(t,M=>h(M)),y=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),p=y.indexOf(x),v=u?y.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=v>=p,S=p9(M=>{const I=M.target,O=[...d.branches].some(L=>L.contains(I));!j||O||(i==null||i(M),o==null||o(M),M.defaultPrevented||l==null||l())},m),P=g9(M=>{const I=M.target;[...d.branches].some(L=>L.contains(I))||(a==null||a(M),o==null||o(M),M.defaultPrevented||l==null||l())},m);return d9(M=>{v===d.layers.size-1&&(n==null||n(M),!M.defaultPrevented&&l&&(M.preventDefault(),l()))},m),w.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ES=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),AS(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ES)}},[u,m,r,d]),w.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),AS())},[u,d]),w.useEffect(()=>{const M=()=>f({});return document.addEventListener(A1,M),()=>document.removeEventListener(A1,M)},[]),s.jsx(Ot.div,{...c,ref:g,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:st(e.onFocusCapture,P.onFocusCapture),onBlurCapture:st(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:st(e.onPointerDownCapture,S.onPointerDownCapture)})});uu.displayName=u9;var m9="DismissableLayerBranch",zT=w.forwardRef((e,t)=>{const r=w.useContext(UT),n=w.useRef(null),i=Kt(t,n);return w.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(Ot.div,{...e,ref:i})});zT.displayName=m9;function p9(e,t=globalThis==null?void 0:globalThis.document){const r=Rn(e),n=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){HT(h9,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function g9(e,t=globalThis==null?void 0:globalThis.document){const r=Rn(e),n=w.useRef(!1);return w.useEffect(()=>{const i=a=>{a.target&&!n.current&&HT(f9,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function AS(){const e=new CustomEvent(A1);document.dispatchEvent(e)}function HT(e,t,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?tj(i,a):i.dispatchEvent(a)}var v9=uu,y9=zT,ls=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},x9="Portal",Qh=w.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[i,a]=w.useState(!1);ls(()=>a(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?BT.createPortal(s.jsx(Ot.div,{...n,ref:t}),o):null});Qh.displayName=x9;function b9(e,t){return w.useReducer((r,n)=>t[r][n]??r,e)}var cs=e=>{const{present:t,children:r}=e,n=w9(t),i=typeof r=="function"?r({present:n.isPresent}):w.Children.only(r),a=Kt(n.ref,N9(i));return typeof r=="function"||n.isPresent?w.cloneElement(i,{ref:a}):null};cs.displayName="Presence";function w9(e){const[t,r]=w.useState(),n=w.useRef(null),i=w.useRef(e),a=w.useRef("none"),o=e?"mounted":"unmounted",[l,c]=b9(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=av(n.current);a.current=l==="mounted"?d:"none"},[l]),ls(()=>{const d=n.current,u=i.current;if(u!==e){const m=a.current,f=av(d);e?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),ls(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const y=av(n.current).includes(CSS.escape(f.animationName));if(f.target===t&&y&&(c("ANIMATION_END"),!i.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=f=>{f.target===t&&(a.current=av(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function av(e){return(e==null?void 0:e.animationName)||"none"}function N9(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var j9=dx[" useInsertionEffect ".trim().toString()]||ls;function la({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,o]=_9({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:i;{const u=w.useRef(e!==void 0);w.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=w.useCallback(u=>{var h;if(l){const m=S9(u)?u(e):u;m!==e&&((h=o.current)==null||h.call(o,m))}else a(u)},[l,e,a,o]);return[c,d]}function _9({defaultProp:e,onChange:t}){const[r,n]=w.useState(e),i=w.useRef(r),a=w.useRef(t);return j9(()=>{a.current=t},[t]),w.useEffect(()=>{var o;i.current!==r&&((o=a.current)==null||o.call(a,r),i.current=r)},[r,i]),[r,n,a]}function S9(e){return typeof e=="function"}var WT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),P9="VisuallyHidden",Px=w.forwardRef((e,t)=>s.jsx(Ot.span,{...e,ref:t,style:{...WT,...e.style}}));Px.displayName=P9;var k9=Px,rj="ToastProvider",[nj,C9,T9]=Ip("Toast"),[VT]=Is("Toast",[T9]),[O9,kx]=VT(rj),YT=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=w.useState(null),[d,u]=w.useState(0),h=w.useRef(!1),m=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${rj}\`. Expected non-empty \`string\`.`),s.jsx(nj.Provider,{scope:t,children:s.jsx(O9,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>u(f=>f+1),[]),onToastRemove:w.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};YT.displayName=rj;var KT="ToastViewport",E9=["F8"],D1="toast.viewportPause",M1="toast.viewportResume",GT=w.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=E9,label:i="Notifications ({hotkey})",...a}=e,o=kx(KT,r),l=C9(r),c=w.useRef(null),d=w.useRef(null),u=w.useRef(null),h=w.useRef(null),m=Kt(t,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;w.useEffect(()=>{const x=p=>{var b;n.length!==0&&n.every(j=>p[j]||p.code===j)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),w.useEffect(()=>{const x=c.current,p=h.current;if(g&&x&&p){const v=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(D1);p.dispatchEvent(P),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(M1);p.dispatchEvent(P),o.isClosePausedRef.current=!1}},j=P=>{!x.contains(P.relatedTarget)&&b()},S=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",v),x.addEventListener("focusout",j),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const y=w.useCallback(({tabbingDirection:x})=>{const v=l().map(b=>{const j=b.ref.current,S=[j,...W9(j)];return x==="forwards"?S:S.reverse()});return(x==="forwards"?v.reverse():v).flat()},[l]);return w.useEffect(()=>{const x=h.current;if(x){const p=v=>{var S,P,M;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const I=document.activeElement,O=v.shiftKey;if(v.target===x&&O){(S=d.current)==null||S.focus();return}const k=y({tabbingDirection:O?"backwards":"forwards"}),E=k.findIndex(A=>A===I);Pb(k.slice(E+1))?v.preventDefault():O?(P=d.current)==null||P.focus():(M=u.current)==null||M.focus()}};return x.addEventListener("keydown",p),()=>x.removeEventListener("keydown",p)}},[l,y]),s.jsxs(y9,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(R1,{ref:d,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"forwards"});Pb(x)}}),s.jsx(nj.Slot,{scope:r,children:s.jsx(Ot.ol,{tabIndex:-1,...a,ref:m})}),g&&s.jsx(R1,{ref:u,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"backwards"});Pb(x)}})]})});GT.displayName=KT;var JT="ToastFocusProxy",R1=w.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,a=kx(JT,r);return s.jsx(Px,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&n()}})});R1.displayName=JT;var Lp="Toast",A9="toast.swipeStart",D9="toast.swipeMove",M9="toast.swipeCancel",R9="toast.swipeEnd",ZT=w.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:a,...o}=e,[l,c]=la({prop:n,defaultProp:i??!0,onChange:a,caller:Lp});return s.jsx(cs,{present:r||l,children:s.jsx(F9,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Rn(e.onPause),onResume:Rn(e.onResume),onSwipeStart:st(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:st(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:st(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:st(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});ZT.displayName=Lp;var[I9,L9]=VT(Lp,{onClose(){}}),F9=w.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...g}=e,y=kx(Lp,r),[x,p]=w.useState(null),v=Kt(t,A=>p(A)),b=w.useRef(null),j=w.useRef(null),S=i||y.duration,P=w.useRef(0),M=w.useRef(S),I=w.useRef(0),{onToastAdd:O,onToastRemove:L}=y,T=Rn(()=>{var q;(x==null?void 0:x.contains(document.activeElement))&&((q=y.viewport)==null||q.focus()),o()}),k=w.useCallback(A=>{!A||A===1/0||(window.clearTimeout(I.current),P.current=new Date().getTime(),I.current=window.setTimeout(T,A))},[T]);w.useEffect(()=>{const A=y.viewport;if(A){const q=()=>{k(M.current),d==null||d()},U=()=>{const R=new Date().getTime()-P.current;M.current=M.current-R,window.clearTimeout(I.current),c==null||c()};return A.addEventListener(D1,U),A.addEventListener(M1,q),()=>{A.removeEventListener(D1,U),A.removeEventListener(M1,q)}}},[y.viewport,S,c,d,k]),w.useEffect(()=>{a&&!y.isClosePausedRef.current&&k(S)},[a,S,y.isClosePausedRef,k]),w.useEffect(()=>(O(),()=>L()),[O,L]);const E=w.useMemo(()=>x?nO(x):null,[x]);return y.viewport?s.jsxs(s.Fragment,{children:[E&&s.jsx(B9,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:E}),s.jsx(I9,{scope:r,onClose:T,children:du.createPortal(s.jsx(nj.ItemSlot,{scope:r,children:s.jsx(v9,{asChild:!0,onEscapeKeyDown:st(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||T(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ot.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:st(e.onKeyDown,A=>{A.key==="Escape"&&(l==null||l(A.nativeEvent),A.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:st(e.onPointerDown,A=>{A.button===0&&(b.current={x:A.clientX,y:A.clientY})}),onPointerMove:st(e.onPointerMove,A=>{if(!b.current)return;const q=A.clientX-b.current.x,U=A.clientY-b.current.y,R=!!j.current,C=["left","right"].includes(y.swipeDirection),F=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,X=C?F(0,q):0,re=C?0:F(0,U),z=A.pointerType==="touch"?10:2,Y={x:X,y:re},J={originalEvent:A,delta:Y};R?(j.current=Y,ov(D9,h,J,{discrete:!1})):DS(Y,y.swipeDirection,z)?(j.current=Y,ov(A9,u,J,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(q)>z||Math.abs(U)>z)&&(b.current=null)}),onPointerUp:st(e.onPointerUp,A=>{const q=j.current,U=A.target;if(U.hasPointerCapture(A.pointerId)&&U.releasePointerCapture(A.pointerId),j.current=null,b.current=null,q){const R=A.currentTarget,C={originalEvent:A,delta:q};DS(q,y.swipeDirection,y.swipeThreshold)?ov(R9,f,C,{discrete:!0}):ov(M9,m,C,{discrete:!0}),R.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),B9=e=>{const{__scopeToast:t,children:r,...n}=e,i=kx(Lp,t),[a,o]=w.useState(!1),[l,c]=w.useState(!1);return z9(()=>o(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Qh,{asChild:!0,children:s.jsx(Px,{...n,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",r]})})})},q9="ToastTitle",XT=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ot.div,{...n,ref:t})});XT.displayName=q9;var U9="ToastDescription",QT=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ot.div,{...n,ref:t})});QT.displayName=U9;var $T="ToastAction",eO=w.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(rO,{altText:r,asChild:!0,children:s.jsx(sj,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$T}\`. Expected non-empty \`string\`.`),null)});eO.displayName=$T;var tO="ToastClose",sj=w.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=L9(tO,r);return s.jsx(rO,{asChild:!0,children:s.jsx(Ot.button,{type:"button",...n,ref:t,onClick:st(e.onClick,i.onClose)})})});sj.displayName=tO;var rO=w.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return s.jsx(Ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function nO(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),H9(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...nO(n))}}),t}function ov(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?tj(i,a):i.dispatchEvent(a)}var DS=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),a=n>i;return t==="left"||t==="right"?a&&n>r:!a&&i>r};function z9(e=()=>{}){const t=Rn(e);ls(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function H9(e){return e.nodeType===e.ELEMENT_NODE}function W9(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Pb(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var V9=YT,sO=GT,iO=ZT,aO=XT,oO=QT,lO=eO,cO=sj;function dO(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=dO(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function uO(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=dO(e))&&(n&&(n+=" "),n+=t);return n}const MS=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,RS=uO,$h=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return RS(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const u=r==null?void 0:r[d],h=a==null?void 0:a[d];if(u===null)return null;const m=MS(u)||MS(h);return i[d][m]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(g=>{let[y,x]=g;return Array.isArray(x)?x.includes({...a,...l}[y]):{...a,...l}[y]===x})?[...d,h,m]:d},[]);return RS(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hO=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...K9,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:hO("lucide",i),...l},[...o.map(([d,u])=>w.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(e,t)=>{const r=w.forwardRef(({className:n,...i},a)=>w.createElement(G9,{ref:a,iconNode:t,className:hO(`lucide-${Y9(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Pt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Pt("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Pt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=Pt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=Pt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Pt("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Pt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=Pt("CalendarOff",[["path",{d:"M4.2 4.2A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"16swn3"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Pt("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=Pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=Pt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=Pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Pt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Pt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=Pt("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=Pt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=Pt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=Pt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=Pt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=Pt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=Pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Pt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=Pt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Pt("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Pt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=Pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=Pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Pt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=Pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=Pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Pt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=Pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=Pt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=Pt("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Pt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Pt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Pt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=Pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=Pt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Pt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=Pt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=Pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Pt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=Pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Pt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=Pt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=Pt("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=Pt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=Pt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=Pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uj="-",cB=e=>{const t=uB(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(uj);return l[0]===""&&l.length!==1&&l.shift(),gO(l,t)||dB(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},gO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?gO(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(uj);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},US=/^\[(.+)\]$/,dB=e=>{if(US.test(e)){const t=US.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},uB=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return fB(Object.entries(e.classGroups),r).forEach(([a,o])=>{F1(o,n,a,t)}),n},F1=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:zS(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(hB(i)){F1(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{F1(o,zS(t,a),r,n)})})},zS=(e,t)=>{let r=e;return t.split(uj).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},hB=e=>e.isThemeGetter,fB=(e,t)=>t?e.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,i]}):e,mB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},vO="!",pB=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let x=0;x<l.length;x++){let p=l[x];if(d===0){if(p===i&&(n||l.slice(x,x+a)===t)){c.push(l.slice(u,x)),u=x+a;continue}if(p==="/"){h=x;continue}}p==="["?d++:p==="]"&&d--}const m=c.length===0?l:l.substring(u),f=m.startsWith(vO),g=f?m.substring(1):m,y=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},gB=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},vB=e=>({cache:mB(e.cacheSize),parseClassName:pB(e),...cB(e)}),yB=/\s+/,xB=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(yB);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=r(d);let g=!!f,y=n(g?m.substring(0,f):m);if(!y){if(!g){l=d+(l.length>0?" "+l:l);continue}if(y=n(m),!y){l=d+(l.length>0?" "+l:l);continue}g=!1}const x=gB(u).join(":"),p=h?x+vO:x,v=p+y;if(a.includes(v))continue;a.push(v);const b=i(y,g);for(let j=0;j<b.length;++j){const S=b[j];a.push(p+S)}l=d+(l.length>0?" "+l:l)}return l};function bB(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=yO(t))&&(n&&(n+=" "),n+=r);return n}const yO=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=yO(e[n]))&&(r&&(r+=" "),r+=t);return r};function wB(e,...t){let r,n,i,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return r=vB(d),n=r.cache.get,i=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=xB(c,r);return i(c,u),u}return function(){return a(bB.apply(null,arguments))}}const Zr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},xO=/^\[(?:([a-z-]+):)?(.+)\]$/i,NB=/^\d+\/\d+$/,jB=new Set(["px","full","screen"]),_B=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,kB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ro=e=>ph(e)||jB.has(e)||NB.test(e),Ml=e=>nf(e,"length",IB),ph=e=>!!e&&!Number.isNaN(Number(e)),Tb=e=>nf(e,"number",ph),tm=e=>!!e&&Number.isInteger(Number(e)),TB=e=>e.endsWith("%")&&ph(e.slice(0,-1)),ur=e=>xO.test(e),Rl=e=>_B.test(e),OB=new Set(["length","size","percentage"]),EB=e=>nf(e,OB,bO),AB=e=>nf(e,"position",bO),DB=new Set(["image","url"]),MB=e=>nf(e,DB,FB),RB=e=>nf(e,"",LB),rm=()=>!0,nf=(e,t,r)=>{const n=xO.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},IB=e=>SB.test(e)&&!PB.test(e),bO=()=>!1,LB=e=>kB.test(e),FB=e=>CB.test(e),BB=()=>{const e=Zr("colors"),t=Zr("spacing"),r=Zr("blur"),n=Zr("brightness"),i=Zr("borderColor"),a=Zr("borderRadius"),o=Zr("borderSpacing"),l=Zr("borderWidth"),c=Zr("contrast"),d=Zr("grayscale"),u=Zr("hueRotate"),h=Zr("invert"),m=Zr("gap"),f=Zr("gradientColorStops"),g=Zr("gradientColorStopPositions"),y=Zr("inset"),x=Zr("margin"),p=Zr("opacity"),v=Zr("padding"),b=Zr("saturate"),j=Zr("scale"),S=Zr("sepia"),P=Zr("skew"),M=Zr("space"),I=Zr("translate"),O=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",ur,t],k=()=>[ur,t],E=()=>["",Ro,Ml],A=()=>["auto",ph,ur],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",ur],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[ph,ur];return{cacheSize:500,separator:":",theme:{colors:[rm],spacing:[Ro,Ml],blur:["none","",Rl,ur],brightness:re(),borderColor:[e],borderRadius:["none","","full",Rl,ur],borderSpacing:k(),borderWidth:E(),contrast:re(),grayscale:F(),hueRotate:re(),invert:F(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[TB,Ml],inset:T(),margin:T(),opacity:re(),padding:k(),saturate:re(),scale:re(),sepia:F(),skew:re(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ur]}],container:["container"],columns:[{columns:[Rl]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),ur]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tm,ur]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ur]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",tm,ur]}],"grid-cols":[{"grid-cols":[rm]}],"col-start-end":[{col:["auto",{span:["full",tm,ur]},ur]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[rm]}],"row-start-end":[{row:["auto",{span:[tm,ur]},ur]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ur]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ur]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...C()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...C(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...C(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ur,t]}],"min-w":[{"min-w":[ur,t,"min","max","fit"]}],"max-w":[{"max-w":[ur,t,"none","full","min","max","fit","prose",{screen:[Rl]},Rl]}],h:[{h:[ur,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ur,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ur,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ur,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Rl,Ml]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tb]}],"font-family":[{font:[rm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ur]}],"line-clamp":[{"line-clamp":["none",ph,Tb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ro,ur]}],"list-image":[{"list-image":["none",ur]}],"list-style-type":[{list:["none","disc","decimal",ur]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ro,Ml]}],"underline-offset":[{"underline-offset":["auto",Ro,ur]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ur]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ur]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),AB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MB]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ro,ur]}],"outline-w":[{outline:[Ro,Ml]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Ro,Ml]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Rl,RB]}],"shadow-color":[{shadow:[rm]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Rl,ur]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ur]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",ur]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",ur]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[tm,ur]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ur]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ur]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ur]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ro,Ml,Tb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qB=wB(BB);function $e(...e){return qB(uO(e))}const UB=V9,wO=w.forwardRef(({className:e,...t},r)=>s.jsx(sO,{ref:r,className:$e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));wO.displayName=sO.displayName;const zB=$h("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),NO=w.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(iO,{ref:n,className:$e(zB({variant:t}),e),...r}));NO.displayName=iO.displayName;const HB=w.forwardRef(({className:e,...t},r)=>s.jsx(lO,{ref:r,className:$e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));HB.displayName=lO.displayName;const jO=w.forwardRef(({className:e,...t},r)=>s.jsx(cO,{ref:r,className:$e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Ms,{className:"h-4 w-4"})}));jO.displayName=cO.displayName;const _O=w.forwardRef(({className:e,...t},r)=>s.jsx(aO,{ref:r,className:$e("text-sm font-semibold",e),...t}));_O.displayName=aO.displayName;const SO=w.forwardRef(({className:e,...t},r)=>s.jsx(oO,{ref:r,className:$e("text-sm opacity-90",e),...t}));SO.displayName=oO.displayName;function WB(){const{toasts:e}=JF();return s.jsxs(UB,{children:[e.map(function({id:t,title:r,description:n,action:i,...a}){return s.jsxs(NO,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(_O,{children:r}),n&&s.jsx(SO,{children:n})]}),i,s.jsx(jO,{})]},t)}),s.jsx(wO,{})]})}var HS=["light","dark"],VB="(prefers-color-scheme: dark)",YB=w.createContext(void 0),KB={setTheme:e=>{},themes:[]},GB=()=>{var e;return(e=w.useContext(YB))!=null?e:KB};w.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let d=a==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=i?HS.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(g,y=!1,x=!0)=>{let p=o?o[g]:g,v=y?g+"|| ''":`'${p}'`,b="";return i&&x&&!y&&HS.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),r==="class"?y||p?b+=`c.add(${v})`:b+="null":p&&(b+=`d[s](n,${v})`),b},f=e?`!function(){${u}${m(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${VB}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var JB=e=>{switch(e){case"success":return QB;case"info":return eq;case"warning":return $B;case"error":return tq;default:return null}},ZB=Array(12).fill(0),XB=({visible:e,className:t})=>dt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},dt.createElement("div",{className:"sonner-spinner"},ZB.map((r,n)=>dt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),QB=dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},dt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$B=dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},dt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),eq=dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},dt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),tq=dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},dt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),rq=dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},dt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),dt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nq=()=>{let[e,t]=dt.useState(document.hidden);return dt.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},B1=1,sq=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,a=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:B1++,o=this.toasts.find(c=>c.id===a),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(c=>c.id===a?(this.publish({...c,...t,id:a,title:n}),{...c,...t,id:a,dismissible:l,title:n}):c):this.addToast({title:n,...i,dismissible:l,id:a}),a},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),a=n!==void 0,o,l=i.then(async d=>{if(o=["resolve",d],dt.isValidElement(d))a=!1,this.create({id:n,type:"default",message:d});else if(aq(d)&&!d.ok){a=!1;let u=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description;this.create({id:n,type:"error",message:u,description:h})}else if(r.success!==void 0){a=!1;let u=typeof r.success=="function"?await r.success(d):r.success,h=typeof r.description=="function"?await r.description(d):r.description;this.create({id:n,type:"success",message:u,description:h})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){a=!1;let u=typeof r.error=="function"?await r.error(d):r.error,h=typeof r.description=="function"?await r.description(d):r.description;this.create({id:n,type:"error",message:u,description:h})}}).finally(()=>{var d;a&&(this.dismiss(n),n=void 0),(d=r.finally)==null||d.call(r)}),c=()=>new Promise((d,u)=>l.then(()=>o[0]==="reject"?u(o[1]):d(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,r)=>{let n=(r==null?void 0:r.id)||B1++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ei=new sq,iq=(e,t)=>{let r=(t==null?void 0:t.id)||B1++;return ei.addToast({title:e,...t,id:r}),r},aq=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",oq=iq,lq=()=>ei.toasts,cq=()=>ei.getActiveToasts(),ge=Object.assign(oq,{success:ei.success,info:ei.info,warning:ei.warning,error:ei.error,custom:ei.custom,message:ei.message,promise:ei.promise,dismiss:ei.dismiss,loading:ei.loading},{getHistory:lq,getToasts:cq});function dq(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}dq(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function lv(e){return e.label!==void 0}var uq=3,hq="32px",fq="16px",WS=4e3,mq=356,pq=14,gq=20,vq=200;function wa(...e){return e.filter(Boolean).join(" ")}function yq(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var xq=e=>{var t,r,n,i,a,o,l,c,d,u,h;let{invert:m,toast:f,unstyled:g,interacting:y,setHeights:x,visibleToasts:p,heights:v,index:b,toasts:j,expanded:S,removeToast:P,defaultRichColors:M,closeButton:I,style:O,cancelButtonStyle:L,actionButtonStyle:T,className:k="",descriptionClassName:E="",duration:A,position:q,gap:U,loadingIcon:R,expandByDefault:C,classNames:F,icons:X,closeButtonAriaLabel:re="Close toast",pauseWhenPageIsHidden:z}=e,[Y,J]=dt.useState(null),[ne,le]=dt.useState(null),[G,he]=dt.useState(!1),[xe,Se]=dt.useState(!1),[K,we]=dt.useState(!1),[Te,ae]=dt.useState(!1),[H,Oe]=dt.useState(!1),[pe,je]=dt.useState(0),[_e,W]=dt.useState(0),te=dt.useRef(f.duration||A||WS),Z=dt.useRef(null),me=dt.useRef(null),$=b===0,ke=b+1<=p,ce=f.type,Ie=f.dismissible!==!1,Fe=f.className||"",Le=f.descriptionClassName||"",Ue=dt.useMemo(()=>v.findIndex(Ct=>Ct.toastId===f.id)||0,[v,f.id]),Ve=dt.useMemo(()=>{var Ct;return(Ct=f.closeButton)!=null?Ct:I},[f.closeButton,I]),rt=dt.useMemo(()=>f.duration||A||WS,[f.duration,A]),Ye=dt.useRef(0),We=dt.useRef(0),it=dt.useRef(0),ft=dt.useRef(null),[ue,Ke]=q.split("-"),Qe=dt.useMemo(()=>v.reduce((Ct,wt,lt)=>lt>=Ue?Ct:Ct+wt.height,0),[v,Ue]),ht=nq(),Dt=f.invert||m,yt=ce==="loading";We.current=dt.useMemo(()=>Ue*U+Qe,[Ue,Qe]),dt.useEffect(()=>{te.current=rt},[rt]),dt.useEffect(()=>{he(!0)},[]),dt.useEffect(()=>{let Ct=me.current;if(Ct){let wt=Ct.getBoundingClientRect().height;return W(wt),x(lt=>[{toastId:f.id,height:wt,position:f.position},...lt]),()=>x(lt=>lt.filter(Yt=>Yt.toastId!==f.id))}},[x,f.id]),dt.useLayoutEffect(()=>{if(!G)return;let Ct=me.current,wt=Ct.style.height;Ct.style.height="auto";let lt=Ct.getBoundingClientRect().height;Ct.style.height=wt,W(lt),x(Yt=>Yt.find(at=>at.toastId===f.id)?Yt.map(at=>at.toastId===f.id?{...at,height:lt}:at):[{toastId:f.id,height:lt,position:f.position},...Yt])},[G,f.title,f.description,x,f.id]);let ut=dt.useCallback(()=>{Se(!0),je(We.current),x(Ct=>Ct.filter(wt=>wt.toastId!==f.id)),setTimeout(()=>{P(f)},vq)},[f,P,x,We]);dt.useEffect(()=>{if(f.promise&&ce==="loading"||f.duration===1/0||f.type==="loading")return;let Ct;return S||y||z&&ht?(()=>{if(it.current<Ye.current){let wt=new Date().getTime()-Ye.current;te.current=te.current-wt}it.current=new Date().getTime()})():te.current!==1/0&&(Ye.current=new Date().getTime(),Ct=setTimeout(()=>{var wt;(wt=f.onAutoClose)==null||wt.call(f,f),ut()},te.current)),()=>clearTimeout(Ct)},[S,y,f,ce,z,ht,ut]),dt.useEffect(()=>{f.delete&&ut()},[ut,f.delete]);function Ut(){var Ct,wt,lt;return X!=null&&X.loading?dt.createElement("div",{className:wa(F==null?void 0:F.loader,(Ct=f==null?void 0:f.classNames)==null?void 0:Ct.loader,"sonner-loader"),"data-visible":ce==="loading"},X.loading):R?dt.createElement("div",{className:wa(F==null?void 0:F.loader,(wt=f==null?void 0:f.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":ce==="loading"},R):dt.createElement(XB,{className:wa(F==null?void 0:F.loader,(lt=f==null?void 0:f.classNames)==null?void 0:lt.loader),visible:ce==="loading"})}return dt.createElement("li",{tabIndex:0,ref:me,className:wa(k,Fe,F==null?void 0:F.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,F==null?void 0:F.default,F==null?void 0:F[ce],(r=f==null?void 0:f.classNames)==null?void 0:r[ce]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:M,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":G,"data-promise":!!f.promise,"data-swiped":H,"data-removed":xe,"data-visible":ke,"data-y-position":ue,"data-x-position":Ke,"data-index":b,"data-front":$,"data-swiping":K,"data-dismissible":Ie,"data-type":ce,"data-invert":Dt,"data-swipe-out":Te,"data-swipe-direction":ne,"data-expanded":!!(S||C&&G),style:{"--index":b,"--toasts-before":b,"--z-index":j.length-b,"--offset":`${xe?pe:We.current}px`,"--initial-height":C?"auto":`${_e}px`,...O,...f.style},onDragEnd:()=>{we(!1),J(null),ft.current=null},onPointerDown:Ct=>{yt||!Ie||(Z.current=new Date,je(We.current),Ct.target.setPointerCapture(Ct.pointerId),Ct.target.tagName!=="BUTTON"&&(we(!0),ft.current={x:Ct.clientX,y:Ct.clientY}))},onPointerUp:()=>{var Ct,wt,lt,Yt;if(Te||!Ie)return;ft.current=null;let at=Number(((Ct=me.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Sr=Number(((wt=me.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Wn=new Date().getTime()-((lt=Z.current)==null?void 0:lt.getTime()),nn=Y==="x"?at:Sr,_n=Math.abs(nn)/Wn;if(Math.abs(nn)>=gq||_n>.11){je(We.current),(Yt=f.onDismiss)==null||Yt.call(f,f),le(Y==="x"?at>0?"right":"left":Sr>0?"down":"up"),ut(),ae(!0),Oe(!1);return}we(!1),J(null)},onPointerMove:Ct=>{var wt,lt,Yt,at;if(!ft.current||!Ie||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;let Sr=Ct.clientY-ft.current.y,Wn=Ct.clientX-ft.current.x,nn=(lt=e.swipeDirections)!=null?lt:yq(q);!Y&&(Math.abs(Wn)>1||Math.abs(Sr)>1)&&J(Math.abs(Wn)>Math.abs(Sr)?"x":"y");let _n={x:0,y:0};Y==="y"?(nn.includes("top")||nn.includes("bottom"))&&(nn.includes("top")&&Sr<0||nn.includes("bottom")&&Sr>0)&&(_n.y=Sr):Y==="x"&&(nn.includes("left")||nn.includes("right"))&&(nn.includes("left")&&Wn<0||nn.includes("right")&&Wn>0)&&(_n.x=Wn),(Math.abs(_n.x)>0||Math.abs(_n.y)>0)&&Oe(!0),(Yt=me.current)==null||Yt.style.setProperty("--swipe-amount-x",`${_n.x}px`),(at=me.current)==null||at.style.setProperty("--swipe-amount-y",`${_n.y}px`)}},Ve&&!f.jsx?dt.createElement("button",{"aria-label":re,"data-disabled":yt,"data-close-button":!0,onClick:yt||!Ie?()=>{}:()=>{var Ct;ut(),(Ct=f.onDismiss)==null||Ct.call(f,f)},className:wa(F==null?void 0:F.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},(a=X==null?void 0:X.close)!=null?a:rq):null,f.jsx||w.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:dt.createElement(dt.Fragment,null,ce||f.icon||f.promise?dt.createElement("div",{"data-icon":"",className:wa(F==null?void 0:F.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ut():null,f.type!=="loading"?f.icon||(X==null?void 0:X[ce])||JB(ce):null):null,dt.createElement("div",{"data-content":"",className:wa(F==null?void 0:F.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},dt.createElement("div",{"data-title":"",className:wa(F==null?void 0:F.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?dt.createElement("div",{"data-description":"",className:wa(E,Le,F==null?void 0:F.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),w.isValidElement(f.cancel)?f.cancel:f.cancel&&lv(f.cancel)?dt.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||L,onClick:Ct=>{var wt,lt;lv(f.cancel)&&Ie&&((lt=(wt=f.cancel).onClick)==null||lt.call(wt,Ct),ut())},className:wa(F==null?void 0:F.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,w.isValidElement(f.action)?f.action:f.action&&lv(f.action)?dt.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||T,onClick:Ct=>{var wt,lt;lv(f.action)&&((lt=(wt=f.action).onClick)==null||lt.call(wt,Ct),!Ct.defaultPrevented&&ut())},className:wa(F==null?void 0:F.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function VS(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function bq(e,t){let r={};return[e,t].forEach((n,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",l=a?fq:hq;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var PO=w.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:h,duration:m,style:f,visibleToasts:g=uq,toastOptions:y,dir:x=VS(),gap:p=pq,loadingIcon:v,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:S}=e,[P,M]=dt.useState([]),I=dt.useMemo(()=>Array.from(new Set([n].concat(P.filter(z=>z.position).map(z=>z.position)))),[P,n]),[O,L]=dt.useState([]),[T,k]=dt.useState(!1),[E,A]=dt.useState(!1),[q,U]=dt.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=dt.useRef(null),C=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=dt.useRef(null),X=dt.useRef(!1),re=dt.useCallback(z=>{M(Y=>{var J;return(J=Y.find(ne=>ne.id===z.id))!=null&&J.delete||ei.dismiss(z.id),Y.filter(({id:ne})=>ne!==z.id)})},[]);return dt.useEffect(()=>ei.subscribe(z=>{if(z.dismiss){M(Y=>Y.map(J=>J.id===z.id?{...J,delete:!0}:J));return}setTimeout(()=>{BT.flushSync(()=>{M(Y=>{let J=Y.findIndex(ne=>ne.id===z.id);return J!==-1?[...Y.slice(0,J),{...Y[J],...z},...Y.slice(J+1)]:[z,...Y]})})})}),[]),dt.useEffect(()=>{if(u!=="system"){U(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:Y})=>{U(Y?"dark":"light")})}catch{z.addListener(({matches:J})=>{try{U(J?"dark":"light")}catch(ne){console.error(ne)}})}},[u]),dt.useEffect(()=>{P.length<=1&&k(!1)},[P]),dt.useEffect(()=>{let z=Y=>{var J,ne;i.every(le=>Y[le]||Y.code===le)&&(k(!0),(J=R.current)==null||J.focus()),Y.code==="Escape"&&(document.activeElement===R.current||(ne=R.current)!=null&&ne.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[i]),dt.useEffect(()=>{if(R.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,X.current=!1)}},[R.current]),dt.createElement("section",{ref:t,"aria-label":`${j} ${C}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((z,Y)=>{var J;let[ne,le]=z.split("-");return P.length?dt.createElement("ol",{key:z,dir:x==="auto"?VS():x,tabIndex:-1,ref:R,className:l,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":ne,"data-lifted":T&&P.length>1&&!a,"data-x-position":le,style:{"--front-toast-height":`${((J=O[0])==null?void 0:J.height)||0}px`,"--width":`${mq}px`,"--gap":`${p}px`,...f,...bq(c,d)},onBlur:G=>{X.current&&!G.currentTarget.contains(G.relatedTarget)&&(X.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||X.current||(X.current=!0,F.current=G.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{E||k(!1)},onDragEnd:()=>k(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},P.filter(G=>!G.position&&Y===0||G.position===z).map((G,he)=>{var xe,Se;return dt.createElement(xq,{key:G.id,icons:b,index:he,toast:G,defaultRichColors:h,duration:(xe=y==null?void 0:y.duration)!=null?xe:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:r,visibleToasts:g,closeButton:(Se=y==null?void 0:y.closeButton)!=null?Se:o,interacting:E,position:z,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:re,toasts:P.filter(K=>K.position==G.position),heights:O.filter(K=>K.position==G.position),setHeights:L,expandByDefault:a,gap:p,loadingIcon:v,expanded:T,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const wq=Object.freeze(Object.defineProperty({__proto__:null,Toaster:PO,toast:ge},Symbol.toStringTag,{value:"Module"})),Nq=({...e})=>{const{theme:t="system"}=GB();return s.jsx(PO,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var jq=dx[" useId ".trim().toString()]||(()=>{}),_q=0;function na(e){const[t,r]=w.useState(jq());return ls(()=>{r(n=>n??String(_q++))},[e]),t?`radix-${t}`:""}const Sq=["top","right","bottom","left"],_c=Math.min,wi=Math.max,Iy=Math.round,cv=Math.floor,fo=e=>({x:e,y:e}),Pq={left:"right",right:"left",bottom:"top",top:"bottom"},kq={start:"end",end:"start"};function q1(e,t,r){return wi(e,_c(t,r))}function ol(e,t){return typeof e=="function"?e(t):e}function ll(e){return e.split("-")[0]}function sf(e){return e.split("-")[1]}function hj(e){return e==="x"?"y":"x"}function fj(e){return e==="y"?"height":"width"}const Cq=new Set(["top","bottom"]);function oo(e){return Cq.has(ll(e))?"y":"x"}function mj(e){return hj(oo(e))}function Tq(e,t,r){r===void 0&&(r=!1);const n=sf(e),i=mj(e),a=fj(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Ly(o)),[o,Ly(o)]}function Oq(e){const t=Ly(e);return[U1(e),t,U1(t)]}function U1(e){return e.replace(/start|end/g,t=>kq[t])}const YS=["left","right"],KS=["right","left"],Eq=["top","bottom"],Aq=["bottom","top"];function Dq(e,t,r){switch(e){case"top":case"bottom":return r?t?KS:YS:t?YS:KS;case"left":case"right":return t?Eq:Aq;default:return[]}}function Mq(e,t,r,n){const i=sf(e);let a=Dq(ll(e),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(U1)))),a}function Ly(e){return e.replace(/left|right|bottom|top/g,t=>Pq[t])}function Rq(e){return{top:0,right:0,bottom:0,left:0,...e}}function kO(e){return typeof e!="number"?Rq(e):{top:e,right:e,bottom:e,left:e}}function Fy(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function GS(e,t,r){let{reference:n,floating:i}=e;const a=oo(t),o=mj(t),l=fj(o),c=ll(t),d=a==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-i.width,y:h};break;default:f={x:n.x,y:n.y}}switch(sf(t)){case"start":f[o]-=m*(r&&d?-1:1);break;case"end":f[o]+=m*(r&&d?-1:1);break}return f}const Iq=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=GS(d,n,c),m=n,f={},g=0;for(let y=0;y<l.length;y++){const{name:x,fn:p}=l[y],{x:v,y:b,data:j,reset:S}=await p({x:u,y:h,initialPlacement:n,placement:m,strategy:i,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});u=v??u,h=b??h,f={...f,[x]:{...f[x],...j}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:u,y:h}=GS(d,m,c)),y=-1)}return{x:u,y:h,placement:m,strategy:i,middlewareData:f}};async function lp(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=ol(t,e),g=kO(f),x=l[m?h==="floating"?"reference":"floating":h],p=Fy(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(x)))==null||r?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Fy(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(p.top-S.top+g.top)/j.y,bottom:(S.bottom-p.bottom+g.bottom)/j.y,left:(p.left-S.left+g.left)/j.x,right:(S.right-p.right+g.right)/j.x}}const Lq=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ol(e,t)||{};if(d==null)return{};const h=kO(u),m={x:r,y:n},f=mj(i),g=fj(f),y=await o.getDimensions(d),x=f==="y",p=x?"top":"left",v=x?"bottom":"right",b=x?"clientHeight":"clientWidth",j=a.reference[g]+a.reference[f]-m[f]-a.floating[g],S=m[f]-a.reference[f],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let M=P?P[b]:0;(!M||!await(o.isElement==null?void 0:o.isElement(P)))&&(M=l.floating[b]||a.floating[g]);const I=j/2-S/2,O=M/2-y[g]/2-1,L=_c(h[p],O),T=_c(h[v],O),k=L,E=M-y[g]-T,A=M/2-y[g]/2+I,q=q1(k,A,E),U=!c.arrow&&sf(i)!=null&&A!==q&&a.reference[g]/2-(A<k?L:T)-y[g]/2<0,R=U?A<k?A-k:A-E:0;return{[f]:m[f]+R,data:{[f]:q,centerOffset:A-q-R,...U&&{alignmentOffset:R}},reset:U}}}),Fq=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...x}=ol(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const p=ll(i),v=oo(l),b=ll(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(b||!y?[Ly(l)]:Oq(l)),P=g!=="none";!m&&P&&S.push(...Mq(l,y,g,j));const M=[l,...S],I=await lp(t,x),O=[];let L=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&O.push(I[p]),h){const A=Tq(i,o,j);O.push(I[A[0]],I[A[1]])}if(L=[...L,{placement:i,overflows:O}],!O.every(A=>A<=0)){var T,k;const A=(((T=a.flip)==null?void 0:T.index)||0)+1,q=M[A];if(q&&(!(h==="alignment"?v!==oo(q):!1)||L.every(C=>oo(C.placement)===v?C.overflows[0]>0:!0)))return{data:{index:A,overflows:L},reset:{placement:q}};let U=(k=L.filter(R=>R.overflows[0]<=0).sort((R,C)=>R.overflows[1]-C.overflows[1])[0])==null?void 0:k.placement;if(!U)switch(f){case"bestFit":{var E;const R=(E=L.filter(C=>{if(P){const F=oo(C.placement);return F===v||F==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(F=>F>0).reduce((F,X)=>F+X,0)]).sort((C,F)=>C[1]-F[1])[0])==null?void 0:E[0];R&&(U=R);break}case"initialPlacement":U=l;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function JS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ZS(e){return Sq.some(t=>e[t]>=0)}const Bq=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=ol(e,t);switch(n){case"referenceHidden":{const a=await lp(t,{...i,elementContext:"reference"}),o=JS(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ZS(o)}}}case"escaped":{const a=await lp(t,{...i,altBoundary:!0}),o=JS(a,r.floating);return{data:{escapedOffsets:o,escaped:ZS(o)}}}default:return{}}}}},CO=new Set(["left","top"]);async function qq(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ll(r),l=sf(r),c=oo(r)==="y",d=CO.has(o)?-1:1,u=a&&c?-1:1,h=ol(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(f=l==="end"?g*-1:g),c?{x:f*u,y:m*d}:{x:m*d,y:f*u}}const Uq=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await qq(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},zq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:p,y:v}=x;return{x:p,y:v}}},...c}=ol(e,t),d={x:r,y:n},u=await lp(t,c),h=oo(ll(i)),m=hj(h);let f=d[m],g=d[h];if(a){const x=m==="y"?"top":"left",p=m==="y"?"bottom":"right",v=f+u[x],b=f-u[p];f=q1(v,f,b)}if(o){const x=h==="y"?"top":"left",p=h==="y"?"bottom":"right",v=g+u[x],b=g-u[p];g=q1(v,g,b)}const y=l.fn({...t,[m]:f,[h]:g});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[m]:a,[h]:o}}}}}},Hq=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ol(e,t),u={x:r,y:n},h=oo(i),m=hj(h);let f=u[m],g=u[h];const y=ol(l,t),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const b=m==="y"?"height":"width",j=a.reference[m]-a.floating[b]+x.mainAxis,S=a.reference[m]+a.reference[b]-x.mainAxis;f<j?f=j:f>S&&(f=S)}if(d){var p,v;const b=m==="y"?"width":"height",j=CO.has(ll(i)),S=a.reference[h]-a.floating[b]+(j&&((p=o.offset)==null?void 0:p[h])||0)+(j?0:x.crossAxis),P=a.reference[h]+a.reference[b]+(j?0:((v=o.offset)==null?void 0:v[h])||0)-(j?x.crossAxis:0);g<S?g=S:g>P&&(g=P)}return{[m]:f,[h]:g}}}},Wq=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=ol(e,t),u=await lp(t,d),h=ll(i),m=sf(i),f=oo(i)==="y",{width:g,height:y}=a.floating;let x,p;h==="top"||h==="bottom"?(x=h,p=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(p=h,x=m==="end"?"top":"bottom");const v=y-u.top-u.bottom,b=g-u.left-u.right,j=_c(y-u[x],v),S=_c(g-u[p],b),P=!t.middlewareData.shift;let M=j,I=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(I=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(M=v),P&&!m){const L=wi(u.left,0),T=wi(u.right,0),k=wi(u.top,0),E=wi(u.bottom,0);f?I=g-2*(L!==0||T!==0?L+T:wi(u.left,u.right)):M=y-2*(k!==0||E!==0?k+E:wi(u.top,u.bottom))}await c({...t,availableWidth:I,availableHeight:M});const O=await o.getDimensions(l.floating);return g!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}};function Tx(){return typeof window<"u"}function af(e){return TO(e)?(e.nodeName||"").toLowerCase():"#document"}function Oi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wo(e){var t;return(t=(TO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TO(e){return Tx()?e instanceof Node||e instanceof Oi(e).Node:!1}function Fa(e){return Tx()?e instanceof Element||e instanceof Oi(e).Element:!1}function xo(e){return Tx()?e instanceof HTMLElement||e instanceof Oi(e).HTMLElement:!1}function XS(e){return!Tx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oi(e).ShadowRoot}const Vq=new Set(["inline","contents"]);function Fp(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Ba(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Vq.has(i)}const Yq=new Set(["table","td","th"]);function Kq(e){return Yq.has(af(e))}const Gq=[":popover-open",":modal"];function Ox(e){return Gq.some(t=>{try{return e.matches(t)}catch{return!1}})}const Jq=["transform","translate","scale","rotate","perspective"],Zq=["transform","translate","scale","rotate","perspective","filter"],Xq=["paint","layout","strict","content"];function pj(e){const t=gj(),r=Fa(e)?Ba(e):e;return Jq.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Zq.some(n=>(r.willChange||"").includes(n))||Xq.some(n=>(r.contain||"").includes(n))}function Qq(e){let t=Sc(e);for(;xo(t)&&!zh(t);){if(pj(t))return t;if(Ox(t))return null;t=Sc(t)}return null}function gj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $q=new Set(["html","body","#document"]);function zh(e){return $q.has(af(e))}function Ba(e){return Oi(e).getComputedStyle(e)}function Ex(e){return Fa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Sc(e){if(af(e)==="html")return e;const t=e.assignedSlot||e.parentNode||XS(e)&&e.host||wo(e);return XS(t)?t.host:t}function OO(e){const t=Sc(e);return zh(t)?e.ownerDocument?e.ownerDocument.body:e.body:xo(t)&&Fp(t)?t:OO(t)}function cp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=OO(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=Oi(i);if(a){const l=z1(o);return t.concat(o,o.visualViewport||[],Fp(i)?i:[],l&&r?cp(l):[])}return t.concat(i,cp(i,[],r))}function z1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function EO(e){const t=Ba(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=xo(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,l=Iy(r)!==a||Iy(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function vj(e){return Fa(e)?e:e.contextElement}function gh(e){const t=vj(e);if(!xo(t))return fo(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=EO(t);let o=(a?Iy(r.width):r.width)/n,l=(a?Iy(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const eU=fo(0);function AO(e){const t=Oi(e);return!gj()||!t.visualViewport?eU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function tU(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Oi(e)?!1:t}function Xd(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=vj(e);let o=fo(1);t&&(n?Fa(n)&&(o=gh(n)):o=gh(e));const l=tU(a,r,n)?AO(a):fo(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const m=Oi(a),f=n&&Fa(n)?Oi(n):n;let g=m,y=z1(g);for(;y&&n&&f!==g;){const x=gh(y),p=y.getBoundingClientRect(),v=Ba(y),b=p.left+(y.clientLeft+parseFloat(v.paddingLeft))*x.x,j=p.top+(y.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,h*=x.y,c+=b,d+=j,g=Oi(y),y=z1(g)}}return Fy({width:u,height:h,x:c,y:d})}function Ax(e,t){const r=Ex(e).scrollLeft;return t?t.left+r:Xd(wo(e)).left+r}function DO(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-Ax(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function rU(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=wo(n),l=t?Ox(t.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=fo(1);const u=fo(0),h=xo(n);if((h||!h&&!a)&&((af(n)!=="body"||Fp(o))&&(c=Ex(n)),xo(n))){const f=Xd(n);d=gh(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const m=o&&!h&&!a?DO(o,c):fo(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function nU(e){return Array.from(e.getClientRects())}function sU(e){const t=wo(e),r=Ex(e),n=e.ownerDocument.body,i=wi(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=wi(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Ax(e);const l=-r.scrollTop;return Ba(n).direction==="rtl"&&(o+=wi(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}const QS=25;function iU(e,t){const r=Oi(e),n=wo(e),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=gj();(!u||u&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const d=Ax(n);if(d<=0){const u=n.ownerDocument,h=u.body,m=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,g=Math.abs(n.clientWidth-h.clientWidth-f);g<=QS&&(a-=g)}else d<=QS&&(a+=d);return{width:a,height:o,x:l,y:c}}const aU=new Set(["absolute","fixed"]);function oU(e,t){const r=Xd(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=xo(e)?gh(e):fo(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=n*a.y;return{width:o,height:l,x:c,y:d}}function $S(e,t,r){let n;if(t==="viewport")n=iU(e,r);else if(t==="document")n=sU(wo(e));else if(Fa(t))n=oU(t,r);else{const i=AO(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Fy(n)}function MO(e,t){const r=Sc(e);return r===t||!Fa(r)||zh(r)?!1:Ba(r).position==="fixed"||MO(r,t)}function lU(e,t){const r=t.get(e);if(r)return r;let n=cp(e,[],!1).filter(l=>Fa(l)&&af(l)!=="body"),i=null;const a=Ba(e).position==="fixed";let o=a?Sc(e):e;for(;Fa(o)&&!zh(o);){const l=Ba(o),c=pj(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&aU.has(i.position)||Fp(o)&&!c&&MO(e,o))?n=n.filter(u=>u!==o):i=l,o=Sc(o)}return t.set(e,n),n}function cU(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?Ox(t)?[]:lU(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=$S(t,u,i);return d.top=wi(h.top,d.top),d.right=_c(h.right,d.right),d.bottom=_c(h.bottom,d.bottom),d.left=wi(h.left,d.left),d},$S(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function dU(e){const{width:t,height:r}=EO(e);return{width:t,height:r}}function uU(e,t,r){const n=xo(t),i=wo(t),a=r==="fixed",o=Xd(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=fo(0);function d(){c.x=Ax(i)}if(n||!n&&!a)if((af(t)!=="body"||Fp(i))&&(l=Ex(t)),n){const f=Xd(t,!0,a,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&d();a&&!n&&i&&d();const u=i&&!n&&!a?DO(i,l):fo(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function Ob(e){return Ba(e).position==="static"}function eP(e,t){if(!xo(e)||Ba(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return wo(e)===r&&(r=r.ownerDocument.body),r}function RO(e,t){const r=Oi(e);if(Ox(e))return r;if(!xo(e)){let i=Sc(e);for(;i&&!zh(i);){if(Fa(i)&&!Ob(i))return i;i=Sc(i)}return r}let n=eP(e,t);for(;n&&Kq(n)&&Ob(n);)n=eP(n,t);return n&&zh(n)&&Ob(n)&&!pj(n)?r:n||Qq(e)||r}const hU=async function(e){const t=this.getOffsetParent||RO,r=this.getDimensions,n=await r(e.floating);return{reference:uU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function fU(e){return Ba(e).direction==="rtl"}const mU={convertOffsetParentRelativeRectToViewportRelativeRect:rU,getDocumentElement:wo,getClippingRect:cU,getOffsetParent:RO,getElementRects:hU,getClientRects:nU,getDimensions:dU,getScale:gh,isElement:Fa,isRTL:fU};function IO(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pU(e,t){let r=null,n;const i=wo(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:f}=d;if(l||t(),!m||!f)return;const g=cv(h),y=cv(i.clientWidth-(u+m)),x=cv(i.clientHeight-(h+f)),p=cv(u),b={rootMargin:-g+"px "+-y+"px "+-x+"px "+-p+"px",threshold:wi(0,_c(1,c))||1};let j=!0;function S(P){const M=P[0].intersectionRatio;if(M!==c){if(!j)return o();M?o(!1,M):n=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!IO(d,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return o(!0),a}function gU(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=vj(e),u=i||a?[...d?cp(d):[],...cp(t)]:[];u.forEach(p=>{i&&p.addEventListener("scroll",r,{passive:!0}),a&&p.addEventListener("resize",r)});const h=d&&l?pU(d,r):null;let m=-1,f=null;o&&(f=new ResizeObserver(p=>{let[v]=p;v&&v.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(t)})),r()}),d&&!c&&f.observe(d),f.observe(t));let g,y=c?Xd(e):null;c&&x();function x(){const p=Xd(e);y&&!IO(y,p)&&r(),y=p,g=requestAnimationFrame(x)}return r(),()=>{var p;u.forEach(v=>{i&&v.removeEventListener("scroll",r),a&&v.removeEventListener("resize",r)}),h==null||h(),(p=f)==null||p.disconnect(),f=null,c&&cancelAnimationFrame(g)}}const vU=Uq,yU=zq,xU=Fq,bU=Wq,wU=Bq,tP=Lq,NU=Hq,jU=(e,t,r)=>{const n=new Map,i={platform:mU,...r},a={...i.platform,_c:n};return Iq(e,t,{...i,platform:a})};var _U=typeof document<"u",SU=function(){},ny=_U?w.useLayoutEffect:SU;function By(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!By(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!By(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function LO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rP(e,t){const r=LO(e);return Math.round(t*r)/r}function Eb(e){const t=w.useRef(e);return ny(()=>{t.current=e}),t}function PU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=w.useState(n);By(m,n)||f(n);const[g,y]=w.useState(null),[x,p]=w.useState(null),v=w.useCallback(C=>{C!==P.current&&(P.current=C,y(C))},[]),b=w.useCallback(C=>{C!==M.current&&(M.current=C,p(C))},[]),j=a||g,S=o||x,P=w.useRef(null),M=w.useRef(null),I=w.useRef(u),O=c!=null,L=Eb(c),T=Eb(i),k=Eb(d),E=w.useCallback(()=>{if(!P.current||!M.current)return;const C={placement:t,strategy:r,middleware:m};T.current&&(C.platform=T.current),jU(P.current,M.current,C).then(F=>{const X={...F,isPositioned:k.current!==!1};A.current&&!By(I.current,X)&&(I.current=X,du.flushSync(()=>{h(X)}))})},[m,t,r,T,k]);ny(()=>{d===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(C=>({...C,isPositioned:!1})))},[d]);const A=w.useRef(!1);ny(()=>(A.current=!0,()=>{A.current=!1}),[]),ny(()=>{if(j&&(P.current=j),S&&(M.current=S),j&&S){if(L.current)return L.current(j,S,E);E()}},[j,S,E,L,O]);const q=w.useMemo(()=>({reference:P,floating:M,setReference:v,setFloating:b}),[v,b]),U=w.useMemo(()=>({reference:j,floating:S}),[j,S]),R=w.useMemo(()=>{const C={position:r,left:0,top:0};if(!U.floating)return C;const F=rP(U.floating,u.x),X=rP(U.floating,u.y);return l?{...C,transform:"translate("+F+"px, "+X+"px)",...LO(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:X}},[r,l,U.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:E,refs:q,elements:U,floatingStyles:R}),[u,E,q,U,R])}const kU=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?tP({element:n.current,padding:i}).fn(r):{}:n?tP({element:n,padding:i}).fn(r):{}}}},CU=(e,t)=>({...vU(e),options:[e,t]}),TU=(e,t)=>({...yU(e),options:[e,t]}),OU=(e,t)=>({...NU(e),options:[e,t]}),EU=(e,t)=>({...xU(e),options:[e,t]}),AU=(e,t)=>({...bU(e),options:[e,t]}),DU=(e,t)=>({...wU(e),options:[e,t]}),MU=(e,t)=>({...kU(e),options:[e,t]});var RU="Arrow",FO=w.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return s.jsx(Ot.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});FO.displayName=RU;var IU=FO;function Dx(e){const[t,r]=w.useState(void 0);return ls(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var yj="Popper",[BO,Oc]=Is(yj),[LU,qO]=BO(yj),UO=e=>{const{__scopePopper:t,children:r}=e,[n,i]=w.useState(null);return s.jsx(LU,{scope:t,anchor:n,onAnchorChange:i,children:r})};UO.displayName=yj;var zO="PopperAnchor",HO=w.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,a=qO(zO,r),o=w.useRef(null),l=Kt(t,o),c=w.useRef(null);return w.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||o.current,d!==c.current&&a.onAnchorChange(c.current)}),n?null:s.jsx(Ot.div,{...i,ref:l})});HO.displayName=zO;var xj="PopperContent",[FU,BU]=BO(xj),WO=w.forwardRef((e,t)=>{var G,he,xe,Se,K,we;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:g,...y}=e,x=qO(xj,r),[p,v]=w.useState(null),b=Kt(t,Te=>v(Te)),[j,S]=w.useState(null),P=Dx(j),M=(P==null?void 0:P.width)??0,I=(P==null?void 0:P.height)??0,O=n+(a!=="center"?"-"+a:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(d)?d:[d],k=T.length>0,E={padding:L,boundary:T.filter(UU),altBoundary:k},{refs:A,floatingStyles:q,placement:U,isPositioned:R,middlewareData:C}=PU({strategy:"fixed",placement:O,whileElementsMounted:(...Te)=>gU(...Te,{animationFrame:f==="always"}),elements:{reference:x.anchor},middleware:[CU({mainAxis:i+I,alignmentAxis:o}),c&&TU({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?OU():void 0,...E}),c&&EU({...E}),AU({...E,apply:({elements:Te,rects:ae,availableWidth:H,availableHeight:Oe})=>{const{width:pe,height:je}=ae.reference,_e=Te.floating.style;_e.setProperty("--radix-popper-available-width",`${H}px`),_e.setProperty("--radix-popper-available-height",`${Oe}px`),_e.setProperty("--radix-popper-anchor-width",`${pe}px`),_e.setProperty("--radix-popper-anchor-height",`${je}px`)}}),j&&MU({element:j,padding:l}),zU({arrowWidth:M,arrowHeight:I}),m&&DU({strategy:"referenceHidden",...E})]}),[F,X]=KO(U),re=Rn(g);ls(()=>{R&&(re==null||re())},[R,re]);const z=(G=C.arrow)==null?void 0:G.x,Y=(he=C.arrow)==null?void 0:he.y,J=((xe=C.arrow)==null?void 0:xe.centerOffset)!==0,[ne,le]=w.useState();return ls(()=>{p&&le(window.getComputedStyle(p).zIndex)},[p]),s.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:R?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(Se=C.transformOrigin)==null?void 0:Se.x,(K=C.transformOrigin)==null?void 0:K.y].join(" "),...((we=C.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(FU,{scope:r,placedSide:F,onArrowChange:S,arrowX:z,arrowY:Y,shouldHideArrow:J,children:s.jsx(Ot.div,{"data-side":F,"data-align":X,...y,ref:b,style:{...y.style,animation:R?void 0:"none"}})})})});WO.displayName=xj;var VO="PopperArrow",qU={top:"bottom",right:"left",bottom:"top",left:"right"},YO=w.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,a=BU(VO,n),o=qU[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(IU,{...i,ref:r,style:{...i.style,display:"block"}})})});YO.displayName=VO;function UU(e){return e!==null}var zU=e=>({name:"transformOrigin",options:e,fn(t){var x,p,v;const{placement:r,rects:n,middlewareData:i}=t,o=((x=i.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=KO(r),h={start:"0%",center:"50%",end:"100%"}[u],m=(((p=i.arrow)==null?void 0:p.x)??0)+l/2,f=(((v=i.arrow)==null?void 0:v.y)??0)+c/2;let g="",y="";return d==="bottom"?(g=o?h:`${m}px`,y=`${-c}px`):d==="top"?(g=o?h:`${m}px`,y=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,y=o?h:`${f}px`):d==="left"&&(g=`${n.floating.width+c}px`,y=o?h:`${f}px`),{data:{x:g,y}}}});function KO(e){const[t,r="center"]=e.split("-");return[t,r]}var Mx=UO,Bp=HO,Rx=WO,Ix=YO,HU=Symbol("radix.slottable");function WU(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=HU,t}var[Lx]=Is("Tooltip",[Oc]),Fx=Oc(),GO="TooltipProvider",VU=700,H1="tooltip.open",[YU,bj]=Lx(GO),JO=e=>{const{__scopeTooltip:t,delayDuration:r=VU,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=e,o=w.useRef(!0),l=w.useRef(!1),c=w.useRef(0);return w.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(YU,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:w.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};JO.displayName=GO;var dp="Tooltip",[KU,Bx]=Lx(dp),ZO=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=bj(dp,e.__scopeTooltip),d=Fx(t),[u,h]=w.useState(null),m=na(),f=w.useRef(0),g=o??c.disableHoverableContent,y=l??c.delayDuration,x=w.useRef(!1),[p,v]=la({prop:n,defaultProp:i??!1,onChange:M=>{M?(c.onOpen(),document.dispatchEvent(new CustomEvent(H1))):c.onClose(),a==null||a(M)},caller:dp}),b=w.useMemo(()=>p?x.current?"delayed-open":"instant-open":"closed",[p]),j=w.useCallback(()=>{window.clearTimeout(f.current),f.current=0,x.current=!1,v(!0)},[v]),S=w.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),P=w.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{x.current=!0,v(!0),f.current=0},y)},[y,v]);return w.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),s.jsx(Mx,{...d,children:s.jsx(KU,{scope:t,contentId:m,open:p,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:w.useCallback(()=>{c.isOpenDelayedRef.current?P():j()},[c.isOpenDelayedRef,P,j]),onTriggerLeave:w.useCallback(()=>{g?S():(window.clearTimeout(f.current),f.current=0)},[S,g]),onOpen:j,onClose:S,disableHoverableContent:g,children:r})})};ZO.displayName=dp;var W1="TooltipTrigger",XO=w.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Bx(W1,r),a=bj(W1,r),o=Fx(r),l=w.useRef(null),c=Kt(t,l,i.onTriggerChange),d=w.useRef(!1),u=w.useRef(!1),h=w.useCallback(()=>d.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(Bp,{asChild:!0,...o,children:s.jsx(Ot.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:st(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:st(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:st(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:st(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:st(e.onBlur,i.onClose),onClick:st(e.onClick,i.onClose)})})});XO.displayName=W1;var GU="TooltipPortal",[_ae,JU]=Lx(GU,{forceMount:void 0}),Hh="TooltipContent",QO=w.forwardRef((e,t)=>{const r=JU(Hh,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...a}=e,o=Bx(Hh,e.__scopeTooltip);return s.jsx(cs,{present:n||o.open,children:o.disableHoverableContent?s.jsx($O,{side:i,...a,ref:t}):s.jsx(ZU,{side:i,...a,ref:t})})}),ZU=w.forwardRef((e,t)=>{const r=Bx(Hh,e.__scopeTooltip),n=bj(Hh,e.__scopeTooltip),i=w.useRef(null),a=Kt(t,i),[o,l]=w.useState(null),{trigger:c,onClose:d}=r,u=i.current,{onPointerInTransitChange:h}=n,m=w.useCallback(()=>{l(null),h(!1)},[h]),f=w.useCallback((g,y)=>{const x=g.currentTarget,p={x:g.clientX,y:g.clientY},v=tz(p,x.getBoundingClientRect()),b=rz(p,v),j=nz(y.getBoundingClientRect()),S=iz([...b,...j]);l(S),h(!0)},[h]);return w.useEffect(()=>()=>m(),[m]),w.useEffect(()=>{if(c&&u){const g=x=>f(x,u),y=x=>f(x,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[c,u,f,m]),w.useEffect(()=>{if(o){const g=y=>{const x=y.target,p={x:y.clientX,y:y.clientY},v=(c==null?void 0:c.contains(x))||(u==null?void 0:u.contains(x)),b=!sz(p,o);v?m():b&&(m(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,d,m]),s.jsx($O,{...e,ref:a})}),[XU,QU]=Lx(dp,{isInside:!1}),$U=WU("TooltipContent"),$O=w.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=Bx(Hh,r),d=Fx(r),{onClose:u}=c;return w.useEffect(()=>(document.addEventListener(H1,u),()=>document.removeEventListener(H1,u)),[u]),w.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),s.jsx(uu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:s.jsxs(Rx,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx($U,{children:n}),s.jsx(XU,{scope:r,isInside:!0,children:s.jsx(k9,{id:c.contentId,role:"tooltip",children:i||n})})]})})});QO.displayName=Hh;var eE="TooltipArrow",ez=w.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Fx(r);return QU(eE,r).isInside?null:s.jsx(Ix,{...i,...n,ref:t})});ez.displayName=eE;function tz(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,i,a)){case a:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function rz(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function nz(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function sz(e,t){const{x:r,y:n}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],d=l.x,u=l.y,h=c.x,m=c.y;u>n!=m>n&&r<(h-d)*(n-u)/(m-u)+d&&(i=!i)}return i}function iz(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),az(t)}function az(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var oz=JO,lz=ZO,cz=XO,tE=QO;const rE=oz,dz=lz,uz=cz,nE=w.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(tE,{ref:n,sideOffset:t,className:$e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));nE.displayName=tE.displayName;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},up.apply(this,arguments)}var oc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oc||(oc={}));const nP="popstate";function hz(e){e===void 0&&(e={});function t(i,a){let{pathname:o="/",search:l="",hash:c=""}=hu(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),V1("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=i.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof a=="string"?a:sE(a))}function n(i,a){qx(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return mz(t,r,n,e)}function Hn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fz(){return Math.random().toString(36).substr(2,8)}function sP(e,t){return{usr:e.state,key:e.key,idx:t}}function V1(e,t,r,n){return r===void 0&&(r=null),up({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hu(t):t,{state:r,key:t&&t.key||n||fz()})}function sE(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function hu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function mz(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=oc.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(up({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=oc.Pop;let x=u(),p=x==null?null:x-d;d=x,c&&c({action:l,location:y.location,delta:p})}function m(x,p){l=oc.Push;let v=V1(y.location,x,p);r&&r(v,x),d=u()+1;let b=sP(v,d),j=y.createHref(v);try{o.pushState(b,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}a&&c&&c({action:l,location:y.location,delta:1})}function f(x,p){l=oc.Replace;let v=V1(y.location,x,p);r&&r(v,x),d=u();let b=sP(v,d),j=y.createHref(v);o.replaceState(b,"",j),a&&c&&c({action:l,location:y.location,delta:0})}function g(x){let p=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof x=="string"?x:sE(x);return v=v.replace(/ $/,"%20"),Hn(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let y={get action(){return l},get location(){return e(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(nP,h),c=x,()=>{i.removeEventListener(nP,h),c=null}},createHref(x){return t(i,x)},createURL:g,encodeLocation(x){let p=g(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:f,go(x){return o.go(x)}};return y}var iP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(iP||(iP={}));function pz(e,t,r){return r===void 0&&(r="/"),gz(e,t,r)}function gz(e,t,r,n){let i=typeof t=="string"?hu(t):t,a=oE(i.pathname||"/",r);if(a==null)return null;let o=iE(e);vz(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Tz(a);l=Pz(o[c],d)}return l}function iE(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Hn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=qd([n,c.relativePath]),u=r.concat(c);a.children&&a.children.length>0&&(Hn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),iE(a.children,t,u,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:_z(d,a.index),routesMeta:u})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of aE(a.path))i(a,o,c)}),t}function aE(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=aE(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function vz(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Sz(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const yz=/^:[\w-]+$/,xz=3,bz=2,wz=1,Nz=10,jz=-2,aP=e=>e==="*";function _z(e,t){let r=e.split("/"),n=r.length;return r.some(aP)&&(n+=jz),t&&(n+=bz),r.filter(i=>!aP(i)).reduce((i,a)=>i+(yz.test(a)?xz:a===""?wz:Nz),n)}function Sz(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Pz(e,t,r){let{routesMeta:n}=e,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=kz({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:qd([a,h.pathname]),pathnameBase:Mz(qd([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=qd([a,h.pathnameBase]))}return o}function kz(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Cz(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:m,isOptional:f}=u;if(m==="*"){let y=l[h]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[h];return f&&!g?d[m]=void 0:d[m]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function Cz(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),qx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Tz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function oE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Oz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ez=e=>Oz.test(e);function Az(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?hu(e):e,a;if(r)if(Ez(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),qx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=oP(r.substring(1),"/"):a=oP(r,t)}else a=t;return{pathname:a,search:Rz(n),hash:Iz(i)}}function oP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Ab(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function lE(e,t){let r=Dz(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function cE(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=hu(e):(i=up({},e),Hn(!i.pathname||!i.pathname.includes("?"),Ab("?","pathname","search",i)),Hn(!i.pathname||!i.pathname.includes("#"),Ab("#","pathname","hash",i)),Hn(!i.search||!i.search.includes("#"),Ab("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=Az(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const qd=e=>e.join("/").replace(/\/\/+/g,"/"),Mz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Rz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Iz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Lz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dE=["post","put","patch","delete"];new Set(dE);const Fz=["get",...dE];new Set(Fz);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hp.apply(this,arguments)}const wj=w.createContext(null),Bz=w.createContext(null),qp=w.createContext(null),Ux=w.createContext(null),fu=w.createContext({outlet:null,matches:[],isDataRoute:!1}),uE=w.createContext(null);function Up(){return w.useContext(Ux)!=null}function zp(){return Up()||Hn(!1),w.useContext(Ux).location}function hE(e){w.useContext(qp).static||w.useLayoutEffect(e)}function Hp(){let{isDataRoute:e}=w.useContext(fu);return e?Qz():qz()}function qz(){Up()||Hn(!1);let e=w.useContext(wj),{basename:t,future:r,navigator:n}=w.useContext(qp),{matches:i}=w.useContext(fu),{pathname:a}=zp(),o=JSON.stringify(lE(i,r.v7_relativeSplatPath)),l=w.useRef(!1);return hE(()=>{l.current=!0}),w.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=cE(d,JSON.parse(o),a,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:qd([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,a,e])}function Uz(e,t){return zz(e,t)}function zz(e,t,r,n){Up()||Hn(!1);let{navigator:i}=w.useContext(qp),{matches:a}=w.useContext(fu),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=zp(),u;if(t){var h;let x=typeof t=="string"?hu(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||Hn(!1),u=x}else u=d;let m=u.pathname||"/",f=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=pz(e,{pathname:f}),y=Kz(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:qd([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:qd([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,n);return t&&y?w.createElement(Ux.Provider,{value:{location:hp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:oc.Pop}},y):y}function Hz(){let e=Xz(),t=Lz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:i},r):null,null)}const Wz=w.createElement(Hz,null);class Vz extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(fu.Provider,{value:this.props.routeContext},w.createElement(uE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yz(e){let{routeContext:t,match:r,children:n}=e,i=w.useContext(wj);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(fu.Provider,{value:t},n)}function Kz(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Hn(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:f}=r,g=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let f,g=!1,y=null,x=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||Wz,c&&(d<0&&m===0?($z("route-fallback"),g=!0,x=null):d===m&&(g=!0,x=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,m+1)),v=()=>{let b;return f?b=y:g?b=x:h.route.Component?b=w.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,w.createElement(Yz,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?w.createElement(Vz,{location:r.location,revalidation:r.revalidation,component:y,error:f,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var fE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fE||{}),mE=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mE||{});function Gz(e){let t=w.useContext(wj);return t||Hn(!1),t}function Jz(e){let t=w.useContext(Bz);return t||Hn(!1),t}function Zz(e){let t=w.useContext(fu);return t||Hn(!1),t}function pE(e){let t=Zz(),r=t.matches[t.matches.length-1];return r.route.id||Hn(!1),r.route.id}function Xz(){var e;let t=w.useContext(uE),r=Jz(),n=pE();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Qz(){let{router:e}=Gz(fE.UseNavigateStable),t=pE(mE.UseNavigateStable),r=w.useRef(!1);return hE(()=>{r.current=!0}),w.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,hp({fromRouteId:t},a)))},[e,t])}const lP={};function $z(e,t,r){lP[e]||(lP[e]=!0)}function eH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function tH(e){let{to:t,replace:r,state:n,relative:i}=e;Up()||Hn(!1);let{future:a,static:o}=w.useContext(qp),{matches:l}=w.useContext(fu),{pathname:c}=zp(),d=Hp(),u=cE(t,lE(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return w.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:i}),[d,h,i,r,n]),null}function Hi(e){Hn(!1)}function rH(e){let{basename:t="/",children:r=null,location:n,navigationType:i=oc.Pop,navigator:a,static:o=!1,future:l}=e;Up()&&Hn(!1);let c=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:a,static:o,future:hp({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=hu(n));let{pathname:u="/",search:h="",hash:m="",state:f=null,key:g="default"}=n,y=w.useMemo(()=>{let x=oE(u,c);return x==null?null:{location:{pathname:x,search:h,hash:m,state:f,key:g},navigationType:i}},[c,u,h,m,f,g,i]);return y==null?null:w.createElement(qp.Provider,{value:d},w.createElement(Ux.Provider,{children:r,value:y}))}function nH(e){let{children:t,location:r}=e;return Uz(Y1(t),r)}new Promise(()=>{});function Y1(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,i)=>{if(!w.isValidElement(n))return;let a=[...t,i];if(n.type===w.Fragment){r.push.apply(r,Y1(n.props.children,a));return}n.type!==Hi&&Hn(!1),!n.props.index||!n.props.children||Hn(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Y1(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sH="6";try{window.__reactRouterVersion=sH}catch{}const iH="startTransition",cP=dx[iH];function aH(e){let{basename:t,children:r,future:n,window:i}=e,a=w.useRef();a.current==null&&(a.current=hz({window:i,v5Compat:!0}));let o=a.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=w.useCallback(h=>{d&&cP?cP(()=>c(h)):c(h)},[c,d]);return w.useLayoutEffect(()=>o.listen(u),[o,u]),w.useEffect(()=>eH(n),[n]),w.createElement(rH,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var dP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dP||(dP={}));var uP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uP||(uP={}));var K1=function(e,t){return K1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},K1(e,t)};function gE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");K1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var $i=function(){return $i=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},$i.apply(this,arguments)};function Ec(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function vE(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function yE(e,t){return function(r,n){t(r,n,e)}}function xE(e,t,r,n,i,a){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h,m=!1,f=r.length-1;f>=0;f--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(p){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(p||null))};var x=(0,r[f])(l==="accessor"?{get:u.get,set:u.set}:u[c],g);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=o(x.get))&&(u.get=h),(h=o(x.set))&&(u.set=h),(h=o(x.init))&&i.unshift(h)}else(h=o(x))&&(l==="field"?i.unshift(h):u[c]=h)}d&&Object.defineProperty(d,n.name,u),m=!0}function bE(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function wE(e){return typeof e=="symbol"?e:"".concat(e)}function NE(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function jE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Mt(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function _E(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],i=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var zx=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function SE(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zx(t,e,r)}function qy(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nj(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function PE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Nj(arguments[t]));return e}function kE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)n[i]=a[o];return n}function jj(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Wh(e){return this instanceof Wh?(this.v=e,this):new Wh(e)}function CE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(g){return Promise.resolve(g).then(f,h)}}function l(f,g){n[f]&&(i[f]=function(y){return new Promise(function(x,p){a.push([f,y,x,p])>1||c(f,y)})},g&&(i[f]=g(i[f])))}function c(f,g){try{d(n[f](g))}catch(y){m(a[0][3],y)}}function d(f){f.value instanceof Wh?Promise.resolve(f.value.v).then(u,h):m(a[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function m(f,g){f(g),a.shift(),a.length&&c(a[0][0],a[0][1])}}function TE(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=e[i]?function(o){return(r=!r)?{value:Wh(e[i](o)),done:!1}:a?a(o):o}:a}}function OE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof qy=="function"?qy(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(o){return new Promise(function(l,c){o=e[a](o),i(l,c,o.done,o.value)})}}function i(a,o,l,c){Promise.resolve(c).then(function(d){a({value:d,done:l})},o)}}function EE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var oH=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},G1=function(e){return G1=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},G1(e)};function AE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=G1(e),n=0;n<r.length;n++)r[n]!=="default"&&zx(t,e,r[n]);return oH(t,e),t}function DE(e){return e&&e.__esModule?e:{default:e}}function ME(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function RE(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function IE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function LE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var lH=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function FE(e){function t(a){e.error=e.hasError?new lH(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function BE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,o){return n?t?".jsx":".js":i&&(!a||!o)?r:i+a+"."+o.toLowerCase()+"js"}):e}const cH={__extends:gE,__assign:$i,__rest:Ec,__decorate:vE,__param:yE,__esDecorate:xE,__runInitializers:bE,__propKey:wE,__setFunctionName:NE,__metadata:jE,__awaiter:Mt,__generator:_E,__createBinding:zx,__exportStar:SE,__values:qy,__read:Nj,__spread:PE,__spreadArrays:kE,__spreadArray:jj,__await:Wh,__asyncGenerator:CE,__asyncDelegator:TE,__asyncValues:OE,__makeTemplateObject:EE,__importStar:AE,__importDefault:DE,__classPrivateFieldGet:ME,__classPrivateFieldSet:RE,__classPrivateFieldIn:IE,__addDisposableResource:LE,__disposeResources:FE,__rewriteRelativeImportExtension:BE},dH=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:LE,get __assign(){return $i},__asyncDelegator:TE,__asyncGenerator:CE,__asyncValues:OE,__await:Wh,__awaiter:Mt,__classPrivateFieldGet:ME,__classPrivateFieldIn:IE,__classPrivateFieldSet:RE,__createBinding:zx,__decorate:vE,__disposeResources:FE,__esDecorate:xE,__exportStar:SE,__extends:gE,__generator:_E,__importDefault:DE,__importStar:AE,__makeTemplateObject:EE,__metadata:jE,__param:yE,__propKey:wE,__read:Nj,__rest:Ec,__rewriteRelativeImportExtension:BE,__runInitializers:bE,__setFunctionName:NE,__spread:PE,__spreadArray:jj,__spreadArrays:kE,__values:qy,default:cH},Symbol.toStringTag,{value:"Module"})),uH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class _j extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class hH extends _j{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hP extends _j{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fP extends _j{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var J1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(J1||(J1={}));class fH{constructor(t,{headers:r={},customFetch:n,region:i=J1.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=uH(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Mt(this,arguments,void 0,function*(r,n={}){var i;let a,o;try{const{headers:l,method:c,body:d,signal:u,timeout:h}=n;let m={},{region:f}=n;f||(f=this.region);const g=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let y;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)):y=d;let x=u;h&&(o=new AbortController,a=setTimeout(()=>o.abort(),h),u?(x=o.signal,u.addEventListener("abort",()=>o.abort())):x=o.signal);const p=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:y,signal:x}).catch(S=>{throw new hH(S)}),v=p.headers.get("x-relay-error");if(v&&v==="true")throw new hP(p);if(!p.ok)throw new fP(p);let b=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return b==="application/json"?j=yield p.json():b==="application/octet-stream"||b==="application/pdf"?j=yield p.blob():b==="text/event-stream"?j=p:b==="multipart/form-data"?j=yield p.formData():j=yield p.text(),{data:j,error:null,response:p}}catch(l){return{data:null,error:l,response:l instanceof fP||l instanceof hP?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var Ws={};const of=yL(dH);var dv={},uv={},hv={},fv={},mv={},pv={},mP;function qE(){if(mP)return pv;mP=1,Object.defineProperty(pv,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return pv.default=e,pv}var pP;function UE(){if(pP)return mv;pP=1,Object.defineProperty(mv,"__esModule",{value:!0});const t=of.__importDefault(qE());class r{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,h,m;let f=null,g=null,y=null,x=c.status,p=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=S:g=JSON.parse(S))}const b=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),j=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&j&&j.length>1&&(y=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,x=406,p="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await c.text();try{f=JSON.parse(b),Array.isArray(f)&&c.status===404&&(g=[],f=null,x=200,p="OK")}catch{c.status===404&&b===""?(x=204,p="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((m=f==null?void 0:f.details)===null||m===void 0)&&m.includes("0 rows"))&&(f=null,x=200,p="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:g,count:y,status:x,statusText:p}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,u,h;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(u=c==null?void 0:c.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return mv.default=r,mv}var gP;function zE(){if(gP)return fv;gP=1,Object.defineProperty(fv,"__esModule",{value:!0});const t=of.__importDefault(UE());class r extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const h=[i?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${m}"; options=${h};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return fv.default=r,fv}var vP;function Sj(){if(vP)return hv;vP=1,Object.defineProperty(hv,"__esModule",{value:!0});const t=of.__importDefault(zE()),r=new RegExp("[,()]");class n extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const u=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${u}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return hv.default=n,hv}var yP;function HE(){if(yP)return uv;yP=1,Object.defineProperty(uv,"__esModule",{value:!0});const t=of.__importDefault(Sj());class r{constructor(i,{headers:a={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(i,a){const{head:o=!1,count:l}=a??{},c=o?"HEAD":"GET";let d=!1;const u=(i??"*").split("").map(h=>/\s/.test(h)&&!d?"":(h==='"'&&(d=!d),h)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(h.length>0){const m=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return uv.default=r,uv}var xP;function mH(){if(xP)return dv;xP=1,Object.defineProperty(dv,"__esModule",{value:!0});const e=of,t=e.__importDefault(HE()),r=e.__importDefault(Sj());class n{constructor(a,{headers:o={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(a){const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:c=!1,count:d}={}){var u;let h;const m=new URL(`${this.url}/rpc/${a}`);let f;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{m.searchParams.append(y,x)})):(h="POST",f=o);const g=new Headers(this.headers);return d&&g.set("Prefer",`count=${d}`),new r.default({method:h,url:m,headers:g,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return dv.default=n,dv}Object.defineProperty(Ws,"__esModule",{value:!0});var WE=Ws.PostgrestError=eA=Ws.PostgrestBuilder=QE=Ws.PostgrestTransformBuilder=ZE=Ws.PostgrestFilterBuilder=GE=Ws.PostgrestQueryBuilder=YE=Ws.PostgrestClient=void 0;const lf=of,VE=lf.__importDefault(mH());var YE=Ws.PostgrestClient=VE.default;const KE=lf.__importDefault(HE());var GE=Ws.PostgrestQueryBuilder=KE.default;const JE=lf.__importDefault(Sj());var ZE=Ws.PostgrestFilterBuilder=JE.default;const XE=lf.__importDefault(zE());var QE=Ws.PostgrestTransformBuilder=XE.default;const $E=lf.__importDefault(UE());var eA=Ws.PostgrestBuilder=$E.default;const tA=lf.__importDefault(qE());WE=Ws.PostgrestError=tA.default;var rA=Ws.default={PostgrestClient:VE.default,PostgrestQueryBuilder:KE.default,PostgrestFilterBuilder:JE.default,PostgrestTransformBuilder:XE.default,PostgrestBuilder:$E.default,PostgrestError:tA.default};const pH=S4({__proto__:null,get PostgrestBuilder(){return eA},get PostgrestClient(){return YE},get PostgrestError(){return WE},get PostgrestFilterBuilder(){return ZE},get PostgrestQueryBuilder(){return GE},get PostgrestTransformBuilder(){return QE},default:rA},[Ws]),{PostgrestClient:gH,PostgrestQueryBuilder:Sae,PostgrestFilterBuilder:Pae,PostgrestTransformBuilder:kae,PostgrestBuilder:Cae,PostgrestError:Tae}=rA||pH;class vH{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const yH="2.81.1",xH=`realtime-js/${yH}`,nA="1.0.0",bH="2.0.0",bP=nA,Z1=1e4,wH=1e3,NH=100;var fd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fd||(fd={}));var Zn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zn||(Zn={}));var Ki;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ki||(Ki={}));var X1;(function(e){e.websocket="websocket"})(X1||(X1={}));var md;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(md||(md={}));class jH{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){const{join_ref:r,ref:n,event:i,topic:a,payload:o}=t,l=this.META_LENGTH+r.length+n.length+a.length+i.length,c=new ArrayBuffer(this.HEADER_LENGTH+l);let d=new DataView(c),u=0;d.setUint8(u++,this.KINDS.push),d.setUint8(u++,r.length),d.setUint8(u++,n.length),d.setUint8(u++,a.length),d.setUint8(u++,i.length),Array.from(r,m=>d.setUint8(u++,m.charCodeAt(0))),Array.from(n,m=>d.setUint8(u++,m.charCodeAt(0))),Array.from(a,m=>d.setUint8(u++,m.charCodeAt(0))),Array.from(i,m=>d.setUint8(u++,m.charCodeAt(0)));var h=new Uint8Array(c.byteLength+o.byteLength);return h.set(new Uint8Array(c),0),h.set(new Uint8Array(o),c.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const{join_ref:i,ref:a,topic:o}=t,l=t.payload.event,c=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),d=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+o.length+l.length,u=new ArrayBuffer(this.HEADER_LENGTH+d);let h=new DataView(u),m=0;h.setUint8(m++,this.KINDS.userBroadcastPush),h.setUint8(m++,i.length),h.setUint8(m++,a.length),h.setUint8(m++,o.length),h.setUint8(m++,l.length),h.setUint8(m++,this.BINARY_ENCODING),Array.from(i,g=>h.setUint8(m++,g.charCodeAt(0))),Array.from(a,g=>h.setUint8(m++,g.charCodeAt(0))),Array.from(o,g=>h.setUint8(m++,g.charCodeAt(0))),Array.from(l,g=>h.setUint8(m++,g.charCodeAt(0)));var f=new Uint8Array(u.byteLength+c.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(c),u.byteLength),f.buffer}_encodeJsonUserBroadcastPush(t){var r,n;const{join_ref:i,ref:a,topic:o}=t,l=t.payload.event,c=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(c)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+o.length+l.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let f=new DataView(m),g=0;f.setUint8(g++,this.KINDS.userBroadcastPush),f.setUint8(g++,i.length),f.setUint8(g++,a.length),f.setUint8(g++,o.length),f.setUint8(g++,l.length),f.setUint8(g++,this.JSON_ENCODING),Array.from(i,x=>f.setUint8(g++,x.charCodeAt(0))),Array.from(a,x=>f.setUint8(g++,x.charCodeAt(0))),Array.from(o,x=>f.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>f.setUint8(g++,x.charCodeAt(0)));var y=new Uint8Array(m.byteLength+u.byteLength);return y.set(new Uint8Array(m),0),y.set(new Uint8Array(u),m.byteLength),y.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,a,o,l,c]=n;return r({join_ref:i,ref:a,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,i);case this.KINDS.reply:return this._decodeReply(t,r,i);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodePush(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+a));l=l+a;const u=n.decode(t.slice(l,l+o));l=l+o;const h=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:d,event:u,payload:h}}_decodeReply(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const d=n.decode(t.slice(c,c+i));c=c+i;const u=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+o));c=c+o;const m=n.decode(t.slice(c,c+l));c=c+l;const f=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:m,response:f};return{join_ref:d,ref:u,topic:h,event:Ki.reply,payload:g}}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+i));o=o+i;const c=n.decode(t.slice(o,o+a));o=o+a;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:d}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(t.slice(c,c+i));c=c+i;const u=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),f=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,g={type:this.BROADCAST,event:u,payload:f};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class sA{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Hr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Hr||(Hr={}));const wP=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=_H(o,e,t,i),a),{}):{}},_H=(e,t,r,n)=>{const i=t.find(l=>l.name===e),a=i==null?void 0:i.type,o=r[e];return a&&!n.includes(a)?iA(a,o):Q1(o)},iA=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return CH(t,r)}switch(e){case Hr.bool:return SH(t);case Hr.float4:case Hr.float8:case Hr.int2:case Hr.int4:case Hr.int8:case Hr.numeric:case Hr.oid:return PH(t);case Hr.json:case Hr.jsonb:return kH(t);case Hr.timestamp:return TH(t);case Hr.abstime:case Hr.date:case Hr.daterange:case Hr.int4range:case Hr.int8range:case Hr.money:case Hr.reltime:case Hr.text:case Hr.time:case Hr.timestamptz:case Hr.timetz:case Hr.tsrange:case Hr.tstzrange:return Q1(t);default:return Q1(t)}},Q1=e=>e,SH=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PH=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kH=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},CH=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>iA(t,l))}return e},TH=e=>typeof e=="string"?e.replace(" ","T"):e,aA=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Db{constructor(t,r,n={},i=Z1){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var NP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(NP||(NP={}));class Mm{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mm.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=Mm.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Mm.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=a[d];if(h){const m=u.map(x=>x.presence_ref),f=h.map(x=>x.presence_ref),g=u.filter(x=>f.indexOf(x.presence_ref)<0),y=h.filter(x=>m.indexOf(x.presence_ref)<0);g.length>0&&(l[d]=g),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,i(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jP||(jP={}));var Rm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Rm||(Rm={}));var Ho;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ho||(Ho={}));class Pj{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Db(this,Ki.join,this.params,this.timeout),this.rejoinTimer=new sA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ki.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Mm(this),this.broadcastEndpointURL=aA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Zn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Rm.PRESENCE]&&this.bindings[Rm.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Ho.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Ho.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(Ho.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,p=[];for(let v=0;v<x;v++){const b=y[v],{filter:{event:j,schema:S,table:P,filter:M}}=b,I=f&&f[v];if(I&&I.event===j&&I.schema===S&&I.table===P&&I.filter===M)p.push(Object.assign(Object.assign({},b),{id:I.id}));else{this.unsubscribe(),this.state=Zn.errored,t==null||t(Ho.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Ho.SUBSCRIBED);return}}).receive("error",f=>{this.state=Zn.errored,t==null||t(Ho.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ho.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Zn.joined&&t===Rm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ki.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Db(this,Ki.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Db(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>NH){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ki;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,y,x;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(y=f.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var g,y,x,p,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const j=f.id,S=(g=f.filter)===null||g===void 0?void 0:g.event;return j&&((y=r.ids)===null||y===void 0?void 0:y.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(v=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:y,table:x,commit_timestamp:p,type:v,errors:b}=g;m=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:p,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(g))}f.callback(m,n)})}_isClosed(){return this.state===Zn.closed}_isJoined(){return this.state===Zn.joined}_isJoining(){return this.state===Zn.joining}_isLeaving(){return this.state===Zn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Pj.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ki.close,{},t)}_onError(t){this._on(Ki.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=wP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=wP(t.columns,t.old_record)),r}}const Mb=()=>{},gv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},OH=[1e3,2e3,5e3,1e4],EH=1e4,AH=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DH{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Z1,this.transport=null,this.heartbeatIntervalMs=gv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mb,this.ref=0,this.reconnectTimer=null,this.vsn=bP,this.logger=Mb,this.conn=null,this.sendBuffer=[],this.serializer=new jH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${X1.websocket}`,this.httpEndpoint=aA(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vH.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fd.connecting:return md.Connecting;case fd.open:return md.Open;case fd.closing:return md.Closing;default:return md.Closed}}isConnected(){return this.connectionState()===md.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Pj(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(wH,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},gv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===fd.open||this.conn.readyState===fd.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ki.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([AH],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:xH};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ki.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,o,l,c,d,u,h,m,f;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Z1,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:gv.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Mb,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:bP,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:g=>OH[g-1]||EH,this.vsn){case nA:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(g,y)=>y(JSON.stringify(g)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case bH:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class kj extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function un(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class MH extends kj{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $1 extends kj{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Cj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RH=()=>Response,e2=e=>{if(Array.isArray(e))return e.map(r=>e2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=e2(n)}),t},IH=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Rb=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},LH=(e,t,r)=>Mt(void 0,void 0,void 0,function*(){const n=yield RH();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new MH(Rb(i),a,o))}).catch(i=>{t(new $1(Rb(i),i))}):t(new $1(Rb(e),e))}),FH=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(IH(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Wp(e,t,r,n,i,a){return Mt(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,FH(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>LH(c,l,n))})})}function fp(e,t,r,n){return Mt(this,void 0,void 0,function*(){return Wp(e,"GET",t,r,n)})}function ka(e,t,r,n,i){return Mt(this,void 0,void 0,function*(){return Wp(e,"POST",t,n,i,r)})}function t2(e,t,r,n,i){return Mt(this,void 0,void 0,function*(){return Wp(e,"PUT",t,n,i,r)})}function BH(e,t,r,n){return Mt(this,void 0,void 0,function*(){return Wp(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Tj(e,t,r,n,i){return Mt(this,void 0,void 0,function*(){return Wp(e,"DELETE",t,n,i,r)})}class qH{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Mt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(un(t))return{data:null,error:t};throw t}})}}var oA;class UH{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[oA]="BlobDownloadBuilder",this.promise=null}asStream(){return new qH(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Mt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(un(t))return{data:null,error:t};throw t}})}}oA=Symbol.toStringTag;const zH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_P={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HH{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Cj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return Mt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},_P),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(t=="PUT"?t2:ka)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(un(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return Mt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:_P.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield t2(this.fetch,l.toString(),c,{headers:u});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(un(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Mt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield ka(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new kj("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}update(t,r,n){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Mt(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(un(i))return{data:null,error:i};throw i}})}copy(t,r,n){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(un(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return Mt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield ka(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(un(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return Mt(this,void 0,void 0,function*(){try{const i=yield ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(un(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>fp(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new UH(c,this.shouldThrowOnError)}info(t){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield fp(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:e2(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}exists(t){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield BH(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n)&&n instanceof $1){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}list(t,r,n){return Mt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},zH),r),{prefix:t||""});return{data:yield ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(un(i))return{data:null,error:i};throw i}})}listV2(t,r){return Mt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ka(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const lA="2.81.1",cA={"X-Client-Info":`storage-js/${lA}`};class WH{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cA),r),this.fetch=Cj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Mt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield fp(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}getBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield fp(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}createBucket(t){return Mt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(un(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return Mt(this,void 0,void 0,function*(){try{return{data:yield t2(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class VH{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cA),r),this.fetch=Cj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}listBuckets(t){return Mt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield fp(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(un(r))return{data:null,error:r};throw r}})}}const Oj={"X-Client-Info":`storage-js/${lA}`,"Content-Type":"application/json"};class dA extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ni(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Ib extends dA{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class YH extends dA{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var SP;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(SP||(SP={}));const Ej=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),KH=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},PP=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GH=(e,t,r)=>Mt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Ib(PP(o),i,l))}).catch(()=>{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Ib(l,i,o))});else{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new Ib(l,i,o))}}else t(new YH(PP(e),e))}),JH=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(KH(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function ZH(e,t,r,n,i,a){return Mt(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,JH(t,n,i,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>GH(c,l,n))})})}function ji(e,t,r,n,i){return Mt(this,void 0,void 0,function*(){return ZH(e,"POST",t,n,i,r)})}class XH{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oj),r),this.fetch=Ej(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Mt(this,void 0,void 0,function*(){try{return{data:(yield ji(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Mt(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n))return{data:null,error:n};throw n}})}listIndexes(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Mt(this,void 0,void 0,function*(){try{return{data:(yield ji(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n))return{data:null,error:n};throw n}})}}class QH{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oj),r),this.fetch=Ej(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Mt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ji(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}getVectors(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}listVectors(t){return Mt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ji(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}queryVectors(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Mt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ji(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}}class $H{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oj),r),this.fetch=Ej(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:(yield ji(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}getBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}listBuckets(){return Mt(this,arguments,void 0,function*(t={}){try{return{data:yield ji(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Mt(this,void 0,void 0,function*(){try{return{data:(yield ji(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ni(r))return{data:null,error:r};throw r}})}}class eW extends $H{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new tW(this.url,this.headers,t,this.fetch)}}class tW extends XH{constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Mt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Mt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Mt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Mt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new rW(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class rW extends QH{constructor(t,r,n,i,a){super(t,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Mt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Mt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Mt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Mt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Mt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nW extends WH{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new HH(this.url,this.headers,t,this.fetch)}get vectors(){return new eW(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new VH(this.url+"/iceberg",this.headers,this.fetch)}}const sW="2.81.1";let xm="";typeof Deno<"u"?xm="deno":typeof document<"u"?xm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xm="react-native":xm="node";const iW={"X-Client-Info":`supabase-js-${xm}/${sW}`},aW={headers:iW},oW={schema:"public"},lW={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cW={},dW=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uW=()=>Headers,hW=(e,t,r)=>{const n=dW(r),i=uW();return async(a,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:d}))}};function fW(e){return e.endsWith("/")?e:e+"/"}function mW(e,t){var r,n;const{db:i,auth:a,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function pW(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fW(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const uA="2.81.1",Vu=30*1e3,r2=3,Lb=r2*Vu,gW="http://localhost:9999",vW="supabase.auth.token",yW={"X-Client-Info":`gotrue-js/${uA}`},n2="X-Supabase-Api-Version",hA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xW=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bW=10*60*1e3;class mp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ht(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wW extends mp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function NW(e){return Ht(e)&&e.name==="AuthApiError"}class pd extends mp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ac extends mp{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class ja extends Ac{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jW(e){return Ht(e)&&e.name==="AuthSessionMissingError"}class Au extends Ac{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vv extends Ac{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yv extends Ac{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _W(e){return Ht(e)&&e.name==="AuthImplicitGrantRedirectError"}class kP extends Ac{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s2 extends Ac{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Fb(e){return Ht(e)&&e.name==="AuthRetryableFetchError"}class CP extends Ac{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class i2 extends Ac{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TP=` 	
\r=`.split(""),SW=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<TP.length;t+=1)e[TP[t].charCodeAt(0)]=-2;for(let t=0;t<Uy.length;t+=1)e[Uy[t].charCodeAt(0)]=t;return e})();function OP(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Uy[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Uy[n]),t.queuedBits-=6}}function fA(e,t,r){const n=SW[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function EP(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{CW(o,n,r)};for(let o=0;o<e.length;o+=1)fA(e.charCodeAt(o),i,a);return t.join("")}function PW(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kW(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}PW(n,t)}}function CW(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function vh(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)fA(e.charCodeAt(i),r,n);return new Uint8Array(t)}function TW(e){const t=[];return kW(e,r=>t.push(r)),new Uint8Array(t)}function Nd(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>OP(i,r,n)),OP(null,r,n),t.join("")}function OW(e){return Math.round(Date.now()/1e3)+e}function EW(){return Symbol("auth-callback")}const ps=()=>typeof window<"u"&&typeof document<"u",id={tested:!1,writable:!1},mA=()=>{if(!ps())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(id.tested)return id.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),id.tested=!0,id.writable=!0}catch{id.tested=!0,id.writable=!1}return id.writable};function AW(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const pA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),DW=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Yu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ad=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Il=async(e,t)=>{await e.removeItem(t)};class Hx{constructor(){this.promise=new Hx.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Hx.promiseConstructor=Promise;function Bb(e){const t=e.split(".");if(t.length!==3)throw new i2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!xW.test(t[n]))throw new i2("JWT not in base64url format");return{header:JSON.parse(EP(t[0])),payload:JSON.parse(EP(t[1])),signature:vh(t[2]),raw:{header:t[0],payload:t[1]}}}async function MW(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function RW(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function IW(e){return("0"+e.toString(16)).substr(-2)}function LW(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,IW).join("")}async function FW(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function BW(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await FW(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Du(e,t,r=!1){const n=LW();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Yu(e,`${t}-code-verifier`,i);const a=await BW(n);return[a,n===a?"plain":"s256"]}const qW=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UW(e){const t=e.headers.get(n2);if(!t||!t.match(qW))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zW(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function HW(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WW=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mu(e){if(!WW.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qb(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VW(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function AP(e){return JSON.parse(JSON.stringify(e))}const cd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),YW=[502,503,504];async function DP(e){var t;if(!DW(e))throw new s2(cd(e),0);if(YW.includes(e.status))throw new s2(cd(e),e.status);let r;try{r=await e.json()}catch(a){throw new pd(cd(a),a)}let n;const i=UW(e);if(i&&i.getTime()>=hA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new CP(cd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ja}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new CP(cd(r),e.status,r.weak_password.reasons);throw new wW(cd(r),e.status||500,n)}const KW=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Gt(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[n2]||(a[n2]=hA["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await GW(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function GW(e,t,r,n,i,a){const o=KW(t,n,i,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new s2(cd(c),0)}if(l.ok||await DP(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await DP(c)}}function _a(e){var t;let r=null;XW(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=OW(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function MP(e){const t=_a(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Gl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function JW(e){return{data:e,error:null}}function ZW(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,o=Ec(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function RP(e){return e}function XW(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ub=["global","local","others"];class QW{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=pA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ub[0]){if(Ub.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ub.join(", ")}`);try{return await Gt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ht(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Gt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gl})}catch(n){if(Ht(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Ec(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Gt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ZW,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ht(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Gt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gl})}catch(r){if(Ht(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Gt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:RP});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);d[`${x}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ht(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Mu(t);try{return await Gt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gl})}catch(r){if(Ht(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Mu(t);try{return await Gt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Gl})}catch(n){if(Ht(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Mu(t);try{return await Gt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gl})}catch(n){if(Ht(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Mu(t.userId);try{const{data:r,error:n}=await Gt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ht(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Mu(t.userId),Mu(t.id);try{return{data:await Gt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Gt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:RP});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);d[`${x}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ht(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Gt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ht(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Gt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ht(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Gt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ht(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Gt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Gt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ht(r))return{data:null,error:r};throw r}}}function IP(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ru={debug:!!(globalThis&&mA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class $W extends gA{}async function eV(e,t,r){Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ru.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new $W(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ru.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function tV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vA(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rV(e){return parseInt(e,16)}function nV(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function sV(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=vA(e.address),g=u?`${u}://${n}`:n,y=e.statement?`${e.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${f}

${y}`;let p=`URI: ${h}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(p+=`
Expiration Time: ${i.toISOString()}`),l&&(p+=`
Not Before: ${l.toISOString()}`),c&&(p+=`
Request ID: ${c}`),d){let v=`
Resources:`;for(const b of d){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}p+=v}return`${x}
${p}`}class Bn extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class zy extends Bn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function iV({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Bn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Bn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Bn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Bn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Bn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Bn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Bn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(yA(o)){if(a.rp.id!==o)return new Bn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Bn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Bn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function aV({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Bn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(yA(n)){if(r.rpId!==n)return new Bn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Bn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class oV{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lV=new oV;function cV(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=Ec(e,["challenge","user","excludeCredentials"]),a=vh(t).buffer,o=Object.assign(Object.assign({},r),{id:vh(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:vh(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function dV(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Ec(e,["challenge","allowCredentials"]),i=vh(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:vh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function uV(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Nd(new Uint8Array(e.response.attestationObject)),clientDataJSON:Nd(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hV(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Nd(new Uint8Array(i.authenticatorData)),clientDataJSON:Nd(new Uint8Array(i.clientDataJSON)),signature:Nd(new Uint8Array(i.signature)),userHandle:i.userHandle?Nd(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yA(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function LP(){var e,t;return!!(ps()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function fV(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new zy("Browser returned unexpected credential type",t)}:{data:null,error:new zy("Empty credential response",t)}}catch(t){return{data:null,error:iV({error:t,options:e})}}}async function mV(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new zy("Browser returned unexpected credential type",t)}:{data:null,error:new zy("Empty credential response",t)}}catch(t){return{data:null,error:aV({error:t,options:e})}}}const pV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gV={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hy(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(t(o)){const l=n[a];t(l)?n[a]=Hy(l,o):n[a]=Hy(o)}else n[a]=o}return n}function vV(e,t){return Hy(pV,e,t||{})}function yV(e,t){return Hy(gV,e,t||{})}class xV{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=i??lV.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=vV(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:u,error:h}=await fV({publicKey:d,signal:c});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const d=yV(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:u,error:h}=await mV(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return Ht(o)?{data:null,error:o}:{data:null,error:new pd("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new mp("rpId is required for WebAuthn authentication")};try{if(!LP())return{data:null,error:new pd("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Ht(o)?{data:null,error:o}:{data:null,error:new pd("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new mp("rpId is required for WebAuthn registration")};try{if(!LP())return{data:null,error:new pd("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Ht(o)?{data:null,error:o}:{data:null,error:new pd("Unexpected error in register",o)}}}}tV();const bV={url:gW,storageKey:vW,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yW,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function FP(e,t,r){return await r()}const Iu={};class pp{get jwks(){var t,r;return(r=(t=Iu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Iu[this.storageKey]=Object.assign(Object.assign({},Iu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Iu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Iu[this.storageKey]=Object.assign(Object.assign({},Iu[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},bV),t);if(this.storageKey=a.storageKey,this.instanceID=(r=pp.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,pp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&ps()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new QW({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=pA(a.fetch),this.lock=a.lock||FP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:ps()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=eV:this.lock=FP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xV(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:mA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=IP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=IP(this.memoryStorage)),ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${uA}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ps()&&(r=AW(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ps()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),_W(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ht(r)?this._returnResult({error:r}):this._returnResult({error:new pd("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await Gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:_a}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Ht(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:u,password:h,options:m}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Du(this.storage,this.storageKey)),a=await Gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:_a})}else if("phone"in t){const{phone:u,password:h,options:m}=t;a=await Gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:_a})}else throw new vv("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Ht(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:MP})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:MP})}else throw new vv("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Au;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ht(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,o,l,c,d,u,h,m;let f,g;if("message"in t)f=t.message,g=t.signature;else{const{chain:y,wallet:x,statement:p,options:v}=t;let b;if(ps())if(typeof x=="object")b=x;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")b=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const j=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),S=await b.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=vA(S[0]);let M=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const O=await b.request({method:"eth_chainId"});M=rV(O)}const I={domain:j.host,address:P,statement:p,uri:j.href,version:"1",chainId:M,nonce:(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=sV(I),g=await b.request({method:"personal_sign",params:[nV(f),P]})}try{const{data:y,error:x}=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:_a});if(x)throw x;if(!y||!y.session||!y.user){const p=new Au;return this._returnResult({data:{user:null,session:null},error:p})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Ht(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,i,a,o,l,c,d,u,h,m,f;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:x,wallet:p,statement:v,options:b}=t;let j;if(ps())if(typeof p=="object")j=p;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))j=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=p}const S=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const P=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let M;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")M=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)M=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)g=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),y=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const P=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:x,error:p}=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Nd(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:_a});if(p)throw p;if(!x||!x.session||!x.user){const v=new Au;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:p})}catch(x){if(Ht(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await ad(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_a});if(await Il(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new Au;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Ht(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=t,l=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_a}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new Au;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(Ht(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Du(this.storage,this.storageKey));const{error:h}=await Gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new vv("You must provide either an email or phone number.")}catch(l){if(Ht(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Gt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:_a});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(Ht(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,a,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Du(this.storage,this.storageKey));const d=await Gt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:JW});return!((a=d.data)===null||a===void 0)&&a.url&&ps()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(Ht(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ja;const{error:i}=await Gt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Ht(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:o}=await Gt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:o,error:l}=await Gt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new vv("You must provide either an email or phone number and a type")}catch(r){if(Ht(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ad(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Lb:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ad(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=qb()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=VW(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gl}):await this._useSession(async r=>{var n,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ja}:await Gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Gl})})}catch(r){if(Ht(r))return jW(r)&&(await this._removeSession(),await Il(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new ja;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Du(this.storage,this.storageKey));const{data:d,error:u}=await Gt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Gl});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(Ht(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ja;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=Bb(t.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Ht(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ja;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ht(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ps())throw new yv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new kP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yv("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new kP("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!o||!d)throw new yv("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const f=m-u;f*1e3<=Vu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,u);const{data:y,error:x}=await this._getUser(a);if(x)throw x;const p={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:t.type},error:null})}catch(n){if(Ht(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ad(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(NW(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Il(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=EW(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Du(this.storage,this.storageKey,!0));try{return await Gt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Ht(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,l,c,d,u;const{data:h,error:m}=a;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Gt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return ps()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Ht(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:l,token:c,access_token:d,nonce:u}=t,h=await Gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:_a}),{data:m,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Au}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:f}))}catch(i){if(Ht(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await Gt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await RW(async i=>(i>0&&await MW(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Gt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_a})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Fb(a)&&Date.now()+o-n<Vu})}catch(n){if(this._debug(r,"error",n),Ht(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ps()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await ad(this.storage,this.storageKey);if(i&&this.userStorage){let o=await ad(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Yu(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:qb()}else if(i&&!i.user&&!i.user){const o=await ad(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Il(this.storage,this.storageKey+"-user"),await Yu(this.storage,this.storageKey,i)):i.user=qb()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Lb;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Lb}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Fb(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ja;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Hx;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new ja;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Ht(a)){const o={data:null,error:a};return Fb(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Yu(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=AP(i);await Yu(this.storage,this.storageKey,a)}else{const i=AP(r);await Yu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Il(this.storage,this.storageKey),await Il(this.storage,this.storageKey+"-code-verifier"),await Il(this.storage,this.storageKey+"-user"),this.userStorage&&await Il(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ps()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Vu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vu}ms, refresh threshold is ${r2} ticks`),i<=r2&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ps()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Du(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await Gt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await Gt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?uV(t.webauthn.credential_response):hV(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Gt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await Gt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cV(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:dV(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Bb(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Gt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ja})})}catch(r){if(Ht(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ja});const o=await Gt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ps()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ht(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ja});const o=await Gt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ps()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ht(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+bW>i)return n;const{data:a,error:o}=await Gt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return this._returnResult({data:null,error:g});n=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=Bb(n);r!=null&&r.allowExpired||zW(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const u=HW(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,TW(`${l}.${c}`)))throw new i2("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(Ht(n))return this._returnResult({data:null,error:n});throw n}}}pp.nextInstanceID={};const wV=pp;class NV extends wV{constructor(t){super(t)}}class jV{constructor(t,r,n){var i,a,o;this.supabaseUrl=t,this.supabaseKey=r;const l=pW(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:oW,realtime:cW,auth:Object.assign(Object.assign({},lW),{storageKey:c}),global:aW},u=mW(n??{},d);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=hW(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new gH(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new nW(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new fH(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:l,lock:c,debug:d,throwOnError:u},h,m){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new NV({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:c,debug:d,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new DH(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _V=(e,t,r)=>new jV(e,t,r);function SV(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}SV()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PV="https://ywghefarrcwbnraqyfgk.supabase.co",kV="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3Z2hlZmFycmN3Ym5yYXF5ZmdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDgxMzQsImV4cCI6MjA3NDgyNDEzNH0.oSm-CvlFFmaMEzJMLRdBYTLiZUG55DI7vMzZoRGWlho",se=_V(PV,kV,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var cf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},CV={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Zl,aN,m4,TV=(m4=class{constructor(){zt(this,Zl,CV);zt(this,aN,!1)}setTimeoutProvider(e){vt(this,Zl,e)}setTimeout(e,t){return Ee(this,Zl).setTimeout(e,t)}clearTimeout(e){Ee(this,Zl).clearTimeout(e)}setInterval(e,t){return Ee(this,Zl).setInterval(e,t)}clearInterval(e){Ee(this,Zl).clearInterval(e)}},Zl=new WeakMap,aN=new WeakMap,m4),jd=new TV;function OV(e){setTimeout(e,0)}var Qd=typeof window>"u"||"Deno"in globalThis;function Hs(){}function EV(e,t){return typeof e=="function"?e(t):e}function a2(e){return typeof e=="number"&&e>=0&&e!==1/0}function xA(e,t){return Math.max(e+(t||0)-Date.now(),0)}function vc(e,t){return typeof e=="function"?e(t):e}function Gi(e,t){return typeof e=="function"?e(t):e}function BP(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Aj(o,t.options))return!1}else if(!gp(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function qP(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if($d(t.options.mutationKey)!==$d(a))return!1}else if(!gp(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function Aj(e,t){return((t==null?void 0:t.queryKeyHashFn)||$d)(e)}function $d(e){return JSON.stringify(e,(t,r)=>o2(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function gp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>gp(e[r],t[r])):!1}var AV=Object.prototype.hasOwnProperty;function bA(e,t){if(e===t)return e;const r=UP(e)&&UP(t);if(!r&&!(o2(e)&&o2(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),o=a.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:a[d],h=e[u],m=t[u];if(h===m){l[u]=h,(r?d<i:AV.call(e,u))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[u]=m;continue}const f=bA(h,m);l[u]=f,f===h&&c++}return i===o&&c===i?e:l}function Wy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function UP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function o2(e){if(!zP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!zP(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function zP(e){return Object.prototype.toString.call(e)==="[object Object]"}function DV(e){return new Promise(t=>{jd.setTimeout(t,e)})}function l2(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?bA(e,t):t}function MV(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function RV(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Dj=Symbol();function wA(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Dj?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function NA(e,t){return typeof e=="function"?e(...t):!!e}var Pd,Xl,Nh,p4,IV=(p4=class extends cf{constructor(){super();zt(this,Pd);zt(this,Xl);zt(this,Nh);vt(this,Nh,t=>{if(!Qd&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ee(this,Xl)||this.setEventListener(Ee(this,Nh))}onUnsubscribe(){var t;this.hasListeners()||((t=Ee(this,Xl))==null||t.call(this),vt(this,Xl,void 0))}setEventListener(t){var r;vt(this,Nh,t),(r=Ee(this,Xl))==null||r.call(this),vt(this,Xl,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ee(this,Pd)!==t&&(vt(this,Pd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ee(this,Pd)=="boolean"?Ee(this,Pd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Pd=new WeakMap,Xl=new WeakMap,Nh=new WeakMap,p4),Mj=new IV;function c2(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var LV=OV;function FV(){let e=[],t=0,r=l=>{l()},n=l=>{l()},i=LV;const a=l=>{t?e.push(l):i(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var $n=FV(),jh,Ql,_h,g4,BV=(g4=class extends cf{constructor(){super();zt(this,jh,!0);zt(this,Ql);zt(this,_h);vt(this,_h,t=>{if(!Qd&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ee(this,Ql)||this.setEventListener(Ee(this,_h))}onUnsubscribe(){var t;this.hasListeners()||((t=Ee(this,Ql))==null||t.call(this),vt(this,Ql,void 0))}setEventListener(t){var r;vt(this,_h,t),(r=Ee(this,Ql))==null||r.call(this),vt(this,Ql,t(this.setOnline.bind(this)))}setOnline(t){Ee(this,jh)!==t&&(vt(this,jh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ee(this,jh)}},jh=new WeakMap,Ql=new WeakMap,_h=new WeakMap,g4),Vy=new BV;function qV(e){return Math.min(1e3*2**e,3e4)}function jA(e){return(e??"online")==="online"?Vy.isOnline():!0}var d2=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function _A(e){let t=!1,r=0,n;const i=c2(),a=()=>i.status!=="pending",o=y=>{var x;if(!a()){const p=new d2(y);m(p),(x=e.onCancel)==null||x.call(e,p)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Mj.isFocused()&&(e.networkMode==="always"||Vy.isOnline())&&e.canRun(),u=()=>jA(e.networkMode)&&e.canRun(),h=y=>{a()||(n==null||n(),i.resolve(y))},m=y=>{a()||(n==null||n(),i.reject(y))},f=()=>new Promise(y=>{var x;n=p=>{(a()||d())&&y(p)},(x=e.onPause)==null||x.call(e)}).then(()=>{var y;n=void 0,a()||(y=e.onContinue)==null||y.call(e)}),g=()=>{if(a())return;let y;const x=r===0?e.initialPromise:void 0;try{y=x??e.fn()}catch(p){y=Promise.reject(p)}Promise.resolve(y).then(h).catch(p=>{var P;if(a())return;const v=e.retry??(Qd?0:3),b=e.retryDelay??qV,j=typeof b=="function"?b(r,p):b,S=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,p);if(t||!S){m(p);return}r++,(P=e.onFail)==null||P.call(e,r,p),DV(j).then(()=>d()?void 0:f()).then(()=>{t?m(p):g()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?g():f().then(g),i)}}var kd,v4,SA=(v4=class{constructor(){zt(this,kd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),a2(this.gcTime)&&vt(this,kd,jd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qd?1/0:5*60*1e3))}clearGcTimeout(){Ee(this,kd)&&(jd.clearTimeout(Ee(this,kd)),vt(this,kd,void 0))}},kd=new WeakMap,v4),Cd,Sh,Wi,Td,ns,Pp,Od,Ca,qo,y4,UV=(y4=class extends SA{constructor(t){super();zt(this,Ca);zt(this,Cd);zt(this,Sh);zt(this,Wi);zt(this,Td);zt(this,ns);zt(this,Pp);zt(this,Od);vt(this,Od,!1),vt(this,Pp,t.defaultOptions),this.setOptions(t.options),this.observers=[],vt(this,Td,t.client),vt(this,Wi,Ee(this,Td).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,vt(this,Cd,WP(this.options)),this.state=t.state??Ee(this,Cd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ee(this,ns))==null?void 0:t.promise}setOptions(t){if(this.options={...Ee(this,Pp),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=WP(this.options);r.data!==void 0&&(this.setState(HP(r.data,r.dataUpdatedAt)),vt(this,Cd,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ee(this,Wi).remove(this)}setData(t,r){const n=l2(this.state.data,t,this.options);return hr(this,Ca,qo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){hr(this,Ca,qo).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Ee(this,ns))==null?void 0:n.promise;return(i=Ee(this,ns))==null||i.cancel(t),r?r.then(Hs).catch(Hs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ee(this,Cd))}isActive(){return this.observers.some(t=>Gi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dj||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>vc(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!xA(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ee(this,ns))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ee(this,ns))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ee(this,Wi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ee(this,ns)&&(Ee(this,Od)?Ee(this,ns).cancel({revert:!0}):Ee(this,ns).cancelRetry()),this.scheduleGc()),Ee(this,Wi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||hr(this,Ca,qo).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,h,m,f,g,y,x,p,v,b;if(this.state.fetchStatus!=="idle"&&((c=Ee(this,ns))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ee(this,ns))return Ee(this,ns).continueRetry(),Ee(this,ns).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,i=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(vt(this,Od,!0),n.signal)})},a=()=>{const j=wA(this.options,r),P=(()=>{const M={client:Ee(this,Td),queryKey:this.queryKey,meta:this.meta};return i(M),M})();return vt(this,Od,!1),this.options.persister?this.options.persister(j,P,this):j(P)},l=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ee(this,Td),state:this.state,fetchFn:a};return i(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),vt(this,Sh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&hr(this,Ca,qo).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),vt(this,ns,_A({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof d2&&j.revert&&this.setState({...Ee(this,Sh),fetchStatus:"idle"}),n.abort()},onFail:(j,S)=>{hr(this,Ca,qo).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{hr(this,Ca,qo).call(this,{type:"pause"})},onContinue:()=>{hr(this,Ca,qo).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await Ee(this,ns).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(f=(m=Ee(this,Wi).config).onSuccess)==null||f.call(m,j,this),(y=(g=Ee(this,Wi).config).onSettled)==null||y.call(g,j,this.state.error,this),j}catch(j){if(j instanceof d2){if(j.silent)return Ee(this,ns).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw hr(this,Ca,qo).call(this,{type:"error",error:j}),(p=(x=Ee(this,Wi).config).onError)==null||p.call(x,j,this),(b=(v=Ee(this,Wi).config).onSettled)==null||b.call(v,this.state.data,j,this),j}finally{this.scheduleGc()}}},Cd=new WeakMap,Sh=new WeakMap,Wi=new WeakMap,Td=new WeakMap,ns=new WeakMap,Pp=new WeakMap,Od=new WeakMap,Ca=new WeakSet,qo=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...PA(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...HP(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return vt(this,Sh,t.manual?i:void 0),i;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),$n.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ee(this,Wi).notify({query:this,type:"updated",action:t})})},y4);function PA(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jA(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function HP(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function WP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Qs,vr,kp,qs,Ed,Ph,Yo,$l,Cp,kh,Ch,Ad,Dd,ec,Th,_r,bm,u2,h2,f2,m2,p2,g2,v2,kA,x4,zV=(x4=class extends cf{constructor(t,r){super();zt(this,_r);zt(this,Qs);zt(this,vr);zt(this,kp);zt(this,qs);zt(this,Ed);zt(this,Ph);zt(this,Yo);zt(this,$l);zt(this,Cp);zt(this,kh);zt(this,Ch);zt(this,Ad);zt(this,Dd);zt(this,ec);zt(this,Th,new Set);this.options=r,vt(this,Qs,t),vt(this,$l,null),vt(this,Yo,c2()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ee(this,vr).addObserver(this),VP(Ee(this,vr),this.options)?hr(this,_r,bm).call(this):this.updateResult(),hr(this,_r,m2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return y2(Ee(this,vr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return y2(Ee(this,vr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,hr(this,_r,p2).call(this),hr(this,_r,g2).call(this),Ee(this,vr).removeObserver(this)}setOptions(t){const r=this.options,n=Ee(this,vr);if(this.options=Ee(this,Qs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gi(this.options.enabled,Ee(this,vr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");hr(this,_r,v2).call(this),Ee(this,vr).setOptions(this.options),r._defaulted&&!Wy(this.options,r)&&Ee(this,Qs).getQueryCache().notify({type:"observerOptionsUpdated",query:Ee(this,vr),observer:this});const i=this.hasListeners();i&&YP(Ee(this,vr),n,this.options,r)&&hr(this,_r,bm).call(this),this.updateResult(),i&&(Ee(this,vr)!==n||Gi(this.options.enabled,Ee(this,vr))!==Gi(r.enabled,Ee(this,vr))||vc(this.options.staleTime,Ee(this,vr))!==vc(r.staleTime,Ee(this,vr)))&&hr(this,_r,u2).call(this);const a=hr(this,_r,h2).call(this);i&&(Ee(this,vr)!==n||Gi(this.options.enabled,Ee(this,vr))!==Gi(r.enabled,Ee(this,vr))||a!==Ee(this,ec))&&hr(this,_r,f2).call(this,a)}getOptimisticResult(t){const r=Ee(this,Qs).getQueryCache().build(Ee(this,Qs),t),n=this.createResult(r,t);return WV(this,n)&&(vt(this,qs,n),vt(this,Ph,this.options),vt(this,Ed,Ee(this,vr).state)),n}getCurrentResult(){return Ee(this,qs)}trackResult(t,r){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Ee(this,Yo).status==="pending"&&Ee(this,Yo).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){Ee(this,Th).add(t)}getCurrentQuery(){return Ee(this,vr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Ee(this,Qs).defaultQueryOptions(t),n=Ee(this,Qs).getQueryCache().build(Ee(this,Qs),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return hr(this,_r,bm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Ee(this,qs)))}createResult(t,r){var O;const n=Ee(this,vr),i=this.options,a=Ee(this,qs),o=Ee(this,Ed),l=Ee(this,Ph),d=t!==n?t.state:Ee(this,kp),{state:u}=t;let h={...u},m=!1,f;if(r._optimisticResults){const L=this.hasListeners(),T=!L&&VP(t,r),k=L&&YP(t,n,r,i);(T||k)&&(h={...h,...PA(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:y,status:x}=h;f=h.data;let p=!1;if(r.placeholderData!==void 0&&f===void 0&&x==="pending"){let L;a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(L=a.data,p=!0):L=typeof r.placeholderData=="function"?r.placeholderData((O=Ee(this,Ch))==null?void 0:O.state.data,Ee(this,Ch)):r.placeholderData,L!==void 0&&(x="success",f=l2(a==null?void 0:a.data,L,r),m=!0)}if(r.select&&f!==void 0&&!p)if(a&&f===(o==null?void 0:o.data)&&r.select===Ee(this,Cp))f=Ee(this,kh);else try{vt(this,Cp,r.select),f=r.select(f),f=l2(a==null?void 0:a.data,f,r),vt(this,kh,f),vt(this,$l,null)}catch(L){vt(this,$l,L)}Ee(this,$l)&&(g=Ee(this,$l),f=Ee(this,kh),y=Date.now(),x="error");const v=h.fetchStatus==="fetching",b=x==="pending",j=x==="error",S=b&&v,P=f!==void 0,I={status:x,fetchStatus:h.fetchStatus,isPending:b,isSuccess:x==="success",isError:j,isInitialLoading:S,isLoading:S,data:f,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:j&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&P,isStale:Rj(t,r),refetch:this.refetch,promise:Ee(this,Yo),isEnabled:Gi(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=E=>{I.status==="error"?E.reject(I.error):I.data!==void 0&&E.resolve(I.data)},T=()=>{const E=vt(this,Yo,I.promise=c2());L(E)},k=Ee(this,Yo);switch(k.status){case"pending":t.queryHash===n.queryHash&&L(k);break;case"fulfilled":(I.status==="error"||I.data!==k.value)&&T();break;case"rejected":(I.status!=="error"||I.error!==k.reason)&&T();break}}return I}updateResult(){const t=Ee(this,qs),r=this.createResult(Ee(this,vr),this.options);if(vt(this,Ed,Ee(this,vr).state),vt(this,Ph,this.options),Ee(this,Ed).data!==void 0&&vt(this,Ch,Ee(this,vr)),Wy(r,t))return;vt(this,qs,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!Ee(this,Th).size)return!0;const o=new Set(a??Ee(this,Th));return this.options.throwOnError&&o.add("error"),Object.keys(Ee(this,qs)).some(l=>{const c=l;return Ee(this,qs)[c]!==t[c]&&o.has(c)})};hr(this,_r,kA).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&hr(this,_r,m2).call(this)}},Qs=new WeakMap,vr=new WeakMap,kp=new WeakMap,qs=new WeakMap,Ed=new WeakMap,Ph=new WeakMap,Yo=new WeakMap,$l=new WeakMap,Cp=new WeakMap,kh=new WeakMap,Ch=new WeakMap,Ad=new WeakMap,Dd=new WeakMap,ec=new WeakMap,Th=new WeakMap,_r=new WeakSet,bm=function(t){hr(this,_r,v2).call(this);let r=Ee(this,vr).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Hs)),r},u2=function(){hr(this,_r,p2).call(this);const t=vc(this.options.staleTime,Ee(this,vr));if(Qd||Ee(this,qs).isStale||!a2(t))return;const n=xA(Ee(this,qs).dataUpdatedAt,t)+1;vt(this,Ad,jd.setTimeout(()=>{Ee(this,qs).isStale||this.updateResult()},n))},h2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ee(this,vr)):this.options.refetchInterval)??!1},f2=function(t){hr(this,_r,g2).call(this),vt(this,ec,t),!(Qd||Gi(this.options.enabled,Ee(this,vr))===!1||!a2(Ee(this,ec))||Ee(this,ec)===0)&&vt(this,Dd,jd.setInterval(()=>{(this.options.refetchIntervalInBackground||Mj.isFocused())&&hr(this,_r,bm).call(this)},Ee(this,ec)))},m2=function(){hr(this,_r,u2).call(this),hr(this,_r,f2).call(this,hr(this,_r,h2).call(this))},p2=function(){Ee(this,Ad)&&(jd.clearTimeout(Ee(this,Ad)),vt(this,Ad,void 0))},g2=function(){Ee(this,Dd)&&(jd.clearInterval(Ee(this,Dd)),vt(this,Dd,void 0))},v2=function(){const t=Ee(this,Qs).getQueryCache().build(Ee(this,Qs),this.options);if(t===Ee(this,vr))return;const r=Ee(this,vr);vt(this,vr,t),vt(this,kp,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},kA=function(t){$n.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Ee(this,qs))}),Ee(this,Qs).getQueryCache().notify({query:Ee(this,vr),type:"observerResultsUpdated"})})},x4);function HV(e,t){return Gi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function VP(e,t){return HV(e,t)||e.state.data!==void 0&&y2(e,t,t.refetchOnMount)}function y2(e,t,r){if(Gi(t.enabled,e)!==!1&&vc(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Rj(e,t)}return!1}function YP(e,t,r,n){return(e!==t||Gi(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Rj(e,r)}function Rj(e,t){return Gi(t.enabled,e)!==!1&&e.isStaleByTime(vc(t.staleTime,e))}function WV(e,t){return!Wy(e.getCurrentResult(),t)}function KP(e){return{onFetch:(t,r)=>{var u,h,m,f,g;const n=t.options,i=(m=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((f=t.state.data)==null?void 0:f.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},p=wA(t.options,t.fetchOptions),v=async(b,j,S)=>{if(y)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const M=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:j,direction:S?"backward":"forward",meta:t.options.meta};return x(T),T})(),I=await p(M),{maxPages:O}=t.options,L=S?RV:MV;return{pages:L(b.pages,I,O),pageParams:L(b.pageParams,j,O)}};if(i&&a.length){const b=i==="backward",j=b?VV:GP,S={pages:a,pageParams:o},P=j(n,S);l=await v(S,P,b)}else{const b=e??a.length;do{const j=c===0?o[0]??n.initialPageParam:GP(n,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var y,x;return(x=(y=t.options).persister)==null?void 0:x.call(y,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function GP(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function VV(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Tp,ro,Us,Md,no,Ul,b4,YV=(b4=class extends SA{constructor(t){super();zt(this,no);zt(this,Tp);zt(this,ro);zt(this,Us);zt(this,Md);vt(this,Tp,t.client),this.mutationId=t.mutationId,vt(this,Us,t.mutationCache),vt(this,ro,[]),this.state=t.state||CA(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ee(this,ro).includes(t)||(Ee(this,ro).push(t),this.clearGcTimeout(),Ee(this,Us).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){vt(this,ro,Ee(this,ro).filter(r=>r!==t)),this.scheduleGc(),Ee(this,Us).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ee(this,ro).length||(this.state.status==="pending"?this.scheduleGc():Ee(this,Us).remove(this))}continue(){var t;return((t=Ee(this,Md))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,h,m,f,g,y,x,p,v,b,j,S,P,M,I,O;const r=()=>{hr(this,no,Ul).call(this,{type:"continue"})},n={client:Ee(this,Tp),meta:this.options.meta,mutationKey:this.options.mutationKey};vt(this,Md,_A({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,T)=>{hr(this,no,Ul).call(this,{type:"failed",failureCount:L,error:T})},onPause:()=>{hr(this,no,Ul).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ee(this,Us).canRun(this)}));const i=this.state.status==="pending",a=!Ee(this,Md).canStart();try{if(i)r();else{hr(this,no,Ul).call(this,{type:"pending",variables:t,isPaused:a}),await((l=(o=Ee(this,Us).config).onMutate)==null?void 0:l.call(o,t,this,n));const T=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));T!==this.state.context&&hr(this,no,Ul).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const L=await Ee(this,Md).start();return await((h=(u=Ee(this,Us).config).onSuccess)==null?void 0:h.call(u,L,t,this.state.context,this,n)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,L,t,this.state.context,n)),await((y=(g=Ee(this,Us).config).onSettled)==null?void 0:y.call(g,L,null,this.state.variables,this.state.context,this,n)),await((p=(x=this.options).onSettled)==null?void 0:p.call(x,L,null,t,this.state.context,n)),hr(this,no,Ul).call(this,{type:"success",data:L}),L}catch(L){try{throw await((b=(v=Ee(this,Us).config).onError)==null?void 0:b.call(v,L,t,this.state.context,this,n)),await((S=(j=this.options).onError)==null?void 0:S.call(j,L,t,this.state.context,n)),await((M=(P=Ee(this,Us).config).onSettled)==null?void 0:M.call(P,void 0,L,this.state.variables,this.state.context,this,n)),await((O=(I=this.options).onSettled)==null?void 0:O.call(I,void 0,L,t,this.state.context,n)),L}finally{hr(this,no,Ul).call(this,{type:"error",error:L})}}finally{Ee(this,Us).runNext(this)}}},Tp=new WeakMap,ro=new WeakMap,Us=new WeakMap,Md=new WeakMap,no=new WeakSet,Ul=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$n.batch(()=>{Ee(this,ro).forEach(n=>{n.onMutationUpdate(t)}),Ee(this,Us).notify({mutation:this,type:"updated",action:t})})},b4);function CA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ko,Ta,Op,w4,KV=(w4=class extends cf{constructor(t={}){super();zt(this,Ko);zt(this,Ta);zt(this,Op);this.config=t,vt(this,Ko,new Set),vt(this,Ta,new Map),vt(this,Op,0)}build(t,r,n){const i=new YV({client:t,mutationCache:this,mutationId:++zg(this,Op)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){Ee(this,Ko).add(t);const r=xv(t);if(typeof r=="string"){const n=Ee(this,Ta).get(r);n?n.push(t):Ee(this,Ta).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ee(this,Ko).delete(t)){const r=xv(t);if(typeof r=="string"){const n=Ee(this,Ta).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&Ee(this,Ta).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=xv(t);if(typeof r=="string"){const n=Ee(this,Ta).get(r),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=xv(t);if(typeof r=="string"){const i=(n=Ee(this,Ta).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$n.batch(()=>{Ee(this,Ko).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ee(this,Ko).clear(),Ee(this,Ta).clear()})}getAll(){return Array.from(Ee(this,Ko))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>qP(r,n))}findAll(t={}){return this.getAll().filter(r=>qP(t,r))}notify(t){$n.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return $n.batch(()=>Promise.all(t.map(r=>r.continue().catch(Hs))))}},Ko=new WeakMap,Ta=new WeakMap,Op=new WeakMap,w4);function xv(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Go,tc,$s,Jo,rl,sy,x2,N4,GV=(N4=class extends cf{constructor(r,n){super();zt(this,rl);zt(this,Go);zt(this,tc);zt(this,$s);zt(this,Jo);vt(this,Go,r),this.setOptions(n),this.bindMethods(),hr(this,rl,sy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=Ee(this,Go).defaultMutationOptions(r),Wy(this.options,n)||Ee(this,Go).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ee(this,$s),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&$d(n.mutationKey)!==$d(this.options.mutationKey)?this.reset():((i=Ee(this,$s))==null?void 0:i.state.status)==="pending"&&Ee(this,$s).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ee(this,$s))==null||r.removeObserver(this)}onMutationUpdate(r){hr(this,rl,sy).call(this),hr(this,rl,x2).call(this,r)}getCurrentResult(){return Ee(this,tc)}reset(){var r;(r=Ee(this,$s))==null||r.removeObserver(this),vt(this,$s,void 0),hr(this,rl,sy).call(this),hr(this,rl,x2).call(this)}mutate(r,n){var i;return vt(this,Jo,n),(i=Ee(this,$s))==null||i.removeObserver(this),vt(this,$s,Ee(this,Go).getMutationCache().build(Ee(this,Go),this.options)),Ee(this,$s).addObserver(this),Ee(this,$s).execute(r)}},Go=new WeakMap,tc=new WeakMap,$s=new WeakMap,Jo=new WeakMap,rl=new WeakSet,sy=function(){var n;const r=((n=Ee(this,$s))==null?void 0:n.state)??CA();vt(this,tc,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},x2=function(r){$n.batch(()=>{var n,i,a,o,l,c,d,u;if(Ee(this,Jo)&&this.hasListeners()){const h=Ee(this,tc).variables,m=Ee(this,tc).context,f={client:Ee(this,Go),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((i=(n=Ee(this,Jo)).onSuccess)==null||i.call(n,r.data,h,m,f),(o=(a=Ee(this,Jo)).onSettled)==null||o.call(a,r.data,null,h,m,f)):(r==null?void 0:r.type)==="error"&&((c=(l=Ee(this,Jo)).onError)==null||c.call(l,r.error,h,m,f),(u=(d=Ee(this,Jo)).onSettled)==null||u.call(d,void 0,r.error,h,m,f))}this.listeners.forEach(h=>{h(Ee(this,tc))})})},N4),so,j4,JV=(j4=class extends cf{constructor(t={}){super();zt(this,so);this.config=t,vt(this,so,new Map)}build(t,r,n){const i=r.queryKey,a=r.queryHash??Aj(i,r);let o=this.get(a);return o||(o=new UV({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){Ee(this,so).has(t.queryHash)||(Ee(this,so).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ee(this,so).get(t.queryHash);r&&(t.destroy(),r===t&&Ee(this,so).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$n.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ee(this,so).get(t)}getAll(){return[...Ee(this,so).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>BP(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>BP(t,n)):r}notify(t){$n.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){$n.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$n.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},so=new WeakMap,j4),bn,rc,nc,Oh,Eh,sc,Ah,Dh,_4,ZV=(_4=class{constructor(e={}){zt(this,bn);zt(this,rc);zt(this,nc);zt(this,Oh);zt(this,Eh);zt(this,sc);zt(this,Ah);zt(this,Dh);vt(this,bn,e.queryCache||new JV),vt(this,rc,e.mutationCache||new KV),vt(this,nc,e.defaultOptions||{}),vt(this,Oh,new Map),vt(this,Eh,new Map),vt(this,sc,0)}mount(){zg(this,sc)._++,Ee(this,sc)===1&&(vt(this,Ah,Mj.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ee(this,bn).onFocus())})),vt(this,Dh,Vy.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ee(this,bn).onOnline())})))}unmount(){var e,t;zg(this,sc)._--,Ee(this,sc)===0&&((e=Ee(this,Ah))==null||e.call(this),vt(this,Ah,void 0),(t=Ee(this,Dh))==null||t.call(this),vt(this,Dh,void 0))}isFetching(e){return Ee(this,bn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ee(this,rc).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ee(this,bn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ee(this,bn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(vc(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ee(this,bn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Ee(this,bn).get(n.queryHash),a=i==null?void 0:i.state.data,o=EV(t,a);if(o!==void 0)return Ee(this,bn).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return $n.batch(()=>Ee(this,bn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ee(this,bn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ee(this,bn);$n.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ee(this,bn);return $n.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=$n.batch(()=>Ee(this,bn).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Hs).catch(Hs)}invalidateQueries(e,t={}){return $n.batch(()=>(Ee(this,bn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=$n.batch(()=>Ee(this,bn).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Hs)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Hs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ee(this,bn).build(this,t);return r.isStaleByTime(vc(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Hs).catch(Hs)}fetchInfiniteQuery(e){return e.behavior=KP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Hs).catch(Hs)}ensureInfiniteQueryData(e){return e.behavior=KP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vy.isOnline()?Ee(this,rc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ee(this,bn)}getMutationCache(){return Ee(this,rc)}getDefaultOptions(){return Ee(this,nc)}setDefaultOptions(e){vt(this,nc,e)}setQueryDefaults(e,t){Ee(this,Oh).set($d(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ee(this,Oh).values()],r={};return t.forEach(n=>{gp(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ee(this,Eh).set($d(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ee(this,Eh).values()],r={};return t.forEach(n=>{gp(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ee(this,nc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Aj(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Dj&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ee(this,nc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ee(this,bn).clear(),Ee(this,rc).clear()}},bn=new WeakMap,rc=new WeakMap,nc=new WeakMap,Oh=new WeakMap,Eh=new WeakMap,sc=new WeakMap,Ah=new WeakMap,Dh=new WeakMap,_4),TA=w.createContext(void 0),Lr=e=>{const t=w.useContext(TA);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},XV=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(TA.Provider,{value:e,children:t})),OA=w.createContext(!1),QV=()=>w.useContext(OA);OA.Provider;function $V(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var eY=w.createContext($V()),tY=()=>w.useContext(eY),rY=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},nY=e=>{w.useEffect(()=>{e.clearReset()},[e])},sY=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||NA(r,[e.error,n])),iY=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},aY=(e,t)=>e.isLoading&&e.isFetching&&!t,oY=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,JP=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function lY(e,t,r){var h,m,f,g,y;const n=QV(),i=tY(),a=Lr(),o=a.defaultQueryOptions(e);(m=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",iY(o),rY(o,i),nY(i);const l=!a.getQueryCache().get(o.queryHash),[c]=w.useState(()=>new t(a,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(x=>{const p=u?c.subscribe($n.batchCalls(x)):Hs;return c.updateResult(),p},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),w.useEffect(()=>{c.setOptions(o)},[o,c]),oY(o,d))throw JP(o,c,i);if(sY({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((g=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,o,d),o.experimental_prefetchInRender&&!Qd&&aY(d,n)){const x=l?JP(o,c,i):(y=a.getQueryCache().get(o.queryHash))==null?void 0:y.promise;x==null||x.catch(Hs).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function bt(e,t){return lY(e,zV)}function Xt(e,t){const r=Lr(),[n]=w.useState(()=>new GV(r,e));w.useEffect(()=>{n.setOptions(e)},[n,e]);const i=w.useSyncExternalStore(w.useCallback(o=>n.subscribe($n.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=w.useCallback((o,l)=>{n.mutate(o,l).catch(Hs)},[n]);if(i.error&&NA(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}var cY=Symbol.for("react.lazy"),Yy=dx[" use ".trim().toString()];function dY(e){return typeof e=="object"&&e!==null&&"then"in e}function EA(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===cY&&"_payload"in e&&dY(e._payload)}function Wx(e){const t=hY(e),r=w.forwardRef((n,i)=>{let{children:a,...o}=n;EA(a)&&typeof Yy=="function"&&(a=Yy(a._payload));const l=w.Children.toArray(a),c=l.find(mY);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}var uY=Wx("Slot");function hY(e){const t=w.forwardRef((r,n)=>{let{children:i,...a}=r;if(EA(i)&&typeof Yy=="function"&&(i=Yy(i._payload)),w.isValidElement(i)){const o=gY(i),l=pY(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fY=Symbol("radix.slottable");function mY(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fY}function pY(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function gY(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const vp=$h("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ne=w.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},a)=>{const o=n?uY:"button";return s.jsx(o,{className:$e(vp({variant:t,size:r,className:e})),ref:a,...i})});Ne.displayName="Button";const pt=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));pt.displayName="Card";const ir=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("flex flex-col space-y-1.5 p-6",e),...t}));ir.displayName="CardHeader";const ar=w.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:$e("text-2xl font-semibold leading-none tracking-tight",e),...t}));ar.displayName="CardTitle";const en=w.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));en.displayName="CardDescription";const gt=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("p-6 pt-0",e),...t}));gt.displayName="CardContent";const vY=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("flex items-center p-6 pt-0",e),...t}));vY.displayName="CardFooter";var yY=w.createContext(void 0);function df(e){const t=w.useContext(yY);return e||t||"ltr"}var zb="rovingFocusGroup.onEntryFocus",xY={bubbles:!1,cancelable:!0},Vp="RovingFocusGroup",[b2,AA,bY]=Ip(Vp),[wY,Vx]=Is(Vp,[bY]),[NY,jY]=wY(Vp),DA=w.forwardRef((e,t)=>s.jsx(b2.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(b2.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(_Y,{...e,ref:t})})}));DA.displayName=Vp;var _Y=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=w.useRef(null),f=Kt(t,m),g=df(a),[y,x]=la({prop:o,defaultProp:l??null,onChange:c,caller:Vp}),[p,v]=w.useState(!1),b=Rn(d),j=AA(r),S=w.useRef(!1),[P,M]=w.useState(0);return w.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(zb,b),()=>I.removeEventListener(zb,b)},[b]),s.jsx(NY,{scope:r,orientation:n,dir:g,loop:i,currentTabStopId:y,onItemFocus:w.useCallback(I=>x(I),[x]),onItemShiftTab:w.useCallback(()=>v(!0),[]),onFocusableItemAdd:w.useCallback(()=>M(I=>I+1),[]),onFocusableItemRemove:w.useCallback(()=>M(I=>I-1),[]),children:s.jsx(Ot.div,{tabIndex:p||P===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:st(e.onMouseDown,()=>{S.current=!0}),onFocus:st(e.onFocus,I=>{const O=!S.current;if(I.target===I.currentTarget&&O&&!p){const L=new CustomEvent(zb,xY);if(I.currentTarget.dispatchEvent(L),!L.defaultPrevented){const T=j().filter(U=>U.focusable),k=T.find(U=>U.active),E=T.find(U=>U.id===y),q=[k,E,...T].filter(Boolean).map(U=>U.ref.current);IA(q,u)}}S.current=!1}),onBlur:st(e.onBlur,()=>v(!1))})})}),MA="RovingFocusGroupItem",RA=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:o,...l}=e,c=na(),d=a||c,u=jY(MA,r),h=u.currentTabStopId===d,m=AA(r),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:y}=u;return w.useEffect(()=>{if(n)return f(),()=>g()},[n,f,g]),s.jsx(b2.ItemSlot,{scope:r,id:d,focusable:n,active:i,children:s.jsx(Ot.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:st(e.onMouseDown,x=>{n?u.onItemFocus(d):x.preventDefault()}),onFocus:st(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:st(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const p=kY(x,u.orientation,u.dir);if(p!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const j=b.indexOf(x.currentTarget);b=u.loop?CY(b,j+1):b.slice(j+1)}setTimeout(()=>IA(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});RA.displayName=MA;var SY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function PY(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kY(e,t,r){const n=PY(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return SY[n]}function IA(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function CY(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var LA=DA,FA=RA,Yx="Tabs",[TY]=Is(Yx,[Vx]),BA=Vx(),[OY,Ij]=TY(Yx),qA=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=df(l),[h,m]=la({prop:n,onChange:i,defaultProp:a??"",caller:Yx});return s.jsx(OY,{scope:r,baseId:na(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:s.jsx(Ot.div,{dir:u,"data-orientation":o,...d,ref:t})})});qA.displayName=Yx;var UA="TabsList",zA=w.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,a=Ij(UA,r),o=BA(r);return s.jsx(LA,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:s.jsx(Ot.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});zA.displayName=UA;var HA="TabsTrigger",WA=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=e,o=Ij(HA,r),l=BA(r),c=KA(o.baseId,n),d=GA(o.baseId,n),u=n===o.value;return s.jsx(FA,{asChild:!0,...l,focusable:!i,active:u,children:s.jsx(Ot.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:st(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:st(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:st(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(n)})})})});WA.displayName=HA;var VA="TabsContent",YA=w.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...o}=e,l=Ij(VA,r),c=KA(l.baseId,n),d=GA(l.baseId,n),u=n===l.value,h=w.useRef(u);return w.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(cs,{present:i||u,children:({present:m})=>s.jsx(Ot.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});YA.displayName=VA;function KA(e,t){return`${e}-trigger-${t}`}function GA(e,t){return`${e}-content-${t}`}var EY=qA,JA=zA,ZA=WA,XA=YA;const fl=EY,sa=w.forwardRef(({className:e,...t},r)=>s.jsx(JA,{ref:r,className:$e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));sa.displayName=JA.displayName;const er=w.forwardRef(({className:e,...t},r)=>s.jsx(ZA,{ref:r,className:$e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));er.displayName=ZA.displayName;const Un=w.forwardRef(({className:e,...t},r)=>s.jsx(XA,{ref:r,className:$e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Un.displayName=XA.displayName;const AY=e=>{const[t,r]=w.useState([]),[n,i]=w.useState(!0);w.useEffect(()=>{if(!e){i(!1);return}(async()=>{try{const{data:h,error:m}=await se.from("user_roles").select("role").eq("user_id",e);if(m)throw m;r((h==null?void 0:h.map(f=>f.role))||[])}catch(h){console.error("Error fetching user roles:",h),r([])}finally{i(!1)}})()},[e]);const a=u=>t.includes(u),o=a("admin"),l=a("supervisor"),c=o||l,d=t[0]||"officer";return{roles:t,hasRole:a,isAdmin:o,isSupervisor:l,isAdminOrSupervisor:c,primaryRole:d,loading:n}};function Lt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function oi(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function lr(e,t){const r=Lt(e);return isNaN(t)?oi(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function bs(e,t){const r=Lt(e);if(isNaN(t))return oi(e,NaN);if(!t)return r;const n=r.getDate(),i=oi(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const a=i.getDate();return n>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}function ZP(e){const t=Lt(e).getDay();return t===0||t===6}const Lj=6048e5,DY=864e5,QA=6e4,$A=36e5,bv=43200,XP=1440;let MY={};function uf(){return MY}function jn(e,t){var l,c,d,u;const r=uf(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Lt(e),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function eu(e){return jn(e,{weekStartsOn:1})}function e6(e){const t=Lt(e),r=t.getFullYear(),n=oi(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=eu(n),a=oi(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=eu(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function cl(e){const t=Lt(e);return t.setHours(0,0,0,0),t}function Vh(e){const t=Lt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Da(e,t){const r=cl(e),n=cl(t),i=+r-Vh(r),a=+n-Vh(n);return Math.round((i-a)/DY)}function RY(e){const t=e6(e),r=oi(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),eu(r)}function dl(e,t){const r=t*7;return lr(e,r)}function IY(e,t){return bs(e,t*12)}function LY(e){let t;return e.forEach(function(r){const n=Lt(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function FY(e){let t;return e.forEach(r=>{const n=Lt(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function iy(e,t){const r=Lt(e),n=Lt(t),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function Kx(e){return oi(e,Date.now())}function tn(e,t){const r=cl(e),n=cl(t);return+r==+n}function Fj(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ta(e){if(!Fj(e)&&typeof e!="number")return!1;const t=Lt(e);return!isNaN(Number(t))}function Yh(e,t){const r=Lt(e),n=Lt(t),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function BY(e,t,r){const n=jn(e,r),i=jn(t,r),a=+n-Vh(n),o=+i-Vh(i);return Math.round((a-o)/Lj)}function t6(e,t){const r=Lt(e),n=Lt(t),i=QP(r,n),a=Math.abs(Da(r,n));r.setDate(r.getDate()-i*a);const o=+(QP(r,n)===-i),l=i*(a-o);return l===0?0:l}function QP(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function qY(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function UY(e,t){return+Lt(e)-+Lt(t)}function r6(e){const t=Lt(e);return t.setHours(23,59,59,999),t}function ca(e){const t=Lt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function zY(e){const t=Lt(e);return+r6(t)==+ca(t)}function HY(e,t){const r=Lt(e),n=Lt(t),i=iy(r,n),a=Math.abs(Yh(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let l=iy(r,n)===-i;zY(Lt(e))&&a===1&&iy(e,n)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function WY(e,t,r){const n=UY(e,t)/1e3;return qY(r==null?void 0:r.roundingMethod)(n)}function qa(e,t){const r=Lt(e.start),n=Lt(e.end);let i=+r>+n;const a=i?+r:+n,o=i?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=a;)c.push(Lt(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return i?c.reverse():c}function VY(e,t){const r=Lt(e.start),n=Lt(e.end);let i=+r>+n;const a=i?+r:+n,o=i?n:r;o.setHours(0,0,0,0),o.setDate(1);let l=1;const c=[];for(;+o<=a;)c.push(Lt(o)),o.setMonth(o.getMonth()+l);return i?c.reverse():c}function ln(e){const t=Lt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function wv(e){const t=Lt(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function oh(e){const t=Lt(e),r=oi(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function tu(e,t){var l,c,d,u;const r=uf(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Lt(e),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function n6(e){return tu(e,{weekStartsOn:1})}const YY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KY=(e,t,r)=>{let n;const i=YY[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Hb(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const GY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ZY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XY={date:Hb({formats:GY,defaultWidth:"full"}),time:Hb({formats:JY,defaultWidth:"full"}),dateTime:Hb({formats:ZY,defaultWidth:"full"})},QY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$Y=(e,t,r,n)=>QY[e];function nm(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const eK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aK=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},oK={ordinalNumber:aK,era:nm({values:eK,defaultWidth:"wide"}),quarter:nm({values:tK,defaultWidth:"wide",argumentCallback:e=>e-1}),month:nm({values:rK,defaultWidth:"wide"}),day:nm({values:nK,defaultWidth:"wide"}),dayPeriod:nm({values:sK,defaultWidth:"wide",formattingValues:iK,defaultFormattingWidth:"wide"})};function sm(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?cK(l,h=>h.test(o)):lK(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function lK(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function cK(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function dK(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const uK=/^(\d+)(th|st|nd|rd)?/i,hK=/\d+/i,fK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mK={any:[/^b/i,/^(a|c)/i]},pK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gK={any:[/1/i,/2/i,/3/i,/4/i]},vK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},NK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jK={ordinalNumber:dK({matchPattern:uK,parsePattern:hK,valueCallback:e=>parseInt(e,10)}),era:sm({matchPatterns:fK,defaultMatchWidth:"wide",parsePatterns:mK,defaultParseWidth:"any"}),quarter:sm({matchPatterns:pK,defaultMatchWidth:"wide",parsePatterns:gK,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sm({matchPatterns:vK,defaultMatchWidth:"wide",parsePatterns:yK,defaultParseWidth:"any"}),day:sm({matchPatterns:xK,defaultMatchWidth:"wide",parsePatterns:bK,defaultParseWidth:"any"}),dayPeriod:sm({matchPatterns:wK,defaultMatchWidth:"any",parsePatterns:NK,defaultParseWidth:"any"})},Bj={code:"en-US",formatDistance:KY,formatLong:XY,formatRelative:$Y,localize:oK,match:jK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _K(e){const t=Lt(e);return Da(t,oh(t))+1}function s6(e){const t=Lt(e),r=+eu(t)-+RY(t);return Math.round(r/Lj)+1}function i6(e,t){var u,h,m,f;const r=Lt(e),n=r.getFullYear(),i=uf(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(m=i.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=oi(e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=jn(o,t),c=oi(e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const d=jn(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function SK(e,t){var l,c,d,u;const r=uf(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=i6(e,t),a=oi(e,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),jn(a,t)}function a6(e,t){const r=Lt(e),n=+jn(r,t)-+SK(r,t);return Math.round(n/Lj)+1}function Cr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ll={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Cr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Cr(r+1,2)},d(e,t){return Cr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Cr(e.getHours()%12||12,t.length)},H(e,t){return Cr(e.getHours(),t.length)},m(e,t){return Cr(e.getMinutes(),t.length)},s(e,t){return Cr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Cr(i,t.length)}},Lu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$P={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Ll.y(e,t)},Y:function(e,t,r,n){const i=i6(e,n),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return Cr(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Cr(a,t.length)},R:function(e,t){const r=e6(e);return Cr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Cr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Cr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Cr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ll.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Cr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=a6(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):Cr(i,t.length)},I:function(e,t,r){const n=s6(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Cr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ll.d(e,t)},D:function(e,t,r){const n=_K(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Cr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Cr(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Cr(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return Cr(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=Lu.noon:n===0?i=Lu.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=Lu.evening:n>=12?i=Lu.afternoon:n>=4?i=Lu.morning:i=Lu.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ll.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ll.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Cr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Cr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ll.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ll.s(e,t)},S:function(e,t){return Ll.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return tk(n);case"XXXX":case"XX":return dd(n);case"XXXXX":case"XXX":default:return dd(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return tk(n);case"xxxx":case"xx":return dd(n);case"xxxxx":case"xxx":default:return dd(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ek(n,":");case"OOOO":default:return"GMT"+dd(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ek(n,":");case"zzzz":default:return"GMT"+dd(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Cr(n,t.length)},T:function(e,t,r){const n=e.getTime();return Cr(n,t.length)}};function ek(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+t+Cr(a,2)}function tk(e,t){return e%60===0?(e>0?"-":"+")+Cr(Math.abs(e)/60,2):dd(e,t)}function dd(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Cr(Math.trunc(n/60),2),a=Cr(n%60,2);return r+i+t+a}const rk=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},o6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},PK=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return rk(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",rk(n,t)).replace("{{time}}",o6(i,t))},kK={p:o6,P:PK},CK=/^D+$/,TK=/^Y+$/,OK=["D","DD","YY","YYYY"];function EK(e){return CK.test(e)}function AK(e){return TK.test(e)}function DK(e,t,r){const n=MK(e,t,r);if(console.warn(n),OK.includes(e))throw new RangeError(n)}function MK(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LK=/^'([^]*?)'?$/,FK=/''/g,BK=/[a-zA-Z]/;function Pe(e,t,r){var u,h,m,f,g,y,x,p;const n=uf(),i=(r==null?void 0:r.locale)??n.locale??Bj,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(m=n.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((y=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((p=(x=n.locale)==null?void 0:x.options)==null?void 0:p.weekStartsOn)??0,l=Lt(e);if(!ta(l))throw new RangeError("Invalid time value");let c=t.match(IK).map(v=>{const b=v[0];if(b==="p"||b==="P"){const j=kK[b];return j(v,i.formatLong)}return v}).join("").match(RK).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:qK(v)};if($P[b])return{isToken:!0,value:v};if(b.match(BK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&AK(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&EK(b))&&DK(b,t,String(e));const j=$P[b[0]];return j(l,b,i.localize,d)}).join("")}function qK(e){const t=e.match(LK);return t?t[1].replace(FK,"'"):e}function UK(e,t,r){const n=uf(),i=(r==null?void 0:r.locale)??n.locale??Bj,a=2520,o=iy(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=Lt(t),d=Lt(e)):(c=Lt(e),d=Lt(t));const u=WY(d,c),h=(Vh(d)-Vh(c))/1e3,m=Math.round((u-h)/60);let f;if(m<2)return r!=null&&r.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,l):u<10?i.formatDistance("lessThanXSeconds",10,l):u<20?i.formatDistance("lessThanXSeconds",20,l):u<40?i.formatDistance("halfAMinute",0,l):u<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<XP){const g=Math.round(m/60);return i.formatDistance("aboutXHours",g,l)}else{if(m<a)return i.formatDistance("xDays",1,l);if(m<bv){const g=Math.round(m/XP);return i.formatDistance("xDays",g,l)}else if(m<bv*2)return f=Math.round(m/bv),i.formatDistance("aboutXMonths",f,l)}if(f=HY(d,c),f<12){const g=Math.round(m/bv);return i.formatDistance("xMonths",g,l)}else{const g=f%12,y=Math.trunc(f/12);return g<3?i.formatDistance("aboutXYears",y,l):g<9?i.formatDistance("overXYears",y,l):i.formatDistance("almostXYears",y+1,l)}}function zK(e,t){return UK(e,Kx(e),t)}function HK(e){const t=Lt(e),r=t.getFullYear(),n=t.getMonth(),i=oi(e,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function WK(e){return Math.trunc(+Lt(e)/1e3)}function VK(e){const t=Lt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function YK(e,t){return BY(VK(e),ln(e),t)+1}function ru(e,t){const r=Lt(e),n=Lt(t);return r.getTime()>n.getTime()}function l6(e,t){const r=Lt(e),n=Lt(t);return+r<+n}function mo(e,t){const r=Lt(e),n=Lt(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function KK(e,t){const r=Lt(e),n=Lt(t);return r.getFullYear()===n.getFullYear()}function yp(e){return tn(e,Kx(e))}function c6(e){return tn(e,lr(Kx(e),1))}function nk(e,t){const r=+Lt(e),[n,i]=[+Lt(t.start),+Lt(t.end)].sort((a,o)=>a-o);return r>=n&&r<=i}function po(e,t){return lr(e,-t)}function d6(e){return tn(e,po(Kx(e),1))}function It(e,t){const n=XK(e);let i;if(n.date){const c=QK(n.date,2);i=$K(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const a=i.getTime();let o=0,l;if(n.time&&(o=eG(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=tG(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(a+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(a+o+l)}const Nv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},GK=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,JK=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ZK=/^([+-])(\d{2})(?::?(\d{2}))?$/;function XK(e){const t={},r=e.split(Nv.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Nv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Nv.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const i=Nv.timezone.exec(n);i?(t.time=n.replace(i[1],""),t.timezone=i[1]):t.time=n}return t}function QK(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?i:a*100,restDateString:e.slice((n[1]||n[2]).length)}}function $K(e,t){if(t===null)return new Date(NaN);const r=e.match(GK);if(!r)return new Date(NaN);const n=!!r[4],i=im(r[1]),a=im(r[2])-1,o=im(r[3]),l=im(r[4]),c=im(r[5])-1;if(n)return aG(t,l,c)?rG(t,l,c):new Date(NaN);{const d=new Date(0);return!sG(t,a,o)||!iG(t,i)?new Date(NaN):(d.setUTCFullYear(t,a,Math.max(i,o)),d)}}function im(e){return e?parseInt(e):1}function eG(e){const t=e.match(JK);if(!t)return NaN;const r=Wb(t[1]),n=Wb(t[2]),i=Wb(t[3]);return oG(r,n,i)?r*$A+n*QA+i*1e3:NaN}function Wb(e){return e&&parseFloat(e.replace(",","."))||0}function tG(e){if(e==="Z")return 0;const t=e.match(ZK);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return lG(n,i)?r*(n*$A+i*QA):NaN}function rG(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,a=(t-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const nG=[31,null,31,30,31,30,31,31,30,31,30,31];function u6(e){return e%400===0||e%4===0&&e%100!==0}function sG(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(nG[t]||(u6(e)?29:28))}function iG(e,t){return t>=1&&t<=(u6(e)?366:365)}function aG(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function oG(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function lG(e,t){return t>=0&&t<=59}function Vb(e,t){const r=Lt(e),n=r.getFullYear(),i=r.getDate(),a=oi(e,0);a.setFullYear(n,t,15),a.setHours(0,0,0,0);const o=HK(a);return r.setMonth(t,Math.min(i,o)),r}function sk(e,t){const r=Lt(e);return isNaN(+r)?oi(e,NaN):(r.setFullYear(t),r)}function Gx(e,t){return bs(e,-1)}function qj(e,t){return dl(e,-1)}var Jt=function(){return Jt=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Jt.apply(this,arguments)};function cG(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function h6(e,t,r){for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Yp(e){return e.mode==="multiple"}function Kp(e){return e.mode==="range"}function Jx(e){return e.mode==="single"}var dG={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function uG(e,t){return Pe(e,"LLLL y",t)}function hG(e,t){return Pe(e,"d",t)}function fG(e,t){return Pe(e,"LLLL",t)}function mG(e){return"".concat(e)}function pG(e,t){return Pe(e,"cccccc",t)}function gG(e,t){return Pe(e,"yyyy",t)}var vG=Object.freeze({__proto__:null,formatCaption:uG,formatDay:hG,formatMonthCaption:fG,formatWeekNumber:mG,formatWeekdayName:pG,formatYearCaption:gG}),yG=function(e,t,r){return Pe(e,"do MMMM (EEEE)",r)},xG=function(){return"Month: "},bG=function(){return"Go to next month"},wG=function(){return"Go to previous month"},NG=function(e,t){return Pe(e,"cccc",t)},jG=function(e){return"Week n. ".concat(e)},_G=function(){return"Year: "},SG=Object.freeze({__proto__:null,labelDay:yG,labelMonthDropdown:xG,labelNext:bG,labelPrevious:wG,labelWeekNumber:jG,labelWeekday:NG,labelYearDropdown:_G});function PG(){var e="buttons",t=dG,r=Bj,n={},i={},a=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:vG,labels:SG,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function kG(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,i=e.toMonth,a=e.fromDate,o=e.toDate;return n?a=ln(n):t&&(a=new Date(t,0,1)),i?o=ca(i):r&&(o=new Date(r,11,31)),{fromDate:a?cl(a):void 0,toDate:o?cl(o):void 0}}var f6=w.createContext(void 0);function CG(e){var t,r=e.initialProps,n=PG(),i=kG(r),a=i.fromDate,o=i.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(Jx(r)||Yp(r)||Kp(r))&&(c=r.onSelect);var d=Jt(Jt(Jt({},n),r),{captionLayout:l,classNames:Jt(Jt({},n.classNames),r.classNames),components:Jt({},r.components),formatters:Jt(Jt({},n.formatters),r.formatters),fromDate:a,labels:Jt(Jt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Jt(Jt({},n.modifiers),r.modifiers),modifiersClassNames:Jt(Jt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Jt(Jt({},n.styles),r.styles),toDate:o});return s.jsx(f6.Provider,{value:d,children:e.children})}function Gr(){var e=w.useContext(f6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function m6(e){var t=Gr(),r=t.locale,n=t.classNames,i=t.styles,a=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:r})})}function TG(e){return s.jsx("svg",Jt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function p6(e){var t,r,n=e.onChange,i=e.value,a=e.children,o=e.caption,l=e.className,c=e.style,d=Gr(),u=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:TG;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:i,onChange:n,children:a}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function OG(e){var t,r=Gr(),n=r.fromDate,i=r.toDate,a=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var h=[];if(KK(n,i))for(var m=ln(n),f=n.getMonth();f<=i.getMonth();f++)h.push(Vb(m,f));else for(var m=ln(new Date),f=0;f<=11;f++)h.push(Vb(m,f));var g=function(x){var p=Number(x.target.value),v=Vb(ln(e.displayMonth),p);e.onChange(v)},y=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:p6;return s.jsx(y,{name:"months","aria-label":u(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:h.map(function(x){return s.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function EG(e){var t,r=e.displayMonth,n=Gr(),i=n.fromDate,a=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var f=i.getFullYear(),g=a.getFullYear(),y=f;y<=g;y++)m.push(sk(oh(new Date),y));var x=function(v){var b=sk(ln(r),Number(v.target.value));e.onChange(b)},p=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:p6;return s.jsx(p,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:r.getFullYear(),caption:u(r,{locale:o}),children:m.map(function(v){return s.jsx("option",{value:v.getFullYear(),children:u(v,{locale:o})},v.getFullYear())})})}function AG(e,t){var r=w.useState(e),n=r[0],i=r[1],a=t===void 0?n:t;return[a,i]}function DG(e){var t=e.month,r=e.defaultMonth,n=e.today,i=t||r||n||new Date,a=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&Yh(a,i)<0){var d=-1*(c-1);i=bs(a,d)}return o&&Yh(i,o)<0&&(i=o),ln(i)}function MG(){var e=Gr(),t=DG(e),r=AG(t,e.month),n=r[0],i=r[1],a=function(o){var l;if(!e.disableNavigation){var c=ln(o);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,a]}function RG(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,i=ln(e),a=ln(bs(i,n)),o=Yh(a,i),l=[],c=0;c<o;c++){var d=bs(i,c);l.push(d)}return r&&(l=l.reverse()),l}function IG(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=ln(e);if(!r)return bs(l,o);var c=Yh(r,e);if(!(c<a))return bs(l,o)}}function LG(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=ln(e);if(!r)return bs(l,-o);var c=Yh(l,r);if(!(c<=0))return bs(l,-o)}}var g6=w.createContext(void 0);function FG(e){var t=Gr(),r=MG(),n=r[0],i=r[1],a=RG(n,t),o=IG(n,t),l=LG(n,t),c=function(h){return a.some(function(m){return mo(h,m)})},d=function(h,m){c(h)||(m&&l6(h,m)?i(bs(h,1+t.numberOfMonths*-1)):i(h))},u={currentMonth:n,displayMonths:a,goToMonth:i,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(g6.Provider,{value:u,children:e.children})}function Gp(){var e=w.useContext(g6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function ik(e){var t,r=Gr(),n=r.classNames,i=r.styles,a=r.components,o=Gp().goToMonth,l=function(u){o(bs(u,e.displayIndex?-e.displayIndex:0))},c=(t=a==null?void 0:a.CaptionLabel)!==null&&t!==void 0?t:m6,d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:d}),s.jsx(OG,{onChange:l,displayMonth:e.displayMonth}),s.jsx(EG,{onChange:l,displayMonth:e.displayMonth})]})}function BG(e){return s.jsx("svg",Jt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function qG(e){return s.jsx("svg",Jt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ky=w.forwardRef(function(e,t){var r=Gr(),n=r.classNames,i=r.styles,a=[n.button_reset,n.button];e.className&&a.push(e.className);var o=a.join(" "),l=Jt(Jt({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Jt({},e,{ref:t,type:"button",className:o,style:l}))});function UG(e){var t,r,n=Gr(),i=n.dir,a=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,h=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var m=d(e.previousMonth,{locale:a}),f=[o.nav_button,o.nav_button_previous].join(" "),g=u(e.nextMonth,{locale:a}),y=[o.nav_button,o.nav_button_next].join(" "),x=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:qG,p=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:BG;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Ky,{name:"previous-month","aria-label":m,className:f,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(p,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Ky,{name:"next-month","aria-label":g,className:y,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?s.jsx(p,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function ak(e){var t=Gr().numberOfMonths,r=Gp(),n=r.previousMonth,i=r.nextMonth,a=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return mo(e.displayMonth,g)}),c=l===0,d=l===o.length-1,u=t>1&&(c||!d),h=t>1&&(d||!c),m=function(){n&&a(n)},f=function(){i&&a(i)};return s.jsx(UG,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:h,nextMonth:i,previousMonth:n,onPreviousClick:m,onNextClick:f})}function zG(e){var t,r=Gr(),n=r.classNames,i=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:m6,d;return i?d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?d=s.jsx(ik,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx(ik,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(ak,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(ak,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:a.caption,children:d})}function HG(e){var t=Gr(),r=t.footer,n=t.styles,i=t.classNames.tfoot;return r?s.jsx("tfoot",{className:i,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function WG(e,t,r){for(var n=r?eu(new Date):jn(new Date,{locale:e,weekStartsOn:t}),i=[],a=0;a<7;a++){var o=lr(n,a);i.push(o)}return i}function VG(){var e=Gr(),t=e.classNames,r=e.styles,n=e.showWeekNumber,i=e.locale,a=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=WG(i,a,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(u,h){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(u,{locale:i}),children:l(u,{locale:i})},h)})]})}function YG(){var e,t=Gr(),r=t.classNames,n=t.styles,i=t.components,a=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:VG;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(a,{})})}function KG(e){var t=Gr(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var Uj=w.createContext(void 0);function GG(e){if(!Yp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(Uj.Provider,{value:t,children:e.children})}return s.jsx(JG,{initialProps:e.initialProps,children:e.children})}function JG(e){var t=e.initialProps,r=e.children,n=t.selected,i=t.min,a=t.max,o=function(d,u,h){var m,f;(m=t.onDayClick)===null||m===void 0||m.call(t,d,u,h);var g=!!(u.selected&&i&&(n==null?void 0:n.length)===i);if(!g){var y=!!(!u.selected&&a&&(n==null?void 0:n.length)===a);if(!y){var x=n?h6([],n):[];if(u.selected){var p=x.findIndex(function(v){return tn(d,v)});x.splice(p,1)}else x.push(d);(f=t.onSelect)===null||f===void 0||f.call(t,x,d,u,h)}}},l={disabled:[]};n&&l.disabled.push(function(d){var u=a&&n.length>a-1,h=n.some(function(m){return tn(m,d)});return!!(u&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(Uj.Provider,{value:c,children:r})}function zj(){var e=w.useContext(Uj);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function ZG(e,t){var r=t||{},n=r.from,i=r.to;return n&&i?tn(i,e)&&tn(n,e)?void 0:tn(i,e)?{from:i,to:void 0}:tn(n,e)?void 0:ru(n,e)?{from:e,to:i}:{from:n,to:e}:i?ru(e,i)?{from:i,to:e}:{from:e,to:i}:n?l6(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var Hj=w.createContext(void 0);function XG(e){if(!Kp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(Hj.Provider,{value:t,children:e.children})}return s.jsx(QG,{initialProps:e.initialProps,children:e.children})}function QG(e){var t=e.initialProps,r=e.children,n=t.selected,i=n||{},a=i.from,o=i.to,l=t.min,c=t.max,d=function(f,g,y){var x,p;(x=t.onDayClick)===null||x===void 0||x.call(t,f,g,y);var v=ZG(f,n);(p=t.onSelect)===null||p===void 0||p.call(t,v,f,g,y)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(u.range_start=[a],o?(u.range_end=[o],tn(a,o)||(u.range_middle=[{after:a,before:o}])):u.range_end=[a]):o&&(u.range_start=[o],u.range_end=[o]),l&&(a&&!o&&u.disabled.push({after:po(a,l-1),before:lr(a,l-1)}),a&&o&&u.disabled.push({after:a,before:lr(a,l-1)}),!a&&o&&u.disabled.push({after:po(o,l-1),before:lr(o,l-1)})),c){if(a&&!o&&(u.disabled.push({before:lr(a,-c+1)}),u.disabled.push({after:lr(a,c-1)})),a&&o){var h=Da(o,a)+1,m=c-h;u.disabled.push({before:po(a,m)}),u.disabled.push({after:lr(o,m)})}!a&&o&&(u.disabled.push({before:lr(o,-c+1)}),u.disabled.push({after:lr(o,c-1)}))}return s.jsx(Hj.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function Wj(){var e=w.useContext(Hj);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function ay(e){return Array.isArray(e)?h6([],e):e!==void 0?[e]:[]}function $G(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],i=r[1];t[n]=ay(i)}),t}var Ua;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ua||(Ua={}));var eJ=Ua.Selected,Io=Ua.Disabled,tJ=Ua.Hidden,rJ=Ua.Today,Yb=Ua.RangeEnd,Kb=Ua.RangeMiddle,Gb=Ua.RangeStart,nJ=Ua.Outside;function sJ(e,t,r){var n,i=(n={},n[eJ]=ay(e.selected),n[Io]=ay(e.disabled),n[tJ]=ay(e.hidden),n[rJ]=[e.today],n[Yb]=[],n[Kb]=[],n[Gb]=[],n[nJ]=[],n);return e.fromDate&&i[Io].push({before:e.fromDate}),e.toDate&&i[Io].push({after:e.toDate}),Yp(e)?i[Io]=i[Io].concat(t.modifiers[Io]):Kp(e)&&(i[Io]=i[Io].concat(r.modifiers[Io]),i[Gb]=r.modifiers[Gb],i[Kb]=r.modifiers[Kb],i[Yb]=r.modifiers[Yb]),i}var v6=w.createContext(void 0);function iJ(e){var t=Gr(),r=zj(),n=Wj(),i=sJ(t,r,n),a=$G(t.modifiers),o=Jt(Jt({},i),a);return s.jsx(v6.Provider,{value:o,children:e.children})}function y6(){var e=w.useContext(v6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function aJ(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function oJ(e){return!!(e&&typeof e=="object"&&"from"in e)}function lJ(e){return!!(e&&typeof e=="object"&&"after"in e)}function cJ(e){return!!(e&&typeof e=="object"&&"before"in e)}function dJ(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function uJ(e,t){var r,n=t.from,i=t.to;if(n&&i){var a=Da(i,n)<0;a&&(r=[i,n],n=r[0],i=r[1]);var o=Da(e,n)>=0&&Da(i,e)>=0;return o}return i?tn(i,e):n?tn(n,e):!1}function hJ(e){return Fj(e)}function fJ(e){return Array.isArray(e)&&e.every(Fj)}function mJ(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(hJ(r))return tn(e,r);if(fJ(r))return r.includes(e);if(oJ(r))return uJ(e,r);if(dJ(r))return r.dayOfWeek.includes(e.getDay());if(aJ(r)){var n=Da(r.before,e),i=Da(r.after,e),a=n>0,o=i<0,l=ru(r.before,r.after);return l?o&&a:a||o}return lJ(r)?Da(e,r.after)>0:cJ(r)?Da(r.before,e)>0:typeof r=="function"?r(e):!1})}function Vj(e,t,r){var n=Object.keys(t).reduce(function(a,o){var l=t[o];return mJ(e,l)&&a.push(o),a},[]),i={};return n.forEach(function(a){return i[a]=!0}),r&&!mo(e,r)&&(i.outside=!0),i}function pJ(e,t){for(var r=ln(e[0]),n=ca(e[e.length-1]),i,a,o=r;o<=n;){var l=Vj(o,t),c=!l.disabled&&!l.hidden;if(!c){o=lr(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=lr(o,1)}return a||i}var gJ=365;function x6(e,t){var r=t.moveBy,n=t.direction,i=t.context,a=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=i.weekStartsOn,d=i.fromDate,u=i.toDate,h=i.locale,m={day:lr,week:dl,month:bs,year:IY,startOfWeek:function(x){return i.ISOWeek?eu(x):jn(x,{locale:h,weekStartsOn:c})},endOfWeek:function(x){return i.ISOWeek?n6(x):tu(x,{locale:h,weekStartsOn:c})}},f=m[r](e,n==="after"?1:-1);n==="before"&&d?f=LY([d,f]):n==="after"&&u&&(f=FY([u,f]));var g=!0;if(a){var y=Vj(f,a);g=!y.disabled&&!y.hidden}return g?f:l.count>gJ?l.lastFocused:x6(f,{moveBy:r,direction:n,context:i,modifiers:a,retry:Jt(Jt({},l),{count:l.count+1})})}var b6=w.createContext(void 0);function vJ(e){var t=Gp(),r=y6(),n=w.useState(),i=n[0],a=n[1],o=w.useState(),l=o[0],c=o[1],d=pJ(t.displayMonths,r),u=i??(l&&t.isDateDisplayed(l))?l:d,h=function(){c(i),a(void 0)},m=function(x){a(x)},f=Gr(),g=function(x,p){if(i){var v=x6(i,{moveBy:x,direction:p,context:f,modifiers:r});tn(i,v)||(t.goToDate(v,i),m(v))}},y={focusedDay:i,focusTarget:u,blur:h,focus:m,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(b6.Provider,{value:y,children:e.children})}function Yj(){var e=w.useContext(b6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function yJ(e,t){var r=y6(),n=Vj(e,r,t);return n}var Kj=w.createContext(void 0);function xJ(e){if(!Jx(e.initialProps)){var t={selected:void 0};return s.jsx(Kj.Provider,{value:t,children:e.children})}return s.jsx(bJ,{initialProps:e.initialProps,children:e.children})}function bJ(e){var t=e.initialProps,r=e.children,n=function(a,o,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,o,l),o.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,a,o,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,a,a,o,l)},i={selected:t.selected,onDayClick:n};return s.jsx(Kj.Provider,{value:i,children:r})}function w6(){var e=w.useContext(Kj);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function wJ(e,t){var r=Gr(),n=w6(),i=zj(),a=Wj(),o=Yj(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,h=o.blur,m=o.focus,f=o.focusMonthBefore,g=o.focusMonthAfter,y=o.focusYearBefore,x=o.focusYearAfter,p=o.focusStartOfWeek,v=o.focusEndOfWeek,b=function(R){var C,F,X,re;Jx(r)?(C=n.onDayClick)===null||C===void 0||C.call(n,e,t,R):Yp(r)?(F=i.onDayClick)===null||F===void 0||F.call(i,e,t,R):Kp(r)?(X=a.onDayClick)===null||X===void 0||X.call(a,e,t,R):(re=r.onDayClick)===null||re===void 0||re.call(r,e,t,R)},j=function(R){var C;m(e),(C=r.onDayFocus)===null||C===void 0||C.call(r,e,t,R)},S=function(R){var C;h(),(C=r.onDayBlur)===null||C===void 0||C.call(r,e,t,R)},P=function(R){var C;(C=r.onDayMouseEnter)===null||C===void 0||C.call(r,e,t,R)},M=function(R){var C;(C=r.onDayMouseLeave)===null||C===void 0||C.call(r,e,t,R)},I=function(R){var C;(C=r.onDayPointerEnter)===null||C===void 0||C.call(r,e,t,R)},O=function(R){var C;(C=r.onDayPointerLeave)===null||C===void 0||C.call(r,e,t,R)},L=function(R){var C;(C=r.onDayTouchCancel)===null||C===void 0||C.call(r,e,t,R)},T=function(R){var C;(C=r.onDayTouchEnd)===null||C===void 0||C.call(r,e,t,R)},k=function(R){var C;(C=r.onDayTouchMove)===null||C===void 0||C.call(r,e,t,R)},E=function(R){var C;(C=r.onDayTouchStart)===null||C===void 0||C.call(r,e,t,R)},A=function(R){var C;(C=r.onDayKeyUp)===null||C===void 0||C.call(r,e,t,R)},q=function(R){var C;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),d();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),u();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?y():f();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?x():g();break;case"Home":R.preventDefault(),R.stopPropagation(),p();break;case"End":R.preventDefault(),R.stopPropagation(),v();break}(C=r.onDayKeyDown)===null||C===void 0||C.call(r,e,t,R)},U={onClick:b,onFocus:j,onBlur:S,onKeyDown:q,onKeyUp:A,onMouseEnter:P,onMouseLeave:M,onPointerEnter:I,onPointerLeave:O,onTouchCancel:L,onTouchEnd:T,onTouchMove:k,onTouchStart:E};return U}function NJ(){var e=Gr(),t=w6(),r=zj(),n=Wj(),i=Jx(e)?t.selected:Yp(e)?r.selected:Kp(e)?n.selected:void 0;return i}function jJ(e){return Object.values(Ua).includes(e)}function _J(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var i=e.modifiersClassNames[n];if(i)r.push(i);else if(jJ(n)){var a=e.classNames["day_".concat(n)];a&&r.push(a)}}),r}function SJ(e,t){var r=Jt({},e.styles.day);return Object.keys(t).forEach(function(n){var i;r=Jt(Jt({},r),(i=e.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function PJ(e,t,r){var n,i,a,o=Gr(),l=Yj(),c=yJ(e,t),d=wJ(e,c),u=NJ(),h=!!(o.onDayClick||o.mode!=="default");w.useEffect(function(){var P;c.outside||l.focusedDay&&h&&tn(l.focusedDay,e)&&((P=r.current)===null||P===void 0||P.focus())},[l.focusedDay,e,r,h,c.outside]);var m=_J(o,c).join(" "),f=SJ(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:KG,x=s.jsx(y,{date:e,displayMonth:t,activeModifiers:c}),p={style:f,className:m,children:x,role:"gridcell"},v=l.focusTarget&&tn(l.focusTarget,e)&&!c.outside,b=l.focusedDay&&tn(l.focusedDay,e),j=Jt(Jt(Jt({},p),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=b||v?0:-1,n)),d),S={isButton:h,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:p};return S}function kJ(e){var t=w.useRef(null),r=PJ(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Ky,Jt({name:"day",ref:t},r.buttonProps)):s.jsx("div",Jt({},r.divProps))}function CJ(e){var t=e.number,r=e.dates,n=Gr(),i=n.onWeekNumberClick,a=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:u});var h=c(Number(t),{locale:l}),m=function(f){i(t,r,f)};return s.jsx(Ky,{name:"week-number","aria-label":h,className:o.weeknumber,style:a.weeknumber,onClick:m,children:u})}function TJ(e){var t,r,n=Gr(),i=n.styles,a=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:kJ,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:CJ,u;return o&&(u=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(d,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[u,e.dates.map(function(h){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:h})},WK(h))})]})}function ok(e,t,r){for(var n=r!=null&&r.ISOWeek?n6(t):tu(t,r),i=r!=null&&r.ISOWeek?eu(e):jn(e,r),a=Da(n,i),o=[],l=0;l<=a;l++)o.push(lr(i,l));var c=o.reduce(function(d,u){var h=r!=null&&r.ISOWeek?s6(u):a6(u,r),m=d.find(function(f){return f.weekNumber===h});return m?(m.dates.push(u),d):(d.push({weekNumber:h,dates:[u]}),d)},[]);return c}function OJ(e,t){var r=ok(ln(e),ca(e),t);if(t!=null&&t.useFixedWeeks){var n=YK(e,t);if(n<6){var i=r[r.length-1],a=i.dates[i.dates.length-1],o=dl(a,6-n),l=ok(dl(a,1),o,t);r.push.apply(r,l)}}return r}function EJ(e){var t,r,n,i=Gr(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,d=i.fixedWeeks,u=i.components,h=i.weekStartsOn,m=i.firstWeekContainsDate,f=i.ISOWeek,g=OJ(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:f,locale:a,weekStartsOn:h,firstWeekContainsDate:m}),y=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:YG,x=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:TJ,p=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:HG;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(y,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(v){return s.jsx(x,{displayMonth:e.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),s.jsx(p,{displayMonth:e.displayMonth})]})}function AJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var DJ=AJ()?w.useLayoutEffect:w.useEffect,Jb=!1,MJ=0;function lk(){return"react-day-picker-".concat(++MJ)}function RJ(e){var t,r=e??(Jb?lk():null),n=w.useState(r),i=n[0],a=n[1];return DJ(function(){i===null&&a(lk())},[]),w.useEffect(function(){Jb===!1&&(Jb=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function IJ(e){var t,r,n=Gr(),i=n.dir,a=n.classNames,o=n.styles,l=n.components,c=Gp().displayMonths,d=RJ(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,h=[a.month],m=o.month,f=e.displayIndex===0,g=e.displayIndex===c.length-1,y=!f&&!g;i==="rtl"&&(t=[f,g],g=t[0],f=t[1]),f&&(h.push(a.caption_start),m=Jt(Jt({},m),o.caption_start)),g&&(h.push(a.caption_end),m=Jt(Jt({},m),o.caption_end)),y&&(h.push(a.caption_between),m=Jt(Jt({},m),o.caption_between));var x=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:zG;return s.jsxs("div",{className:h.join(" "),style:m,children:[s.jsx(x,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(EJ,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function LJ(e){var t=Gr(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function FJ(e){var t,r,n=e.initialProps,i=Gr(),a=Yj(),o=Gp(),l=w.useState(!1),c=l[0],d=l[1];w.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),d(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var u=[i.classNames.root,i.className];i.numberOfMonths>1&&u.push(i.classNames.multiple_months),i.showWeekNumber&&u.push(i.classNames.with_weeknumber);var h=Jt(Jt({},i.styles.root),i.style),m=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,y){var x;return Jt(Jt({},g),(x={},x[y]=n[y],x))},{}),f=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:LJ;return s.jsx("div",Jt({className:u.join(" "),style:h,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:s.jsx(f,{children:o.displayMonths.map(function(g,y){return s.jsx(IJ,{displayIndex:y,displayMonth:g},y)})})}))}function BJ(e){var t=e.children,r=cG(e,["children"]);return s.jsx(CG,{initialProps:r,children:s.jsx(FG,{children:s.jsx(xJ,{initialProps:r,children:s.jsx(GG,{initialProps:r,children:s.jsx(XG,{initialProps:r,children:s.jsx(iJ,{children:s.jsx(vJ,{children:t})})})})})})})}function qJ(e){return s.jsx(BJ,Jt({},e,{children:s.jsx(FJ,{initialProps:e})}))}function Dr({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(qJ,{showOutsideDays:r,className:$e("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:$e(vp({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:$e(vp({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...i})=>s.jsx(ua,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(Ri,{className:"h-4 w-4"})},...n})}Dr.displayName="Calendar";var Zb=0;function Zx(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ck()),document.body.insertAdjacentElement("beforeend",e[1]??ck()),Zb++,()=>{Zb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Zb--}},[])}function ck(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Xb="focusScope.autoFocusOnMount",Qb="focusScope.autoFocusOnUnmount",dk={bubbles:!1,cancelable:!0},UJ="FocusScope",Jp=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=w.useState(null),d=Rn(i),u=Rn(a),h=w.useRef(null),m=Kt(t,y=>c(y)),f=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let y=function(b){if(f.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:zl(h.current,{select:!0})},x=function(b){if(f.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||zl(h.current,{select:!0}))},p=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&zl(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const v=new MutationObserver(p);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),v.disconnect()}}},[n,l,f.paused]),w.useEffect(()=>{if(l){hk.add(f);const y=document.activeElement;if(!l.contains(y)){const p=new CustomEvent(Xb,dk);l.addEventListener(Xb,d),l.dispatchEvent(p),p.defaultPrevented||(zJ(KJ(N6(l)),{select:!0}),document.activeElement===y&&zl(l))}return()=>{l.removeEventListener(Xb,d),setTimeout(()=>{const p=new CustomEvent(Qb,dk);l.addEventListener(Qb,u),l.dispatchEvent(p),p.defaultPrevented||zl(y??document.body,{select:!0}),l.removeEventListener(Qb,u),hk.remove(f)},0)}}},[l,d,u,f]);const g=w.useCallback(y=>{if(!r&&!n||f.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,p=document.activeElement;if(x&&p){const v=y.currentTarget,[b,j]=HJ(v);b&&j?!y.shiftKey&&p===j?(y.preventDefault(),r&&zl(b,{select:!0})):y.shiftKey&&p===b&&(y.preventDefault(),r&&zl(j,{select:!0})):p===v&&y.preventDefault()}},[r,n,f.paused]);return s.jsx(Ot.div,{tabIndex:-1,...o,ref:m,onKeyDown:g})});Jp.displayName=UJ;function zJ(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(zl(n,{select:t}),document.activeElement!==r)return}function HJ(e){const t=N6(e),r=uk(t,e),n=uk(t.reverse(),e);return[r,n]}function N6(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function uk(e,t){for(const r of e)if(!WJ(r,{upTo:t}))return r}function WJ(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function VJ(e){return e instanceof HTMLInputElement&&"select"in e}function zl(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&VJ(e)&&t&&e.select()}}var hk=YJ();function YJ(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=fk(e,t),e.unshift(t)},remove(t){var r;e=fk(e,t),(r=e[0])==null||r.resume()}}}function fk(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function KJ(e){return e.filter(t=>t.tagName!=="A")}function GJ(e){const t=JJ(e),r=w.forwardRef((n,i)=>{const{children:a,...o}=n,l=w.Children.toArray(a),c=l.find(XJ);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function JJ(e){const t=w.forwardRef((r,n)=>{const{children:i,...a}=r;if(w.isValidElement(i)){const o=$J(i),l=QJ(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ZJ=Symbol("radix.slottable");function XJ(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ZJ}function QJ(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function $J(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var eZ=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Fu=new WeakMap,jv=new WeakMap,_v={},$b=0,j6=function(e){return e&&(e.host||j6(e.parentNode))},tZ=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=j6(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},rZ=function(e,t,r,n){var i=tZ(t,Array.isArray(e)?e:[e]);_v[r]||(_v[r]=new WeakMap);var a=_v[r],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))u(m);else try{var f=m.getAttribute(n),g=f!==null&&f!=="false",y=(Fu.get(m)||0)+1,x=(a.get(m)||0)+1;Fu.set(m,y),a.set(m,x),o.push(m),y===1&&g&&jv.set(m,!0),x===1&&m.setAttribute(r,"true"),g||m.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",m,p)}})};return u(t),l.clear(),$b++,function(){o.forEach(function(h){var m=Fu.get(h)-1,f=a.get(h)-1;Fu.set(h,m),a.set(h,f),m||(jv.has(h)||h.removeAttribute(n),jv.delete(h)),f||h.removeAttribute(r)}),$b--,$b||(Fu=new WeakMap,Fu=new WeakMap,jv=new WeakMap,_v={})}},Xx=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=eZ(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),rZ(n,i,r,"aria-hidden")):function(){return null}},oy="right-scroll-bar-position",ly="width-before-scroll-bar",nZ="with-scroll-bars-hidden",sZ="--removed-body-scroll-bar-size";function ew(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function iZ(e,t){var r=w.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var aZ=typeof window<"u"?w.useLayoutEffect:w.useEffect,mk=new WeakMap;function oZ(e,t){var r=iZ(null,function(n){return e.forEach(function(i){return ew(i,n)})});return aZ(function(){var n=mk.get(r);if(n){var i=new Set(n),a=new Set(e),o=r.current;i.forEach(function(l){a.has(l)||ew(l,null)}),a.forEach(function(l){i.has(l)||ew(l,o)})}mk.set(r,e)},[e]),r}function lZ(e){return e}function cZ(e,t){t===void 0&&(t=lZ);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return i}function dZ(e){e===void 0&&(e={});var t=cZ(null);return t.options=$i({async:!0,ssr:!1},e),t}var _6=function(e){var t=e.sideCar,r=Ec(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,$i({},r))};_6.isSideCarExport=!0;function uZ(e,t){return e.useMedium(t),_6}var S6=dZ(),tw=function(){},Qx=w.forwardRef(function(e,t){var r=w.useRef(null),n=w.useState({onScrollCapture:tw,onWheelCapture:tw,onTouchMoveCapture:tw}),i=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,f=e.noRelative,g=e.noIsolation,y=e.inert,x=e.allowPinchZoom,p=e.as,v=p===void 0?"div":p,b=e.gapMode,j=Ec(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,P=oZ([r,t]),M=$i($i({},j),i);return w.createElement(w.Fragment,null,u&&w.createElement(S,{sideCar:S6,removeScrollBar:d,shards:h,noRelative:f,noIsolation:g,inert:y,setCallbacks:a,allowPinchZoom:!!x,lockRef:r,gapMode:b}),o?w.cloneElement(w.Children.only(l),$i($i({},M),{ref:P})):w.createElement(v,$i({},M,{className:c,ref:P}),l))});Qx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qx.classNames={fullWidth:ly,zeroRight:oy};var hZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fZ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=hZ();return t&&e.setAttribute("nonce",t),e}function mZ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pZ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gZ=function(){var e=0,t=null;return{add:function(r){e==0&&(t=fZ())&&(mZ(t,r),pZ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vZ=function(){var e=gZ();return function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},P6=function(){var e=vZ(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},yZ={left:0,top:0,right:0,gap:0},rw=function(e){return parseInt(e||"",10)||0},xZ=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[rw(r),rw(n),rw(i)]},bZ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yZ;var t=xZ(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},wZ=P6(),yh="data-scroll-locked",NZ=function(e,t,r,n){var i=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(nZ,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(yh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(oy,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ly,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(oy," .").concat(oy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ly," .").concat(ly,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(yh,`] {
    `).concat(sZ,": ").concat(l,`px;
  }
`)},pk=function(){var e=parseInt(document.body.getAttribute(yh)||"0",10);return isFinite(e)?e:0},jZ=function(){w.useEffect(function(){return document.body.setAttribute(yh,(pk()+1).toString()),function(){var e=pk()-1;e<=0?document.body.removeAttribute(yh):document.body.setAttribute(yh,e.toString())}},[])},_Z=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;jZ();var a=w.useMemo(function(){return bZ(i)},[i]);return w.createElement(wZ,{styles:NZ(a,!t,i,r?"":"!important")})},w2=!1;if(typeof window<"u")try{var Sv=Object.defineProperty({},"passive",{get:function(){return w2=!0,!0}});window.addEventListener("test",Sv,Sv),window.removeEventListener("test",Sv,Sv)}catch{w2=!1}var Bu=w2?{passive:!1}:!1,SZ=function(e){return e.tagName==="TEXTAREA"},k6=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!SZ(e)&&r[t]==="visible")},PZ=function(e){return k6(e,"overflowY")},kZ=function(e){return k6(e,"overflowX")},gk=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=C6(e,n);if(i){var a=T6(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},CZ=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},TZ=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},C6=function(e,t){return e==="v"?PZ(t):kZ(t)},T6=function(e,t){return e==="v"?CZ(t):TZ(t)},OZ=function(e,t){return e==="h"&&t==="rtl"?-1:1},EZ=function(e,t,r,n,i){var a=OZ(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var f=T6(e,l),g=f[0],y=f[1],x=f[2],p=y-x-a*g;(g||p)&&C6(e,l)&&(h+=p,m+=g);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(m)<1)&&(d=!0),d},Pv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vk=function(e){return[e.deltaX,e.deltaY]},yk=function(e){return e&&"current"in e?e.current:e},AZ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},DZ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},MZ=0,qu=[];function RZ(e){var t=w.useRef([]),r=w.useRef([0,0]),n=w.useRef(),i=w.useState(MZ++)[0],a=w.useState(P6)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=jj([e.lockRef.current],(e.shards||[]).map(yk),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=w.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var p=Pv(y),v=r.current,b="deltaX"in y?y.deltaX:v[0]-p[0],j="deltaY"in y?y.deltaY:v[1]-p[1],S,P=y.target,M=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in y&&M==="h"&&P.type==="range")return!1;var I=gk(M,P);if(!I)return!0;if(I?S=M:(S=M==="v"?"h":"v",I=gk(M,P)),!I)return!1;if(!n.current&&"changedTouches"in y&&(b||j)&&(n.current=S),!S)return!0;var O=n.current||S;return EZ(O,x,y,O==="h"?b:j)},[]),c=w.useCallback(function(y){var x=y;if(!(!qu.length||qu[qu.length-1]!==a)){var p="deltaY"in x?vk(x):Pv(x),v=t.current.filter(function(S){return S.name===x.type&&(S.target===x.target||x.target===S.shadowParent)&&AZ(S.delta,p)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(yk).filter(Boolean).filter(function(S){return S.contains(x.target)}),j=b.length>0?l(x,b[0]):!o.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),d=w.useCallback(function(y,x,p,v){var b={name:y,delta:x,target:p,should:v,shadowParent:IZ(p)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=w.useCallback(function(y){r.current=Pv(y),n.current=void 0},[]),h=w.useCallback(function(y){d(y.type,vk(y),y.target,l(y,e.lockRef.current))},[]),m=w.useCallback(function(y){d(y.type,Pv(y),y.target,l(y,e.lockRef.current))},[]);w.useEffect(function(){return qu.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Bu),document.addEventListener("touchmove",c,Bu),document.addEventListener("touchstart",u,Bu),function(){qu=qu.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Bu),document.removeEventListener("touchmove",c,Bu),document.removeEventListener("touchstart",u,Bu)}},[]);var f=e.removeScrollBar,g=e.inert;return w.createElement(w.Fragment,null,g?w.createElement(a,{styles:DZ(i)}):null,f?w.createElement(_Z,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function IZ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const LZ=uZ(S6,RZ);var Zp=w.forwardRef(function(e,t){return w.createElement(Qx,$i({},e,{ref:t,sideCar:LZ}))});Zp.classNames=Qx.classNames;var $x="Popover",[O6]=Is($x,[Oc]),Xp=Oc(),[FZ,Dc]=O6($x),E6=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,l=Xp(t),c=w.useRef(null),[d,u]=w.useState(!1),[h,m]=la({prop:n,defaultProp:i??!1,onChange:a,caller:$x});return s.jsx(Mx,{...l,children:s.jsx(FZ,{scope:t,contentId:na(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(f=>!f),[m]),hasCustomAnchor:d,onCustomAnchorAdd:w.useCallback(()=>u(!0),[]),onCustomAnchorRemove:w.useCallback(()=>u(!1),[]),modal:o,children:r})})};E6.displayName=$x;var A6="PopoverAnchor",BZ=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Dc(A6,r),a=Xp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return w.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Bp,{...a,...n,ref:t})});BZ.displayName=A6;var D6="PopoverTrigger",M6=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Dc(D6,r),a=Xp(r),o=Kt(t,i.triggerRef),l=s.jsx(Ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":B6(i.open),...n,ref:o,onClick:st(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Bp,{asChild:!0,...a,children:l})});M6.displayName=D6;var Gj="PopoverPortal",[qZ,UZ]=O6(Gj,{forceMount:void 0}),R6=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,a=Dc(Gj,t);return s.jsx(qZ,{scope:t,forceMount:r,children:s.jsx(cs,{present:r||a.open,children:s.jsx(Qh,{asChild:!0,container:i,children:n})})})};R6.displayName=Gj;var Kh="PopoverContent",I6=w.forwardRef((e,t)=>{const r=UZ(Kh,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,a=Dc(Kh,e.__scopePopover);return s.jsx(cs,{present:n||a.open,children:a.modal?s.jsx(HZ,{...i,ref:t}):s.jsx(WZ,{...i,ref:t})})});I6.displayName=Kh;var zZ=GJ("PopoverContent.RemoveScroll"),HZ=w.forwardRef((e,t)=>{const r=Dc(Kh,e.__scopePopover),n=w.useRef(null),i=Kt(t,n),a=w.useRef(!1);return w.useEffect(()=>{const o=n.current;if(o)return Xx(o)},[]),s.jsx(Zp,{as:zZ,allowPinchZoom:!0,children:s.jsx(L6,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:st(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:st(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),WZ=w.forwardRef((e,t)=>{const r=Dc(Kh,e.__scopePopover),n=w.useRef(!1),i=w.useRef(!1);return s.jsx(L6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),L6=w.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,m=Dc(Kh,r),f=Xp(r);return Zx(),s.jsx(Jp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(uu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(Rx,{"data-state":B6(m.open),role:"dialog",id:m.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),F6="PopoverClose",VZ=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Dc(F6,r);return s.jsx(Ot.button,{type:"button",...n,ref:t,onClick:st(e.onClick,()=>i.onOpenChange(!1))})});VZ.displayName=F6;var YZ="PopoverArrow",KZ=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Xp(r);return s.jsx(Ix,{...i,...n,ref:t})});KZ.displayName=YZ;function B6(e){return e?"open":"closed"}var GZ=E6,JZ=M6,ZZ=R6,q6=I6;const Mr=GZ,Rr=JZ,Tr=w.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>s.jsx(ZZ,{children:s.jsx(q6,{ref:i,align:t,sideOffset:r,className:$e("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Tr.displayName=q6.displayName;function xp(e,[t,r]){return Math.min(r,Math.max(t,e))}function XZ(e){const t=QZ(e),r=w.forwardRef((n,i)=>{const{children:a,...o}=n,l=w.Children.toArray(a),c=l.find(eX);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function QZ(e){const t=w.forwardRef((r,n)=>{const{children:i,...a}=r;if(w.isValidElement(i)){const o=rX(i),l=tX(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $Z=Symbol("radix.slottable");function eX(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$Z}function tX(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function rX(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function e0(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var nX=[" ","Enter","ArrowUp","ArrowDown"],sX=[" ","Enter"],nu="Select",[t0,r0,iX]=Ip(nu),[hf]=Is(nu,[iX,Oc]),n0=Oc(),[aX,Mc]=hf(nu),[oX,lX]=hf(nu),U6=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:f,form:g}=e,y=n0(t),[x,p]=w.useState(null),[v,b]=w.useState(null),[j,S]=w.useState(!1),P=df(d),[M,I]=la({prop:n,defaultProp:i??!1,onChange:a,caller:nu}),[O,L]=la({prop:o,defaultProp:l,onChange:c,caller:nu}),T=w.useRef(null),k=x?g||!!x.closest("form"):!0,[E,A]=w.useState(new Set),q=Array.from(E).map(U=>U.props.value).join(";");return s.jsx(Mx,{...y,children:s.jsxs(aX,{required:f,scope:t,trigger:x,onTriggerChange:p,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:na(),value:O,onValueChange:L,open:M,onOpenChange:I,dir:P,triggerPointerDownPosRef:T,disabled:m,children:[s.jsx(t0.Provider,{scope:t,children:s.jsx(oX,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(U=>{A(R=>new Set(R).add(U))},[]),onNativeOptionRemove:w.useCallback(U=>{A(R=>{const C=new Set(R);return C.delete(U),C})},[]),children:r})}),k?s.jsxs(u8,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:O,onChange:U=>L(U.target.value),disabled:m,form:g,children:[O===void 0?s.jsx("option",{value:""}):null,Array.from(E)]},q):null]})})};U6.displayName=nu;var z6="SelectTrigger",H6=w.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,a=n0(r),o=Mc(z6,r),l=o.disabled||n,c=Kt(t,o.onTriggerChange),d=r0(r),u=w.useRef("touch"),[h,m,f]=f8(y=>{const x=d().filter(b=>!b.disabled),p=x.find(b=>b.value===o.value),v=m8(x,y,p);v!==void 0&&o.onValueChange(v.value)}),g=y=>{l||(o.onOpenChange(!0),f()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx(Bp,{asChild:!0,...a,children:s.jsx(Ot.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":h8(o.value)?"":void 0,...i,ref:c,onClick:st(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&g(y)}),onPointerDown:st(i.onPointerDown,y=>{u.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(g(y),y.preventDefault())}),onKeyDown:st(i.onKeyDown,y=>{const x=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(x&&y.key===" ")&&nX.includes(y.key)&&(g(),y.preventDefault())})})})});H6.displayName=z6;var W6="SelectValue",V6=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:o="",...l}=e,c=Mc(W6,r),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=Kt(t,c.onValueNodeChange);return ls(()=>{d(u)},[d,u]),s.jsx(Ot.span,{...l,ref:h,style:{pointerEvents:"none"},children:h8(c.value)?s.jsx(s.Fragment,{children:o}):a})});V6.displayName=W6;var cX="SelectIcon",Y6=w.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return s.jsx(Ot.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});Y6.displayName=cX;var dX="SelectPortal",K6=e=>s.jsx(Qh,{asChild:!0,...e});K6.displayName=dX;var su="SelectContent",G6=w.forwardRef((e,t)=>{const r=Mc(su,e.__scopeSelect),[n,i]=w.useState();if(ls(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?du.createPortal(s.jsx(J6,{scope:e.__scopeSelect,children:s.jsx(t0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(Z6,{...e,ref:t})});G6.displayName=su;var Sa=10,[J6,Rc]=hf(su),uX="SelectContentImpl",hX=XZ("SelectContent.RemoveScroll"),Z6=w.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:y,avoidCollisions:x,...p}=e,v=Mc(su,r),[b,j]=w.useState(null),[S,P]=w.useState(null),M=Kt(t,G=>j(G)),[I,O]=w.useState(null),[L,T]=w.useState(null),k=r0(r),[E,A]=w.useState(!1),q=w.useRef(!1);w.useEffect(()=>{if(b)return Xx(b)},[b]),Zx();const U=w.useCallback(G=>{const[he,...xe]=k().map(we=>we.ref.current),[Se]=xe.slice(-1),K=document.activeElement;for(const we of G)if(we===K||(we==null||we.scrollIntoView({block:"nearest"}),we===he&&S&&(S.scrollTop=0),we===Se&&S&&(S.scrollTop=S.scrollHeight),we==null||we.focus(),document.activeElement!==K))return},[k,S]),R=w.useCallback(()=>U([I,b]),[U,I,b]);w.useEffect(()=>{E&&R()},[E,R]);const{onOpenChange:C,triggerPointerDownPosRef:F}=v;w.useEffect(()=>{if(b){let G={x:0,y:0};const he=Se=>{var K,we;G={x:Math.abs(Math.round(Se.pageX)-(((K=F.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((we=F.current)==null?void 0:we.y)??0))}},xe=Se=>{G.x<=10&&G.y<=10?Se.preventDefault():b.contains(Se.target)||C(!1),document.removeEventListener("pointermove",he),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",xe,{capture:!0})}}},[b,C,F]),w.useEffect(()=>{const G=()=>C(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[C]);const[X,re]=f8(G=>{const he=k().filter(K=>!K.disabled),xe=he.find(K=>K.ref.current===document.activeElement),Se=m8(he,G,xe);Se&&setTimeout(()=>Se.ref.current.focus())}),z=w.useCallback((G,he,xe)=>{const Se=!q.current&&!xe;(v.value!==void 0&&v.value===he||Se)&&(O(G),Se&&(q.current=!0))},[v.value]),Y=w.useCallback(()=>b==null?void 0:b.focus(),[b]),J=w.useCallback((G,he,xe)=>{const Se=!q.current&&!xe;(v.value!==void 0&&v.value===he||Se)&&T(G)},[v.value]),ne=n==="popper"?N2:X6,le=ne===N2?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:y,avoidCollisions:x}:{};return s.jsx(J6,{scope:r,content:b,viewport:S,onViewportChange:P,itemRefCallback:z,selectedItem:I,onItemLeave:Y,itemTextRefCallback:J,focusSelectedItem:R,selectedItemText:L,position:n,isPositioned:E,searchRef:X,children:s.jsx(Zp,{as:hX,allowPinchZoom:!0,children:s.jsx(Jp,{asChild:!0,trapped:v.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:st(i,G=>{var he;(he=v.trigger)==null||he.focus({preventScroll:!0}),G.preventDefault()}),children:s.jsx(uu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:s.jsx(ne,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:G=>G.preventDefault(),...p,...le,onPlaced:()=>A(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...p.style},onKeyDown:st(p.onKeyDown,G=>{const he=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!he&&G.key.length===1&&re(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let Se=k().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(G.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const K=G.target,we=Se.indexOf(K);Se=Se.slice(we+1)}setTimeout(()=>U(Se)),G.preventDefault()}})})})})})})});Z6.displayName=uX;var fX="SelectItemAlignedPosition",X6=w.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,a=Mc(su,r),o=Rc(su,r),[l,c]=w.useState(null),[d,u]=w.useState(null),h=Kt(t,M=>u(M)),m=r0(r),f=w.useRef(!1),g=w.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:p,focusSelectedItem:v}=o,b=w.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&y&&x&&p){const M=a.trigger.getBoundingClientRect(),I=d.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),L=p.getBoundingClientRect();if(a.dir!=="rtl"){const K=L.left-I.left,we=O.left-K,Te=M.left-we,ae=M.width+Te,H=Math.max(ae,I.width),Oe=window.innerWidth-Sa,pe=xp(we,[Sa,Math.max(Sa,Oe-H)]);l.style.minWidth=ae+"px",l.style.left=pe+"px"}else{const K=I.right-L.right,we=window.innerWidth-O.right-K,Te=window.innerWidth-M.right-we,ae=M.width+Te,H=Math.max(ae,I.width),Oe=window.innerWidth-Sa,pe=xp(we,[Sa,Math.max(Sa,Oe-H)]);l.style.minWidth=ae+"px",l.style.right=pe+"px"}const T=m(),k=window.innerHeight-Sa*2,E=y.scrollHeight,A=window.getComputedStyle(d),q=parseInt(A.borderTopWidth,10),U=parseInt(A.paddingTop,10),R=parseInt(A.borderBottomWidth,10),C=parseInt(A.paddingBottom,10),F=q+U+E+C+R,X=Math.min(x.offsetHeight*5,F),re=window.getComputedStyle(y),z=parseInt(re.paddingTop,10),Y=parseInt(re.paddingBottom,10),J=M.top+M.height/2-Sa,ne=k-J,le=x.offsetHeight/2,G=x.offsetTop+le,he=q+U+G,xe=F-he;if(he<=J){const K=T.length>0&&x===T[T.length-1].ref.current;l.style.bottom="0px";const we=d.clientHeight-y.offsetTop-y.offsetHeight,Te=Math.max(ne,le+(K?Y:0)+we+R),ae=he+Te;l.style.height=ae+"px"}else{const K=T.length>0&&x===T[0].ref.current;l.style.top="0px";const Te=Math.max(J,q+y.offsetTop+(K?z:0)+le)+xe;l.style.height=Te+"px",y.scrollTop=he-J+y.offsetTop}l.style.margin=`${Sa}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=k+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[m,a.trigger,a.valueNode,l,d,y,x,p,a.dir,n]);ls(()=>b(),[b]);const[j,S]=w.useState();ls(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const P=w.useCallback(M=>{M&&g.current===!0&&(b(),v==null||v(),g.current=!1)},[b,v]);return s.jsx(pX,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:P,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(Ot.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});X6.displayName=fX;var mX="SelectPopperPosition",N2=w.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Sa,...a}=e,o=n0(r);return s.jsx(Rx,{...o,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});N2.displayName=mX;var[pX,Jj]=hf(su,{}),j2="SelectViewport",Q6=w.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,a=Rc(j2,r),o=Jj(j2,r),l=Kt(t,a.onViewportChange),c=w.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(t0.Slot,{scope:r,children:s.jsx(Ot.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:st(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const g=window.innerHeight-Sa*2,y=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),p=Math.max(y,x);if(p<g){const v=p+f,b=Math.min(g,v),j=v-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Q6.displayName=j2;var $6="SelectGroup",[gX,vX]=hf($6),yX=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=na();return s.jsx(gX,{scope:r,id:i,children:s.jsx(Ot.div,{role:"group","aria-labelledby":i,...n,ref:t})})});yX.displayName=$6;var e8="SelectLabel",t8=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=vX(e8,r);return s.jsx(Ot.div,{id:i.id,...n,ref:t})});t8.displayName=e8;var Gy="SelectItem",[xX,r8]=hf(Gy),n8=w.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...o}=e,l=Mc(Gy,r),c=Rc(Gy,r),d=l.value===n,[u,h]=w.useState(a??""),[m,f]=w.useState(!1),g=Kt(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,n,i)}),y=na(),x=w.useRef("touch"),p=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(xX,{scope:r,value:n,disabled:i,textId:y,isSelected:d,onItemTextChange:w.useCallback(v=>{h(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:s.jsx(t0.ItemSlot,{scope:r,value:n,disabled:i,textValue:u,children:s.jsx(Ot.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:st(o.onFocus,()=>f(!0)),onBlur:st(o.onBlur,()=>f(!1)),onClick:st(o.onClick,()=>{x.current!=="mouse"&&p()}),onPointerUp:st(o.onPointerUp,()=>{x.current==="mouse"&&p()}),onPointerDown:st(o.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:st(o.onPointerMove,v=>{var b;x.current=v.pointerType,i?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:st(o.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:st(o.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(sX.includes(v.key)&&p(),v.key===" "&&v.preventDefault())})})})})});n8.displayName=Gy;var wm="SelectItemText",s8=w.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...a}=e,o=Mc(wm,r),l=Rc(wm,r),c=r8(wm,r),d=lX(wm,r),[u,h]=w.useState(null),m=Kt(t,p=>h(p),c.onItemTextChange,p=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,p,c.value,c.disabled)}),f=u==null?void 0:u.textContent,g=w.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=d;return ls(()=>(y(g),()=>x(g)),[y,x,g]),s.jsxs(s.Fragment,{children:[s.jsx(Ot.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?du.createPortal(a.children,o.valueNode):null]})});s8.displayName=wm;var i8="SelectItemIndicator",a8=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return r8(i8,r).isSelected?s.jsx(Ot.span,{"aria-hidden":!0,...n,ref:t}):null});a8.displayName=i8;var _2="SelectScrollUpButton",o8=w.forwardRef((e,t)=>{const r=Rc(_2,e.__scopeSelect),n=Jj(_2,e.__scopeSelect),[i,a]=w.useState(!1),o=Kt(t,n.onScrollButtonChange);return ls(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(c8,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});o8.displayName=_2;var S2="SelectScrollDownButton",l8=w.forwardRef((e,t)=>{const r=Rc(S2,e.__scopeSelect),n=Jj(S2,e.__scopeSelect),[i,a]=w.useState(!1),o=Kt(t,n.onScrollButtonChange);return ls(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(c8,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});l8.displayName=S2;var c8=w.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,a=Rc("SelectScrollButton",r),o=w.useRef(null),l=r0(r),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),ls(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ot.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:st(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:st(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:st(i.onPointerLeave,()=>{c()})})}),bX="SelectSeparator",d8=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ot.div,{"aria-hidden":!0,...n,ref:t})});d8.displayName=bX;var P2="SelectArrow",wX=w.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=n0(r),a=Mc(P2,r),o=Rc(P2,r);return a.open&&o.position==="popper"?s.jsx(Ix,{...i,...n,ref:t}):null});wX.displayName=P2;var NX="SelectBubbleInput",u8=w.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=w.useRef(null),a=Kt(n,i),o=e0(t);return w.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Ot.select,{...r,style:{...WT,...r.style},ref:a,defaultValue:t})});u8.displayName=NX;function h8(e){return e===""||e===void 0}function f8(e){const t=Rn(e),r=w.useRef(""),n=w.useRef(0),i=w.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=w.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function m8(e,t,r){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=jX(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function jX(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var _X=U6,p8=H6,SX=V6,PX=Y6,kX=K6,g8=G6,CX=Q6,v8=t8,y8=n8,TX=s8,OX=a8,x8=o8,b8=l8,w8=d8;const Wt=_X,Vt=SX,Bt=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(p8,{ref:n,className:$e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(PX,{asChild:!0,children:s.jsx(Cx,{className:"h-4 w-4 opacity-50"})})]}));Bt.displayName=p8.displayName;const N8=w.forwardRef(({className:e,...t},r)=>s.jsx(x8,{ref:r,className:$e("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ij,{className:"h-4 w-4"})}));N8.displayName=x8.displayName;const j8=w.forwardRef(({className:e,...t},r)=>s.jsx(b8,{ref:r,className:$e("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Cx,{className:"h-4 w-4"})}));j8.displayName=b8.displayName;const qt=w.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>s.jsx(kX,{children:s.jsxs(g8,{ref:i,className:$e("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(N8,{}),s.jsx(CX,{className:$e("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(j8,{})]})}));qt.displayName=g8.displayName;const EX=w.forwardRef(({className:e,...t},r)=>s.jsx(v8,{ref:r,className:$e("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));EX.displayName=v8.displayName;const ct=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(y8,{ref:n,className:$e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(OX,{children:s.jsx(Uh,{className:"h-4 w-4"})})}),s.jsx(TX,{children:t})]}));ct.displayName=y8.displayName;const AX=w.forwardRef(({className:e,...t},r)=>s.jsx(w8,{ref:r,className:$e("-mx-1 my-1 h-px bg-muted",e),...t}));AX.displayName=w8.displayName;const St=w.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:$e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));St.displayName="Input";var DX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],MX=DX.reduce((e,t)=>{const r=Wx(`Primitive.${t}`),n=w.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),RX="Label",_8=w.forwardRef((e,t)=>s.jsx(MX.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));_8.displayName=RX;var S8=_8;const IX=$h("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=w.forwardRef(({className:e,...t},r)=>s.jsx(S8,{ref:r,className:$e(IX(),e),...t}));Ce.displayName=S8.displayName;const LX=$h("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Re({className:e,variant:t,...r}){return s.jsx("div",{className:$e(LX({variant:t}),e),...r})}function vs({className:e,...t}){return s.jsx("div",{className:$e("animate-pulse rounded-md bg-muted",e),...t})}function FX(e){const t=BX(e),r=w.forwardRef((n,i)=>{const{children:a,...o}=n,l=w.Children.toArray(a),c=l.find(UX);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function BX(e){const t=w.forwardRef((r,n)=>{const{children:i,...a}=r;if(w.isValidElement(i)){const o=HX(i),l=zX(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qX=Symbol("radix.slottable");function UX(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qX}function zX(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function HX(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var s0="Dialog",[P8,k8]=Is(s0),[WX,Ha]=P8(s0),C8=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=w.useRef(null),c=w.useRef(null),[d,u]=la({prop:n,defaultProp:i??!1,onChange:a,caller:s0});return s.jsx(WX,{scope:t,triggerRef:l,contentRef:c,contentId:na(),titleId:na(),descriptionId:na(),open:d,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};C8.displayName=s0;var T8="DialogTrigger",O8=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Ha(T8,r),a=Kt(t,i.triggerRef);return s.jsx(Ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Qj(i.open),...n,ref:a,onClick:st(e.onClick,i.onOpenToggle)})});O8.displayName=T8;var Zj="DialogPortal",[VX,E8]=P8(Zj,{forceMount:void 0}),A8=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,a=Ha(Zj,t);return s.jsx(VX,{scope:t,forceMount:r,children:w.Children.map(n,o=>s.jsx(cs,{present:r||a.open,children:s.jsx(Qh,{asChild:!0,container:i,children:o})}))})};A8.displayName=Zj;var Jy="DialogOverlay",D8=w.forwardRef((e,t)=>{const r=E8(Jy,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Ha(Jy,e.__scopeDialog);return a.modal?s.jsx(cs,{present:n||a.open,children:s.jsx(KX,{...i,ref:t})}):null});D8.displayName=Jy;var YX=FX("DialogOverlay.RemoveScroll"),KX=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Ha(Jy,r);return s.jsx(Zp,{as:YX,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Ot.div,{"data-state":Qj(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),iu="DialogContent",M8=w.forwardRef((e,t)=>{const r=E8(iu,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Ha(iu,e.__scopeDialog);return s.jsx(cs,{present:n||a.open,children:a.modal?s.jsx(GX,{...i,ref:t}):s.jsx(JX,{...i,ref:t})})});M8.displayName=iu;var GX=w.forwardRef((e,t)=>{const r=Ha(iu,e.__scopeDialog),n=w.useRef(null),i=Kt(t,r.contentRef,n);return w.useEffect(()=>{const a=n.current;if(a)return Xx(a)},[]),s.jsx(R8,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:st(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:st(e.onFocusOutside,a=>a.preventDefault())})}),JX=w.forwardRef((e,t)=>{const r=Ha(iu,e.__scopeDialog),n=w.useRef(!1),i=w.useRef(!1);return s.jsx(R8,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),R8=w.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Ha(iu,r),c=w.useRef(null),d=Kt(t,c);return Zx(),s.jsxs(s.Fragment,{children:[s.jsx(Jp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(uu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Qj(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(XX,{titleId:l.titleId}),s.jsx($X,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Xj="DialogTitle",I8=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Ha(Xj,r);return s.jsx(Ot.h2,{id:i.titleId,...n,ref:t})});I8.displayName=Xj;var L8="DialogDescription",F8=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Ha(L8,r);return s.jsx(Ot.p,{id:i.descriptionId,...n,ref:t})});F8.displayName=L8;var B8="DialogClose",q8=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Ha(B8,r);return s.jsx(Ot.button,{type:"button",...n,ref:t,onClick:st(e.onClick,()=>i.onOpenChange(!1))})});q8.displayName=B8;function Qj(e){return e?"open":"closed"}var U8="DialogTitleWarning",[ZX,z8]=ZF(U8,{contentName:iu,titleName:Xj,docsSlug:"dialog"}),XX=({titleId:e})=>{const t=z8(U8),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},QX="DialogDescriptionWarning",$X=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${z8(QX).contentName}}.`;return w.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},$j=C8,e5=O8,t5=A8,Qp=D8,$p=M8,eg=I8,tg=F8,i0=q8;const rn=$j,yc=e5,eQ=t5,H8=w.forwardRef(({className:e,...t},r)=>s.jsx(Qp,{ref:r,className:$e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));H8.displayName=Qp.displayName;const Vr=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(eQ,{children:[s.jsx(H8,{}),s.jsxs($p,{ref:n,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(i0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Ms,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vr.displayName=$p.displayName;const Yr=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Yr.displayName="DialogHeader";const a0=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});a0.displayName="DialogFooter";const Kr=w.forwardRef(({className:e,...t},r)=>s.jsx(eg,{ref:r,className:$e("text-lg font-semibold leading-none tracking-tight",e),...t}));Kr.displayName=eg.displayName;const as=w.forwardRef(({className:e,...t},r)=>s.jsx(tg,{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));as.displayName=tg.displayName;var o0="Checkbox",[tQ]=Is(o0),[rQ,r5]=tQ(o0);function nQ(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[m,f]=la({prop:r,defaultProp:i??!1,onChange:c,caller:o0}),[g,y]=w.useState(null),[x,p]=w.useState(null),v=w.useRef(!1),b=g?!!o||!!g.closest("form"):!0,j={checked:m,disabled:a,setChecked:f,control:g,setControl:y,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:v,required:d,defaultChecked:xc(i)?!1:i,isFormControl:b,bubbleInput:x,setBubbleInput:p};return s.jsx(rQ,{scope:t,...j,children:sQ(h)?h(j):n})}var W8="CheckboxTrigger",V8=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:a,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:g}=r5(W8,e),y=Kt(i,u),x=w.useRef(c);return w.useEffect(()=>{const p=a==null?void 0:a.form;if(p){const v=()=>h(x.current);return p.addEventListener("reset",v),()=>p.removeEventListener("reset",v)}},[a,h]),s.jsx(Ot.button,{type:"button",role:"checkbox","aria-checked":xc(c)?"mixed":c,"aria-required":d,"data-state":Z8(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:y,onKeyDown:st(t,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:st(r,p=>{h(v=>xc(v)?!0:!v),g&&f&&(m.current=p.isPropagationStopped(),m.current||p.stopPropagation())})})});V8.displayName=W8;var n5=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return s.jsx(nQ,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(V8,{...h,ref:t,__scopeCheckbox:r}),m&&s.jsx(J8,{__scopeCheckbox:r})]})})});n5.displayName=o0;var Y8="CheckboxIndicator",K8=w.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,a=r5(Y8,r);return s.jsx(cs,{present:n||xc(a.checked)||a.checked===!0,children:s.jsx(Ot.span,{"data-state":Z8(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});K8.displayName=Y8;var G8="CheckboxBubbleInput",J8=w.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:m,setBubbleInput:f}=r5(G8,e),g=Kt(r,f),y=e0(a),x=Dx(n);w.useEffect(()=>{const v=m;if(!v)return;const b=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(b,"checked").set,P=!i.current;if(y!==a&&S){const M=new Event("click",{bubbles:P});v.indeterminate=xc(a),S.call(v,xc(a)?!1:a),v.dispatchEvent(M)}},[m,y,a,i]);const p=w.useRef(xc(a)?!1:a);return s.jsx(Ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??p.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});J8.displayName=G8;function sQ(e){return typeof e=="function"}function xc(e){return e==="indeterminate"}function Z8(e){return xc(e)?"indeterminate":e?"checked":"unchecked"}const on=w.forwardRef(({className:e,...t},r)=>s.jsx(n5,{ref:r,className:$e("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(K8,{className:$e("flex items-center justify-center text-current"),children:s.jsx(Uh,{className:"h-4 w-4"})})}));on.displayName=n5.displayName;const kv=async()=>{try{const e=[async()=>(await(await fetch("https://api.ipify.org?format=json")).json()).ip,async()=>(await(await fetch("https://api64.ipify.org?format=json")).json()).ip,async()=>{const n=(await(await fetch("https://www.cloudflare.com/cdn-cgi/trace")).text()).match(/ip=([\d\.]+)/);return n?n[1]:null}];for(const t of e)try{const r=await t();if(r)return console.log("Detected IP address:",r),r}catch(r){console.warn("IP detection method failed:",r);continue}return"unknown"}catch(e){return console.error("All IP detection methods failed:",e),"unknown"}},Cv=()=>navigator.userAgent||"unknown",Ir={async log(e){try{const{data:{session:t}}=await se.auth.getSession();if(!t){console.warn("No session found for audit logging");return}const r=await kv(),n=Cv(),i={user_id:t.user.id,user_email:t.user.email,ip_address:r,user_agent:n,...e};console.log("Logging audit entry:",{action:e.action_type,user:t.user.email,ip:r});const{error:a}=await se.from("audit_logs").insert(i);a&&console.error("Failed to log audit entry:",a)}catch(t){console.error("Audit logging error:",t)}},formatFieldName(e){return{full_name:"name",badge_number:"badge number",hire_date:"hire date",promotion_date_sergeant:"sergeant promotion date",promotion_date_lieutenant:"lieutenant promotion date",service_credit_override:"service credit adjustment",vacation_hours:"vacation hours",sick_hours:"sick hours",comp_hours:"comp hours",holiday_hours:"holiday hours"}[e]||e.replace(/_/g," ")},formatValueForDisplay(e,t){if(t==null)return"None";if(e.includes("_date"))try{return new Date(t).toLocaleDateString()}catch{return String(t)}if(e.includes("_hours"))return`${t} hours`;if(e==="email"){const r=String(t);if(r.includes("@")){const[n,i]=r.split("@");return`${n.substring(0,3)}...@${i}`}return r}if(e==="phone"){const r=String(t).replace(/\D/g,"");if(r.length===10)return`(${r.substring(0,3)}) ${r.substring(3,6)}-${r.substring(6)}`}return String(t)},generateProfileChangeDescription(e,t,r){const n=[],i=["full_name","email","phone","badge_number","rank","hire_date","promotion_date_sergeant","promotion_date_lieutenant","service_credit_override","vacation_hours","sick_hours","comp_hours","holiday_hours"];for(const a of i){const o=t==null?void 0:t[a],l=r[a];if(o!==l&&!(o==null&&l==null)){const c=this.formatValueForDisplay(a,o),d=this.formatValueForDisplay(a,l),u=this.formatFieldName(a);t===null?n.push(`set ${u} to ${d}`):l==null?n.push(`removed ${u} (was ${c})`):o==null?n.push(`added ${u} as ${d}`):n.push(`changed ${u} from ${c} to ${d}`)}}return n.length===0?`Updated profile for ${e} (no field changes detected)`:`Updated profile for ${e}: ${n.join(", ")}`},async logLogin(e,t,r){const n=t||await kv(),i=r||Cv();await this.log({action_type:"login",description:`User ${e} logged in`,ip_address:n,user_agent:i})},async logLoginSuccess(e,t,r){const n=t||await kv(),i=r||Cv();await this.log({action_type:"LOGIN_SUCCESS",description:`Successful login for ${e}`,ip_address:n,user_agent:i})},async logLoginFailure(e,t,r,n){const i=t||await kv(),a=r||Cv();await this.log({action_type:"LOGIN_FAILURE",description:`Failed login attempt for ${e}${n?`: ${n}`:""}`,ip_address:i,user_agent:a})},async logProfileUpdate(e,t,r,n,i,a,o){let l=o;!l&&r&&n?l=this.generateProfileChangeDescription(t,r,n):l||(l=r?`Updated profile for ${t}`:`Created profile for ${t}`),await this.log({action_type:"profile_update",table_name:"profiles",record_id:e,old_values:r,new_values:n,description:l})},async logScheduleChange(e,t,r,n,i){await this.log({action_type:"schedule_change",table_name:"recurring_schedules",record_id:t,old_values:n,new_values:i,description:`${e}: ${r}`})},async logPTOAssignment(e,t,r,n,i,a){await this.log({action_type:"PTO_ASSIGNMENT",table_name:"schedule_exceptions",record_id:e,description:a||`Assigned ${t} PTO for officer ${e} on ${r} (${n} hours)`,new_values:{pto_type:t,date:r,hours:n}})},async logPositionChange(e,t,r,n,i,a){await this.log({action_type:"POSITION_CHANGE",table_name:"schedule_exceptions",record_id:e,description:a||`Changed position from "${r}" to "${n}" for ${t}`,old_values:{position:r},new_values:{position:n}})},async logUnitNumberChange(e,t,r,n,i,a){await this.log({action_type:"UNIT_CHANGE",table_name:"schedule_exceptions",record_id:e,description:a||`Changed unit from "${r||"None"}" to "${n}" for ${t}`,old_values:{unit_number:r},new_values:{unit_number:n}})},async logNotesChange(e,t,r,n){await this.log({action_type:"NOTES_UPDATE",table_name:"schedule_exceptions",record_id:e,description:n||`Updated notes for ${t}`})},async logOfficerRemoval(e,t,r,n){await this.log({action_type:"OFFICER_REMOVAL",table_name:"schedule_exceptions",record_id:e,description:n||`Removed ${t} from schedule`})},async logPartnershipChange(e,t,r,n,i,a){await this.log({action_type:`PARTNERSHIP_${n.toUpperCase()}`,table_name:"schedule_exceptions",record_id:e,description:a||`${n==="created"?"Created":"Removed"} partnership for ${t}`,new_values:n==="created"?{partner_officer_id:r}:void 0,old_values:n==="removed"?{partner_officer_id:r}:void 0})},async logPTORemoval(e,t,r,n,i){await this.log({action_type:"PTO_REMOVAL",table_name:"schedule_exceptions",record_id:e,description:i||`Removed ${t} PTO from officer ${e} on ${r}`,old_values:{pto_type:t,date:r}})},async logPDFExport(e,t,r){await this.log({action_type:"PDF_EXPORT",table_name:"exports",description:r||`Exported ${t} PDF`,new_values:{export_type:t}})},async logSettingsChange(e,t,r){await this.log({action_type:"SETTINGS_UPDATE",table_name:"website_settings",description:r||"Updated website settings",new_values:t})},async logPasswordReset(e,t,r,n){await this.log({action_type:"PASSWORD_RESET",table_name:"profiles",record_id:e,description:n||`Password reset for ${t} by ${r}`})},async logOfficerChange(e,t,r,n,i){await this.log({action_type:`OFFICER_${e.toUpperCase()}`,table_name:"officers",record_id:t,description:i||`${e} officer ${r.name||t}`,new_values:e==="CREATE"?r:void 0})},async logPTOStatusChange(e,t,r,n,i){await this.log({action_type:"PTO_STATUS_CHANGE",table_name:"pto_requests",record_id:e,description:`Changed PTO status from "${t}" to "${r}"${i?`: ${i}`:""}`,old_values:{status:t},new_values:{status:r}})},async logDatabaseOperation(e,t,r,n,i,a){await this.log({action_type:`DB_${e}`,table_name:t,record_id:r,old_values:n,new_values:i,description:a||`${e} operation on ${t}`})},async logSystemEvent(e,t,r){await this.log({action_type:"SYSTEM_EVENT",description:`${e}: ${t}`,new_values:r})},async logError(e,t,r){await this.log({action_type:"ERROR",description:`${e}: ${t}`,new_values:r})},async logProfileRankChange(e,t,r,n,i){await this.log({action_type:"PROFILE_RANK_CHANGE",table_name:"profiles",record_id:e,description:`Changed rank from "${r}" to "${n}" for ${t}`,old_values:{rank:r},new_values:{rank:n}})},async logProfileDateChange(e,t,r,n,i,a){const o={hire:"hire date",sergeant_promotion:"sergeant promotion date",lieutenant_promotion:"lieutenant promotion date"},l=n?new Date(n).toLocaleDateString():"None",c=i?new Date(i).toLocaleDateString():"None";await this.log({action_type:"PROFILE_DATE_CHANGE",table_name:"profiles",record_id:e,description:`Changed ${o[r]} from ${l} to ${c} for ${t}`,old_values:{[r]:n},new_values:{[r]:i}})},async logProfileContactChange(e,t,r,n,i,a){const o={email:"email",phone:"phone number",badge_number:"badge number"};await this.log({action_type:"PROFILE_CONTACT_CHANGE",table_name:"profiles",record_id:e,description:`Changed ${o[r]} from "${n}" to "${i}" for ${t}`,old_values:{[r]:n},new_values:{[r]:i}})}},X8=w.createContext({user:null,userEmail:"",isLoading:!0}),iQ=({children:e})=>{const[t,r]=w.useState(null),[n,i]=w.useState(!0);w.useEffect(()=>{(async()=>{try{i(!0);const{data:{session:c}}=await se.auth.getSession();r((c==null?void 0:c.user)??null)}catch(c){console.error("Error getting session:",c),r(null)}finally{i(!1)}})();const{data:{subscription:l}}=se.auth.onAuthStateChange((c,d)=>{r((d==null?void 0:d.user)??null),i(!1)});return()=>l.unsubscribe()},[]);const a={user:t,userEmail:(t==null?void 0:t.email)||"",isLoading:n};return s.jsx(X8.Provider,{value:a,children:e})},ff=()=>{const e=w.useContext(X8);if(e===void 0)throw new Error("useUser must be used within a UserProvider");return e},nw=[{value:"vacation",label:"Vacation",column:"vacation_hours"},{value:"sick",label:"Sick Leave",column:"sick_hours"},{value:"comp",label:"Comp Time",column:"comp_hours"},{value:"holiday",label:"Holiday",column:"holiday_hours"}],Lo=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("probationary")||t.includes("ppo")},Tv=(e,t)=>{if(!e||!t)return 0;const[r,n]=e.split(":").map(Number),[i,a]=t.split(":").map(Number),o=r*60+n;let c=i*60+a-o;return c<0&&(c+=24*60),c/60},s5=({open:e,onOpenChange:t,officer:r,shift:n,date:i,ptoBalancesEnabled:a=!1,onSuccess:o})=>{const l=Lr(),{userEmail:c}=ff(),[d,u]=w.useState(""),[h,m]=w.useState(!0),[f,g]=w.useState(""),[y,x]=w.useState(""),[p,v]=w.useState(!1),[b,j]=w.useState(null),[S,P]=w.useState(!1),[M,I]=w.useState(!1),[O,L]=w.useState("clickedOfficer");w.useEffect(()=>{e&&r&&n&&(async()=>{var U,R;if(e&&r&&n){console.log(" Checking for partnerships and PPO status for officer:",r.officerId);const{data:C}=await se.from("profiles").select("rank").eq("id",r.officerId).single();I(Lo(C==null?void 0:C.rank));const{data:F}=await se.from("schedule_exceptions").select(`
            id,
            partner_officer_id,
            is_partnership,
            partner_profile:profiles!schedule_exceptions_partner_officer_id_fkey (
              id,
              full_name,
              badge_number,
              rank
            )
          `).eq("officer_id",r.officerId).eq("date",i).eq("shift_type_id",n.id).eq("is_partnership",!0).single();if(F!=null&&F.is_partnership&&F.partner_officer_id)console.log(" Officer has a partnership:",F),v(!0),j(F.partner_profile),P(Lo((U=F.partner_profile)==null?void 0:U.rank));else{const X=new Date(i).getDay(),{data:re}=await se.from("recurring_schedules").select(`
              id,
              partner_officer_id,
              is_partnership,
              partner_profile:profiles!recurring_schedules_partner_officer_id_fkey (
                id,
                full_name,
                badge_number,
                rank
              )
            `).eq("officer_id",r.officerId).eq("shift_type_id",n.id).eq("day_of_week",X).eq("is_partnership",!0).single();re!=null&&re.is_partnership&&re.partner_officer_id?(console.log(" Officer has a recurring partnership:",re),v(!0),j(re.partner_profile),P(Lo((R=re.partner_profile)==null?void 0:R.rank))):(v(!1),j(null),P(!1))}}else v(!1),j(null),P(!1),I(!1)})()},[e,r,n,i]),w.useEffect(()=>{var q,U,R,C;e&&r&&n?(u(((q=r.existingPTO)==null?void 0:q.ptoType)||""),m(((U=r.existingPTO)==null?void 0:U.isFullShift)??!0),g(((R=r.existingPTO)==null?void 0:R.startTime)||n.start_time),x(((C=r.existingPTO)==null?void 0:C.endTime)||n.end_time),L("clickedOfficer")):(u(""),m(!0),g(""),x(""),L("clickedOfficer"))},[e,r,n]);const T=async(q,U)=>{console.log(` Suspending partnership: ${q} with ${U} for PTO`);const{data:R}=await se.from("profiles").select("full_name, rank").eq("id",q).single(),{data:C}=await se.from("profiles").select("full_name, rank").eq("id",U).single(),F=Lo(C==null?void 0:C.rank),X=Lo(R==null?void 0:R.rank);if(console.log(" Partnership suspension check:",{ptoOfficer:R==null?void 0:R.full_name,ptoOfficerIsPPO:X,workingOfficer:C==null?void 0:C.full_name,workingOfficerIsPPO:F}),F){console.log(` Creating suspended partnership for PPO: ${C==null?void 0:C.full_name}`);const{data:re}=await se.from("schedule_exceptions").select("id, position_name, unit_number, notes, is_off").eq("officer_id",U).eq("date",i).eq("shift_type_id",n.id).single();if(re&&!re.is_off)await se.from("schedule_exceptions").update({partnership_suspended:!0,partnership_suspension_reason:`${(R==null?void 0:R.full_name)||"Partner"} on ${d}`,partner_officer_id:q,schedule_type:"working_partner_suspended",notes:re.notes||null,is_partnership:!1}).eq("id",re.id),console.log(" Updated PPO's existing record for partnership suspension");else if(re)console.log(" PPO already has a PTO record, skipping partnership suspension update");else{const z=new Date(i).getDay(),{data:Y}=await se.from("recurring_schedules").select("position_name, unit_number, notes").eq("officer_id",U).eq("shift_type_id",n.id).eq("day_of_week",z).single(),J={officer_id:U,date:i,shift_type_id:n.id,is_off:!1,is_partnership:!1,partnership_suspended:!0,partnership_suspension_reason:`${(R==null?void 0:R.full_name)||"Partner"} on ${d}`,partner_officer_id:q,position_name:(Y==null?void 0:Y.position_name)||"",unit_number:(Y==null?void 0:Y.unit_number)||"",notes:(Y==null?void 0:Y.notes)||`Partnership suspended - partner ${R==null?void 0:R.full_name} on PTO`,schedule_type:"working_partner_suspended",is_emergency_eligible:!0};await se.from("schedule_exceptions").insert(J),console.log(` Created suspended partnership record for PPO ${C==null?void 0:C.full_name}`)}}else if(X){console.log(` PPO ${R==null?void 0:R.full_name} on PTO - regular officer ${C==null?void 0:C.full_name} returns to regular schedule`);const{data:re}=await se.from("schedule_exceptions").select("id").eq("officer_id",U).eq("date",i).eq("shift_type_id",n.id).eq("partnership_suspended",!0).single();re&&(await se.from("schedule_exceptions").delete().eq("id",re.id),console.log(" Removed suspended partnership record for regular officer"))}await se.from("partnership_exceptions").insert({officer_id:q,partner_officer_id:U,date:i,shift_type_id:n.id,reason:`Officer ${R==null?void 0:R.full_name} on ${d} leave`,exception_type:"pto_suspension",created_at:new Date().toISOString(),is_ppo_partnership:X||F,can_emergency_reassign:F,pto_assigned_to:q}),F?ge.info(`Partnership suspended. PPO ${C==null?void 0:C.full_name} needs an emergency partner and will appear in "Partnerships (Suspended)" section.`):X?ge.info(`Partnership suspended. PPO ${R==null?void 0:R.full_name} is on PTO. ${C==null?void 0:C.full_name} will return to regular schedule.`):ge.info(`Partnership suspended. ${R==null?void 0:R.full_name} is on PTO. ${C==null?void 0:C.full_name} will return to regular schedule.`)},k=async q=>{var re;if(!a){console.log("PTO balances disabled, skipping balance restoration");return}const U=q.ptoType,R=q.startTime,C=q.endTime,F=Tv(R,C),X=(re=nw.find(z=>z.value===U))==null?void 0:re.column;if(X){const{data:z,error:Y}=await se.from("profiles").select("*").eq("id",r.officerId).single();if(Y)throw Y;const J=z[X],{error:ne}=await se.from("profiles").update({[X]:J+F}).eq("id",r.officerId);if(ne)throw ne}},E=Xt({mutationFn:async()=>{var z;if(!r||!n)throw new Error("Officer or shift not available");const q=h?n.start_time:f,U=h?n.end_time:y,R=Tv(q,U);let C=r.officerId,F=b==null?void 0:b.id;if(p&&b&&(O==="partner"&&(C=b.id,F=r.officerId),console.log(` Suspending partnership for PTO assignment to ${O==="partner"?b.full_name:r.name}...`),await T(C,F)),r.existingPTO){a&&await k(r.existingPTO);const{error:Y}=await se.from("schedule_exceptions").delete().eq("officer_id",r.officerId).eq("date",i).eq("shift_type_id",n.id);if(Y)throw Y;console.log(` Deleted all existing schedule exceptions for officer ${r.officerId}`)}if(a){const{data:Y,error:J}=await se.from("profiles").select("*").eq("id",C).single();if(J)throw J;const ne=(z=nw.find(he=>he.value===d))==null?void 0:z.column;if(!ne)throw new Error("Invalid PTO type");const le=Y[ne];if(le<R)throw new Error(`Insufficient ${d} balance. Available: ${le} hours`);const{error:G}=await se.from("profiles").update({[ne]:le-R}).eq("id",C);if(G)throw G}const X={officer_id:C,date:i,shift_type_id:n.id,is_off:!0,reason:d,custom_start_time:h?null:q,custom_end_time:h?null:U,partnership_suspended:p,partnership_suspension_reason:p?`${d} - Partner unavailable`:null,partner_officer_id:p?F:null,schedule_type:"pto",hours_worked:R,is_partial_shift:!h,notes:p&&(O==="clickedOfficer"&&S||O==="partner"&&M)?`PPO on PTO - Partner ${O==="clickedOfficer"?b==null?void 0:b.full_name:r.name} available for emergency assignment`:null},{error:re}=await se.from("schedule_exceptions").insert(X);if(re)throw re;return console.log(` Created PTO record for officer ${C}`),{officerId:C,officerName:O==="partner"?b.full_name:r.name,ptoType:d,date:i,startTime:q,endTime:U,hoursUsed:R,isFullShift:h,shiftName:n.name,hadPartnership:p,partnerName:O==="partner"?r.name:b==null?void 0:b.full_name,partnerId:F,ptoAssignedTo:O,balancesEnabled:a}},onSuccess:q=>{let U=r!=null&&r.existingPTO?"PTO updated successfully":"PTO assigned successfully";q.hadPartnership&&(q.partnerName&&Lo(r.rank)?U+=`. PPO ${q.partnerName}'s partnership is suspended and they can be assigned an emergency partner for today.`:q.officerName&&Lo(b==null?void 0:b.rank)?U+=`. ${q.partnerName} is available for reassignment while PPO ${r==null?void 0:r.name} is on PTO.`:U+=`. Partnership with ${q.partnerName} has been suspended.`),q.balancesEnabled||(U+=" (Unlimited PTO - no balance deducted)"),ge.success(U),Ir.logPTOAssignment(q.officerId,q.ptoType,q.date,q.hoursUsed,c,`${r!=null&&r.existingPTO?"Updated":"Assigned"} ${q.ptoType} PTO to ${q.officerName} on ${q.date} (${q.hoursUsed} hours)`+(q.hadPartnership?` - Partnership with ${q.partnerName} suspended`:"")+(q.partnerName&&Lo(r.rank)?" - PPO partner available for emergency assignment":"")+(q.balancesEnabled?"":" - Unlimited PTO mode")),o&&o(q),l.invalidateQueries({queryKey:["daily-schedule"]}),l.invalidateQueries({queryKey:["weekly-schedule"]}),t(!1)},onError:q=>{ge.error(q.message||"Failed to assign PTO")}}),A=Xt({mutationFn:async()=>{var X,re;if(!(r!=null&&r.existingPTO))return;a&&await k(r.existingPTO);const{error:q}=await se.from("schedule_exceptions").delete().eq("officer_id",r.officerId).eq("date",i).eq("shift_type_id",n.id);if(q)throw q;console.log(` Deleted all schedule exceptions for officer ${r.officerId}`);const{data:U}=await se.from("schedule_exceptions").select(`
          id,
          officer_id,
          partnership_suspended,
          partnership_suspension_reason,
          partner_officer_id,
          notes,
          is_emergency_partnership,
          profiles:officer_id (
            full_name,
            rank
          )
        `).eq("date",i).eq("shift_type_id",n.id).eq("partnership_suspended",!0).eq("partner_officer_id",r.officerId).single();console.log("Found partner's suspended partnership record:",U);let R="",C=!1,F=!1;return U&&(R=((X=U.profiles)==null?void 0:X.full_name)||"Partner",C=Lo((re=U.profiles)==null?void 0:re.rank),U.is_emergency_partnership||U.notes&&U.notes.includes("[EMERGENCY_ASSIGNMENT]")?(console.log("Partner has emergency assignment, keeping partnership suspended"),await se.from("schedule_exceptions").update({partnership_suspension_reason:"Original partner returned but emergency assignment active"}).eq("id",U.id)):(console.log("No emergency assignment, restoring partnership"),await se.from("schedule_exceptions").delete().eq("id",U.id),F=!0,await se.from("partnership_exceptions").update({resolved_at:new Date().toISOString(),resolved_by:r.officerId}).eq("officer_id",r.officerId).eq("partner_officer_id",U.officer_id).eq("date",i).eq("exception_type","pto_suspension"))),{officerId:r.officerId,officerName:r.name,ptoType:r.existingPTO.ptoType,date:i,hoursUsed:Tv(r.existingPTO.startTime,r.existingPTO.endTime),restoredPartnership:F,partnerName:R,partnerIsPPO:C,officerIsPPO:M,balancesEnabled:a}},onSuccess:q=>{let U="PTO removed successfully";q.restoredPartnership&&(q.partnerIsPPO?U+=`. Partnership with PPO ${q.partnerName} has been restored.`:U+=`. Partnership with ${q.partnerName} has been restored.`),q.balancesEnabled?U+=` ${q.hoursUsed} hours restored to balance.`:U+=" (Unlimited PTO mode - no balance affected)",ge.success(U),Ir.logPTORemoval(q.officerId,q.ptoType,q.date,c,`Removed ${q.ptoType} PTO from ${q.officerName} on ${q.date}`+(q.balancesEnabled?` (${q.hoursUsed} hours restored)`:"")+(q.restoredPartnership?` - Partnership with ${q.partnerName} restored`:"")),l.invalidateQueries({queryKey:["daily-schedule"]}),l.invalidateQueries({queryKey:["weekly-schedule"]}),t(!1)},onError:q=>{ge.error(q.message||"Failed to remove PTO")}});return!r||!n?null:s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{children:[s.jsxs(Yr,{children:[s.jsxs(Kr,{children:[r.existingPTO?"Edit PTO":"Assign PTO",!a&&s.jsx(Re,{variant:"outline",className:"ml-2 bg-green-50 text-green-700 border-green-200",children:"Unlimited PTO"})]}),s.jsxs(as,{children:[r.existingPTO?`Edit PTO for ${r.name} on ${n.name}`:`Assign PTO for ${r.name} on ${n.name}`,!a&&" - Unlimited PTO mode"]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[p&&b&&s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsxs("h4",{className:"font-medium text-blue-800 mb-2 flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Partnership Detected"]}),s.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["This officer is partnered with ",s.jsx("span",{className:"font-semibold",children:b.full_name}),"."]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800",children:"Select Officer for PTO:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"ptoClickedOfficer",name:"ptoOfficer",value:"clickedOfficer",checked:O==="clickedOfficer",onChange:q=>L(q.target.value)}),s.jsxs(Ce,{htmlFor:"ptoClickedOfficer",className:"cursor-pointer",children:[r.name," ",M&&s.jsx(Re,{className:"ml-2 bg-yellow-100 text-yellow-800 border-yellow-300 text-xs",children:"PPO"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"ptoPartner",name:"ptoOfficer",value:"partner",checked:O==="partner",onChange:q=>L(q.target.value)}),s.jsxs(Ce,{htmlFor:"ptoPartner",className:"cursor-pointer",children:[b.full_name," ",S&&s.jsx(Re,{className:"ml-2 bg-yellow-100 text-yellow-800 border-yellow-300 text-xs",children:"PPO"})]})]})]}),S&&O==="clickedOfficer"&&s.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:" PPO Partner Notice:"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Assigning PTO to ",r.name," will suspend partnership. PPO ",b.full_name," will need an emergency partner."]})]}),M&&O==="partner"&&s.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:" PPO Officer Notice:"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Assigning PTO to ",b.full_name," will suspend partnership. PPO ",r.name," will need an emergency partner."]})]})]}),!a&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-600 font-medium",children:"Unlimited PTO Mode"}),s.jsx(Re,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300",children:"No Balance Tracking"})]}),s.jsx("p",{className:"text-sm text-green-700 mt-1",children:"PTO balances are disabled. Hours will not be deducted from or restored to officer balances."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO Type"}),s.jsxs(Wt,{value:d,onValueChange:u,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select PTO type"})}),s.jsx(qt,{children:nw.map(q=>s.jsx(ct,{value:q.value,children:q.label},q.value))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"fullShift",checked:h,onCheckedChange:q=>{m(q===!0),q&&(g(n.start_time),x(n.end_time))}}),s.jsxs(Ce,{htmlFor:"fullShift",className:"cursor-pointer",children:["Full shift (",n.start_time," - ",n.end_time,")"]})]}),!h&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO Start Time"}),s.jsx(St,{type:"time",value:f,onChange:q=>g(q.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO End Time"}),s.jsx(St,{type:"time",value:y,onChange:q=>x(q.target.value)})]})]}),d&&s.jsxs("div",{className:"text-sm text-muted-foreground p-2 bg-gray-50 rounded",children:["Hours: ",Tv(h?n.start_time:f,h?n.end_time:y).toFixed(2),a&&" (will be deducted from balance)",!a&&" (no balance deduction)"]})]}),s.jsxs(a0,{className:"flex justify-between",children:[s.jsx("div",{children:r.existingPTO&&s.jsx(Ne,{variant:"destructive",onClick:()=>A.mutate(),disabled:A.isPending,children:A.isPending?"Removing...":"Remove PTO"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(Ne,{onClick:()=>E.mutate(),disabled:!d||E.isPending,className:p?"bg-blue-600 hover:bg-blue-700":"",children:[E.isPending?r.existingPTO?"Updating...":"Assigning...":r.existingPTO?"Update PTO":"Assign PTO",p&&!E.isPending&&" & Suspend Partnership"]})]})]})]})})},aQ="modulepreload",oQ=function(e,t){return new URL(e,t).href},xk={},xh=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(r.map(d=>{if(d=oQ(d,n),d in xk)return;xk[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let g=o.length-1;g>=0;g--){const y=o[g];if(y.href===d&&(!u||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":aQ,u||(f.as="script"),f.crossOrigin="",f.href=d,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function Or(e){"@babel/helpers - typeof";return Or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(e)}var za=Uint8Array,Si=Uint16Array,i5=Int32Array,a5=new za([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o5=new za([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bk=new za([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Q8=function(e,t){for(var r=new Si(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new i5(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},$8=Q8(a5,2),lQ=$8.b,k2=$8.r;lQ[28]=258,k2[258]=28;var cQ=Q8(o5,0),wk=cQ.r,C2=new Si(32768);for(var Qr=0;Qr<32768;++Qr){var Fl=(Qr&43690)>>1|(Qr&21845)<<1;Fl=(Fl&52428)>>2|(Fl&13107)<<2,Fl=(Fl&61680)>>4|(Fl&3855)<<4,C2[Qr]=((Fl&65280)>>8|(Fl&255)<<8)>>1}var Im=function(e,t,r){for(var n=e.length,i=0,a=new Si(t);i<n;++i)e[i]&&++a[e[i]-1];var o=new Si(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(r){l=new Si(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var d=i<<4|e[i],u=t-e[i],h=o[e[i]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)l[C2[h]>>c]=d}else for(l=new Si(n),i=0;i<n;++i)e[i]&&(l[i]=C2[o[e[i]-1]++]>>15-e[i]);return l},au=new za(288);for(var Qr=0;Qr<144;++Qr)au[Qr]=8;for(var Qr=144;Qr<256;++Qr)au[Qr]=9;for(var Qr=256;Qr<280;++Qr)au[Qr]=7;for(var Qr=280;Qr<288;++Qr)au[Qr]=8;var Zy=new za(32);for(var Qr=0;Qr<32;++Qr)Zy[Qr]=5;var dQ=Im(au,9,0),uQ=Im(Zy,5,0),eD=function(e){return(e+7)/8|0},hQ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new za(e.subarray(t,r))},Fo=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},am=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},sw=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return{t:rD,l:0};if(i==1){var o=new za(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,P){return S.f-P.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=i-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=a[0].s,n=1;n<i;++n)a[n].s>m&&(m=a[n].s);var f=new Si(m+1),g=T2(r[u-1],f,0);if(g>t){var n=0,y=0,x=g-t,p=1<<x;for(a.sort(function(P,M){return f[M.s]-f[P.s]||P.f-M.f});n<i;++n){var v=a[n].s;if(f[v]>t)y+=p-(1<<g-f[v]),f[v]=t;else break}for(y>>=x;y>0;){var b=a[n].s;f[b]<t?y-=1<<t-f[b]++-1:++n}for(;n>=0&&y;--n){var j=a[n].s;f[j]==t&&(--f[j],++y)}g=t}return{t:new za(f),l:g}},T2=function(e,t,r){return e.s==-1?Math.max(T2(e.l,t,r+1),T2(e.r,t,r+1)):t[e.s]=r},Nk=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Si(++t),n=0,i=e[0],a=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:r.subarray(0,n),n:t}},om=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},tD=function(e,t,r){var n=r.length,i=eD(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},jk=function(e,t,r,n,i,a,o,l,c,d,u){Fo(t,u++,r),++i[256];for(var h=sw(i,15),m=h.t,f=h.l,g=sw(a,15),y=g.t,x=g.l,p=Nk(m),v=p.c,b=p.n,j=Nk(y),S=j.c,P=j.n,M=new Si(19),I=0;I<v.length;++I)++M[v[I]&31];for(var I=0;I<S.length;++I)++M[S[I]&31];for(var O=sw(M,7),L=O.t,T=O.l,k=19;k>4&&!L[bk[k-1]];--k);var E=d+5<<3,A=om(i,au)+om(a,Zy)+o,q=om(i,m)+om(a,y)+o+14+3*k+om(M,L)+2*M[16]+3*M[17]+7*M[18];if(c>=0&&E<=A&&E<=q)return tD(t,u,e.subarray(c,c+d));var U,R,C,F;if(Fo(t,u,1+(q<A)),u+=2,q<A){U=Im(m,f,0),R=m,C=Im(y,x,0),F=y;var X=Im(L,T,0);Fo(t,u,b-257),Fo(t,u+5,P-1),Fo(t,u+10,k-4),u+=14;for(var I=0;I<k;++I)Fo(t,u+3*I,L[bk[I]]);u+=3*k;for(var re=[v,S],z=0;z<2;++z)for(var Y=re[z],I=0;I<Y.length;++I){var J=Y[I]&31;Fo(t,u,X[J]),u+=L[J],J>15&&(Fo(t,u,Y[I]>>5&127),u+=Y[I]>>12)}}else U=dQ,R=au,C=uQ,F=Zy;for(var I=0;I<l;++I){var ne=n[I];if(ne>255){var J=ne>>18&31;am(t,u,U[J+257]),u+=R[J+257],J>7&&(Fo(t,u,ne>>23&31),u+=a5[J]);var le=ne&31;am(t,u,C[le]),u+=F[le],le>3&&(am(t,u,ne>>5&8191),u+=o5[le])}else am(t,u,U[ne]),u+=R[ne]}return am(t,u,U[256]),u+R[256]},fQ=new i5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rD=new za(0),mQ=function(e,t,r,n,i,a){var o=a.z||e.length,l=new za(n+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(n,l.length-i),d=a.l,u=(a.r||0)&7;if(t){u&&(c[0]=a.r>>3);for(var h=fQ[t-1],m=h>>13,f=h&8191,g=(1<<r)-1,y=a.p||new Si(32768),x=a.h||new Si(g+1),p=Math.ceil(r/3),v=2*p,b=function(ae){return(e[ae]^e[ae+1]<<p^e[ae+2]<<v)&g},j=new i5(25e3),S=new Si(288),P=new Si(32),M=0,I=0,O=a.i||0,L=0,T=a.w||0,k=0;O+2<o;++O){var E=b(O),A=O&32767,q=x[E];if(y[A]=q,x[E]=A,T<=O){var U=o-O;if((M>7e3||L>24576)&&(U>423||!d)){u=jk(e,c,0,j,S,P,I,L,k,O-k,u),L=M=I=0,k=O;for(var R=0;R<286;++R)S[R]=0;for(var R=0;R<30;++R)P[R]=0}var C=2,F=0,X=f,re=A-q&32767;if(U>2&&E==b(O-re))for(var z=Math.min(m,U)-1,Y=Math.min(32767,O),J=Math.min(258,U);re<=Y&&--X&&A!=q;){if(e[O+C]==e[O+C-re]){for(var ne=0;ne<J&&e[O+ne]==e[O+ne-re];++ne);if(ne>C){if(C=ne,F=re,ne>z)break;for(var le=Math.min(re,ne-2),G=0,R=0;R<le;++R){var he=O-re+R&32767,xe=y[he],Se=he-xe&32767;Se>G&&(G=Se,q=he)}}}A=q,q=y[A],re+=A-q&32767}if(F){j[L++]=268435456|k2[C]<<18|wk[F];var K=k2[C]&31,we=wk[F]&31;I+=a5[K]+o5[we],++S[257+K],++P[we],T=O+C,++M}else j[L++]=e[O],++S[e[O]]}}for(O=Math.max(O,T);O<o;++O)j[L++]=e[O],++S[e[O]];u=jk(e,c,d,j,S,P,I,L,k,O-k,u),d||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=x,a.p=y,a.i=O,a.w=T)}else{for(var O=a.w||0;O<o+d;O+=65535){var Te=O+65535;Te>=o&&(c[u/8|0]=d,Te=o),u=tD(c,u+1,e.subarray(O,Te))}a.i=o}return hQ(l,0,n+eD(u)+i)},nD=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,a=r.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},pQ=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new za(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return mQ(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},sD=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},gQ=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=nD();i.p(t.dictionary),sD(e,2,i.d())}};function O2(e,t){t||(t={});var r=nD();r.p(e);var n=pQ(e,t,t.dictionary?6:2,4);return gQ(n,t),sD(n,n.length-4,r.d()),n}var vQ=typeof TextDecoder<"u"&&new TextDecoder,yQ=0;try{vQ.decode(rD,{stream:!0}),yQ=1}catch{}function xQ(e){if(Array.isArray(e))return e}function bQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function _k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wQ(e,t){if(e){if(typeof e=="string")return _k(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_k(e,t):void 0}}function NQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sk(e,t){return xQ(e)||bQ(e,t)||wQ(e,t)||NQ()}function Pk(e,t="utf8"){return new TextDecoder(t).decode(e)}const jQ=new TextEncoder;function _Q(e){return jQ.encode(e)}const SQ=1024*8,PQ=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),iw={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class l5{constructor(t=SQ,r={}){fr(this,"buffer");fr(this,"byteLength");fr(this,"byteOffset");fr(this,"length");fr(this,"offset");fr(this,"lastWrittenByte");fr(this,"littleEndian");fr(this,"_data");fr(this,"_mark");fr(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,a=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof l5)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=iw[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===PQ&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const c=new iw[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new iw[r](a);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return Pk(this.readBytes(t))}decodeText(t=1,r="utf8"){return Pk(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(_Q(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function mf(e){let t=e.length;for(;--t>=0;)e[t]=0}const kQ=3,CQ=258,iD=29,TQ=256,OQ=TQ+1+iD,aD=30,EQ=512,AQ=new Array((OQ+2)*2);mf(AQ);const DQ=new Array(aD*2);mf(DQ);const MQ=new Array(EQ);mf(MQ);const RQ=new Array(CQ-kQ+1);mf(RQ);const IQ=new Array(iD);mf(IQ);const LQ=new Array(aD);mf(LQ);const FQ=(e,t,r,n)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var E2=FQ;const BQ=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},qQ=new Uint32Array(BQ()),UQ=(e,t,r,n)=>{const i=qQ,a=n+r;e^=-1;for(let o=n;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var $a=UQ,A2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},oD={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const zQ=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var HQ=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)zQ(r,n)&&(e[n]=r[n])}}return e},WQ=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let o=e[n];r.set(o,i),i+=o.length}return r},lD={assign:HQ,flattenChunks:WQ};let cD=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cD=!1}const bp=new Uint8Array(256);for(let e=0;e<256;e++)bp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;bp[254]=bp[254]=1;var VQ=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,o=e.length,l=0;for(i=0;i<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),a=0,i=0;a<l;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const YQ=(e,t)=>{if(t<65534&&e.subarray&&cD)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var KQ=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){a[i++]=o;continue}let l=bp[o];if(l>4){a[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return YQ(a,i)},GQ=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+bp[e[r]]>t?r:t},D2={string2buf:VQ,buf2string:KQ,utf8border:GQ};function JQ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZQ=JQ;const Ov=16209,XQ=16191;var QQ=function(t,r){let n,i,a,o,l,c,d,u,h,m,f,g,y,x,p,v,b,j,S,P,M,I,O,L;const T=t.state;n=t.next_in,O=t.input,i=n+(t.avail_in-5),a=t.next_out,L=t.output,o=a-(r-t.avail_out),l=a+(t.avail_out-257),c=T.dmax,d=T.wsize,u=T.whave,h=T.wnext,m=T.window,f=T.hold,g=T.bits,y=T.lencode,x=T.distcode,p=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;e:do{g<15&&(f+=O[n++]<<g,g+=8,f+=O[n++]<<g,g+=8),b=y[f&p];t:for(;;){if(j=b>>>24,f>>>=j,g-=j,j=b>>>16&255,j===0)L[a++]=b&65535;else if(j&16){S=b&65535,j&=15,j&&(g<j&&(f+=O[n++]<<g,g+=8),S+=f&(1<<j)-1,f>>>=j,g-=j),g<15&&(f+=O[n++]<<g,g+=8,f+=O[n++]<<g,g+=8),b=x[f&v];r:for(;;){if(j=b>>>24,f>>>=j,g-=j,j=b>>>16&255,j&16){if(P=b&65535,j&=15,g<j&&(f+=O[n++]<<g,g+=8,g<j&&(f+=O[n++]<<g,g+=8)),P+=f&(1<<j)-1,P>c){t.msg="invalid distance too far back",T.mode=Ov;break e}if(f>>>=j,g-=j,j=a-o,P>j){if(j=P-j,j>u&&T.sane){t.msg="invalid distance too far back",T.mode=Ov;break e}if(M=0,I=m,h===0){if(M+=d-j,j<S){S-=j;do L[a++]=m[M++];while(--j);M=a-P,I=L}}else if(h<j){if(M+=d+h-j,j-=h,j<S){S-=j;do L[a++]=m[M++];while(--j);if(M=0,h<S){j=h,S-=j;do L[a++]=m[M++];while(--j);M=a-P,I=L}}}else if(M+=h-j,j<S){S-=j;do L[a++]=m[M++];while(--j);M=a-P,I=L}for(;S>2;)L[a++]=I[M++],L[a++]=I[M++],L[a++]=I[M++],S-=3;S&&(L[a++]=I[M++],S>1&&(L[a++]=I[M++]))}else{M=a-P;do L[a++]=L[M++],L[a++]=L[M++],L[a++]=L[M++],S-=3;while(S>2);S&&(L[a++]=L[M++],S>1&&(L[a++]=L[M++]))}}else if(j&64){t.msg="invalid distance code",T.mode=Ov;break e}else{b=x[(b&65535)+(f&(1<<j)-1)];continue r}break}}else if(j&64)if(j&32){T.mode=XQ;break e}else{t.msg="invalid literal/length code",T.mode=Ov;break e}else{b=y[(b&65535)+(f&(1<<j)-1)];continue t}break}}while(n<i&&a<l);S=g>>3,n-=S,g-=S<<3,f&=(1<<g)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<l?257+(l-a):257-(a-l),T.hold=f,T.bits=g};const Uu=15,kk=852,Ck=592,Tk=0,aw=1,Ok=2,$Q=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),e$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),t$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),r$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),n$=(e,t,r,n,i,a,o,l)=>{const c=l.bits;let d=0,u=0,h=0,m=0,f=0,g=0,y=0,x=0,p=0,v=0,b,j,S,P,M,I=null,O;const L=new Uint16Array(Uu+1),T=new Uint16Array(Uu+1);let k=null,E,A,q;for(d=0;d<=Uu;d++)L[d]=0;for(u=0;u<n;u++)L[t[r+u]]++;for(f=c,m=Uu;m>=1&&L[m]===0;m--);if(f>m&&(f=m),m===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<m&&L[h]===0;h++);for(f<h&&(f=h),x=1,d=1;d<=Uu;d++)if(x<<=1,x-=L[d],x<0)return-1;if(x>0&&(e===Tk||m!==1))return-1;for(T[1]=0,d=1;d<Uu;d++)T[d+1]=T[d]+L[d];for(u=0;u<n;u++)t[r+u]!==0&&(o[T[t[r+u]]++]=u);if(e===Tk?(I=k=o,O=20):e===aw?(I=$Q,k=e$,O=257):(I=t$,k=r$,O=0),v=0,u=0,d=h,M=a,g=f,y=0,S=-1,p=1<<f,P=p-1,e===aw&&p>kk||e===Ok&&p>Ck)return 1;for(;;){E=d-y,o[u]+1<O?(A=0,q=o[u]):o[u]>=O?(A=k[o[u]-O],q=I[o[u]-O]):(A=96,q=0),b=1<<d-y,j=1<<g,h=j;do j-=b,i[M+(v>>y)+j]=E<<24|A<<16|q|0;while(j!==0);for(b=1<<d-1;v&b;)b>>=1;if(b!==0?(v&=b-1,v+=b):v=0,u++,--L[d]===0){if(d===m)break;d=t[r+o[u]]}if(d>f&&(v&P)!==S){for(y===0&&(y=f),M+=h,g=d-y,x=1<<g;g+y<m&&(x-=L[g+y],!(x<=0));)g++,x<<=1;if(p+=1<<g,e===aw&&p>kk||e===Ok&&p>Ck)return 1;S=v&P,i[S]=f<<24|g<<16|M-a|0}}return v!==0&&(i[M+v]=d-y<<24|64<<16|0),l.bits=f,0};var Lm=n$;const s$=0,dD=1,uD=2,{Z_FINISH:Ek,Z_BLOCK:i$,Z_TREES:Ev,Z_OK:ou,Z_STREAM_END:a$,Z_NEED_DICT:o$,Z_STREAM_ERROR:da,Z_DATA_ERROR:hD,Z_MEM_ERROR:fD,Z_BUF_ERROR:l$,Z_DEFLATED:Ak}=oD,l0=16180,Dk=16181,Mk=16182,Rk=16183,Ik=16184,Lk=16185,Fk=16186,Bk=16187,qk=16188,Uk=16189,Xy=16190,Bo=16191,ow=16192,zk=16193,lw=16194,Hk=16195,Wk=16196,Vk=16197,Yk=16198,Av=16199,Dv=16200,Kk=16201,Gk=16202,Jk=16203,Zk=16204,Xk=16205,cw=16206,Qk=16207,$k=16208,sn=16209,mD=16210,pD=16211,c$=852,d$=592,u$=15,h$=u$,eC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function f$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const mu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<l0||t.mode>pD?1:0},gD=e=>{if(mu(e))return da;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=l0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(c$),t.distcode=t.distdyn=new Int32Array(d$),t.sane=1,t.back=-1,ou},vD=e=>{if(mu(e))return da;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,gD(e)},yD=(e,t)=>{let r;if(mu(e))return da;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?da:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,vD(e))},xD=(e,t)=>{if(!e)return da;const r=new f$;e.state=r,r.strm=e,r.window=null,r.mode=l0;const n=yD(e,t);return n!==ou&&(e.state=null),n},m$=e=>xD(e,h$);let tC=!0,dw,uw;const p$=e=>{if(tC){dw=new Int32Array(512),uw=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Lm(dD,e.lens,0,288,dw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Lm(uD,e.lens,0,32,uw,0,e.work,{bits:5}),tC=!1}e.lencode=dw,e.lenbits=9,e.distcode=uw,e.distbits=5},bD=(e,t,r,n)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},g$=(e,t)=>{let r,n,i,a,o,l,c,d,u,h,m,f,g,y,x=0,p,v,b,j,S,P,M,I;const O=new Uint8Array(4);let L,T;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mu(e)||!e.output||!e.input&&e.avail_in!==0)return da;r=e.state,r.mode===Bo&&(r.mode=ow),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,d=r.hold,u=r.bits,h=l,m=c,I=ou;e:for(;;)switch(r.mode){case l0:if(r.wrap===0){r.mode=ow;break}for(;u<16;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,O[0]=d&255,O[1]=d>>>8&255,r.check=$a(r.check,O,2,0),d=0,u=0,r.mode=Dk;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=sn;break}if((d&15)!==Ak){e.msg="unknown compression method",r.mode=sn;break}if(d>>>=4,u-=4,M=(d&15)+8,r.wbits===0&&(r.wbits=M),M>15||M>r.wbits){e.msg="invalid window size",r.mode=sn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?Uk:Bo,d=0,u=0;break;case Dk:for(;u<16;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(r.flags=d,(r.flags&255)!==Ak){e.msg="unknown compression method",r.mode=sn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=sn;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,r.check=$a(r.check,O,2,0)),d=0,u=0,r.mode=Mk;case Mk:for(;u<32;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,O[2]=d>>>16&255,O[3]=d>>>24&255,r.check=$a(r.check,O,4,0)),d=0,u=0,r.mode=Rk;case Rk:for(;u<16;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,r.check=$a(r.check,O,2,0)),d=0,u=0,r.mode=Ik;case Ik:if(r.flags&1024){for(;u<16;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,r.check=$a(r.check,O,2,0)),d=0,u=0}else r.head&&(r.head.extra=null);r.mode=Lk;case Lk:if(r.flags&1024&&(f=r.length,f>l&&(f=l),f&&(r.head&&(M=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+f),M)),r.flags&512&&r.wrap&4&&(r.check=$a(r.check,n,f,a)),l-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Fk;case Fk:if(r.flags&2048){if(l===0)break e;f=0;do M=n[a+f++],r.head&&M&&r.length<65536&&(r.head.name+=String.fromCharCode(M));while(M&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=$a(r.check,n,f,a)),l-=f,a+=f,M)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Bk;case Bk:if(r.flags&4096){if(l===0)break e;f=0;do M=n[a+f++],r.head&&M&&r.length<65536&&(r.head.comment+=String.fromCharCode(M));while(M&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=$a(r.check,n,f,a)),l-=f,a+=f,M)break e}else r.head&&(r.head.comment=null);r.mode=qk;case qk:if(r.flags&512){for(;u<16;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=sn;break}d=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Bo;break;case Uk:for(;u<32;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}e.adler=r.check=eC(d),d=0,u=0,r.mode=Xy;case Xy:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,r.hold=d,r.bits=u,o$;e.adler=r.check=1,r.mode=Bo;case Bo:if(t===i$||t===Ev)break e;case ow:if(r.last){d>>>=u&7,u-=u&7,r.mode=cw;break}for(;u<3;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}switch(r.last=d&1,d>>>=1,u-=1,d&3){case 0:r.mode=zk;break;case 1:if(p$(r),r.mode=Av,t===Ev){d>>>=2,u-=2;break e}break;case 2:r.mode=Wk;break;case 3:e.msg="invalid block type",r.mode=sn}d>>>=2,u-=2;break;case zk:for(d>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=sn;break}if(r.length=d&65535,d=0,u=0,r.mode=lw,t===Ev)break e;case lw:r.mode=Hk;case Hk:if(f=r.length,f){if(f>l&&(f=l),f>c&&(f=c),f===0)break e;i.set(n.subarray(a,a+f),o),l-=f,a+=f,c-=f,o+=f,r.length-=f;break}r.mode=Bo;break;case Wk:for(;u<14;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(r.nlen=(d&31)+257,d>>>=5,u-=5,r.ndist=(d&31)+1,d>>>=5,u-=5,r.ncode=(d&15)+4,d>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=sn;break}r.have=0,r.mode=Vk;case Vk:for(;r.have<r.ncode;){for(;u<3;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}r.lens[k[r.have++]]=d&7,d>>>=3,u-=3}for(;r.have<19;)r.lens[k[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},I=Lm(s$,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,I){e.msg="invalid code lengths set",r.mode=sn;break}r.have=0,r.mode=Yk;case Yk:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[d&(1<<r.lenbits)-1],p=x>>>24,v=x>>>16&255,b=x&65535,!(p<=u);){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(b<16)d>>>=p,u-=p,r.lens[r.have++]=b;else{if(b===16){for(T=p+2;u<T;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(d>>>=p,u-=p,r.have===0){e.msg="invalid bit length repeat",r.mode=sn;break}M=r.lens[r.have-1],f=3+(d&3),d>>>=2,u-=2}else if(b===17){for(T=p+3;u<T;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}d>>>=p,u-=p,M=0,f=3+(d&7),d>>>=3,u-=3}else{for(T=p+7;u<T;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}d>>>=p,u-=p,M=0,f=11+(d&127),d>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=sn;break}for(;f--;)r.lens[r.have++]=M}}if(r.mode===sn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=sn;break}if(r.lenbits=9,L={bits:r.lenbits},I=Lm(dD,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,I){e.msg="invalid literal/lengths set",r.mode=sn;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},I=Lm(uD,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,I){e.msg="invalid distances set",r.mode=sn;break}if(r.mode=Av,t===Ev)break e;case Av:r.mode=Dv;case Dv:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,r.hold=d,r.bits=u,QQ(e,m),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,d=r.hold,u=r.bits,r.mode===Bo&&(r.back=-1);break}for(r.back=0;x=r.lencode[d&(1<<r.lenbits)-1],p=x>>>24,v=x>>>16&255,b=x&65535,!(p<=u);){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(v&&!(v&240)){for(j=p,S=v,P=b;x=r.lencode[P+((d&(1<<j+S)-1)>>j)],p=x>>>24,v=x>>>16&255,b=x&65535,!(j+p<=u);){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}d>>>=j,u-=j,r.back+=j}if(d>>>=p,u-=p,r.back+=p,r.length=b,v===0){r.mode=Xk;break}if(v&32){r.back=-1,r.mode=Bo;break}if(v&64){e.msg="invalid literal/length code",r.mode=sn;break}r.extra=v&15,r.mode=Kk;case Kk:if(r.extra){for(T=r.extra;u<T;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Gk;case Gk:for(;x=r.distcode[d&(1<<r.distbits)-1],p=x>>>24,v=x>>>16&255,b=x&65535,!(p<=u);){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(!(v&240)){for(j=p,S=v,P=b;x=r.distcode[P+((d&(1<<j+S)-1)>>j)],p=x>>>24,v=x>>>16&255,b=x&65535,!(j+p<=u);){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}d>>>=j,u-=j,r.back+=j}if(d>>>=p,u-=p,r.back+=p,v&64){e.msg="invalid distance code",r.mode=sn;break}r.offset=b,r.extra=v&15,r.mode=Jk;case Jk:if(r.extra){for(T=r.extra;u<T;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=sn;break}r.mode=Zk;case Zk:if(c===0)break e;if(f=m-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=sn;break}f>r.wnext?(f-=r.wnext,g=r.wsize-f):g=r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=i,g=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do i[o++]=y[g++];while(--f);r.length===0&&(r.mode=Dv);break;case Xk:if(c===0)break e;i[o++]=r.length,c--,r.mode=Dv;break;case cw:if(r.wrap){for(;u<32;){if(l===0)break e;l--,d|=n[a++]<<u,u+=8}if(m-=c,e.total_out+=m,r.total+=m,r.wrap&4&&m&&(e.adler=r.check=r.flags?$a(r.check,i,m,o-m):E2(r.check,i,m,o-m)),m=c,r.wrap&4&&(r.flags?d:eC(d))!==r.check){e.msg="incorrect data check",r.mode=sn;break}d=0,u=0}r.mode=Qk;case Qk:if(r.wrap&&r.flags){for(;u<32;){if(l===0)break e;l--,d+=n[a++]<<u,u+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=sn;break}d=0,u=0}r.mode=$k;case $k:I=a$;break e;case sn:I=hD;break e;case mD:return fD;case pD:default:return da}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,r.hold=d,r.bits=u,(r.wsize||m!==e.avail_out&&r.mode<sn&&(r.mode<cw||t!==Ek))&&bD(e,e.output,e.next_out,m-e.avail_out),h-=e.avail_in,m-=e.avail_out,e.total_in+=h,e.total_out+=m,r.total+=m,r.wrap&4&&m&&(e.adler=r.check=r.flags?$a(r.check,i,m,e.next_out-m):E2(r.check,i,m,e.next_out-m)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Bo?128:0)+(r.mode===Av||r.mode===lw?256:0),(h===0&&m===0||t===Ek)&&I===ou&&(I=l$),I},v$=e=>{if(mu(e))return da;let t=e.state;return t.window&&(t.window=null),e.state=null,ou},y$=(e,t)=>{if(mu(e))return da;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,ou):da},x$=(e,t)=>{const r=t.length;let n,i,a;return mu(e)||(n=e.state,n.wrap!==0&&n.mode!==Xy)?da:n.mode===Xy&&(i=1,i=E2(i,t,r,0),i!==n.check)?hD:(a=bD(e,t,r,r),a?(n.mode=mD,fD):(n.havedict=1,ou))};var b$=vD,w$=yD,N$=gD,j$=m$,_$=xD,S$=g$,P$=v$,k$=y$,C$=x$,T$="pako inflate (from Nodeca project)",Vo={inflateReset:b$,inflateReset2:w$,inflateResetKeep:N$,inflateInit:j$,inflateInit2:_$,inflate:S$,inflateEnd:P$,inflateGetHeader:k$,inflateSetDictionary:C$,inflateInfo:T$};function O$(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var E$=O$;const wD=Object.prototype.toString,{Z_NO_FLUSH:A$,Z_FINISH:D$,Z_OK:wp,Z_STREAM_END:hw,Z_NEED_DICT:fw,Z_STREAM_ERROR:M$,Z_DATA_ERROR:rC,Z_MEM_ERROR:R$}=oD;function rg(e){this.options=lD.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZQ,this.strm.avail_out=0;let r=Vo.inflateInit2(this.strm,t.windowBits);if(r!==wp)throw new Error(A2[r]);if(this.header=new E$,Vo.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=D2.string2buf(t.dictionary):wD.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Vo.inflateSetDictionary(this.strm,t.dictionary),r!==wp)))throw new Error(A2[r])}rg.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?D$:A$,wD.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Vo.inflate(r,o),a===fw&&i&&(a=Vo.inflateSetDictionary(r,i),a===wp?a=Vo.inflate(r,o):a===rC&&(a=fw));r.avail_in>0&&a===hw&&r.state.wrap>0&&e[r.next_in]!==0;)Vo.inflateReset(r),a=Vo.inflate(r,o);switch(a){case M$:case rC:case fw:case R$:return this.onEnd(a),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||a===hw))if(this.options.to==="string"){let c=D2.utf8border(r.output,r.next_out),d=r.next_out-c,u=D2.buf2string(r.output,c);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===wp&&l===0)){if(a===hw)return a=Vo.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};rg.prototype.onData=function(e){this.chunks.push(e)};rg.prototype.onEnd=function(e){e===wp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=lD.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function I$(e,t){const r=new rg(t);if(r.push(e),r.err)throw r.msg||A2[r.err];return r.result}var L$=rg,F$=I$,B$={Inflate:L$,inflate:F$};const{Inflate:q$,inflate:U$}=B$;var nC=q$,z$=U$;const ND=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;ND[e]=t}const sC=4294967295;function H$(e,t,r){let n=e;for(let i=0;i<r;i++)n=ND[(n^t[i])&255]^n>>>8;return n}function W$(e,t){return(H$(sC,e,t)^sC)>>>0}function iC(e,t,r){const n=e.readUint32(),i=W$(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function jD(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function _D(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function SD(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function PD(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-i]+r[a]>>1)&255}}function kD(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+r[a]&255;for(;a<n;a++)t[a]=e[a]+V$(t[a-i],r[a],r[a-i])&255}}function V$(e,t,r){const n=e+t-r,i=Math.abs(n-e),a=Math.abs(n-t),o=Math.abs(n-r);return i<=a&&i<=o?e:a<=o?t:r}function Y$(e,t,r,n,i,a){switch(e){case 0:jD(t,r,i);break;case 1:_D(t,r,i,a);break;case 2:SD(t,r,n,i);break;case 3:PD(t,r,n,i,a);break;case 4:kD(t,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const K$=new Uint16Array([255]),G$=new Uint8Array(K$.buffer),J$=G$[0]===255;function Z$(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(a/8)*i,c=new Uint8Array(n*r*l);let d=0;for(let u=0;u<7;u++){const h=o[u],m=Math.ceil((r-h.x)/h.xStep),f=Math.ceil((n-h.y)/h.yStep);if(m<=0||f<=0)continue;const g=m*l,y=new Uint8Array(g);for(let x=0;x<f;x++){const p=t[d++],v=t.subarray(d,d+g);d+=g;const b=new Uint8Array(g);Y$(p,v,b,y,g,l),y.set(b);for(let j=0;j<m;j++){const S=h.x+j*h.xStep,P=h.y+x*h.yStep;if(!(S>=r||P>=n))for(let M=0;M<l;M++)c[(P*r+S)*l+M]=b[j*l+M]}}}if(a===16){const u=new Uint16Array(c.buffer);if(J$)for(let h=0;h<u.length;h++)u[h]=X$(u[h]);return u}else return c}function X$(e){return(e&255)<<8|e>>8&255}const Q$=new Uint16Array([255]),$$=new Uint8Array(Q$.buffer),eee=$$[0]===255,tee=new Uint8Array(0);function aC(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,o=Math.ceil(a/8)*i,l=Math.ceil(a/8*i*r),c=new Uint8Array(n*l);let d=tee,u=0,h,m;for(let f=0;f<n;f++){switch(h=t.subarray(u+1,u+1+l),m=c.subarray(f*l,(f+1)*l),t[u]){case 0:jD(h,m,l);break;case 1:_D(h,m,l,o);break;case 2:SD(h,m,d,l);break;case 3:PD(h,m,d,l,o);break;case 4:kD(h,m,d,l,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}d=m,u+=l+1}if(a===16){const f=new Uint16Array(c.buffer);if(eee)for(let g=0;g<f.length;g++)f[g]=ree(f[g]);return f}else return c}function ree(e){return(e&255)<<8|e>>8&255}const cy=Uint8Array.of(137,80,78,71,13,10,26,10);function oC(e){if(!nee(e.readBytes(cy.length)))throw new Error("wrong PNG signature")}function nee(e){if(e.length<cy.length)return!1;for(let t=0;t<cy.length;t++)if(e[t]!==cy[t])return!1;return!0}const see="tEXt",iee=0,CD=new TextDecoder("latin1");function aee(e){if(lee(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const oee=/^[\u0000-\u00FF]*$/;function lee(e){if(!oee.test(e))throw new Error("invalid latin1 text")}function cee(e,t,r){const n=TD(t);e[n]=dee(t,r-n.length-1)}function TD(e){for(e.mark();e.readByte()!==iee;);const t=e.offset;e.reset();const r=CD.decode(e.readBytes(t-e.offset-1));return e.skip(1),aee(r),r}function dee(e,t){return CD.decode(e.readBytes(t))}const vi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},mw={UNKNOWN:-1,DEFLATE:0},lC={UNKNOWN:-1,ADAPTIVE:0},pw={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Mv={NONE:0,BACKGROUND:1,PREVIOUS:2},gw={SOURCE:0,OVER:1};class uee extends l5{constructor(r,n={}){super(r);fr(this,"_checkCrc");fr(this,"_inflator");fr(this,"_png");fr(this,"_apng");fr(this,"_end");fr(this,"_hasPalette");fr(this,"_palette");fr(this,"_hasTransparency");fr(this,"_transparency");fr(this,"_compressionMethod");fr(this,"_filterMethod");fr(this,"_interlaceMethod");fr(this,"_colorType");fr(this,"_isAnimated");fr(this,"_numberOfFrames");fr(this,"_numberOfPlays");fr(this,"_frames");fr(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new nC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=mw.UNKNOWN,this._filterMethod=lC.UNKNOWN,this._interlaceMethod=pw.UNKNOWN,this._colorType=vi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(oC(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(oC(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case see:cee(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?iC(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?iC(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=hee(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case vi.GREYSCALE:i=1;break;case vi.TRUECOLOUR:i=3;break;case vi.INDEXED_COLOUR:i=1;break;case vi.GREYSCALE_ALPHA:i=2;break;case vi.TRUECOLOUR_ALPHA:i=4;break;case vi.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==mw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case vi.GREYSCALE:case vi.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case vi.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case vi.UNKNOWN:case vi.GREYSCALE_ALPHA:case vi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=TD(this),i=this.readUint8();if(i!==mw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:z$(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=aC({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Mv.NONE:break;case Mv.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const l=(a*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case Mv.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,d=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(n.blendOp){case gw.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:d}=a(o,l);for(let u=0;u<this._png.channels;u++)r.data[c+u]=n.data[d+u]}break;case gw.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:d}=a(o,l);for(let u=0;u<this._png.channels;u++){const h=n.data[d+this._png.channels-1]/i,m=u%(this._png.channels-1)===0?1:n.data[d+u],f=Math.floor(h*m+(1-h)*r.data[c+u]);r.data[c+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==lC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===pw.NO_INTERLACE)this._png.data=aC({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===pw.ADAM7)this._png.data=Z$({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Mv.NONE,blendOp:gw.SOURCE,data:r}),this._inflator=new nC,this._writingDataChunks=!1}}function hee(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var cC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(cC||(cC={}));function fee(e,t){return new uee(e,t).decode()}var Zt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function vw(){Zt.console&&typeof Zt.console.log=="function"&&Zt.console.log.apply(Zt.console,arguments)}var qr={log:vw,warn:function(e){Zt.console&&(typeof Zt.console.warn=="function"?Zt.console.warn.apply(Zt.console,arguments):vw.call(null,arguments))},error:function(e){Zt.console&&(typeof Zt.console.error=="function"?Zt.console.error.apply(Zt.console,arguments):vw(e))}};function yw(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){ud(n.response,t,r)},n.onerror=function(){qr.error("could not download file")},n.send()}function dC(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Rv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ud=Zt.saveAs||((typeof window>"u"?"undefined":Or(window))!=="object"||window!==Zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Zt.URL||Zt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?dC(i.href)?yw(e,t,r):Rv(i,i.target="_blank"):Rv(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Rv(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(dC(e))yw(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Rv(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Or(a)!=="object"&&(qr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return yw(e,t,r);var i=e.type==="application/octet-stream",a=/constructor/i.test(Zt.HTMLElement)||Zt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Or(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=Zt.URL||Zt.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function OD(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var dy=Zt.atob.bind(Zt),uC=Zt.btoa.bind(Zt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xw(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];r=Ss(r,n,i,a,t[0],7,-680876936),a=Ss(a,r,n,i,t[1],12,-389564586),i=Ss(i,a,r,n,t[2],17,606105819),n=Ss(n,i,a,r,t[3],22,-1044525330),r=Ss(r,n,i,a,t[4],7,-176418897),a=Ss(a,r,n,i,t[5],12,1200080426),i=Ss(i,a,r,n,t[6],17,-1473231341),n=Ss(n,i,a,r,t[7],22,-45705983),r=Ss(r,n,i,a,t[8],7,1770035416),a=Ss(a,r,n,i,t[9],12,-1958414417),i=Ss(i,a,r,n,t[10],17,-42063),n=Ss(n,i,a,r,t[11],22,-1990404162),r=Ss(r,n,i,a,t[12],7,1804603682),a=Ss(a,r,n,i,t[13],12,-40341101),i=Ss(i,a,r,n,t[14],17,-1502002290),r=Ps(r,n=Ss(n,i,a,r,t[15],22,1236535329),i,a,t[1],5,-165796510),a=Ps(a,r,n,i,t[6],9,-1069501632),i=Ps(i,a,r,n,t[11],14,643717713),n=Ps(n,i,a,r,t[0],20,-373897302),r=Ps(r,n,i,a,t[5],5,-701558691),a=Ps(a,r,n,i,t[10],9,38016083),i=Ps(i,a,r,n,t[15],14,-660478335),n=Ps(n,i,a,r,t[4],20,-405537848),r=Ps(r,n,i,a,t[9],5,568446438),a=Ps(a,r,n,i,t[14],9,-1019803690),i=Ps(i,a,r,n,t[3],14,-187363961),n=Ps(n,i,a,r,t[8],20,1163531501),r=Ps(r,n,i,a,t[13],5,-1444681467),a=Ps(a,r,n,i,t[2],9,-51403784),i=Ps(i,a,r,n,t[7],14,1735328473),r=ks(r,n=Ps(n,i,a,r,t[12],20,-1926607734),i,a,t[5],4,-378558),a=ks(a,r,n,i,t[8],11,-2022574463),i=ks(i,a,r,n,t[11],16,1839030562),n=ks(n,i,a,r,t[14],23,-35309556),r=ks(r,n,i,a,t[1],4,-1530992060),a=ks(a,r,n,i,t[4],11,1272893353),i=ks(i,a,r,n,t[7],16,-155497632),n=ks(n,i,a,r,t[10],23,-1094730640),r=ks(r,n,i,a,t[13],4,681279174),a=ks(a,r,n,i,t[0],11,-358537222),i=ks(i,a,r,n,t[3],16,-722521979),n=ks(n,i,a,r,t[6],23,76029189),r=ks(r,n,i,a,t[9],4,-640364487),a=ks(a,r,n,i,t[12],11,-421815835),i=ks(i,a,r,n,t[15],16,530742520),r=Cs(r,n=ks(n,i,a,r,t[2],23,-995338651),i,a,t[0],6,-198630844),a=Cs(a,r,n,i,t[7],10,1126891415),i=Cs(i,a,r,n,t[14],15,-1416354905),n=Cs(n,i,a,r,t[5],21,-57434055),r=Cs(r,n,i,a,t[12],6,1700485571),a=Cs(a,r,n,i,t[3],10,-1894986606),i=Cs(i,a,r,n,t[10],15,-1051523),n=Cs(n,i,a,r,t[1],21,-2054922799),r=Cs(r,n,i,a,t[8],6,1873313359),a=Cs(a,r,n,i,t[15],10,-30611744),i=Cs(i,a,r,n,t[6],15,-1560198380),n=Cs(n,i,a,r,t[13],21,1309151649),r=Cs(r,n,i,a,t[4],6,-145523070),a=Cs(a,r,n,i,t[11],10,-1120210379),i=Cs(i,a,r,n,t[2],15,718787259),n=Cs(n,i,a,r,t[9],21,-343485551),e[0]=lc(r,e[0]),e[1]=lc(n,e[1]),e[2]=lc(i,e[2]),e[3]=lc(a,e[3])}function c0(e,t,r,n,i,a){return t=lc(lc(t,e),lc(n,a)),lc(t<<i|t>>>32-i,r)}function Ss(e,t,r,n,i,a,o){return c0(t&r|~t&n,e,t,i,a,o)}function Ps(e,t,r,n,i,a,o){return c0(t&n|r&~n,e,t,i,a,o)}function ks(e,t,r,n,i,a,o){return c0(t^r^n,e,t,i,a,o)}function Cs(e,t,r,n,i,a,o){return c0(r^(t|~n),e,t,i,a,o)}function ED(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)xw(n,mee(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(xw(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,xw(n,i),n}function mee(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var hC="0123456789abcdef".split("");function pee(e){for(var t="",r=0;r<4;r++)t+=hC[e>>8*r+4&15]+hC[e>>8*r&15];return t}function gee(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function M2(e){return ED(e).map(gee).join("")}var vee=function(e){for(var t=0;t<e.length;t++)e[t]=pee(e[t]);return e.join("")}(ED("hello"))!="5d41402abc4b2a76b9719d911017c592";function lc(e,t){if(vee){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function R2(e,t){var r,n,i,a;if(e!==r){for(var o=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,n=l}else l=n;var h=t.length,m=0,f=0,g="";for(c=0;c<h;c++)f=(f+(u=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=u,o=l[(l[m]+l[f])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fC={print:4,modify:8,copy:16,"annot-forms":32};function Ku(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(fC.perm!==void 0)throw new Error("Invalid permission: "+l);i+=fC[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=M2(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=R2(this.encryptionKey,this.padding)}function Gu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function mC(e){if(Or(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[r]){var o=t[r][a];try{o[0].apply(e,n)}catch(l){Zt.console&&qr.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Np(e){if(!(this instanceof Np))return new Np(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function AD(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Jl(e,t,r,n,i){if(!(this instanceof Jl))return new Jl(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,AD.call(this,n,i)}function _d(e,t,r,n,i){if(!(this instanceof _d))return new _d(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,AD.call(this,n,i)}function Tt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,d="S",u=null;Or(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,a=e.compress||e.compressPdf||a,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=mC;var g="1.3",y=f.__private__.getPdfVersion=function(){return g};f.__private__.setPdfVersion=function(D){g=D};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return x};var p=f.__private__.getPageFormat=function(D){return x[D]};i=i||"a4";var v="compat",b="advanced",j=v;function S(){this.saveGraphicsState(),H(new at(Ue,0,0,-Ue,0,Kc()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),d="n",j=b}function P(){this.restoreGraphicsState(),d="S",j=v}var M=f.__private__.combineFontStyleAndFontWeight=function(D,Q){if(D=="bold"&&Q=="normal"||D=="bold"&&Q==400||D=="normal"&&Q=="italic"||D=="bold"&&Q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Q&&(D=Q==400||Q==="normal"?D==="italic"?"italic":"normal":Q!=700&&Q!=="bold"||D!=="normal"?(Q==700?"bold":Q)+""+D:"bold"),D};f.advancedAPI=function(D){var Q=j===v;return Q&&S.call(this),typeof D!="function"||(D(this),Q&&P.call(this)),this},f.compatAPI=function(D){var Q=j===b;return Q&&P.call(this),typeof D!="function"||(D(this),Q&&S.call(this)),this},f.isAdvancedAPI=function(){return j===b};var I,O=function(D){if(j!==b)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=f.roundToPrecision=f.__private__.roundToPrecision=function(D,Q){var be=t||Q;if(isNaN(D)||isNaN(be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(be).replace(/0+$/,"")};I=f.hpf=f.__private__.hpf=typeof c=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return L(D,c)}:c==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return L(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return L(D,16)};var T=f.f2=f.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return L(D,2)},k=f.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return L(D,3)},E=f.scale=f.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return j===v?D*Ue:j===b?D:void 0},A=function(D){return E(function(Q){return j===v?Kc()-Q:j===b?Q:void 0}(D))};f.__private__.setPrecision=f.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(t=parseInt(D,10))};var q,U="00000000000000000000000000000000",R=f.__private__.getFileId=function(){return U},C=f.__private__.setFileId=function(D){return U=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Sn=new Ku(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};f.setFileId=function(D){return C(D),this},f.getFileId=function(){return R()};var F=f.__private__.convertDateToPDFDate=function(D){var Q=D.getTimezoneOffset(),be=Q<0?"+":"-",Ae=Math.floor(Math.abs(Q/60)),Be=Math.abs(Q%60),Ze=[be,J(Ae),"'",J(Be),"'"].join("");return["D:",D.getFullYear(),J(D.getMonth()+1),J(D.getDate()),J(D.getHours()),J(D.getMinutes()),J(D.getSeconds()),Ze].join("")},X=f.__private__.convertPDFDateToDate=function(D){var Q=parseInt(D.substr(2,4),10),be=parseInt(D.substr(6,2),10)-1,Ae=parseInt(D.substr(8,2),10),Be=parseInt(D.substr(10,2),10),Ze=parseInt(D.substr(12,2),10),tt=parseInt(D.substr(14,2),10);return new Date(Q,be,Ae,Be,Ze,tt,0)},re=f.__private__.setCreationDate=function(D){var Q;if(D===void 0&&(D=new Date),D instanceof Date)Q=F(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Q=D}return q=Q},z=f.__private__.getCreationDate=function(D){var Q=q;return D==="jsDate"&&(Q=X(q)),Q};f.setCreationDate=function(D){return re(D),this},f.getCreationDate=function(D){return z(D)};var Y,J=f.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},ne=f.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},le=0,G=[],he=[],xe=0,Se=[],K=[],we=!1,Te=he;f.__private__.setCustomOutputDestination=function(D){we=!0,Te=D};var ae=function(D){we||(Te=D)};f.__private__.resetCustomOutputDestination=function(){we=!1,Te=he};var H=f.__private__.out=function(D){return D=D.toString(),xe+=D.length+1,Te.push(D),Te},Oe=f.__private__.write=function(D){return H(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},pe=f.__private__.getArrayBuffer=function(D){for(var Q=D.length,be=new ArrayBuffer(Q),Ae=new Uint8Array(be);Q--;)Ae[Q]=D.charCodeAt(Q);return be},je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return je};var _e=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(D){return _e=j===b?D/Ue:D,this};var W,te=f.__private__.getFontSize=f.getFontSize=function(){return j===v?_e:_e*Ue},Z=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(D){return Z=D,this},f.__private__.getR2L=f.getR2L=function(){return Z};var me,$=f.__private__.setZoomMode=function(D){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))W=D;else if(isNaN(D)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');W=D}else W=parseInt(D,10)};f.__private__.getZoomMode=function(){return W};var ke,ce=f.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');me=D};f.__private__.getPageMode=function(){return me};var Ie=f.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');ke=D};f.__private__.getLayoutMode=function(){return ke},f.__private__.setDisplayMode=f.setDisplayMode=function(D,Q,be){return $(D),Ie(Q),ce(be),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(D){if(Object.keys(Fe).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[D]},f.__private__.getDocumentProperties=function(){return Fe},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(D){for(var Q in Fe)Fe.hasOwnProperty(Q)&&D[Q]&&(Fe[Q]=D[Q]);return this},f.__private__.setDocumentProperty=function(D,Q){if(Object.keys(Fe).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[D]=Q};var Le,Ue,Ve,rt,Ye,We={},it={},ft=[],ue={},Ke={},Qe={},ht={},Dt=null,yt=0,ut=[],Ut=new mC(f),Ct=e.hotfixes||[],wt={},lt={},Yt=[],at=function D(Q,be,Ae,Be,Ze,tt){if(!(this instanceof D))return new D(Q,be,Ae,Be,Ze,tt);isNaN(Q)&&(Q=1),isNaN(be)&&(be=0),isNaN(Ae)&&(Ae=0),isNaN(Be)&&(Be=1),isNaN(Ze)&&(Ze=0),isNaN(tt)&&(tt=0),this._matrix=[Q,be,Ae,Be,Ze,tt]};Object.defineProperty(at.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(at.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(at.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(at.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(at.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(at.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(at.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(at.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(at.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(at.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(at.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(at.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(at.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(at.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(at.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(at.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),at.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(D)},at.prototype.multiply=function(D){var Q=D.sx*this.sx+D.shy*this.shx,be=D.sx*this.shy+D.shy*this.sy,Ae=D.shx*this.sx+D.sy*this.shx,Be=D.shx*this.shy+D.sy*this.sy,Ze=D.tx*this.sx+D.ty*this.shx+this.tx,tt=D.tx*this.shy+D.ty*this.sy+this.ty;return new at(Q,be,Ae,Be,Ze,tt)},at.prototype.decompose=function(){var D=this.sx,Q=this.shy,be=this.shx,Ae=this.sy,Be=this.tx,Ze=this.ty,tt=Math.sqrt(D*D+Q*Q),kt=(D/=tt)*be+(Q/=tt)*Ae;be-=D*kt,Ae-=Q*kt;var Rt=Math.sqrt(be*be+Ae*Ae);return kt/=Rt,D*(Ae/=Rt)<Q*(be/=Rt)&&(D=-D,Q=-Q,kt=-kt,tt=-tt),{scale:new at(tt,0,0,Rt,0,0),translate:new at(1,0,0,1,Be,Ze),rotate:new at(D,Q,-Q,D,0,0),skew:new at(1,0,kt,1,0,0)}},at.prototype.toString=function(D){return this.join(" ")},at.prototype.inversed=function(){var D=this.sx,Q=this.shy,be=this.shx,Ae=this.sy,Be=this.tx,Ze=this.ty,tt=1/(D*Ae-Q*be),kt=Ae*tt,Rt=-Q*tt,Qt=-be*tt,rr=D*tt;return new at(kt,Rt,Qt,rr,-kt*Be-Qt*Ze,-Rt*Be-rr*Ze)},at.prototype.applyToPoint=function(D){var Q=D.x*this.sx+D.y*this.shx+this.tx,be=D.x*this.shy+D.y*this.sy+this.ty;return new Vc(Q,be)},at.prototype.applyToRectangle=function(D){var Q=this.applyToPoint(D),be=this.applyToPoint(new Vc(D.x+D.w,D.y+D.h));return new Tf(Q.x,Q.y,be.x-Q.x,be.y-Q.y)},at.prototype.clone=function(){var D=this.sx,Q=this.shy,be=this.shx,Ae=this.sy,Be=this.tx,Ze=this.ty;return new at(D,Q,be,Ae,Be,Ze)},f.Matrix=at;var Sr=f.matrixMult=function(D,Q){return Q.multiply(D)},Wn=new at(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Wn;var nn=function(D,Q){if(!Ke[D]){var be=(Q instanceof Jl?"Sh":"P")+(Object.keys(ue).length+1).toString(10);Q.id=be,Ke[D]=be,ue[be]=Q,Ut.publish("addPattern",Q)}};f.ShadingPattern=Jl,f.TilingPattern=_d,f.addShadingPattern=function(D,Q){return O("addShadingPattern()"),nn(D,Q),this},f.beginTilingPattern=function(D){O("beginTilingPattern()"),Of(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},f.endTilingPattern=function(D,Q){O("endTilingPattern()"),Q.stream=K[Y].join(`
`),nn(D,Q),Ut.publish("endTilingPattern",Q),Yt.pop().restore()};var _n,gn=f.__private__.newObject=function(){var D=rs();return ds(D,!0),D},rs=f.__private__.newObjectDeferred=function(){return le++,G[le]=function(){return xe},le},ds=function(D,Q){return Q=typeof Q=="boolean"&&Q,G[D]=xe,Q&&H(D+" 0 obj"),D},Ic=f.__private__.newAdditionalObject=function(){var D={objId:rs(),content:""};return Se.push(D),D},gl=rs(),fa=rs(),Ya=f.__private__.decodeColorString=function(D){var Q=D.split(" ");if(Q.length!==2||Q[1]!=="g"&&Q[1]!=="G")Q.length!==5||Q[4]!=="k"&&Q[4]!=="K"||(Q=[(1-Q[0])*(1-Q[3]),(1-Q[1])*(1-Q[3]),(1-Q[2])*(1-Q[3]),"r"]);else{var be=parseFloat(Q[0]);Q=[be,be,be,"r"]}for(var Ae="#",Be=0;Be<3;Be++)Ae+=("0"+Math.floor(255*parseFloat(Q[Be])).toString(16)).slice(-2);return Ae},ma=f.__private__.encodeColorString=function(D){var Q;typeof D=="string"&&(D={ch1:D});var be=D.ch1,Ae=D.ch2,Be=D.ch3,Ze=D.ch4,tt=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof be=="string"&&be.charAt(0)!=="#"){var kt=new OD(be);if(kt.ok)be=kt.toHex();else if(!/^\d*\.?\d*$/.test(be))throw new Error('Invalid color "'+be+'" passed to jsPDF.encodeColorString.')}if(typeof be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(be)&&(be="#"+be[1]+be[1]+be[2]+be[2]+be[3]+be[3]),typeof be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(be)){var Rt=parseInt(be.substr(1),16);be=Rt>>16&255,Ae=Rt>>8&255,Be=255&Rt}if(Ae===void 0||Ze===void 0&&be===Ae&&Ae===Be)Q=typeof be=="string"?be+" "+tt[0]:D.precision===2?T(be/255)+" "+tt[0]:k(be/255)+" "+tt[0];else if(Ze===void 0||Or(Ze)==="object"){if(Ze&&!isNaN(Ze.a)&&Ze.a===0)return["1.","1.","1.",tt[1]].join(" ");Q=typeof be=="string"?[be,Ae,Be,tt[1]].join(" "):D.precision===2?[T(be/255),T(Ae/255),T(Be/255),tt[1]].join(" "):[k(be/255),k(Ae/255),k(Be/255),tt[1]].join(" ")}else Q=typeof be=="string"?[be,Ae,Be,Ze,tt[2]].join(" "):D.precision===2?[T(be),T(Ae),T(Be),T(Ze),tt[2]].join(" "):[k(be),k(Ae),k(Be),k(Ze),tt[2]].join(" ");return Q},pa=f.__private__.getFilters=function(){return o},Ii=f.__private__.putStream=function(D){var Q=(D=D||{}).data||"",be=D.filters||pa(),Ae=D.alreadyAppliedFilters||[],Be=D.addLength1||!1,Ze=Q.length,tt=D.objectId,kt=function(Vn){return Vn};if(u!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(kt=Sn.encryptor(tt,0));var Rt={};be===!0&&(be=["FlateEncode"]);var Qt=D.additionalKeyValues||[],rr=(Rt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(Q,be):{data:Q,reverseChain:[]}).reverseChain+(Array.isArray(Ae)?Ae.join(" "):Ae.toString());if(Rt.data.length!==0&&(Qt.push({key:"Length",value:Rt.data.length}),Be===!0&&Qt.push({key:"Length1",value:Ze})),rr.length!=0)if(rr.split("/").length-1==1)Qt.push({key:"Filter",value:rr});else{Qt.push({key:"Filter",value:"["+rr+"]"});for(var wr=0;wr<Qt.length;wr+=1)if(Qt[wr].key==="DecodeParms"){for(var cn=[],Ln=0;Ln<Rt.reverseChain.split("/").length-1;Ln+=1)cn.push("null");cn.push(Qt[wr].value),Qt[wr].value="["+cn.join(" ")+"]"}}H("<<");for(var Ur=0;Ur<Qt.length;Ur++)H("/"+Qt[Ur].key+" "+Qt[Ur].value);H(">>"),Rt.data.length!==0&&(H("stream"),H(kt(Rt.data)),H("endstream"))},Lc=f.__private__.putPage=function(D){var Q=D.number,be=D.data,Ae=D.objId,Be=D.contentsObjId;ds(Ae,!0),H("<</Type /Page"),H("/Parent "+D.rootDictionaryObjId+" 0 R"),H("/Resources "+D.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(I(D.mediaBox.bottomLeftX))+" "+parseFloat(I(D.mediaBox.bottomLeftY))+" "+I(D.mediaBox.topRightX)+" "+I(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&H("/CropBox ["+I(D.cropBox.bottomLeftX)+" "+I(D.cropBox.bottomLeftY)+" "+I(D.cropBox.topRightX)+" "+I(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&H("/BleedBox ["+I(D.bleedBox.bottomLeftX)+" "+I(D.bleedBox.bottomLeftY)+" "+I(D.bleedBox.topRightX)+" "+I(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&H("/TrimBox ["+I(D.trimBox.bottomLeftX)+" "+I(D.trimBox.bottomLeftY)+" "+I(D.trimBox.topRightX)+" "+I(D.trimBox.topRightY)+"]"),D.artBox!==null&&H("/ArtBox ["+I(D.artBox.bottomLeftX)+" "+I(D.artBox.bottomLeftY)+" "+I(D.artBox.topRightX)+" "+I(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&H("/UserUnit "+D.userUnit),Ut.publish("putPage",{objId:Ae,pageContext:ut[Q],pageNumber:Q,page:be}),H("/Contents "+Be+" 0 R"),H(">>"),H("endobj");var Ze=be.join(`
`);return j===b&&(Ze+=`
Q`),ds(Be,!0),Ii({data:Ze,filters:pa(),objectId:Be}),H("endobj"),Ae},Ka=f.__private__.putPages=function(){var D,Q,be=[];for(D=1;D<=yt;D++)ut[D].objId=rs(),ut[D].contentsObjId=rs();for(D=1;D<=yt;D++)be.push(Lc({number:D,data:K[D],objId:ut[D].objId,contentsObjId:ut[D].contentsObjId,mediaBox:ut[D].mediaBox,cropBox:ut[D].cropBox,bleedBox:ut[D].bleedBox,trimBox:ut[D].trimBox,artBox:ut[D].artBox,userUnit:ut[D].userUnit,rootDictionaryObjId:gl,resourceDictionaryObjId:fa}));ds(gl,!0),H("<</Type /Pages");var Ae="/Kids [";for(Q=0;Q<yt;Q++)Ae+=be[Q]+" 0 R ";H(Ae+"]"),H("/Count "+yt),H(">>"),H("endobj"),Ut.publish("postPutPages")},Fc=function(D){Ut.publish("putFont",{font:D,out:H,newObject:gn,putStream:Ii}),D.isAlreadyPutted!==!0&&(D.objectNumber=gn(),H("<<"),H("/Type /Font"),H("/BaseFont /"+Gu(D.postScriptName)),H("/Subtype /Type1"),typeof D.encoding=="string"&&H("/Encoding /"+D.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},yu=function(D){D.objectNumber=gn();var Q=[];Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Form"}),Q.push({key:"BBox",value:"["+[I(D.x),I(D.y),I(D.x+D.width),I(D.y+D.height)].join(" ")+"]"}),Q.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var be=D.pages[1].join(`
`);Ii({data:be,additionalKeyValues:Q,objectId:D.objectNumber}),H("endobj")},xu=function(D,Q){Q||(Q=21);var be=gn(),Ae=function(tt,kt){var Rt,Qt=[],rr=1/(kt-1);for(Rt=0;Rt<1;Rt+=rr)Qt.push(Rt);if(Qt.push(1),tt[0].offset!=0){var wr={offset:0,color:tt[0].color};tt.unshift(wr)}if(tt[tt.length-1].offset!=1){var cn={offset:1,color:tt[tt.length-1].color};tt.push(cn)}for(var Ln="",Ur=0,Vn=0;Vn<Qt.length;Vn++){for(Rt=Qt[Vn];Rt>tt[Ur+1].offset;)Ur++;var Fn=tt[Ur].offset,us=(Rt-Fn)/(tt[Ur+1].offset-Fn),Fi=tt[Ur].color,Js=tt[Ur+1].color;Ln+=ne(Math.round((1-us)*Fi[0]+us*Js[0]).toString(16))+ne(Math.round((1-us)*Fi[1]+us*Js[1]).toString(16))+ne(Math.round((1-us)*Fi[2]+us*Js[2]).toString(16))}return Ln.trim()}(D.colors,Q),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+Q+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ii({data:Ae,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:be}),H("endobj"),D.objectNumber=gn(),H("<< /ShadingType "+D.type),H("/ColorSpace /DeviceRGB");var Ze="/Coords ["+I(parseFloat(D.coords[0]))+" "+I(parseFloat(D.coords[1]))+" ";D.type===2?Ze+=I(parseFloat(D.coords[2]))+" "+I(parseFloat(D.coords[3])):Ze+=I(parseFloat(D.coords[2]))+" "+I(parseFloat(D.coords[3]))+" "+I(parseFloat(D.coords[4]))+" "+I(parseFloat(D.coords[5])),H(Ze+="]"),D.matrix&&H("/Matrix ["+D.matrix.toString()+"]"),H("/Function "+be+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},bu=function(D,Q){var be=rs(),Ae=gn();Q.push({resourcesOid:be,objectOid:Ae}),D.objectNumber=Ae;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+D.boundingBox.map(I).join(" ")+"]"}),Be.push({key:"XStep",value:I(D.xStep)}),Be.push({key:"YStep",value:I(D.yStep)}),Be.push({key:"Resources",value:be+" 0 R"}),D.matrix&&Be.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),Ii({data:D.stream,additionalKeyValues:Be,objectId:D.objectNumber}),H("endobj")},x0=function(D){for(var Q in D.objectNumber=gn(),H("<<"),D)switch(Q){case"opacity":H("/ca "+T(D[Q]));break;case"stroke-opacity":H("/CA "+T(D[Q]))}H(">>"),H("endobj")},xf=function(D){ds(D.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Q in H("/Font <<"),We)We.hasOwnProperty(Q)&&(h===!1||h===!0&&m.hasOwnProperty(Q))&&H("/"+Q+" "+We[Q].objectNumber+" 0 R");H(">>")}(),function(){if(Object.keys(ue).length>0){for(var Q in H("/Shading <<"),ue)ue.hasOwnProperty(Q)&&ue[Q]instanceof Jl&&ue[Q].objectNumber>=0&&H("/"+Q+" "+ue[Q].objectNumber+" 0 R");Ut.publish("putShadingPatternDict"),H(">>")}}(),function(Q){if(Object.keys(ue).length>0){for(var be in H("/Pattern <<"),ue)ue.hasOwnProperty(be)&&ue[be]instanceof f.TilingPattern&&ue[be].objectNumber>=0&&ue[be].objectNumber<Q&&H("/"+be+" "+ue[be].objectNumber+" 0 R");Ut.publish("putTilingPatternDict"),H(">>")}}(D.objectOid),function(){if(Object.keys(Qe).length>0){var Q;for(Q in H("/ExtGState <<"),Qe)Qe.hasOwnProperty(Q)&&Qe[Q].objectNumber>=0&&H("/"+Q+" "+Qe[Q].objectNumber+" 0 R");Ut.publish("putGStateDict"),H(">>")}}(),function(){for(var Q in H("/XObject <<"),wt)wt.hasOwnProperty(Q)&&wt[Q].objectNumber>=0&&H("/"+Q+" "+wt[Q].objectNumber+" 0 R");Ut.publish("putXobjectDict"),H(">>")}(),H(">>"),H("endobj")},og=function(D){it[D.fontName]=it[D.fontName]||{},it[D.fontName][D.fontStyle]=D.id},lg=function(D,Q,be,Ae,Be){var Ze={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:D,fontName:Q,fontStyle:be,encoding:Ae,isStandardFont:Be||!1,metadata:{}};return Ut.publish("addFont",{font:Ze,instance:this}),We[Ze.id]=Ze,og(Ze),Ze.id},Li=f.__private__.pdfEscape=f.pdfEscape=function(D,Q){return function(be,Ae){var Be,Ze,tt,kt,Rt,Qt,rr,wr,cn;if(tt=(Ae=Ae||{}).sourceEncoding||"Unicode",Rt=Ae.outputEncoding,(Ae.autoencode||Rt)&&We[Le].metadata&&We[Le].metadata[tt]&&We[Le].metadata[tt].encoding&&(kt=We[Le].metadata[tt].encoding,!Rt&&We[Le].encoding&&(Rt=We[Le].encoding),!Rt&&kt.codePages&&(Rt=kt.codePages[0]),typeof Rt=="string"&&(Rt=kt[Rt]),Rt)){for(rr=!1,Qt=[],Be=0,Ze=be.length;Be<Ze;Be++)(wr=Rt[be.charCodeAt(Be)])?Qt.push(String.fromCharCode(wr)):Qt.push(be[Be]),Qt[Be].charCodeAt(0)>>8&&(rr=!0);be=Qt.join("")}for(Be=be.length;rr===void 0&&Be!==0;)be.charCodeAt(Be-1)>>8&&(rr=!0),Be--;if(!rr)return be;for(Qt=Ae.noBOM?[]:[254,255],Be=0,Ze=be.length;Be<Ze;Be++){if((cn=(wr=be.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+be+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qt.push(cn),Qt.push(wr-(cn<<8))}return String.fromCharCode.apply(void 0,Qt)}(D,Q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bf=f.__private__.beginPage=function(D){K[++yt]=[],ut[yt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},dg(yt),ae(K[Y])},cg=function(D,Q){var be,Ae,Be;switch(r=Q||r,typeof D=="string"&&(be=p(D.toLowerCase()),Array.isArray(be)&&(Ae=be[0],Be=be[1])),Array.isArray(D)&&(Ae=D[0]*Ue,Be=D[1]*Ue),isNaN(Ae)&&(Ae=i[0],Be=i[1]),(Ae>14400||Be>14400)&&(qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ae=Math.min(14400,Ae),Be=Math.min(14400,Be)),i=[Ae,Be],r.substr(0,1)){case"l":Be>Ae&&(i=[Be,Ae]);break;case"p":Ae>Be&&(i=[Be,Ae])}bf(i),C0(Sf),H(Nu),kf!==0&&H(kf+" J"),Cf!==0&&H(Cf+" j"),Ut.publish("addPage",{pageNumber:yt})},wf=function(D){D>0&&D<=yt&&(K.splice(D,1),ut.splice(D,1),yt--,Y>yt&&(Y=yt),this.setPage(Y))},dg=function(D){D>0&&D<=yt&&(Y=D)},ug=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return K.length-1},hg=function(D,Q,be){var Ae,Be=void 0;return be=be||{},D=D!==void 0?D:We[Le].fontName,Q=Q!==void 0?Q:We[Le].fontStyle,Ae=D.toLowerCase(),it[Ae]!==void 0&&it[Ae][Q]!==void 0?Be=it[Ae][Q]:it[D]!==void 0&&it[D][Q]!==void 0?Be=it[D][Q]:be.disableWarning===!1&&qr.warn("Unable to look up font label for font '"+D+"', '"+Q+"'. Refer to getFontList() for available fonts."),Be||be.noFallback||(Be=it.times[Q])==null&&(Be=it.times.normal),Be},wu=f.__private__.putInfo=function(){var D=gn(),Q=function(Ae){return Ae};for(var be in u!==null&&(Q=Sn.encryptor(D,0)),H("<<"),H("/Producer ("+Li(Q("jsPDF "+Tt.version))+")"),Fe)Fe.hasOwnProperty(be)&&Fe[be]&&H("/"+be.substr(0,1).toUpperCase()+be.substr(1)+" ("+Li(Q(Fe[be]))+")");H("/CreationDate ("+Li(Q(q))+")"),H(">>"),H("endobj")},b0=f.__private__.putCatalog=function(D){var Q=(D=D||{}).rootDictionaryObjId||gl;switch(gn(),H("<<"),H("/Type /Catalog"),H("/Pages "+Q+" 0 R"),W||(W="fullwidth"),W){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var be=""+W;be.substr(be.length-1)==="%"&&(W=parseInt(W)/100),typeof W=="number"&&H("/OpenAction [3 0 R /XYZ null null "+T(W)+"]")}switch(ke||(ke="continuous"),ke){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}me&&H("/PageMode /"+me),Ut.publish("putCatalog"),H(">>"),H("endobj")},In=f.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(le+1)),H("/Root "+le+" 0 R"),H("/Info "+(le-1)+" 0 R"),u!==null&&H("/Encrypt "+Sn.oid+" 0 R"),H("/ID [ <"+U+"> <"+U+"> ]"),H(">>")},fg=f.__private__.putHeader=function(){H("%PDF-"+g),H("%")},mg=f.__private__.putXRef=function(){var D="0000000000";H("xref"),H("0 "+(le+1)),H("0000000000 65535 f ");for(var Q=1;Q<=le;Q++)typeof G[Q]=="function"?H((D+G[Q]()).slice(-10)+" 00000 n "):G[Q]!==void 0?H((D+G[Q]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},_o=f.__private__.buildDocument=function(){var D;le=0,xe=0,he=[],G=[],Se=[],gl=rs(),fa=rs(),ae(he),Ut.publish("buildDocument"),fg(),Ka(),function(){Ut.publish("putAdditionalObjects");for(var be=0;be<Se.length;be++){var Ae=Se[be];ds(Ae.objId,!0),H(Ae.content),H("endobj")}Ut.publish("postPutAdditionalObjects")}(),D=[],function(){for(var be in We)We.hasOwnProperty(be)&&(h===!1||h===!0&&m.hasOwnProperty(be))&&Fc(We[be])}(),function(){var be;for(be in Qe)Qe.hasOwnProperty(be)&&x0(Qe[be])}(),function(){for(var be in wt)wt.hasOwnProperty(be)&&yu(wt[be])}(),function(be){var Ae;for(Ae in ue)ue.hasOwnProperty(Ae)&&(ue[Ae]instanceof Jl?xu(ue[Ae]):ue[Ae]instanceof _d&&bu(ue[Ae],be))}(D),Ut.publish("putResources"),D.forEach(xf),xf({resourcesOid:fa,objectOid:Number.MAX_SAFE_INTEGER}),Ut.publish("postPutResources"),u!==null&&(Sn.oid=gn(),H("<<"),H("/Filter /Standard"),H("/V "+Sn.v),H("/R "+Sn.r),H("/U <"+Sn.toHexString(Sn.U)+">"),H("/O <"+Sn.toHexString(Sn.O)+">"),H("/P "+Sn.P),H(">>"),H("endobj")),wu(),b0();var Q=xe;return mg(),In(),H("startxref"),H(""+Q),H("%%EOF"),ae(K[Y]),he.join(`
`)},Bc=f.__private__.getBlob=function(D){return new Blob([pe(D)],{type:"application/pdf"})},ga=f.output=f.__private__.output=(_n=function(D,Q){switch(typeof(Q=Q||{})=="string"?Q={filename:Q}:Q.filename=Q.filename||"generated.pdf",D){case void 0:return _o();case"save":f.save(Q.filename);break;case"arraybuffer":return pe(_o());case"blob":return Bc(_o());case"bloburi":case"bloburl":if(Zt.URL!==void 0&&typeof Zt.URL.createObjectURL=="function")return Zt.URL&&Zt.URL.createObjectURL(Bc(_o()))||void 0;qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var be="",Ae=_o();try{be=uC(Ae)}catch{be=uC(unescape(encodeURIComponent(Ae)))}return"data:application/pdf;filename="+Q.filename+";base64,"+be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Q.pdfObjectUrl&&(Be=Q.pdfObjectUrl,Ze="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+Ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Q)+");<\/script></body></html>",kt=Zt.open();return kt!==null&&kt.document.write(tt),kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Q.filename+'" width="500px" height="400px" /></body></html>',Qt=Zt.open();if(Qt!==null){Qt.document.write(Rt);var rr=this;Qt.document.documentElement.querySelector("#pdfViewer").onload=function(){Qt.document.title=Q.filename,Qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rr.output("bloburl"))}}return Qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Q)+'"></iframe></body></html>',cn=Zt.open();if(cn!==null&&(cn.document.write(wr),cn.document.title=Q.filename),cn||typeof safari>"u")return cn;break;case"datauri":case"dataurl":return Zt.document.location.href=this.output("datauristring",Q);default:return null}},_n.foo=function(){try{return _n.apply(this,arguments)}catch(be){var D=be.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var Q="Error in function "+D.split(`
`)[0].split("<")[0]+": "+be.message;if(!Zt.console)throw new Error(Q);Zt.console.error(Q,be),Zt.alert&&alert(Q)}},_n.foo.bar=_n,_n.foo),qc=function(D){return Array.isArray(Ct)===!0&&Ct.indexOf(D)>-1};switch(n){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=qc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ue=n}var Sn=null;re(),C();var Nf=f.__private__.getPageInfo=f.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[D].objId,pageNumber:D,pageContext:ut[D]}},w0=f.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Q in ut)if(ut[Q].objId===D)break;return Nf(Q)},N0=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ut[Y].objId,pageNumber:Y,pageContext:ut[Y]}};f.addPage=function(){return cg.apply(this,arguments),this},f.setPage=function(){return dg.apply(this,arguments),ae.call(this,K[Y]),this},f.insertPage=function(D){return this.addPage(),this.movePage(Y,D),this},f.movePage=function(D,Q){var be,Ae;if(D>Q){be=K[D],Ae=ut[D];for(var Be=D;Be>Q;Be--)K[Be]=K[Be-1],ut[Be]=ut[Be-1];K[Q]=be,ut[Q]=Ae,this.setPage(Q)}else if(D<Q){be=K[D],Ae=ut[D];for(var Ze=D;Ze<Q;Ze++)K[Ze]=K[Ze+1],ut[Ze]=ut[Ze+1];K[Q]=be,ut[Q]=Ae,this.setPage(Q)}return this},f.deletePage=function(){return wf.apply(this,arguments),this},f.__private__.text=f.text=function(D,Q,be,Ae,Be){var Ze,tt,kt,Rt,Qt,rr,wr,cn,Ln,Ur=(Ae=Ae||{}).scope||this;if(typeof D=="number"&&typeof Q=="number"&&(typeof be=="string"||Array.isArray(be))){var Vn=be;be=Q,Q=D,D=Vn}if(arguments[3]instanceof at==0?(kt=arguments[4],Rt=arguments[5],Or(wr=arguments[3])==="object"&&wr!==null||(typeof kt=="string"&&(Rt=kt,kt=null),typeof wr=="string"&&(Rt=wr,wr=null),typeof wr=="number"&&(kt=wr,wr=null),Ae={flags:wr,angle:kt,align:Rt})):(O("The transform parameter of text() with a Matrix value"),Ln=Be),isNaN(Q)||isNaN(be)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return Ur;var Fn,us="",Fi=typeof Ae.lineHeightFactor=="number"?Ae.lineHeightFactor:zc,Js=Ur.internal.scaleFactor;function Ng(Nr){return Nr=Nr.split("	").join(Array(Ae.TabLen||9).join(" ")),Li(Nr,wr)}function Pu(Nr){for(var Fr,kn=Nr.concat(),Yn=[],Eo=kn.length;Eo--;)typeof(Fr=kn.shift())=="string"?Yn.push(Fr):Array.isArray(Nr)&&(Fr.length===1||Fr[1]===void 0&&Fr[2]===void 0)?Yn.push(Fr[0]):Yn.push([Fr[0],Fr[1],Fr[2]]);return Yn}function Gc(Nr,Fr){var kn;if(typeof Nr=="string")kn=Fr(Nr)[0];else if(Array.isArray(Nr)){for(var Yn,Eo,qf=Nr.concat(),Tu=[],Sg=qf.length;Sg--;)typeof(Yn=qf.shift())=="string"?Tu.push(Fr(Yn)[0]):Array.isArray(Yn)&&typeof Yn[0]=="string"&&(Eo=Fr(Yn[0],Yn[1],Yn[2]),Tu.push([Eo[0],Eo[1],Eo[2]]));kn=Tu}return kn}var xl=!1,Jc=!0;if(typeof D=="string")xl=!0;else if(Array.isArray(D)){var Zc=D.concat();tt=[];for(var Xc,ws=Zc.length;ws--;)(typeof(Xc=Zc.shift())!="string"||Array.isArray(Xc)&&typeof Xc[0]!="string")&&(Jc=!1);xl=Jc}if(xl===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var Qc=_e/Ur.internal.scaleFactor,$c=Qc*(Fi-1);switch(Ae.baseline){case"bottom":be-=$c;break;case"top":be+=Qc-$c;break;case"hanging":be+=Qc-2*$c;break;case"middle":be+=Qc/2-$c}if((rr=Ae.maxWidth||0)>0&&(typeof D=="string"?D=Ur.splitTextToSize(D,rr):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(Nr,Fr){return Nr.concat(Ur.splitTextToSize(Fr,rr))},[]))),Ze={text:D,x:Q,y:be,options:Ae,mutex:{pdfEscape:Li,activeFontKey:Le,fonts:We,activeFontSize:_e}},Ut.publish("preProcessText",Ze),D=Ze.text,kt=(Ae=Ze.options).angle,Ln instanceof at==0&&kt&&typeof kt=="number"){kt*=Math.PI/180,Ae.rotationDirection===0&&(kt=-kt),j===b&&(kt=-kt);var Ef=Math.cos(kt),Af=Math.sin(kt);Ln=new at(Ef,Af,-Af,Ef,0,0)}else kt&&kt instanceof at&&(Ln=kt);j!==b||Ln||(Ln=Wn),(Qt=Ae.charSpace||_u)!==void 0&&(us+=I(E(Qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cn=Ae.horizontalScale)!==void 0&&(us+=I(100*cn)+` Tz
`),Ae.lang;var vn=-1,To=Ae.renderingMode!==void 0?Ae.renderingMode:Ae.stroke,ku=Ur.internal.getCurrentPageInfo().pageContext;switch(To){case 0:case!1:case"fill":vn=0;break;case 1:case!0:case"stroke":vn=1;break;case 2:case"fillThenStroke":vn=2;break;case 3:case"invisible":vn=3;break;case 4:case"fillAndAddForClipping":vn=4;break;case 5:case"strokeAndAddPathForClipping":vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vn=6;break;case 7:case"addToPathForClipping":vn=7}var jg=ku.usedRenderingMode!==void 0?ku.usedRenderingMode:-1;vn!==-1?us+=vn+` Tr
`:jg!==-1&&(us+=`0 Tr
`),vn!==-1&&(ku.usedRenderingMode=vn),Rt=Ae.align||"left";var Bi,ed=_e*Fi,Df=Ur.internal.pageSize.getWidth(),Mf=We[Le];Qt=Ae.charSpace||_u,rr=Ae.maxWidth||0,wr=Object.assign({autoencode:!0,noBOM:!0},Ae.flags);var bl=[],td=function(Nr){return Ur.getStringUnitWidth(Nr,{font:Mf,charSpace:Qt,fontSize:_e,doKerning:!1})*_e/Js};if(Object.prototype.toString.call(D)==="[object Array]"){var ci;tt=Pu(D),Rt!=="left"&&(Bi=tt.map(td));var di,wl=0;if(Rt==="right"){Q-=Bi[0],D=[],ws=tt.length;for(var Oo=0;Oo<ws;Oo++)Oo===0?(di=So(Q),ci=Po(be)):(di=E(wl-Bi[Oo]),ci=-ed),D.push([tt[Oo],di,ci]),wl=Bi[Oo]}else if(Rt==="center"){Q-=Bi[0]/2,D=[],ws=tt.length;for(var Nl=0;Nl<ws;Nl++)Nl===0?(di=So(Q),ci=Po(be)):(di=E((wl-Bi[Nl])/2),ci=-ed),D.push([tt[Nl],di,ci]),wl=Bi[Nl]}else if(Rt==="left"){D=[],ws=tt.length;for(var Rf=0;Rf<ws;Rf++)D.push(tt[Rf])}else if(Rt==="justify"&&Mf.encoding==="Identity-H"){D=[],ws=tt.length,rr=rr!==0?rr:Df;for(var Cu=0,Pn=0;Pn<ws;Pn++)if(ci=Pn===0?Po(be):-ed,di=Pn===0?So(Q):Cu,Pn<ws-1){var _g=E((rr-Bi[Pn])/(tt[Pn].split(" ").length-1)),Ja=tt[Pn].split(" ");D.push([Ja[0]+" ",di,ci]),Cu=0;for(var Za=1;Za<Ja.length;Za++){var If=(td(Ja[Za-1]+" "+Ja[Za])-td(Ja[Za]))*Js+_g;Za==Ja.length-1?D.push([Ja[Za],If,0]):D.push([Ja[Za]+" ",If,0]),Cu-=If}}else D.push([tt[Pn],di,ci]);D.push(["",Cu,0])}else{if(Rt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],ws=tt.length,rr=rr!==0?rr:Df,Pn=0;Pn<ws;Pn++){ci=Pn===0?Po(be):-ed,di=Pn===0?So(Q):0;var Lf=tt[Pn].split(" ").length-1,Ff=Lf>0?(rr-Bi[Pn])/Lf:0;Pn<ws-1?bl.push(I(E(Ff))):bl.push(0),D.push([tt[Pn],di,ci])}}}(typeof Ae.R2L=="boolean"?Ae.R2L:Z)===!0&&(D=Gc(D,function(Nr,Fr,kn){return[Nr.split("").reverse().join(""),Fr,kn]})),Ze={text:D,x:Q,y:be,options:Ae,mutex:{pdfEscape:Li,activeFontKey:Le,fonts:We,activeFontSize:_e}},Ut.publish("postProcessText",Ze),D=Ze.text,Fn=Ze.mutex.isHex||!1;var Bf=We[Le].encoding;Bf!=="WinAnsiEncoding"&&Bf!=="StandardEncoding"||(D=Gc(D,function(Nr,Fr,kn){return[Ng(Nr),Fr,kn]})),tt=Pu(D),D=[];for(var jl,_l,Sl,rd=Array.isArray(tt[0])?1:0,Pl="",nd=function(Nr,Fr,kn){var Yn="";return kn instanceof at?(kn=typeof Ae.angle=="number"?Sr(kn,new at(1,0,0,1,Nr,Fr)):Sr(new at(1,0,0,1,Nr,Fr),kn),j===b&&(kn=Sr(new at(1,0,0,-1,0,0),kn)),Yn=kn.join(" ")+` Tm
`):Yn=I(Nr)+" "+I(Fr)+` Td
`,Yn},qi=0;qi<tt.length;qi++){switch(Pl="",rd){case 1:Sl=(Fn?"<":"(")+tt[qi][0]+(Fn?">":")"),jl=parseFloat(tt[qi][1]),_l=parseFloat(tt[qi][2]);break;case 0:Sl=(Fn?"<":"(")+tt[qi]+(Fn?">":")"),jl=So(Q),_l=Po(be)}bl!==void 0&&bl[qi]!==void 0&&(Pl=bl[qi]+` Tw
`),qi===0?D.push(Pl+nd(jl,_l,Ln)+Sl):rd===0?D.push(Pl+Sl):rd===1&&D.push(Pl+nd(jl,_l,Ln)+Sl)}D=rd===0?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var Xa=`BT
/`;return Xa+=Le+" "+_e+` Tf
`,Xa+=I(_e*Fi)+` TL
`,Xa+=Hc+`
`,Xa+=us,Xa+=D,H(Xa+="ET"),m[Le]=!0,Ur};var j0=f.__private__.clip=f.clip=function(D){return H(D==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return j0("evenodd")},f.__private__.discardPath=f.discardPath=function(){return H("n"),this};var Ga=f.__private__.isValidStyle=function(D){var Q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(Q=!0),Q};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(D){return Ga(D)&&(d=D),this};var pg=f.__private__.getStyle=f.getStyle=function(D){var Q=d;switch(D){case"D":case"S":Q="S";break;case"F":Q="f";break;case"FD":case"DF":Q="B";break;case"f":case"f*":case"B":case"B*":Q=D}return Q},gg=f.close=function(){return H("h"),this};f.stroke=function(){return H("S"),this},f.fill=function(D){return vl("f",D),this},f.fillEvenOdd=function(D){return vl("f*",D),this},f.fillStroke=function(D){return vl("B",D),this},f.fillStrokeEvenOdd=function(D){return vl("B*",D),this};var vl=function(D,Q){Or(Q)==="object"?S0(Q,D):H(D)},jf=function(D){D===null||j===b&&D===void 0||(D=pg(D),H(D))};function _0(D,Q,be,Ae,Be){var Ze=new _d(Q||this.boundingBox,be||this.xStep,Ae||this.yStep,this.gState,Be||this.matrix);Ze.stream=this.stream;var tt=D+"$$"+this.cloneIndex+++"$$";return nn(tt,Ze),Ze}var S0=function(D,Q){var be=Ke[D.key],Ae=ue[be];if(Ae instanceof Jl)H("q"),H(P0(Q)),Ae.gState&&f.setGState(Ae.gState),H(D.matrix.toString()+" cm"),H("/"+be+" sh"),H("Q");else if(Ae instanceof _d){var Be=new at(1,0,0,-1,0,Kc());D.matrix&&(Be=Be.multiply(D.matrix||Wn),be=_0.call(Ae,D.key,D.boundingBox,D.xStep,D.yStep,Be).id),H("q"),H("/Pattern cs"),H("/"+be+" scn"),Ae.gState&&f.setGState(Ae.gState),H(Q),H("Q")}},P0=function(D){switch(D){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_f=f.moveTo=function(D,Q){return H(I(E(D))+" "+I(A(Q))+" m"),this},Uc=f.lineTo=function(D,Q){return H(I(E(D))+" "+I(A(Q))+" l"),this},yl=f.curveTo=function(D,Q,be,Ae,Be,Ze){return H([I(E(D)),I(A(Q)),I(E(be)),I(A(Ae)),I(E(Be)),I(A(Ze)),"c"].join(" ")),this};f.__private__.line=f.line=function(D,Q,be,Ae,Be){if(isNaN(D)||isNaN(Q)||isNaN(be)||isNaN(Ae)||!Ga(Be))throw new Error("Invalid arguments passed to jsPDF.line");return j===v?this.lines([[be-D,Ae-Q]],D,Q,[1,1],Be||"S"):this.lines([[be-D,Ae-Q]],D,Q,[1,1]).stroke()},f.__private__.lines=f.lines=function(D,Q,be,Ae,Be,Ze){var tt,kt,Rt,Qt,rr,wr,cn,Ln,Ur,Vn,Fn,us;if(typeof D=="number"&&(us=be,be=Q,Q=D,D=us),Ae=Ae||[1,1],Ze=Ze||!1,isNaN(Q)||isNaN(be)||!Array.isArray(D)||!Array.isArray(Ae)||!Ga(Be)||typeof Ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_f(Q,be),tt=Ae[0],kt=Ae[1],Qt=D.length,Vn=Q,Fn=be,Rt=0;Rt<Qt;Rt++)(rr=D[Rt]).length===2?(Vn=rr[0]*tt+Vn,Fn=rr[1]*kt+Fn,Uc(Vn,Fn)):(wr=rr[0]*tt+Vn,cn=rr[1]*kt+Fn,Ln=rr[2]*tt+Vn,Ur=rr[3]*kt+Fn,Vn=rr[4]*tt+Vn,Fn=rr[5]*kt+Fn,yl(wr,cn,Ln,Ur,Vn,Fn));return Ze&&gg(),jf(Be),this},f.path=function(D){for(var Q=0;Q<D.length;Q++){var be=D[Q],Ae=be.c;switch(be.op){case"m":_f(Ae[0],Ae[1]);break;case"l":Uc(Ae[0],Ae[1]);break;case"c":yl.apply(this,Ae);break;case"h":gg()}}return this},f.__private__.rect=f.rect=function(D,Q,be,Ae,Be){if(isNaN(D)||isNaN(Q)||isNaN(be)||isNaN(Ae)||!Ga(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return j===v&&(Ae=-Ae),H([I(E(D)),I(A(Q)),I(E(be)),I(E(Ae)),"re"].join(" ")),jf(Be),this},f.__private__.triangle=f.triangle=function(D,Q,be,Ae,Be,Ze,tt){if(isNaN(D)||isNaN(Q)||isNaN(be)||isNaN(Ae)||isNaN(Be)||isNaN(Ze)||!Ga(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[be-D,Ae-Q],[Be-be,Ze-Ae],[D-Be,Q-Ze]],D,Q,[1,1],tt,!0),this},f.__private__.roundedRect=f.roundedRect=function(D,Q,be,Ae,Be,Ze,tt){if(isNaN(D)||isNaN(Q)||isNaN(be)||isNaN(Ae)||isNaN(Be)||isNaN(Ze)||!Ga(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kt=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*be),Ze=Math.min(Ze,.5*Ae),this.lines([[be-2*Be,0],[Be*kt,0,Be,Ze-Ze*kt,Be,Ze],[0,Ae-2*Ze],[0,Ze*kt,-Be*kt,Ze,-Be,Ze],[2*Be-be,0],[-Be*kt,0,-Be,-Ze*kt,-Be,-Ze],[0,2*Ze-Ae],[0,-Ze*kt,Be*kt,-Ze,Be,-Ze]],D+Be,Q,[1,1],tt,!0),this},f.__private__.ellipse=f.ellipse=function(D,Q,be,Ae,Be){if(isNaN(D)||isNaN(Q)||isNaN(be)||isNaN(Ae)||!Ga(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ze=4/3*(Math.SQRT2-1)*be,tt=4/3*(Math.SQRT2-1)*Ae;return _f(D+be,Q),yl(D+be,Q-tt,D+Ze,Q-Ae,D,Q-Ae),yl(D-Ze,Q-Ae,D-be,Q-tt,D-be,Q),yl(D-be,Q+tt,D-Ze,Q+Ae,D,Q+Ae),yl(D+Ze,Q+Ae,D+be,Q+tt,D+be,Q),jf(Be),this},f.__private__.circle=f.circle=function(D,Q,be,Ae){if(isNaN(D)||isNaN(Q)||isNaN(be)||!Ga(Ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,Q,be,be,Ae)},f.setFont=function(D,Q,be){return be&&(Q=M(Q,be)),Le=hg(D,Q,{disableWarning:!1}),this};var k0=f.__private__.getFont=f.getFont=function(){return We[hg.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var D,Q,be={};for(D in it)if(it.hasOwnProperty(D))for(Q in be[D]=[],it[D])it[D].hasOwnProperty(Q)&&be[D].push(Q);return be},f.addFont=function(D,Q,be,Ae,Be){var Ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ze.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&Ze.indexOf(arguments[3])==-1&&(be=M(be,Ae)),lg.call(this,D,Q,be,Be=Be||"Identity-H")};var zc,Sf=e.lineWidth||.200025,$t=f.__private__.getLineWidth=f.getLineWidth=function(){return Sf},C0=f.__private__.setLineWidth=f.setLineWidth=function(D){return Sf=D,H(I(E(D))+" w"),this};f.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(D,Q){if(D=D||[],Q=Q||0,isNaN(Q)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(be){return I(E(be))}).join(" "),Q=I(E(Q)),H("["+D+"] "+Q+" d"),this};var T0=f.__private__.getLineHeight=f.getLineHeight=function(){return _e*zc};f.__private__.getLineHeight=f.getLineHeight=function(){return _e*zc};var O0=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(zc=D),this},E0=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return zc};O0(e.lineHeight);var So=f.__private__.getHorizontalCoordinate=function(D){return E(D)},Po=f.__private__.getVerticalCoordinate=function(D){return j===b?D:ut[Y].mediaBox.topRightY-ut[Y].mediaBox.bottomLeftY-E(D)},A0=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(D){return I(So(D))},D0=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(D){return I(Po(D))},Nu=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ya(Nu)},f.__private__.setStrokeColor=f.setDrawColor=function(D,Q,be,Ae){return Nu=ma({ch1:D,ch2:Q,ch3:be,ch4:Ae,pdfColorType:"draw",precision:2}),H(Nu),this};var Pf=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ya(Pf)},f.__private__.setFillColor=f.setFillColor=function(D,Q,be,Ae){return Pf=ma({ch1:D,ch2:Q,ch3:be,ch4:Ae,pdfColorType:"fill",precision:2}),H(Pf),this};var Hc=e.textColor||"0 g",ju=f.__private__.getTextColor=f.getTextColor=function(){return Ya(Hc)};f.__private__.setTextColor=f.setTextColor=function(D,Q,be,Ae){return Hc=ma({ch1:D,ch2:Q,ch3:be,ch4:Ae,pdfColorType:"text",precision:3}),this};var _u=e.charSpace,M0=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(_u||0)};f.__private__.setCharSpace=f.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _u=D,this};var kf=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(D){var Q=f.CapJoinStyles[D];if(Q===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kf=Q,H(Q+" J"),this};var Cf=0;f.__private__.setLineJoin=f.setLineJoin=function(D){var Q=f.CapJoinStyles[D];if(Q===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cf=Q,H(Q+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(I(E(D))+" M"),this},f.GState=Np,f.setGState=function(D){(D=typeof D=="string"?Qe[ht[D]]:Wc(null,D)).equals(Dt)||(H("/"+D.id+" gs"),Dt=D)};var Wc=function(D,Q){if(!D||!ht[D]){var be=!1;for(var Ae in Qe)if(Qe.hasOwnProperty(Ae)&&Qe[Ae].equals(Q)){be=!0;break}if(be)Q=Qe[Ae];else{var Be="GS"+(Object.keys(Qe).length+1).toString(10);Qe[Be]=Q,Q.id=Be}return D&&(ht[D]=Q.id),Ut.publish("addGState",Q),Q}};f.addGState=function(D,Q){return Wc(D,Q),this},f.saveGraphicsState=function(){return H("q"),ft.push({key:Le,size:_e,color:Hc}),this},f.restoreGraphicsState=function(){H("Q");var D=ft.pop();return Le=D.key,_e=D.size,Hc=D.color,Dt=null,this},f.setCurrentTransformationMatrix=function(D){return H(D.toString()+" cm"),this},f.comment=function(D){return H("#"+D),this};var Vc=function(D,Q){var be=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return be},set:function(Ze){isNaN(Ze)||(be=parseFloat(Ze))}});var Ae=Q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ae},set:function(Ze){isNaN(Ze)||(Ae=parseFloat(Ze))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(Ze){Be=Ze.toString()}}),this},Tf=function(D,Q,be,Ae){Vc.call(this,D,Q),this.type="rect";var Be=be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(tt){isNaN(tt)||(Be=parseFloat(tt))}});var Ze=Ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ze},set:function(tt){isNaN(tt)||(Ze=parseFloat(tt))}}),this},Su=function(){this.page=yt,this.currentPage=Y,this.pages=K.slice(0),this.pagesContext=ut.slice(0),this.x=Ve,this.y=rt,this.matrix=Ye,this.width=vg(Y),this.height=ko(Y),this.outputDestination=Te,this.id="",this.objectNumber=-1};Su.prototype.restore=function(){yt=this.page,Y=this.currentPage,ut=this.pagesContext,K=this.pages,Ve=this.x,rt=this.y,Ye=this.matrix,yg(Y,this.width),Co(Y,this.height),Te=this.outputDestination};var Of=function(D,Q,be,Ae,Be){Yt.push(new Su),yt=Y=0,K=[],Ve=D,rt=Q,Ye=Be,bf([be,Ae])};for(var Yc in f.beginFormObject=function(D,Q,be,Ae,Be){return Of(D,Q,be,Ae,Be),this},f.endFormObject=function(D){return function(Q){if(lt[Q])Yt.pop().restore();else{var be=new Su,Ae="Xo"+(Object.keys(wt).length+1).toString(10);be.id=Ae,lt[Q]=Ae,wt[Ae]=be,Ut.publish("addFormObject",be),Yt.pop().restore()}}(D),this},f.doFormObject=function(D,Q){var be=wt[lt[D]];return H("q"),H(Q.toString()+" cm"),H("/"+be.id+" Do"),H("Q"),this},f.getFormObject=function(D){var Q=wt[lt[D]];return{x:Q.x,y:Q.y,width:Q.width,height:Q.height,matrix:Q.matrix}},f.save=function(D,Q){return D=D||"generated.pdf",(Q=Q||{}).returnPromise=Q.returnPromise||!1,Q.returnPromise===!1?(ud(Bc(_o()),D),typeof ud.unload=="function"&&Zt.setTimeout&&setTimeout(ud.unload,911),this):new Promise(function(be,Ae){try{var Be=ud(Bc(_o()),D);typeof ud.unload=="function"&&Zt.setTimeout&&setTimeout(ud.unload,911),be(Be)}catch(Ze){Ae(Ze.message)}})},Tt.API)Tt.API.hasOwnProperty(Yc)&&(Yc==="events"&&Tt.API.events.length?function(D,Q){var be,Ae,Be;for(Be=Q.length-1;Be!==-1;Be--)be=Q[Be][0],Ae=Q[Be][1],D.subscribe.apply(D,[be].concat(typeof Ae=="function"?[Ae]:Ae))}(Ut,Tt.API.events):f[Yc]=Tt.API[Yc]);function vg(D){return ut[D].mediaBox.topRightX-ut[D].mediaBox.bottomLeftX}function yg(D,Q){ut[D].mediaBox.topRightX=Q+ut[D].mediaBox.bottomLeftX}function ko(D){return ut[D].mediaBox.topRightY-ut[D].mediaBox.bottomLeftY}function Co(D,Q){ut[D].mediaBox.topRightY=Q+ut[D].mediaBox.bottomLeftY}var xg=f.getPageWidth=function(D){return vg(D=D||Y)/Ue},bg=f.setPageWidth=function(D,Q){yg(D,Q*Ue)},Kc=f.getPageHeight=function(D){return ko(D=D||Y)/Ue},wg=f.setPageHeight=function(D,Q){Co(D,Q*Ue)};return f.internal={pdfEscape:Li,getStyle:pg,getFont:k0,getFontSize:te,getCharSpace:M0,getTextColor:ju,getLineHeight:T0,getLineHeightFactor:E0,getLineWidth:$t,write:Oe,getHorizontalCoordinate:So,getVerticalCoordinate:Po,getCoordinateString:A0,getVerticalCoordinateString:D0,collections:{},newObject:gn,newAdditionalObject:Ic,newObjectDeferred:rs,newObjectDeferredBegin:ds,getFilters:pa,putStream:Ii,events:Ut,scaleFactor:Ue,pageSize:{getWidth:function(){return xg(Y)},setWidth:function(D){bg(Y,D)},getHeight:function(){return Kc(Y)},setHeight:function(D){wg(Y,D)}},encryptionOptions:u,encryption:Sn,getEncryptor:function(D){return u!==null?Sn.encryptor(D,0):function(Q){return Q}},output:ga,getNumberOfPages:ug,pages:K,out:H,f2:T,f3:k,getPageInfo:Nf,getPageInfoByObjId:w0,getCurrentPageInfo:N0,getPDFVersion:y,Point:Vc,Rectangle:Tf,Matrix:at,hasHotfix:qc},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return xg(Y)},set:function(D){bg(Y,D)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Kc(Y)},set:function(D){wg(Y,D)},enumerable:!0,configurable:!0}),(function(D){for(var Q=0,be=je.length;Q<be;Q++){var Ae=lg.call(this,D[Q][0],D[Q][1],D[Q][2],je[Q][3],!0);h===!1&&(m[Ae]=!0);var Be=D[Q][0].split("-");og({id:Ae,fontName:Be[0],fontStyle:Be[1]||""})}Ut.publish("addFonts",{fonts:We,dictionary:it})}).call(f,je),Le="F1",cg(i,r),Ut.publish("initialized"),f}Ku.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ku.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ku.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Ku.prototype.processOwnerPassword=function(e,t){return R2(M2(t).substr(0,5),e)},Ku.prototype.encryptor=function(e,t){var r=M2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return R2(r,n)}},Np.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Or(e)!==Or(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Tt.API={events:[]},Tt.version="3.0.3";var wn=Tt.API,c5=1,pu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zu=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(e){return e.toFixed(2)},Bl=function(e){return e.toFixed(5)};wn.__acroform__={};var li=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},pC=function(e){return e*c5},eo=function(e){var t=new MD,r=_t.internal.getHeight(e)||0,n=_t.internal.getWidth(e)||0;return t.BBox=[0,0,Number(nr(n)),Number(nr(r))],t},yee=wn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},xee=wn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},bee=wn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},An=wn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bee(e,t-1)},Dn=wn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yee(e,t-1)},Mn=wn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xee(e,t-1)},wee=wn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],a=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=n(a+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=n(a)||0,[Number(nr(c.lowerLeft_X)),Number(nr(c.lowerLeft_Y)),Number(nr(c.upperRight_X)),Number(nr(c.upperRight_Y))]},Nee=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=I2(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+nr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=eo(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},I2=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var a=r,o=_t.internal.getHeight(e)||0;o=o<0?-o:o;var l=_t.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,k,E){if(T+1<i.length){var A=k+" "+i[T+1][0];return Iv(A,e,E).width<=l-4}return!1};a++;e:for(;a>0;){t="",a--;var d,u,h=Iv("3",e,a).height,m=e.multiline?o-a:(o-h)/2,f=m+=2,g=0,y=0,x=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Iv(t,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var p="",v=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var j=!1;if(i[b].length!==1&&x!==i[b].length-1){if((h+2)*(v+2)+2>o)continue e;p+=i[b][x],j=!0,y=b,b--}else{p=(p+=i[b][x]+" ").substr(p.length-1)==" "?p.substr(0,p.length-1):p;var S=parseInt(b),P=c(S,p,a),M=b>=i.length-1;if(P&&!M){p+=" ",x=0;continue}if(P||M){if(M)y=S;else if(e.multiline&&(h+2)*(v+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(v+2)+2>o)continue e;y=S}}for(var I="",O=g;O<=y;O++){var L=i[O];if(e.multiline){if(O===y){I+=L[x]+" ",x=(x+1)%L.length;continue}if(O===g){I+=L[L.length-1]+" ";continue}}I+=L[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,u=Iv(I,e,a).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=nr(d)+" "+nr(f)+` Td
`,t+="("+pu(I)+`) Tj
`,t+=-nr(d)+` 0 Td
`,f=-(a+2),u=0,g=j?y:y+1,v++,p=""}break}return n.text=t,n.fontSize=a,n},Iv=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},jee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_ee=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},See=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Wa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(jee)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");c5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new RD,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&_ee(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=wee(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=_t.createDefaultAppearanceStream(l),Or(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=Nee(l);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var g=f[o];typeof g=="function"&&(g=g.call(i,l)),h+="/"+o+" "+g+" ",i.internal.acroformPlugin.xForms.indexOf(g)>=0||i.internal.acroformPlugin.xForms.push(g)}}else typeof(g=f)=="function"&&(g=g.call(i,l)),h+="/"+o+" "+g,i.internal.acroformPlugin.xForms.indexOf(g)>=0||i.internal.acroformPlugin.xForms.push(g);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&function(y,x){for(var p in y)if(y.hasOwnProperty(p)){var v=p,b=y[p];x.internal.newObjectDeferredBegin(b.objId,!0),Or(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete y[v]}}(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},DD=wn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),Or(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+pu(n(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bw=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+pu(n(e))+")"},lo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};lo.prototype.toString=function(){return this.objId+" 0 R"},lo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},lo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:DD(i,this.objId,this.scope)}):i instanceof lo?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var MD=function(){lo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};li(MD,lo);var RD=function(){lo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+pu(r(e))+")"}},set:function(r){e=r}})};li(RD,lo);var Wa=function e(){lo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute F supplied.');t=p}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!An(t,3)},set:function(p){p?this.F=Dn(t,3):this.F=Mn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute Ff supplied.');r=p}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(p){n=p!==void 0?p:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(p){n[0]=p}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(p){n[1]=p}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(p){n[2]=p}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(p){n[3]=p}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(p){switch(p){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=p;break;default:throw new Error('Invalid value "'+p+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Qy)return;a="FieldObject"+e.FieldNum++}var p=function(v){return v};return this.scope&&(p=this.scope.internal.getEncryptor(this.objId)),"("+pu(p(a))+")"},set:function(p){a=p.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(p){a=p}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(p){o=p}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(p){l=p}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(p){c=p}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/c5:d},set:function(p){d=p}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(p){u=p}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Qy||this instanceof bc))return bw(h,this.objId,this.scope)},set:function(p){p=p.toString(),h=p}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Qn==0?bw(m,this.objId,this.scope):m},set:function(p){p=p.toString(),m=this instanceof Qn==0?p.substr(0,1)==="("?zu(p.substr(1,p.length-2)):zu(p):p}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qn==1?zu(m.substr(1,m.length-1)):m},set:function(p){p=p.toString(),m=this instanceof Qn==1?"/"+p:p}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(p){this.V=p}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Qn==0?bw(f,this.objId,this.scope):f},set:function(p){p=p.toString(),f=this instanceof Qn==0?p.substr(0,1)==="("?zu(p.substr(1,p.length-2)):zu(p):p}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qn==1?zu(f.substr(1,f.length-1)):f},set:function(p){p=p.toString(),f=this instanceof Qn==1?"/"+p:p}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(p){p=!!p,y=p}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(p){g=p}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,1)},set:function(p){p?this.Ff=Dn(this.Ff,1):this.Ff=Mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,2)},set:function(p){p?this.Ff=Dn(this.Ff,2):this.Ff=Mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,3)},set:function(p){p?this.Ff=Dn(this.Ff,3):this.Ff=Mn(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(p){if([0,1,2].indexOf(p)===-1)throw new Error('Invalid value "'+p+'" for attribute Q supplied.');x=p}}),Object.defineProperty(this,"textAlign",{get:function(){var p;switch(x){case 0:default:p="left";break;case 1:p="center";break;case 2:p="right"}return p},configurable:!0,enumerable:!0,set:function(p){switch(p){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};li(Wa,lo);var Ud=function(){Wa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DD(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,d=[];c=o.exec(a);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,18)},set:function(r){r?this.Ff=Dn(this.Ff,18):this.Ff=Mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Dn(this.Ff,19):this.Ff=Mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,20)},set:function(r){r?(this.Ff=Dn(this.Ff,20),t.sort()):this.Ff=Mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,22)},set:function(r){r?this.Ff=Dn(this.Ff,22):this.Ff=Mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(r){r?this.Ff=Dn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,27)},set:function(r){r?this.Ff=Dn(this.Ff,27):this.Ff=Mn(this.Ff,27)}}),this.hasAppearanceStream=!1};li(Ud,Wa);var zd=function(){Ud.call(this),this.fontName="helvetica",this.combo=!1};li(zd,Ud);var Hd=function(){zd.call(this),this.combo=!0};li(Hd,zd);var Fm=function(){Hd.call(this),this.edit=!0};li(Fm,Hd);var Qn=function(){Wa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,15)},set:function(r){r?this.Ff=Dn(this.Ff,15):this.Ff=Mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,16)},set:function(r){r?this.Ff=Dn(this.Ff,16):this.Ff=Mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,17)},set:function(r){r?this.Ff=Dn(this.Ff,17):this.Ff=Mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(r){r?this.Ff=Dn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+pu(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Or(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};li(Qn,Wa);var Bm=function(){Qn.call(this),this.pushButton=!0};li(Bm,Qn);var Wd=function(){Qn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};li(Wd,Qn);var Qy=function(){var e,t;Wa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+pu(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Or(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};li(Qy,Wa),Wd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Wd.prototype.createOption=function(e){var t=new Qy;return t.Parent=this,t.optionName=e,this.Kids.push(t),Pee.call(this.scope,t),t};var qm=function(){Qn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_t.CheckBox.createAppearanceStream()};li(qm,Qn);var bc=function(){Wa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,13)},set:function(t){t?this.Ff=Dn(this.Ff,13):this.Ff=Mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,21)},set:function(t){t?this.Ff=Dn(this.Ff,21):this.Ff=Mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(t){t?this.Ff=Dn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,24)},set:function(t){t?this.Ff=Dn(this.Ff,24):this.Ff=Mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,25)},set:function(t){t?this.Ff=Dn(this.Ff,25):this.Ff=Mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(t){t?this.Ff=Dn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};li(bc,Wa);var Um=function(){bc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,14)},set:function(e){e?this.Ff=Dn(this.Ff,14):this.Ff=Mn(this.Ff,14)}}),this.password=!0};li(Um,bc);var _t={CheckBox:{createAppearanceStream:function(){return{N:{On:_t.CheckBox.YesNormal},D:{On:_t.CheckBox.YesPushDown,Off:_t.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=eo(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=I2(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+nr(_t.internal.getWidth(e))+" "+nr(_t.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+nr(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=eo(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],a=_t.internal.getHeight(e),o=_t.internal.getWidth(e),l=I2(e,e.caption);return i.push("1 g"),i.push("0 0 "+nr(o)+" "+nr(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nr(o-1)+" "+nr(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+nr(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=eo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nr(_t.internal.getWidth(e))+" "+nr(_t.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:_t.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=_t.RadioButton.Circle.YesNormal,t.D[e]=_t.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=eo(e);t.scope=e.scope;var r=[],n=_t.internal.getWidth(e)<=_t.internal.getHeight(e)?_t.internal.getWidth(e)/4:_t.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=_t.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Bl(_t.internal.getWidth(e)/2)+" "+Bl(_t.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=eo(e);t.scope=e.scope;var r=[],n=_t.internal.getWidth(e)<=_t.internal.getHeight(e)?_t.internal.getWidth(e)/4:_t.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*_t.internal.Bezier_C).toFixed(5)),o=Number((n*_t.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Bl(_t.internal.getWidth(e)/2)+" "+Bl(_t.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Bl(_t.internal.getWidth(e)/2)+" "+Bl(_t.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=eo(e);t.scope=e.scope;var r=[],n=_t.internal.getWidth(e)<=_t.internal.getHeight(e)?_t.internal.getWidth(e)/4:_t.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*_t.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Bl(_t.internal.getWidth(e)/2)+" "+Bl(_t.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:_t.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=_t.RadioButton.Cross.YesNormal,t.D[e]=_t.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=eo(e);t.scope=e.scope;var r=[],n=_t.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+nr(_t.internal.getWidth(e)-2)+" "+nr(_t.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),r.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),r.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),r.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=eo(e);t.scope=e.scope;var r=_t.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(_t.internal.getWidth(e))+" "+nr(_t.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(_t.internal.getWidth(e)-2)+" "+nr(_t.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(r.x1.x)+" "+nr(r.x1.y)+" m"),n.push(nr(r.x2.x)+" "+nr(r.x2.y)+" l"),n.push(nr(r.x4.x)+" "+nr(r.x4.y)+" m"),n.push(nr(r.x3.x)+" "+nr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=eo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+nr(_t.internal.getWidth(e))+" "+nr(_t.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};_t.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=_t.internal.getWidth(e),r=_t.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},_t.internal.getWidth=function(e){var t=0;return Or(e)==="object"&&(t=pC(e.Rect[2])),t},_t.internal.getHeight=function(e){var t=0;return Or(e)==="object"&&(t=pC(e.Rect[3])),t};var Pee=wn.addField=function(e){if(See(this,e),!(e instanceof Wa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};wn.AcroFormChoiceField=Ud,wn.AcroFormListBox=zd,wn.AcroFormComboBox=Hd,wn.AcroFormEditBox=Fm,wn.AcroFormButton=Qn,wn.AcroFormPushButton=Bm,wn.AcroFormRadioButton=Wd,wn.AcroFormCheckBox=qm,wn.AcroFormTextField=bc,wn.AcroFormPasswordField=Um,wn.AcroFormAppearance=_t,wn.AcroForm={ChoiceField:Ud,ListBox:zd,ComboBox:Hd,EditBox:Fm,Button:Qn,PushButton:Bm,RadioButton:Wd,CheckBox:qm,TextField:bc,PasswordField:Um,Appearance:_t},Tt.AcroForm={ChoiceField:Ud,ListBox:zd,ComboBox:Hd,EditBox:Fm,Button:Qn,PushButton:Bm,RadioButton:Wd,CheckBox:qm,TextField:bc,PasswordField:Um,Appearance:_t};Tt.AcroForm;function ID(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(T,k){var E,A,q,U,R,C=r;if((k=k||r)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(P(T))for(R in n)for(q=n[R],E=0;E<q.length;E+=1){for(U=!0,A=0;A<q[E].length;A+=1)if(q[E][A]!==void 0&&q[E][A]!==T[A]){U=!1;break}if(U===!0){C=R;break}}else for(R in n)for(q=n[R],E=0;E<q.length;E+=1){for(U=!0,A=0;A<q[E].length;A+=1)if(q[E][A]!==void 0&&q[E][A]!==T.charCodeAt(A)){U=!1;break}if(U===!0){C=R;break}}return C===r&&k!==r&&(C=k),C},a=function T(k){for(var E=this.internal.write,A=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:k.width}),U.push({key:"Height",value:k.height}),k.colorSpace===p.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===p.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)&&k.transparency.length>0){for(var R="",C=0,F=k.transparency.length;C<F;C++)R+=k.transparency[C]+" "+k.transparency[C]+" ";U.push({key:"Mask",value:"["+R+"]"})}k.sMask!==void 0&&U.push({key:"SMask",value:k.objectId+1+" 0 R"});var X=k.filter!==void 0?["/"+k.filter]:void 0;if(A({data:k.data,additionalKeyValues:U,alreadyAppliedFilters:X,objectId:k.objectId}),E("endobj"),"sMask"in k&&k.sMask!==void 0){var re,z=(re=k.sMaskBitsPerComponent)!==null&&re!==void 0?re:k.bitsPerComponent,Y={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:z,data:k.sMask};"filter"in k&&(Y.decodeParameters="/Predictor ".concat(k.predictor," /Colors 1 /BitsPerComponent ").concat(z," /Columns ").concat(k.width),Y.filter=k.filter),T.call(this,Y)}if(k.colorSpace===p.INDEXED){var J=this.internal.newObject();A({data:I(new Uint8Array(k.palette)),objectId:J}),E("endobj")}},o=function(){var T=this.internal.collections[t+"images"];for(var k in T)a.call(this,T[k])},l=function(){var T,k=this.internal.collections[t+"images"],E=this.internal.write;for(var A in k)E("/I"+(T=k[A]).index,T.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var T=this.internal.collections[t+"images"];return c.call(this),T},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(T){return typeof e["process"+T.toUpperCase()]=="function"},m=function(T){return Or(T)==="object"&&T.nodeType===1},f=function(T,k){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var E=""+T.getAttribute("src");if(E.indexOf("data:image/")===0)return dy(unescape(E).split("base64,").pop());var A=e.loadFile(E,!0);if(A!==void 0)return A}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var q;switch(k){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return dy(T.toDataURL(q,1).split("base64,").pop())}},g=function(T){var k=this.internal.collections[t+"images"];if(k){for(var E in k)if(T===k[E].alias)return k[E]}},y=function(T,k,E){return T||k||(T=-96,k=-96),T<0&&(T=-1*E.width*72/T/this.internal.scaleFactor),k<0&&(k=-1*E.height*72/k/this.internal.scaleFactor),T===0&&(T=k*E.width/E.height),k===0&&(k=T*E.height/E.width),[T,k]},x=function(T,k,E,A,q,U){var R=y.call(this,E,A,q),C=this.internal.getCoordinateString,F=this.internal.getVerticalCoordinateString,X=d.call(this);if(E=R[0],A=R[1],X[q.index]=q,U){U*=Math.PI/180;var re=Math.cos(U),z=Math.sin(U),Y=function(ne){return ne.toFixed(4)},J=[Y(re),Y(z),Y(-1*z),Y(re),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,C(T),F(k+A),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([C(E),"0","0",C(A),"0","0","cm"].join(" "))):this.internal.write([C(E),"0","0",C(A),C(T),F(k+A),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},p=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(T){var k,E,A=0;if(typeof T=="string")for(E=T.length,k=0;k<E;k++)A=(A<<5)-A+T.charCodeAt(k),A|=0;else if(P(T))for(E=T.byteLength/2,k=0;k<E;k++)A=(A<<5)-A+T[k],A|=0;return A},j=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var k=!0;return T.length===0&&(k=!1),T.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(k=!1),k},S=e.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var k=T.indexOf(",");return k<0?null:T.substring(0,k).trim().endsWith("base64")?T.substring(k+1):null};e.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},M=e.__addimage__.binaryStringToUint8Array=function(T){for(var k=T.length,E=new Uint8Array(k),A=0;A<k;A++)E[A]=T.charCodeAt(A);return E},I=e.__addimage__.arrayBufferToBinaryString=function(T){for(var k="",E=P(T)?T:new Uint8Array(T),A=0;A<E.length;A+=8192)k+=String.fromCharCode.apply(null,E.subarray(A,A+8192));return k};e.addImage=function(){var T,k,E,A,q,U,R,C,F;if(typeof arguments[1]=="number"?(k=r,E=arguments[1],A=arguments[2],q=arguments[3],U=arguments[4],R=arguments[5],C=arguments[6],F=arguments[7]):(k=arguments[1],E=arguments[2],A=arguments[3],q=arguments[4],U=arguments[5],R=arguments[6],C=arguments[7],F=arguments[8]),Or(T=arguments[0])==="object"&&!m(T)&&"imageData"in T){var X=T;T=X.imageData,k=X.format||k||r,E=X.x||E||0,A=X.y||A||0,q=X.w||X.width||q,U=X.h||X.height||U,R=X.alias||R,C=X.compression||C,F=X.rotation||X.angle||F}var re=this.internal.getFilters();if(C===void 0&&re.indexOf("FlateEncode")!==-1&&(C="SLOW"),isNaN(E)||isNaN(A))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var z=O.call(this,T,k,R,C);return x.call(this,E,A,q,U,z,F),this};var O=function(T,k,E,A){var q,U,R;if(typeof T=="string"&&i(T)===r){T=unescape(T);var C=L(T,!1);(C!==""||(C=e.loadFile(T,!0))!==void 0)&&(T=C)}if(m(T)&&(T=f(T,k)),k=i(T,k),!h(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((R=E)==null||R.length===0)&&(E=function(F){return typeof F=="string"||P(F)?b(F):P(F.data)?b(F.data):null}(T)),(q=g.call(this,E))||(T instanceof Uint8Array||k==="RGBA"||(U=T,T=M(T)),q=this["process"+k.toUpperCase()](T,u.call(this),E,function(F){return F&&typeof F=="string"&&(F=F.toUpperCase()),F in e.image_compression?F:v.NONE}(A),U)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},L=e.__addimage__.convertBase64ToBinaryString=function(T,k){k=typeof k!="boolean"||k;var E,A="";if(typeof T=="string"){var q;E=(q=S(T))!==null&&q!==void 0?q:T;try{A=dy(E)}catch(U){if(k)throw j(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return A};e.getImageProperties=function(T){var k,E,A="";if(m(T)&&(T=f(T)),typeof T=="string"&&i(T)===r&&((A=L(T,!1))===""&&(A=e.loadFile(T)||""),T=A),E=i(T),!h(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(T instanceof Uint8Array||(T=M(T)),!(k=this["process"+E.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=E,k}})(Tt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Tt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){n=d[m];var f=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),p=this.internal.getEncryptor(y.objId),v=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(p(n.contents))+")",a+=" /Popup "+x.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+f(p(v))+") >>",y.content=a;var b=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(a+=" /Open true"),a+=" >>",x.content=a,this.internal.write(y.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(g(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var P=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+i),h:d(n+a)},options:o,type:"link"})},e.textWithLink=function(r,n,i,a){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,i,a),i+=.2*d,a.align==="center"&&(n-=c/2),a.align==="right"&&(n-=c),this.link(n,i-d,l,o,a),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Tt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(y){var x=0,p=r,v="",b=0;for(x=0;x<y.length;x+=1)p[y.charCodeAt(x)]!==void 0?(b++,typeof(p=p[y.charCodeAt(x)])=="number"&&(v+=String.fromCharCode(p),p=r,b=0),x===y.length-1&&(p=r,v+=y.charAt(x-(b-1)),x-=b-1,b=0)):(p=r,v+=y.charAt(x-b),x-=b,b=0);return v};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(y,x,p){return o(y)?a(y)===!1?-1:!d(y)||!o(x)&&!o(p)||!o(p)&&l(x)||l(y)&&!o(x)||l(y)&&c(x)||l(y)&&l(x)?0:u(y)&&o(x)&&!l(x)&&o(p)&&d(p)?3:l(y)||!o(p)?1:2:-1},f=function(y){var x=0,p=0,v=0,b="",j="",S="",P=(y=y||"").split("\\s+"),M=[];for(x=0;x<P.length;x+=1){for(M.push(""),p=0;p<P[x].length;p+=1)b=P[x][p],j=P[x][p-1],S=P[x][p+1],o(b)?(v=m(b,j,S),M[x]+=v!==-1?String.fromCharCode(t[b.charCodeAt(0)][v]):b):M[x]+=b;M[x]=h(M[x])}return M.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var y,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,p=[];if(Array.isArray(x)){var v=0;for(p=[],v=0;v<x.length;v+=1)Array.isArray(x[v])?p.push([f(x[v][0]),x[v][1],x[v][2]]):p.push([f(x[v])]);y=p}else y=f(x);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",g])}(Tt.API),Tt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Tt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(y){g=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,g=0,y=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var p=d.maxWidth;p>0?typeof c=="string"?c=this.splitTextToSize(c,p):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,j){return b.concat(x.splitTextToSize(j,p))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)f<(y=this.getStringUnitWidth(c[v],{font:h})*u)&&(f=y);return f!==0&&(g=c.length),{w:f/=m,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,g,y,x,p=[],v=[],b=[],j={},S={},P=[],M=[],I=(m=m||{}).autoSize||!1,O=m.printHeaders!==!1,L=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,T=m.margins||Object.assign({width:this.getPageWidth()},t),k=typeof m.padding=="number"?m.padding:3,E=m.headerBackgroundColor||"#c8c8c8",A=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=A,this.setFontSize(L),h==null)v=p=Object.keys(u[0]),b=p.map(function(){return"left"});else if(Array.isArray(h)&&Or(h[0])==="object")for(p=h.map(function(X){return X.name}),v=h.map(function(X){return X.prompt||X.name||""}),b=h.map(function(X){return X.align||"left"}),f=0;f<h.length;f+=1)S[h[f].name]=.7499990551181103*h[f].width;else Array.isArray(h)&&typeof h[0]=="string"&&(v=p=h,b=p.map(function(){return"left"}));if(I||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<p.length;f+=1){for(j[x=p[f]]=u.map(function(X){return X[x]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(v[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=j[x],this.setFont(void 0,"normal"),y=0;y<g.length;y+=1)P.push(this.getTextDimensions(g[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[x]=Math.max.apply(null,P)+k+k,P=[]}if(O){var q={};for(f=0;f<p.length;f+=1)q[p[f]]={},q[p[f]].text=v[f],q[p[f]].align=b[f];var U=l.call(this,q,S);M=p.map(function(X){return new a(c,d,S[X],U,q[X].text,void 0,q[X].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var R=h.reduce(function(X,re){return X[re.name]=re.align,X},{});for(f=0;f<u.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:u[f]},this);var C=l.call(this,u[f],S);for(y=0;y<p.length;y+=1){var F=u[f][p[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:y,data:F},this),o.call(this,new a(c,d,S[p[y]],C,F,f+2,R[p[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var g=c[f];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/m+u+u},this).reduce(function(f,g){return Math.max(f,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(g)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Tt.API);var LD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},FD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L2=ID(FD),BD=[100,200,300,400,500,600,700,800,900],kee=ID(BD);function ww(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return LD[a=a||"normal"]?a:"normal"}(e.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),i=function(a){return typeof L2[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function gC(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var Cee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yC(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function xC(e){return e.trimLeft()}function Tee(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Oee(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Lv,bC,wC,Hu,Fv,NC,jC,_C,Nw=["times"];function SC(e,t,r,n,i){var a=4,o=kC;switch(i){case Tt.API.image_compression.FAST:a=1,o=PC;break;case Tt.API.image_compression.MEDIUM:a=6,o=CC;break;case Tt.API.image_compression.SLOW:a=9,o=TC}e=function(c,d,u,h){for(var m,f=c.length/d,g=new Uint8Array(c.length+f),y=[Eee,PC,kC,CC,TC],x=0;x<f;x+=1){var p=x*d,v=c.subarray(p,p+d);if(h)g.set(h(v,u,m),p+x);else{for(var b=y.length,j=[],S=0;S<b;S+=1)j[S]=y[S](v,u,m);var P=Dee(j.concat());g.set(j[P],p+x)}m=v}return g}(e,t,Math.ceil(r*n/8),o);var l=O2(e,{level:a});return Tt.API.__addimage__.arrayBufferToBinaryString(l)}function Eee(e){var t=Array.apply([],e);return t.unshift(0),t}function PC(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=e[i-t]||0;n[i+1]=e[i]-a+256&255}return n}function kC(e,t,r){var n=e.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var o=r&&r[a]||0;i[a+1]=e[a]-o+256&255}return i}function CC(e,t,r){var n=e.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var o=e[a-t]||0,l=r&&r[a]||0;i[a+1]=e[a]+256-(o+l>>>1)&255}return i}function TC(e,t,r){var n=e.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var o=Aee(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);i[a+1]=e[a]-o+256&255}return i}function Aee(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),a=Math.abs(e+t-r-r);return n<=i&&n<=a?e:i<=a?t:r}function Dee(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function jw(e,t,r){var n=t*r,i=Math.floor(n/8),a=16-(n-8*i+r),o=(1<<r)-1;return qD(e,i)>>a&o}function OC(e,t,r,n){var i=r*n,a=Math.floor(i/8),o=16-(i-8*a+n),l=(1<<n)-1,c=(t&l)<<o;(function(d,u,h){if(u+1<d.byteLength)d.setUint16(u,h,!1);else{var m=h>>8&255;d.setUint8(u,m)}})(e,a,qD(e,a)&~(l<<o)&65535|c)}function qD(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Mee(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,o=1<<1+(7&i);e[t++],e[t++];var l=null,c=null;a&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,m=null,f=0,g=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],1&y||(m=null),f=y>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,p=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,j=e[t++],S=j>>6&1,P=1<<1+(7&j),M=l,I=c,O=!1;j>>7&&(O=!0,M=t,I=P,t+=3*P);var L=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}u.push({x,y:p,width:v,height:b,has_local_palette:O,palette_offset:M,palette_size:I,data_offset:L,data_length:t-L,transparent_index:m,interlaced:!!S,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=u.length)throw new Error("Frame index out of range.");return u[k]},this.decodeAndBlitFrameBGRA=function(k,E){var A=this.frameInfo(k),q=A.width*A.height,U=new Uint8Array(q);EC(e,A.data_offset,U,q);var R=A.palette_offset,C=A.transparent_index;C===null&&(C=256);var F=A.width,X=r-F,re=F,z=4*(A.y*r+A.x),Y=4*((A.y+A.height)*r+A.x),J=z,ne=4*X;A.interlaced===!0&&(ne+=4*r*7);for(var le=8,G=0,he=U.length;G<he;++G){var xe=U[G];if(re===0&&(re=F,(J+=ne)>=Y&&(ne=4*X+4*r*(le-1),J=z+(F+X)*(le<<1),le>>=1)),xe===C)J+=4;else{var Se=e[R+3*xe],K=e[R+3*xe+1],we=e[R+3*xe+2];E[J++]=we,E[J++]=K,E[J++]=Se,E[J++]=255}--re}},this.decodeAndBlitFrameRGBA=function(k,E){var A=this.frameInfo(k),q=A.width*A.height,U=new Uint8Array(q);EC(e,A.data_offset,U,q);var R=A.palette_offset,C=A.transparent_index;C===null&&(C=256);var F=A.width,X=r-F,re=F,z=4*(A.y*r+A.x),Y=4*((A.y+A.height)*r+A.x),J=z,ne=4*X;A.interlaced===!0&&(ne+=4*r*7);for(var le=8,G=0,he=U.length;G<he;++G){var xe=U[G];if(re===0&&(re=F,(J+=ne)>=Y&&(ne=4*X+4*r*(le-1),J=z+(F+X)*(le<<1),le>>=1)),xe===C)J+=4;else{var Se=e[R+3*xe],K=e[R+3*xe+1],we=e[R+3*xe+2];E[J++]=Se,E[J++]=K,E[J++]=we,E[J++]=255}--re}}}function EC(e,t,r,n){for(var i=e[t++],a=1<<i,o=a+1,l=o+1,c=i+1,d=(1<<c)-1,u=0,h=0,m=0,f=e[t++],g=new Int32Array(4096),y=null;;){for(;u<16&&f!==0;)h|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<c)break;var x=h&d;if(h>>=c,u-=c,x!==a){if(x===o)break;for(var p=x<l?x:y,v=0,b=p;b>a;)b=g[b]>>8,++v;var j=b;if(m+v+(p!==x?1:0)>n)return void qr.log("Warning, gif stream longer than expected.");r[m++]=j;var S=m+=v;for(p!==x&&(r[m++]=j),b=p;v--;)b=g[b],r[--S]=255&b,b>>=8;y!==null&&l<4096&&(g[l++]=y<<8|j,l>=d+1&&c<12&&(++c,d=d<<1|1)),y=x}else l=o+1,d=(1<<(c=i+1))-1,y=null}return m!==n&&qr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _w(e){var t,r,n,i,a,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),f=new Array(64),g=new Array(64),y=[],x=0,p=7,v=new Array(64),b=new Array(64),j=new Array(64),S=new Array(256),P=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(z,Y){for(var J=0,ne=0,le=new Array,G=1;G<=16;G++){for(var he=1;he<=z[G];he++)le[Y[ne]]=[],le[Y[ne]][0]=J,le[Y[ne]][1]=G,ne++,J++;J*=2}return le}function R(z){for(var Y=z[0],J=z[1]-1;J>=0;)Y&1<<J&&(x|=1<<p),J--,--p<0&&(x==255?(C(255),C(0)):C(x),p=7,x=0)}function C(z){y.push(z)}function F(z){C(z>>8&255),C(255&z)}function X(z,Y,J,ne,le){for(var G,he=le[0],xe=le[240],Se=function(_e,W){var te,Z,me,$,ke,ce,Ie,Fe,Le,Ue,Ve=0;for(Le=0;Le<8;++Le){te=_e[Ve],Z=_e[Ve+1],me=_e[Ve+2],$=_e[Ve+3],ke=_e[Ve+4],ce=_e[Ve+5],Ie=_e[Ve+6];var rt=te+(Fe=_e[Ve+7]),Ye=te-Fe,We=Z+Ie,it=Z-Ie,ft=me+ce,ue=me-ce,Ke=$+ke,Qe=$-ke,ht=rt+Ke,Dt=rt-Ke,yt=We+ft,ut=We-ft;_e[Ve]=ht+yt,_e[Ve+4]=ht-yt;var Ut=.707106781*(ut+Dt);_e[Ve+2]=Dt+Ut,_e[Ve+6]=Dt-Ut;var Ct=.382683433*((ht=Qe+ue)-(ut=it+Ye)),wt=.5411961*ht+Ct,lt=1.306562965*ut+Ct,Yt=.707106781*(yt=ue+it),at=Ye+Yt,Sr=Ye-Yt;_e[Ve+5]=Sr+wt,_e[Ve+3]=Sr-wt,_e[Ve+1]=at+lt,_e[Ve+7]=at-lt,Ve+=8}for(Ve=0,Le=0;Le<8;++Le){te=_e[Ve],Z=_e[Ve+8],me=_e[Ve+16],$=_e[Ve+24],ke=_e[Ve+32],ce=_e[Ve+40],Ie=_e[Ve+48];var Wn=te+(Fe=_e[Ve+56]),nn=te-Fe,_n=Z+Ie,gn=Z-Ie,rs=me+ce,ds=me-ce,Ic=$+ke,gl=$-ke,fa=Wn+Ic,Ya=Wn-Ic,ma=_n+rs,pa=_n-rs;_e[Ve]=fa+ma,_e[Ve+32]=fa-ma;var Ii=.707106781*(pa+Ya);_e[Ve+16]=Ya+Ii,_e[Ve+48]=Ya-Ii;var Lc=.382683433*((fa=gl+ds)-(pa=gn+nn)),Ka=.5411961*fa+Lc,Fc=1.306562965*pa+Lc,yu=.707106781*(ma=ds+gn),xu=nn+yu,bu=nn-yu;_e[Ve+40]=bu+Ka,_e[Ve+24]=bu-Ka,_e[Ve+8]=xu+Fc,_e[Ve+56]=xu-Fc,Ve++}for(Le=0;Le<64;++Le)Ue=_e[Le]*W[Le],f[Le]=Ue>0?Ue+.5|0:Ue-.5|0;return f}(z,Y),K=0;K<64;++K)g[M[K]]=Se[K];var we=g[0]-J;J=g[0],we==0?R(ne[0]):(R(ne[m[G=32767+we]]),R(h[G]));for(var Te=63;Te>0&&g[Te]==0;)Te--;if(Te==0)return R(he),J;for(var ae,H=1;H<=Te;){for(var Oe=H;g[H]==0&&H<=Te;)++H;var pe=H-Oe;if(pe>=16){ae=pe>>4;for(var je=1;je<=ae;++je)R(xe);pe&=15}G=32767+g[H],R(le[(pe<<4)+m[G]]),R(h[G]),H++}return Te!=63&&R(he),J}function re(z){z=Math.min(Math.max(z,1),100),a!=z&&(function(Y){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var le=o((J[ne]*Y+50)/100);le=Math.min(Math.max(le,1),255),l[M[ne]]=le}for(var G=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var xe=o((G[he]*Y+50)/100);xe=Math.min(Math.max(xe,1),255),c[M[he]]=xe}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],K=0,we=0;we<8;we++)for(var Te=0;Te<8;Te++)d[K]=1/(l[M[K]]*Se[we]*Se[Te]*8),u[K]=1/(c[M[K]]*Se[we]*Se[Te]*8),K++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),a=z)}this.encode=function(z,Y){Y&&re(Y),y=new Array,x=0,p=7,F(65496),F(65504),F(16),C(74),C(70),C(73),C(70),C(0),C(1),C(1),C(0),F(1),F(1),C(0),C(0),function(){F(65499),F(132),C(0);for(var Z=0;Z<64;Z++)C(l[Z]);C(1);for(var me=0;me<64;me++)C(c[me])}(),function(Z,me){F(65472),F(17),C(8),F(me),F(Z),C(3),C(1),C(17),C(0),C(2),C(17),C(1),C(3),C(17),C(1)}(z.width,z.height),function(){F(65476),F(418),C(0);for(var Z=0;Z<16;Z++)C(I[Z+1]);for(var me=0;me<=11;me++)C(O[me]);C(16);for(var $=0;$<16;$++)C(L[$+1]);for(var ke=0;ke<=161;ke++)C(T[ke]);C(1);for(var ce=0;ce<16;ce++)C(k[ce+1]);for(var Ie=0;Ie<=11;Ie++)C(E[Ie]);C(17);for(var Fe=0;Fe<16;Fe++)C(A[Fe+1]);for(var Le=0;Le<=161;Le++)C(q[Le])}(),F(65498),F(12),C(3),C(1),C(0),C(2),C(17),C(3),C(17),C(0),C(63),C(0);var J=0,ne=0,le=0;x=0,p=7,this.encode.displayName="_encode_";for(var G,he,xe,Se,K,we,Te,ae,H,Oe=z.data,pe=z.width,je=z.height,_e=4*pe,W=0;W<je;){for(G=0;G<_e;){for(K=_e*W+G,Te=-1,ae=0,H=0;H<64;H++)we=K+(ae=H>>3)*_e+(Te=4*(7&H)),W+ae>=je&&(we-=_e*(W+1+ae-je)),G+Te>=_e&&(we-=G+Te-_e+4),he=Oe[we++],xe=Oe[we++],Se=Oe[we++],v[H]=(P[he]+P[xe+256|0]+P[Se+512|0]>>16)-128,b[H]=(P[he+768|0]+P[xe+1024|0]+P[Se+1280|0]>>16)-128,j[H]=(P[he+1280|0]+P[xe+1536|0]+P[Se+1792|0]>>16)-128;J=X(v,d,J,t,n),ne=X(b,u,ne,r,i),le=X(j,u,le,r,i),G+=32}W+=8}if(p>=0){var te=[];te[1]=p+1,te[0]=(1<<p+1)-1,R(te)}return F(65497),new Uint8Array(y)},e=e||50,function(){for(var z=String.fromCharCode,Y=0;Y<256;Y++)S[Y]=z(Y)}(),t=U(I,O),r=U(k,E),n=U(L,T),i=U(A,q),function(){for(var z=1,Y=2,J=1;J<=15;J++){for(var ne=z;ne<Y;ne++)m[32767+ne]=J,h[32767+ne]=[],h[32767+ne][1]=J,h[32767+ne][0]=ne;for(var le=-(Y-1);le<=-z;le++)m[32767+le]=J,h[32767+le]=[],h[32767+le][1]=J,h[32767+le][0]=Y-1+le;z<<=1,Y<<=1}}(),function(){for(var z=0;z<256;z++)P[z]=19595*z,P[z+256|0]=38470*z,P[z+512|0]=7471*z+32768,P[z+768|0]=-11059*z,P[z+1024|0]=-21709*z,P[z+1280|0]=32768*z+8421375,P[z+1536|0]=-27439*z,P[z+1792|0]=-5329*z}(),re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Na(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function AC(e){function t(O){if(!O)throw Error("assert :P")}function r(O,L,T){for(var k=0;4>k;k++)if(O[L+k]!=T.charCodeAt(k))return!0;return!1}function n(O,L,T,k,E){for(var A=0;A<E;A++)O[L+A]=T[k+A]}function i(O,L,T,k){for(var E=0;E<k;E++)O[L+E]=T}function a(O){return new Int32Array(O)}function o(O,L){for(var T=[],k=0;k<O;k++)T.push(new L);return T}function l(O,L){var T=[];return function k(E,A,q){for(var U=q[A],R=0;R<U&&(E.push(q.length>A+1?[]:new L),!(q.length<A+1));R++)k(E[R],A+1,q)}(T,0,O),T}var c=function(){var O=this;function L(N,_){for(var B=1<<_-1>>>0;N&B;)B>>>=1;return B?(N&B-1)+B:N}function T(N,_,B,V,ee){t(!(V%B));do N[_+(V-=B)]=ee;while(0<V)}function k(N,_,B,V,ee){if(t(2328>=ee),512>=ee)var ie=a(512);else if((ie=a(ee))==null)return 0;return function(oe,de,fe,ve,De,He){var ye,Me,qe=de,Ge=1<<fe,ze=a(16),Je=a(16);for(t(De!=0),t(ve!=null),t(oe!=null),t(0<fe),Me=0;Me<De;++Me){if(15<ve[Me])return 0;++ze[ve[Me]]}if(ze[0]==De)return 0;for(Je[1]=0,ye=1;15>ye;++ye){if(ze[ye]>1<<ye)return 0;Je[ye+1]=Je[ye]+ze[ye]}for(Me=0;Me<De;++Me)ye=ve[Me],0<ve[Me]&&(He[Je[ye]++]=Me);if(Je[15]==1)return(ve=new E).g=0,ve.value=He[0],T(oe,qe,1,Ge,ve),Ge;var Xe,nt=-1,et=Ge-1,Ft=0,jt=1,cr=1,Et=1<<fe;for(Me=0,ye=1,De=2;ye<=fe;++ye,De<<=1){if(jt+=cr<<=1,0>(cr-=ze[ye]))return 0;for(;0<ze[ye];--ze[ye])(ve=new E).g=ye,ve.value=He[Me++],T(oe,qe+Ft,De,Et,ve),Ft=L(Ft,ye)}for(ye=fe+1,De=2;15>=ye;++ye,De<<=1){if(jt+=cr<<=1,0>(cr-=ze[ye]))return 0;for(;0<ze[ye];--ze[ye]){if(ve=new E,(Ft&et)!=nt){for(qe+=Et,Xe=1<<(nt=ye)-fe;15>nt&&!(0>=(Xe-=ze[nt]));)++nt,Xe<<=1;Ge+=Et=1<<(Xe=nt-fe),oe[de+(nt=Ft&et)].g=Xe+fe,oe[de+nt].value=qe-de-nt}ve.g=ye-fe,ve.value=He[Me++],T(oe,qe+(Ft>>fe),De,Et,ve),Ft=L(Ft,ye)}}return jt!=2*Je[15]-1?0:Ge}(N,_,B,V,ee,ie)}function E(){this.value=this.g=0}function A(){this.value=this.g=0}function q(){this.G=o(5,E),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(td,A)}function U(N,_,B,V){t(N!=null),t(_!=null),t(2147483648>V),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=_,N.pa=B,N.Jd=_,N.Yc=B+V,N.Zc=4<=V?B+V-4+1:B,he(N)}function R(N,_){for(var B=0;0<_--;)B|=Se(N,128)<<_;return B}function C(N,_){var B=R(N,_);return xe(N)?-B:B}function F(N,_,B,V){var ee,ie=0;for(t(N!=null),t(_!=null),t(4294967288>V),N.Sb=V,N.Ra=0,N.u=0,N.h=0,4<V&&(V=4),ee=0;ee<V;++ee)ie+=_[B+ee]<<8*ee;N.Ra=ie,N.bb=V,N.oa=_,N.pa=B}function X(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<wl-8>>>0,++N.bb,N.u-=8;ne(N)&&(N.h=1,N.u=0)}function re(N,_){if(t(0<=_),!N.h&&_<=di){var B=J(N)&ci[_];return N.u+=_,X(N),B}return N.h=1,N.u=0}function z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(N){return N.Ra>>>(N.u&wl-1)>>>0}function ne(N){return t(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>wl}function le(N,_){N.u=_,N.h=ne(N)}function G(N){N.u>=Oo&&(t(N.u>=Oo),X(N))}function he(N){t(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(t(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function xe(N){return R(N,1)}function Se(N,_){var B=N.Ca;0>N.b&&he(N);var V=N.b,ee=B*_>>>8,ie=(N.I>>>V>ee)+0;for(ie?(B-=ee,N.I-=ee+1<<V>>>0):B=ee+1,V=B,ee=0;256<=V;)ee+=8,V>>=8;return V=7^ee+Nl[V],N.b-=V,N.Ca=(B<<V)-1,ie}function K(N,_,B){N[_+0]=B>>24&255,N[_+1]=B>>16&255,N[_+2]=B>>8&255,N[_+3]=255&B}function we(N,_){return N[_+0]|N[_+1]<<8}function Te(N,_){return we(N,_)|N[_+2]<<16}function ae(N,_){return we(N,_)|we(N,_+2)<<16}function H(N,_){var B=1<<_;return t(N!=null),t(0<_),N.X=a(B),N.X==null?0:(N.Mb=32-_,N.Xa=_,1)}function Oe(N,_){t(N!=null),t(_!=null),t(N.Xa==_.Xa),n(_.X,0,N.X,0,1<<_.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function je(N,_,B,V){t(B!=null),t(V!=null);var ee=B[0],ie=V[0];return ee==0&&(ee=(N*ie+_/2)/_),ie==0&&(ie=(_*ee+N/2)/N),0>=ee||0>=ie?0:(B[0]=ee,V[0]=ie,1)}function _e(N,_){return N+(1<<_)-1>>>_}function W(N,_){return((4278255360&N)+(4278255360&_)>>>0&4278255360)+((16711935&N)+(16711935&_)>>>0&16711935)>>>0}function te(N,_){O[_]=function(B,V,ee,ie,oe,de,fe){var ve;for(ve=0;ve<oe;++ve){var De=O[N](de[fe+ve-1],ee,ie+ve);de[fe+ve]=W(B[V+ve],De)}}}function Z(){this.ud=this.hd=this.jd=0}function me(N,_){return((4278124286&(N^_))>>>1)+(N&_)>>>0}function $(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function ke(N,_){return $(N+(N-_+.5>>1))}function ce(N,_,B){return Math.abs(_-B)-Math.abs(N-B)}function Ie(N,_,B,V,ee,ie,oe){for(V=ie[oe-1],B=0;B<ee;++B)ie[oe+B]=V=W(N[_+B],V)}function Fe(N,_,B,V,ee){var ie;for(ie=0;ie<B;++ie){var oe=N[_+ie],de=oe>>8&255,fe=16711935&(fe=(fe=16711935&oe)+((de<<16)+de));V[ee+ie]=(4278255360&oe)+fe>>>0}}function Le(N,_){_.jd=255&N,_.hd=N>>8&255,_.ud=N>>16&255}function Ue(N,_,B,V,ee,ie){var oe;for(oe=0;oe<V;++oe){var de=_[B+oe],fe=de>>>8,ve=de,De=255&(De=(De=de>>>16)+((N.jd<<24>>24)*(fe<<24>>24)>>>5));ve=255&(ve=(ve+=(N.hd<<24>>24)*(fe<<24>>24)>>>5)+((N.ud<<24>>24)*(De<<24>>24)>>>5)),ee[ie+oe]=(4278255360&de)+(De<<16)+ve}}function Ve(N,_,B,V,ee){O[_]=function(ie,oe,de,fe,ve,De,He,ye,Me){for(fe=He;fe<ye;++fe)for(He=0;He<Me;++He)ve[De++]=ee(de[V(ie[oe++])])},O[N]=function(ie,oe,de,fe,ve,De,He){var ye=8>>ie.b,Me=ie.Ea,qe=ie.K[0],Ge=ie.w;if(8>ye)for(ie=(1<<ie.b)-1,Ge=(1<<ye)-1;oe<de;++oe){var ze,Je=0;for(ze=0;ze<Me;++ze)ze&ie||(Je=V(fe[ve++])),De[He++]=ee(qe[Je&Ge]),Je>>=ye}else O["VP8LMapColor"+B](fe,ve,qe,Ge,De,He,oe,de,Me)}}function rt(N,_,B,V,ee){for(B=_+B;_<B;){var ie=N[_++];V[ee++]=ie>>16&255,V[ee++]=ie>>8&255,V[ee++]=255&ie}}function Ye(N,_,B,V,ee){for(B=_+B;_<B;){var ie=N[_++];V[ee++]=ie>>16&255,V[ee++]=ie>>8&255,V[ee++]=255&ie,V[ee++]=ie>>24&255}}function We(N,_,B,V,ee){for(B=_+B;_<B;){var ie=(oe=N[_++])>>16&240|oe>>12&15,oe=240&oe|oe>>28&15;V[ee++]=ie,V[ee++]=oe}}function it(N,_,B,V,ee){for(B=_+B;_<B;){var ie=(oe=N[_++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;V[ee++]=ie,V[ee++]=oe}}function ft(N,_,B,V,ee){for(B=_+B;_<B;){var ie=N[_++];V[ee++]=255&ie,V[ee++]=ie>>8&255,V[ee++]=ie>>16&255}}function ue(N,_,B,V,ee,ie){if(ie==0)for(B=_+B;_<B;)K(V,((ie=N[_++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),ee+=32;else n(V,ee,N,_,B)}function Ke(N,_){O[_][0]=O[N+"0"],O[_][1]=O[N+"1"],O[_][2]=O[N+"2"],O[_][3]=O[N+"3"],O[_][4]=O[N+"4"],O[_][5]=O[N+"5"],O[_][6]=O[N+"6"],O[_][7]=O[N+"7"],O[_][8]=O[N+"8"],O[_][9]=O[N+"9"],O[_][10]=O[N+"10"],O[_][11]=O[N+"11"],O[_][12]=O[N+"12"],O[_][13]=O[N+"13"],O[_][14]=O[N+"0"],O[_][15]=O[N+"0"]}function Qe(N){return N==L0||N==F0||N==Eg||N==B0}function ht(){this.eb=[],this.size=this.A=this.fb=0}function Dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function yt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ht,this.f.kb=new Dt,this.sd=null}function ut(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ct(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function wt(N,_){var B=N.T,V=_.ba.f.RGBA,ee=V.eb,ie=V.fb+N.ka*V.A,oe=zi[_.ba.S],de=N.y,fe=N.O,ve=N.f,De=N.N,He=N.ea,ye=N.W,Me=_.cc,qe=_.dc,Ge=_.Mc,ze=_.Nc,Je=N.ka,Xe=N.ka+N.T,nt=N.U,et=nt+1>>1;for(Je==0?oe(de,fe,null,null,ve,De,He,ye,ve,De,He,ye,ee,ie,null,null,nt):(oe(_.ec,_.fc,de,fe,Me,qe,Ge,ze,ve,De,He,ye,ee,ie-V.A,ee,ie,nt),++B);Je+2<Xe;Je+=2)Me=ve,qe=De,Ge=He,ze=ye,De+=N.Rc,ye+=N.Rc,ie+=2*V.A,oe(de,(fe+=2*N.fa)-N.fa,de,fe,Me,qe,Ge,ze,ve,De,He,ye,ee,ie-V.A,ee,ie,nt);return fe+=N.fa,N.j+Xe<N.o?(n(_.ec,_.fc,de,fe,nt),n(_.cc,_.dc,ve,De,et),n(_.Mc,_.Nc,He,ye,et),B--):1&Xe||oe(de,fe,null,null,ve,De,He,ye,ve,De,He,ye,ee,ie+V.A,null,null,nt),B}function lt(N,_,B){var V=N.F,ee=[N.J];if(V!=null){var ie=N.U,oe=_.ba.S,de=oe==Og||oe==Eg;_=_.ba.f.RGBA;var fe=[0],ve=N.ka;fe[0]=N.T,N.Kb&&(ve==0?--fe[0]:(--ve,ee[0]-=N.width),N.j+N.ka+N.T==N.o&&(fe[0]=N.o-N.j-ve));var De=_.eb;ve=_.fb+ve*_.A,N=z5(V,ee[0],N.width,ie,fe,De,ve+(de?0:3),_.A),t(B==fe),N&&Qe(oe)&&Uf(De,ve,de,ie,fe,_.A)}return 0}function Yt(N){var _=N.ma,B=_.ba.S,V=11>B,ee=B==Cg||B==Tg||B==Og||B==I0||B==12||Qe(B);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!Df(_.Oa,N,ee?11:12))return 0;if(ee&&Qe(B)&&Ng(),N.da)alert("todo:use_scaling");else{if(V){if(_.Ib=Ct,N.Kb){if(B=N.U+1>>1,_.memory=a(N.U+2*B),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+N.U,_.Mc=_.cc,_.Nc=_.dc+B,_.Ib=wt,Ng()}}else alert("todo:EmitYUV");ee&&(_.Jb=lt,V&&Fi())}if(V&&!s_){for(N=0;256>N;++N)XI[N]=89858*(N-128)+Dg>>Ag,eL[N]=-22014*(N-128)+Dg,$I[N]=-45773*(N-128),QI[N]=113618*(N-128)+Dg>>Ag;for(N=Hf;N<z0;++N)_=76283*(N-16)+Dg>>Ag,tL[N-Hf]=vn(_,255),rL[N-Hf]=vn(_+8>>4,15);s_=1}return 1}function at(N){var _=N.ma,B=N.U,V=N.T;return t(!(1&N.ka)),0>=B||0>=V?0:(B=_.Ib(N,_),_.Jb!=null&&_.Jb(N,_,B),_.Dc+=B,1)}function Sr(N){N.ma.memory=null}function Wn(N,_,B,V){return re(N,8)!=47?0:(_[0]=re(N,14)+1,B[0]=re(N,14)+1,V[0]=re(N,1),re(N,3)!=0?0:!N.h)}function nn(N,_){if(4>N)return N+1;var B=N-2>>1;return(2+(1&N)<<B)+re(_,B)+1}function _n(N,_){return 120<_?_-120:1<=(B=((B=LI[_-1])>>4)*N+(8-(15&B)))?B:1;var B}function gn(N,_,B){var V=J(B),ee=N[_+=255&V].g-8;return 0<ee&&(le(B,B.u+8),V=J(B),_+=N[_].value,_+=V&(1<<ee)-1),le(B,B.u+N[_].g),N[_].value}function rs(N,_,B){return B.g+=N.g,B.value+=N.value<<_>>>0,t(8>=B.g),N.g}function ds(N,_,B){var V=N.xc;return t((_=V==0?0:N.vc[N.md*(B>>V)+(_>>V)])<N.Wb),N.Ya[_]}function Ic(N,_,B,V){var ee=N.ab,ie=N.c*_,oe=N.C;_=oe+_;var de=B,fe=V;for(V=N.Ta,B=N.Ua;0<ee--;){var ve=N.gc[ee],De=oe,He=_,ye=de,Me=fe,qe=(fe=V,de=B,ve.Ea);switch(t(De<He),t(He<=ve.nc),ve.hc){case 2:Pn(ye,Me,(He-De)*qe,fe,de);break;case 0:var Ge=De,ze=He,Je=fe,Xe=de,nt=(Et=ve).Ea;Ge==0&&(Rf(ye,Me,null,null,1,Je,Xe),Ie(ye,Me+1,0,0,nt-1,Je,Xe+1),Me+=nt,Xe+=nt,++Ge);for(var et=1<<Et.b,Ft=et-1,jt=_e(nt,Et.b),cr=Et.K,Et=Et.w+(Ge>>Et.b)*jt;Ge<ze;){var gr=cr,Kn=Et,dr=1;for(Cu(ye,Me,Je,Xe-nt,1,Je,Xe);dr<nt;){var At=(dr&~Ft)+et;At>nt&&(At=nt),(0,Lf[gr[Kn++]>>8&15])(ye,Me+ +dr,Je,Xe+dr-nt,At-dr,Je,Xe+dr),dr=At}Me+=nt,Xe+=nt,++Ge&Ft||(Et+=jt)}He!=ve.nc&&n(fe,de-qe,fe,de+(He-De-1)*qe,qe);break;case 1:for(qe=ye,ze=Me,nt=(ye=ve.Ea)-(Xe=ye&~(Je=(Me=1<<ve.b)-1)),Ge=_e(ye,ve.b),et=ve.K,ve=ve.w+(De>>ve.b)*Ge;De<He;){for(Ft=et,jt=ve,cr=new Z,Et=ze+Xe,gr=ze+ye;ze<Et;)Le(Ft[jt++],cr),Ff(cr,qe,ze,Me,fe,de),ze+=Me,de+=Me;ze<gr&&(Le(Ft[jt++],cr),Ff(cr,qe,ze,nt,fe,de),ze+=nt,de+=nt),++De&Je||(ve+=Ge)}break;case 3:if(ye==fe&&Me==de&&0<ve.b){for(ze=fe,ye=qe=de+(He-De)*qe-(Xe=(He-De)*_e(ve.Ea,ve.b)),Me=fe,Je=de,Ge=[],Xe=(nt=Xe)-1;0<=Xe;--Xe)Ge[Xe]=Me[Je+Xe];for(Xe=nt-1;0<=Xe;--Xe)ze[ye+Xe]=Ge[Xe];_g(ve,De,He,fe,qe,fe,de)}else _g(ve,De,He,ye,Me,fe,de)}de=V,fe=B}fe!=B&&n(V,B,de,fe,ie)}function gl(N,_){var B=N.V,V=N.Ba+N.c*N.C,ee=_-N.C;if(t(_<=N.l.o),t(16>=ee),0<ee){var ie=N.l,oe=N.Ta,de=N.Ua,fe=ie.width;if(Ic(N,ee,B,V),ee=de=[de],t((B=N.C)<(V=_)),t(ie.v<ie.va),V>ie.o&&(V=ie.o),B<ie.j){var ve=ie.j-B;B=ie.j,ee[0]+=ve*fe}if(B>=V?B=0:(ee[0]+=4*ie.v,ie.ka=B-ie.j,ie.U=ie.va-ie.v,ie.T=V-B,B=1),B){if(de=de[0],11>(B=N.ca).S){var De=B.f.RGBA,He=(V=B.S,ee=ie.U,ie=ie.T,ve=De.eb,De.A),ye=ie;for(De=De.fb+N.Ma*De.A;0<ye--;){var Me=oe,qe=de,Ge=ee,ze=ve,Je=De;switch(V){case kg:Bf(Me,qe,Ge,ze,Je);break;case Cg:jl(Me,qe,Ge,ze,Je);break;case L0:jl(Me,qe,Ge,ze,Je),Uf(ze,Je,0,Ge,1,0);break;case J5:rd(Me,qe,Ge,ze,Je);break;case Tg:ue(Me,qe,Ge,ze,Je,1);break;case F0:ue(Me,qe,Ge,ze,Je,1),Uf(ze,Je,0,Ge,1,0);break;case Og:ue(Me,qe,Ge,ze,Je,0);break;case Eg:ue(Me,qe,Ge,ze,Je,0),Uf(ze,Je,1,Ge,1,0);break;case I0:_l(Me,qe,Ge,ze,Je);break;case B0:_l(Me,qe,Ge,ze,Je),U5(ze,Je,Ge,1,0);break;case Z5:Sl(Me,qe,Ge,ze,Je);break;default:t(0)}de+=fe,De+=He}N.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");t(N.Ma<=B.height)}}N.C=_,t(N.C<=N.i)}function fa(N){var _;if(0<N.ua)return 0;for(_=0;_<N.Wb;++_){var B=N.Ya[_].G,V=N.Ya[_].H;if(0<B[1][V[1]+0].g||0<B[2][V[2]+0].g||0<B[3][V[3]+0].g)return 0}return 1}function Ya(N,_,B,V,ee,ie){if(N.Z!=0){var oe=N.qd,de=N.rd;for(t(Cl[N.Z]!=null);_<B;++_)Cl[N.Z](oe,de,V,ee,V,ee,ie),oe=V,de=ee,ee+=ie;N.qd=oe,N.rd=de}}function ma(N,_){var B=N.l.ma,V=B.Z==0||B.Z==1?N.l.j:N.C;if(V=N.C<V?V:N.C,t(_<=N.l.o),_>V){var ee=N.l.width,ie=B.ca,oe=B.tb+ee*V,de=N.V,fe=N.Ba+N.c*V,ve=N.gc;t(N.ab==1),t(ve[0].hc==3),Za(ve[0],V,_,de,fe,ie,oe),Ya(B,V,_,ie,oe,ee)}N.C=N.Ma=_}function pa(N,_,B,V,ee,ie,oe){var de=N.$/V,fe=N.$%V,ve=N.m,De=N.s,He=B+N.$,ye=He;ee=B+V*ee;var Me=B+V*ie,qe=280+De.ua,Ge=N.Pb?de:16777216,ze=0<De.ua?De.Wa:null,Je=De.wc,Xe=He<Me?ds(De,fe,de):null;t(N.C<ie),t(Me<=ee);var nt=!1;e:for(;;){for(;nt||He<Me;){var et=0;if(de>=Ge){var Ft=He-B;t((Ge=N).Pb),Ge.wd=Ge.m,Ge.xd=Ft,0<Ge.s.ua&&Oe(Ge.s.Wa,Ge.s.vb),Ge=de+BI}if(fe&Je||(Xe=ds(De,fe,de)),t(Xe!=null),Xe.Qb&&(_[He]=Xe.qb,nt=!0),!nt)if(G(ve),Xe.jc){et=ve,Ft=_;var jt=He,cr=Xe.pd[J(et)&td-1];t(Xe.jc),256>cr.g?(le(et,et.u+cr.g),Ft[jt]=cr.value,et=0):(le(et,et.u+cr.g-256),t(256<=cr.value),et=cr.value),et==0&&(nt=!0)}else et=gn(Xe.G[0],Xe.H[0],ve);if(ve.h)break;if(nt||256>et){if(!nt)if(Xe.nd)_[He]=(Xe.qb|et<<8)>>>0;else{if(G(ve),nt=gn(Xe.G[1],Xe.H[1],ve),G(ve),Ft=gn(Xe.G[2],Xe.H[2],ve),jt=gn(Xe.G[3],Xe.H[3],ve),ve.h)break;_[He]=(jt<<24|nt<<16|et<<8|Ft)>>>0}if(nt=!1,++He,++fe>=V&&(fe=0,++de,oe!=null&&de<=ie&&!(de%16)&&oe(N,de),ze!=null))for(;ye<He;)et=_[ye++],ze.X[(506832829*et&4294967295)>>>ze.Mb]=et}else if(280>et){if(et=nn(et-256,ve),Ft=gn(Xe.G[4],Xe.H[4],ve),G(ve),Ft=_n(V,Ft=nn(Ft,ve)),ve.h)break;if(He-B<Ft||ee-He<et)break e;for(jt=0;jt<et;++jt)_[He+jt]=_[He+jt-Ft];for(He+=et,fe+=et;fe>=V;)fe-=V,++de,oe!=null&&de<=ie&&!(de%16)&&oe(N,de);if(t(He<=ee),fe&Je&&(Xe=ds(De,fe,de)),ze!=null)for(;ye<He;)et=_[ye++],ze.X[(506832829*et&4294967295)>>>ze.Mb]=et}else{if(!(et<qe))break e;for(nt=et-280,t(ze!=null);ye<He;)et=_[ye++],ze.X[(506832829*et&4294967295)>>>ze.Mb]=et;et=He,t(!(nt>>>(Ft=ze).Xa)),_[et]=Ft.X[nt],nt=!0}nt||t(ve.h==ne(ve))}if(N.Pb&&ve.h&&He<ee)t(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Oe(N.s.vb,N.s.Wa);else{if(ve.h)break e;oe!=null&&oe(N,de>ie?ie:de),N.a=0,N.$=He-B}return 1}return N.a=3,0}function Ii(N){t(N!=null),N.vc=null,N.yc=null,N.Ya=null;var _=N.Wa;_!=null&&(_.X=null),N.vb=null,t(N!=null)}function Lc(){var N=new Rt;return N==null?null:(N.a=0,N.xb=$5,Ke("Predictor","VP8LPredictors"),Ke("Predictor","VP8LPredictors_C"),Ke("PredictorAdd","VP8LPredictorsAdd"),Ke("PredictorAdd","VP8LPredictorsAdd_C"),Pn=Fe,Ff=Ue,Bf=rt,jl=Ye,_l=We,Sl=it,rd=ft,O.VP8LMapColor32b=Ja,O.VP8LMapColor8b=If,N)}function Ka(N,_,B,V,ee){var ie=1,oe=[N],de=[_],fe=V.m,ve=V.s,De=null,He=0;e:for(;;){if(B)for(;ie&&re(fe,1);){var ye=oe,Me=de,qe=V,Ge=1,ze=qe.m,Je=qe.gc[qe.ab],Xe=re(ze,2);if(qe.Oc&1<<Xe)ie=0;else{switch(qe.Oc|=1<<Xe,Je.hc=Xe,Je.Ea=ye[0],Je.nc=Me[0],Je.K=[null],++qe.ab,t(4>=qe.ab),Xe){case 0:case 1:Je.b=re(ze,3)+2,Ge=Ka(_e(Je.Ea,Je.b),_e(Je.nc,Je.b),0,qe,Je.K),Je.K=Je.K[0];break;case 3:var nt,et=re(ze,8)+1,Ft=16<et?0:4<et?1:2<et?2:3;if(ye[0]=_e(Je.Ea,Ft),Je.b=Ft,nt=Ge=Ka(et,1,0,qe,Je.K)){var jt,cr=et,Et=Je,gr=1<<(8>>Et.b),Kn=a(gr);if(Kn==null)nt=0;else{var dr=Et.K[0],At=Et.w;for(Kn[0]=Et.K[0][0],jt=1;jt<1*cr;++jt)Kn[jt]=W(dr[At+jt],Kn[jt-1]);for(;jt<4*gr;++jt)Kn[jt]=0;Et.K[0]=null,Et.K[0]=Kn,nt=1}}Ge=nt;break;case 2:break;default:t(0)}ie=Ge}}if(oe=oe[0],de=de[0],ie&&re(fe,1)&&!(ie=1<=(He=re(fe,4))&&11>=He)){V.a=3;break e}var mt;if(mt=ie)t:{var Cn,or,yr,Jr=V,hs=oe,Ls=de,yn=He,Ns=B,Fs=Jr.m,Gn=Jr.s,xr=[null],Pr=1,xn=0,kr=FI[yn];r:for(;;){if(Ns&&re(Fs,1)){var fs=re(Fs,3)+2,ya=_e(hs,fs),Tn=_e(Ls,fs),Zs=ya*Tn;if(!Ka(ya,Tn,0,Jr,xr))break r;for(xr=xr[0],Gn.xc=fs,Cn=0;Cn<Zs;++Cn){var Br=xr[Cn]>>8&65535;xr[Cn]=Br,Br>=Pr&&(Pr=Br+1)}}if(Fs.h)break r;for(or=0;5>or;++or){var Jn=X5[or];!or&&0<yn&&(Jn+=1<<yn),xn<Jn&&(xn=Jn)}var hi=o(Pr*kr,E),Bs=Pr,fi=o(Bs,q);if(fi==null)var mi=null;else t(65536>=Bs),mi=fi;var Xs=a(xn);if(mi==null||Xs==null||hi==null){Jr.a=1;break r}var pi=hi;for(Cn=yr=0;Cn<Pr;++Cn){var zr=mi[Cn],gi=zr.G,xa=zr.H,sd=0,Do=1,ms=0;for(or=0;5>or;++or){Jn=X5[or],gi[or]=pi,xa[or]=yr,!or&&0<yn&&(Jn+=1<<yn);s:{var Rg,H0=Jn,Ig=Jr,Wf=Xs,iL=pi,aL=yr,W0=0,Tl=Ig.m,oL=re(Tl,1);if(i(Wf,0,0,H0),oL){var lL=re(Tl,1)+1,cL=re(Tl,1),o_=re(Tl,cL==0?1:8);Wf[o_]=1,lL==2&&(Wf[o_=re(Tl,8)]=1);var Lg=1}else{var l_=a(19),c_=re(Tl,4)+4;if(19<c_){Ig.a=3;var Fg=0;break s}for(Rg=0;Rg<c_;++Rg)l_[II[Rg]]=re(Tl,3);var V0=void 0,Vf=void 0,d_=Ig,dL=l_,Bg=H0,u_=Wf,Y0=0,Ol=d_.m,h_=8,f_=o(128,E);n:for(;k(f_,0,7,dL,19);){if(re(Ol,1)){var uL=2+2*re(Ol,3);if((V0=2+re(Ol,uL))>Bg)break n}else V0=Bg;for(Vf=0;Vf<Bg&&V0--;){G(Ol);var m_=f_[0+(127&J(Ol))];le(Ol,Ol.u+m_.g);var Ou=m_.value;if(16>Ou)u_[Vf++]=Ou,Ou!=0&&(h_=Ou);else{var hL=Ou==16,p_=Ou-16,fL=MI[p_],g_=re(Ol,DI[p_])+fL;if(Vf+g_>Bg)break n;for(var mL=hL?h_:0;0<g_--;)u_[Vf++]=mL}}Y0=1;break n}Y0||(d_.a=3),Lg=Y0}(Lg=Lg&&!Tl.h)&&(W0=k(iL,aL,8,Wf,H0)),Lg&&W0!=0?Fg=W0:(Ig.a=3,Fg=0)}if(Fg==0)break r;if(Do&&RI[or]==1&&(Do=pi[yr].g==0),sd+=pi[yr].g,yr+=Fg,3>=or){var Yf,K0=Xs[0];for(Yf=1;Yf<Jn;++Yf)Xs[Yf]>K0&&(K0=Xs[Yf]);ms+=K0}}if(zr.nd=Do,zr.Qb=0,Do&&(zr.qb=(gi[3][xa[3]+0].value<<24|gi[1][xa[1]+0].value<<16|gi[2][xa[2]+0].value)>>>0,sd==0&&256>gi[0][xa[0]+0].value&&(zr.Qb=1,zr.qb+=gi[0][xa[0]+0].value<<8)),zr.jc=!zr.Qb&&6>ms,zr.jc){var qg,Mo=zr;for(qg=0;qg<td;++qg){var El=qg,Al=Mo.pd[El],Ug=Mo.G[0][Mo.H[0]+El];256<=Ug.value?(Al.g=Ug.g+256,Al.value=Ug.value):(Al.g=0,Al.value=0,El>>=rs(Ug,8,Al),El>>=rs(Mo.G[1][Mo.H[1]+El],16,Al),El>>=rs(Mo.G[2][Mo.H[2]+El],0,Al),rs(Mo.G[3][Mo.H[3]+El],24,Al))}}}Gn.vc=xr,Gn.Wb=Pr,Gn.Ya=mi,Gn.yc=hi,mt=1;break t}mt=0}if(!(ie=mt)){V.a=3;break e}if(0<He){if(ve.ua=1<<He,!H(ve.Wa,He)){V.a=1,ie=0;break e}}else ve.ua=0;var G0=V,v_=oe,pL=de,J0=G0.s,Z0=J0.xc;if(G0.c=v_,G0.i=pL,J0.md=_e(v_,Z0),J0.wc=Z0==0?-1:(1<<Z0)-1,B){V.xb=YI;break e}if((De=a(oe*de))==null){V.a=1,ie=0;break e}ie=(ie=pa(V,De,0,oe,de,de,null))&&!fe.h;break e}return ie?(ee!=null?ee[0]=De:(t(De==null),t(B)),V.$=0,B||Ii(ve)):Ii(ve),ie}function Fc(N,_){var B=N.c*N.i,V=B+_+16*_;return t(N.c<=_),N.V=a(V),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+B+_,1)}function yu(N,_){var B=N.C,V=_-B,ee=N.V,ie=N.Ba+N.c*B;for(t(_<=N.l.o);0<V;){var oe=16<V?16:V,de=N.l.ma,fe=N.l.width,ve=fe*oe,De=de.ca,He=de.tb+fe*B,ye=N.Ta,Me=N.Ua;Ic(N,oe,ee,ie),H5(ye,Me,De,He,ve),Ya(de,B,B+oe,De,He,fe),V-=oe,ee+=oe*N.c,B+=oe}t(B==_),N.C=N.Ma=_}function xu(){this.ub=this.yd=this.td=this.Rb=0}function bu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function x0(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function xf(){this.Yb=function(){var N=[];return function _(B,V,ee){for(var ie=ee[V],oe=0;oe<ie&&(B.push(ee.length>V+1?[]:0),!(ee.length<V+1));oe++)_(B[oe],V+1,ee)}(N,0,[3,11]),N}()}function og(){this.jb=a(3),this.Wc=l([4,8],xf),this.Xc=l([4,17],xf)}function lg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Li(){this.ld=this.La=this.dd=this.tc=0}function bf(){this.Na=this.la=0}function cg(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wf(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function dg(){this.uc=this.M=this.Nb=0,this.wa=Array(new Li),this.Y=0,this.ya=Array(new wf),this.aa=0,this.l=new wu}function ug(){this.y=a(16),this.f=a(8),this.ea=a(8)}function hg(){this.cb=this.a=0,this.sc="",this.m=new z,this.Od=new xu,this.Kc=new bu,this.ed=new lg,this.Qa=new x0,this.Ic=this.$c=this.Aa=0,this.D=new dg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,z),this.ia=0,this.pb=o(4,cg),this.Pa=new og,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ug),this.Hd=0,this.rb=Array(new bf),this.sb=0,this.wa=Array(new Li),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wf),this.L=this.aa=0,this.gd=l([4,2],Li),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function b0(){var N=new hg;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,zf||(zf=_o)),N}function In(N,_,B){return N.a==0&&(N.a=_,N.sc=B,N.cb=0),0}function fg(N,_,B){return 3<=B&&N[_+0]==157&&N[_+1]==1&&N[_+2]==42}function mg(N,_){if(N==null)return 0;if(N.a=0,N.sc="OK",_==null)return In(N,2,"null VP8Io passed to VP8GetHeaders()");var B=_.data,V=_.w,ee=_.ha;if(4>ee)return In(N,7,"Truncated header.");var ie=B[V+0]|B[V+1]<<8|B[V+2]<<16,oe=N.Od;if(oe.Rb=!(1&ie),oe.td=ie>>1&7,oe.yd=ie>>4&1,oe.ub=ie>>5,3<oe.td)return In(N,3,"Incorrect keyframe parameters.");if(!oe.yd)return In(N,4,"Frame not displayable.");V+=3,ee-=3;var de=N.Kc;if(oe.Rb){if(7>ee)return In(N,7,"cannot parse picture header");if(!fg(B,V,ee))return In(N,3,"Bad code word");de.c=16383&(B[V+4]<<8|B[V+3]),de.Td=B[V+4]>>6,de.i=16383&(B[V+6]<<8|B[V+5]),de.Ud=B[V+6]>>6,V+=7,ee-=7,N.za=de.c+15>>4,N.Ub=de.i+15>>4,_.width=de.c,_.height=de.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,i((ie=N.Pa).jb,0,255,ie.jb.length),t((ie=N.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,i(ie.Zb,0,0,ie.Zb.length),i(ie.Lb,0,0,ie.Lb)}if(oe.ub>ee)return In(N,7,"bad partition length");U(ie=N.m,B,V,oe.ub),V+=oe.ub,ee-=oe.ub,oe.Rb&&(de.Ld=xe(ie),de.Kd=xe(ie)),de=N.Qa;var fe,ve=N.Pa;if(t(ie!=null),t(de!=null),de.Cb=xe(ie),de.Cb){if(de.Bb=xe(ie),xe(ie)){for(de.Fb=xe(ie),fe=0;4>fe;++fe)de.Zb[fe]=xe(ie)?C(ie,7):0;for(fe=0;4>fe;++fe)de.Lb[fe]=xe(ie)?C(ie,6):0}if(de.Bb)for(fe=0;3>fe;++fe)ve.jb[fe]=xe(ie)?R(ie,8):255}else de.Bb=0;if(ie.Ka)return In(N,3,"cannot parse segment header");if((de=N.ed).zd=xe(ie),de.Tb=R(ie,6),de.wb=R(ie,3),de.Pc=xe(ie),de.Pc&&xe(ie)){for(ve=0;4>ve;++ve)xe(ie)&&(de.vd[ve]=C(ie,6));for(ve=0;4>ve;++ve)xe(ie)&&(de.od[ve]=C(ie,6))}if(N.L=de.Tb==0?0:de.zd?1:2,ie.Ka)return In(N,3,"cannot parse filter header");var De=ee;if(ee=fe=V,V=fe+De,de=De,N.Xb=(1<<R(N.m,2))-1,De<3*(ve=N.Xb))B=7;else{for(fe+=3*ve,de-=3*ve,De=0;De<ve;++De){var He=B[ee+0]|B[ee+1]<<8|B[ee+2]<<16;He>de&&(He=de),U(N.Jc[+De],B,fe,He),fe+=He,de-=He,ee+=3}U(N.Jc[+ve],B,fe,de),B=fe<V?0:5}if(B!=0)return In(N,B,"cannot parse partitions");for(B=R(fe=N.m,7),ee=xe(fe)?C(fe,4):0,V=xe(fe)?C(fe,4):0,de=xe(fe)?C(fe,4):0,ve=xe(fe)?C(fe,4):0,fe=xe(fe)?C(fe,4):0,De=N.Qa,He=0;4>He;++He){if(De.Cb){var ye=De.Zb[He];De.Fb||(ye+=B)}else{if(0<He){N.pb[He]=N.pb[0];continue}ye=B}var Me=N.pb[He];Me.Sc[0]=q0[vn(ye+ee,127)],Me.Sc[1]=U0[vn(ye+0,127)],Me.Eb[0]=2*q0[vn(ye+V,127)],Me.Eb[1]=101581*U0[vn(ye+de,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=q0[vn(ye+ve,117)],Me.Qc[1]=U0[vn(ye+fe,127)],Me.lc=ye+fe}if(!oe.Rb)return In(N,4,"Not a key frame.");for(xe(ie),oe=N.Pa,B=0;4>B;++B){for(ee=0;8>ee;++ee)for(V=0;3>V;++V)for(de=0;11>de;++de)ve=Se(ie,WI[B][ee][V][de])?R(ie,8):zI[B][ee][V][de],oe.Wc[B][ee].Yb[V][de]=ve;for(ee=0;17>ee;++ee)oe.Xc[B][ee]=oe.Wc[B][VI[ee]]}return N.kc=xe(ie),N.kc&&(N.Bd=R(ie,8)),N.cb=1}function _o(N,_,B,V,ee,ie,oe){var de=_[ee].Yb[B];for(B=0;16>ee;++ee){if(!Se(N,de[B+0]))return ee;for(;!Se(N,de[B+1]);)if(de=_[++ee].Yb[0],B=0,ee==16)return 16;var fe=_[ee+1].Yb;if(Se(N,de[B+2])){var ve=N,De=0;if(Se(ve,(ye=de)[(He=B)+3]))if(Se(ve,ye[He+6])){for(de=0,He=2*(De=Se(ve,ye[He+8]))+(ye=Se(ve,ye[He+9+De])),De=0,ye=qI[He];ye[de];++de)De+=De+Se(ve,ye[de]);De+=3+(8<<He)}else Se(ve,ye[He+7])?(De=7+2*Se(ve,165),De+=Se(ve,145)):De=5+Se(ve,159);else De=Se(ve,ye[He+4])?3+Se(ve,ye[He+5]):2;de=fe[2]}else De=1,de=fe[1];fe=oe+UI[ee],0>(ve=N).b&&he(ve);var He,ye=ve.b,Me=(He=ve.Ca>>1)-(ve.I>>ye)>>31;--ve.b,ve.Ca+=Me,ve.Ca|=1,ve.I-=(He+1&Me)<<ye,ie[fe]=((De^Me)-Me)*V[(0<ee)+0]}return 16}function Bc(N){var _=N.rb[N.sb-1];_.la=0,_.Na=0,i(N.zc,0,0,N.zc.length),N.ja=0}function ga(N,_,B,V,ee){ee=N[_+B+32*V]+(ee>>3),N[_+B+32*V]=-256&ee?0>ee?0:255:ee}function qc(N,_,B,V,ee,ie){ga(N,_,0,B,V+ee),ga(N,_,1,B,V+ie),ga(N,_,2,B,V-ie),ga(N,_,3,B,V-ee)}function Sn(N){return(20091*N>>16)+N}function Nf(N,_,B,V){var ee,ie=0,oe=a(16);for(ee=0;4>ee;++ee){var de=N[_+0]+N[_+8],fe=N[_+0]-N[_+8],ve=(35468*N[_+4]>>16)-Sn(N[_+12]),De=Sn(N[_+4])+(35468*N[_+12]>>16);oe[ie+0]=de+De,oe[ie+1]=fe+ve,oe[ie+2]=fe-ve,oe[ie+3]=de-De,ie+=4,_++}for(ee=ie=0;4>ee;++ee)de=(N=oe[ie+0]+4)+oe[ie+8],fe=N-oe[ie+8],ve=(35468*oe[ie+4]>>16)-Sn(oe[ie+12]),ga(B,V,0,0,de+(De=Sn(oe[ie+4])+(35468*oe[ie+12]>>16))),ga(B,V,1,0,fe+ve),ga(B,V,2,0,fe-ve),ga(B,V,3,0,de-De),ie++,V+=32}function w0(N,_,B,V){var ee=N[_+0]+4,ie=35468*N[_+4]>>16,oe=Sn(N[_+4]),de=35468*N[_+1]>>16;qc(B,V,0,ee+oe,N=Sn(N[_+1]),de),qc(B,V,1,ee+ie,N,de),qc(B,V,2,ee-ie,N,de),qc(B,V,3,ee-oe,N,de)}function N0(N,_,B,V,ee){Nf(N,_,B,V),ee&&Nf(N,_+16,B,V+4)}function j0(N,_,B,V){nd(N,_+0,B,V,1),nd(N,_+32,B,V+128,1)}function Ga(N,_,B,V){var ee;for(N=N[_+0]+4,ee=0;4>ee;++ee)for(_=0;4>_;++_)ga(B,V,_,ee,N)}function pg(N,_,B,V){N[_+0]&&Nr(N,_+0,B,V),N[_+16]&&Nr(N,_+16,B,V+4),N[_+32]&&Nr(N,_+32,B,V+128),N[_+48]&&Nr(N,_+48,B,V+128+4)}function gg(N,_,B,V){var ee,ie=a(16);for(ee=0;4>ee;++ee){var oe=N[_+0+ee]+N[_+12+ee],de=N[_+4+ee]+N[_+8+ee],fe=N[_+4+ee]-N[_+8+ee],ve=N[_+0+ee]-N[_+12+ee];ie[0+ee]=oe+de,ie[8+ee]=oe-de,ie[4+ee]=ve+fe,ie[12+ee]=ve-fe}for(ee=0;4>ee;++ee)oe=(N=ie[0+4*ee]+3)+ie[3+4*ee],de=ie[1+4*ee]+ie[2+4*ee],fe=ie[1+4*ee]-ie[2+4*ee],ve=N-ie[3+4*ee],B[V+0]=oe+de>>3,B[V+16]=ve+fe>>3,B[V+32]=oe-de>>3,B[V+48]=ve-fe>>3,V+=64}function vl(N,_,B){var V,ee=_-32,ie=ui,oe=255-N[ee-1];for(V=0;V<B;++V){var de,fe=ie,ve=oe+N[_-1];for(de=0;de<B;++de)N[_+de]=fe[ve+N[ee+de]];_+=32}}function jf(N,_){vl(N,_,4)}function _0(N,_){vl(N,_,8)}function S0(N,_){vl(N,_,16)}function P0(N,_){var B;for(B=0;16>B;++B)n(N,_+32*B,N,_-32,16)}function _f(N,_){var B;for(B=16;0<B;--B)i(N,_,N[_-1],16),_+=32}function Uc(N,_,B){var V;for(V=0;16>V;++V)i(_,B+32*V,N,16)}function yl(N,_){var B,V=16;for(B=0;16>B;++B)V+=N[_-1+32*B]+N[_+B-32];Uc(V>>5,N,_)}function k0(N,_){var B,V=8;for(B=0;16>B;++B)V+=N[_-1+32*B];Uc(V>>4,N,_)}function zc(N,_){var B,V=8;for(B=0;16>B;++B)V+=N[_+B-32];Uc(V>>4,N,_)}function Sf(N,_){Uc(128,N,_)}function $t(N,_,B){return N+2*_+B+2>>2}function C0(N,_){var B,V=_-32;for(V=new Uint8Array([$t(N[V-1],N[V+0],N[V+1]),$t(N[V+0],N[V+1],N[V+2]),$t(N[V+1],N[V+2],N[V+3]),$t(N[V+2],N[V+3],N[V+4])]),B=0;4>B;++B)n(N,_+32*B,V,0,V.length)}function T0(N,_){var B=N[_-1],V=N[_-1+32],ee=N[_-1+64],ie=N[_-1+96];K(N,_+0,16843009*$t(N[_-1-32],B,V)),K(N,_+32,16843009*$t(B,V,ee)),K(N,_+64,16843009*$t(V,ee,ie)),K(N,_+96,16843009*$t(ee,ie,ie))}function O0(N,_){var B,V=4;for(B=0;4>B;++B)V+=N[_+B-32]+N[_-1+32*B];for(V>>=3,B=0;4>B;++B)i(N,_+32*B,V,4)}function E0(N,_){var B=N[_-1+0],V=N[_-1+32],ee=N[_-1+64],ie=N[_-1-32],oe=N[_+0-32],de=N[_+1-32],fe=N[_+2-32],ve=N[_+3-32];N[_+0+96]=$t(V,ee,N[_-1+96]),N[_+1+96]=N[_+0+64]=$t(B,V,ee),N[_+2+96]=N[_+1+64]=N[_+0+32]=$t(ie,B,V),N[_+3+96]=N[_+2+64]=N[_+1+32]=N[_+0+0]=$t(oe,ie,B),N[_+3+64]=N[_+2+32]=N[_+1+0]=$t(de,oe,ie),N[_+3+32]=N[_+2+0]=$t(fe,de,oe),N[_+3+0]=$t(ve,fe,de)}function So(N,_){var B=N[_+1-32],V=N[_+2-32],ee=N[_+3-32],ie=N[_+4-32],oe=N[_+5-32],de=N[_+6-32],fe=N[_+7-32];N[_+0+0]=$t(N[_+0-32],B,V),N[_+1+0]=N[_+0+32]=$t(B,V,ee),N[_+2+0]=N[_+1+32]=N[_+0+64]=$t(V,ee,ie),N[_+3+0]=N[_+2+32]=N[_+1+64]=N[_+0+96]=$t(ee,ie,oe),N[_+3+32]=N[_+2+64]=N[_+1+96]=$t(ie,oe,de),N[_+3+64]=N[_+2+96]=$t(oe,de,fe),N[_+3+96]=$t(de,fe,fe)}function Po(N,_){var B=N[_-1+0],V=N[_-1+32],ee=N[_-1+64],ie=N[_-1-32],oe=N[_+0-32],de=N[_+1-32],fe=N[_+2-32],ve=N[_+3-32];N[_+0+0]=N[_+1+64]=ie+oe+1>>1,N[_+1+0]=N[_+2+64]=oe+de+1>>1,N[_+2+0]=N[_+3+64]=de+fe+1>>1,N[_+3+0]=fe+ve+1>>1,N[_+0+96]=$t(ee,V,B),N[_+0+64]=$t(V,B,ie),N[_+0+32]=N[_+1+96]=$t(B,ie,oe),N[_+1+32]=N[_+2+96]=$t(ie,oe,de),N[_+2+32]=N[_+3+96]=$t(oe,de,fe),N[_+3+32]=$t(de,fe,ve)}function A0(N,_){var B=N[_+0-32],V=N[_+1-32],ee=N[_+2-32],ie=N[_+3-32],oe=N[_+4-32],de=N[_+5-32],fe=N[_+6-32],ve=N[_+7-32];N[_+0+0]=B+V+1>>1,N[_+1+0]=N[_+0+64]=V+ee+1>>1,N[_+2+0]=N[_+1+64]=ee+ie+1>>1,N[_+3+0]=N[_+2+64]=ie+oe+1>>1,N[_+0+32]=$t(B,V,ee),N[_+1+32]=N[_+0+96]=$t(V,ee,ie),N[_+2+32]=N[_+1+96]=$t(ee,ie,oe),N[_+3+32]=N[_+2+96]=$t(ie,oe,de),N[_+3+64]=$t(oe,de,fe),N[_+3+96]=$t(de,fe,ve)}function D0(N,_){var B=N[_-1+0],V=N[_-1+32],ee=N[_-1+64],ie=N[_-1+96];N[_+0+0]=B+V+1>>1,N[_+2+0]=N[_+0+32]=V+ee+1>>1,N[_+2+32]=N[_+0+64]=ee+ie+1>>1,N[_+1+0]=$t(B,V,ee),N[_+3+0]=N[_+1+32]=$t(V,ee,ie),N[_+3+32]=N[_+1+64]=$t(ee,ie,ie),N[_+3+64]=N[_+2+64]=N[_+0+96]=N[_+1+96]=N[_+2+96]=N[_+3+96]=ie}function Nu(N,_){var B=N[_-1+0],V=N[_-1+32],ee=N[_-1+64],ie=N[_-1+96],oe=N[_-1-32],de=N[_+0-32],fe=N[_+1-32],ve=N[_+2-32];N[_+0+0]=N[_+2+32]=B+oe+1>>1,N[_+0+32]=N[_+2+64]=V+B+1>>1,N[_+0+64]=N[_+2+96]=ee+V+1>>1,N[_+0+96]=ie+ee+1>>1,N[_+3+0]=$t(de,fe,ve),N[_+2+0]=$t(oe,de,fe),N[_+1+0]=N[_+3+32]=$t(B,oe,de),N[_+1+32]=N[_+3+64]=$t(V,B,oe),N[_+1+64]=N[_+3+96]=$t(ee,V,B),N[_+1+96]=$t(ie,ee,V)}function Pf(N,_){var B;for(B=0;8>B;++B)n(N,_+32*B,N,_-32,8)}function Hc(N,_){var B;for(B=0;8>B;++B)i(N,_,N[_-1],8),_+=32}function ju(N,_,B){var V;for(V=0;8>V;++V)i(_,B+32*V,N,8)}function _u(N,_){var B,V=8;for(B=0;8>B;++B)V+=N[_+B-32]+N[_-1+32*B];ju(V>>4,N,_)}function M0(N,_){var B,V=4;for(B=0;8>B;++B)V+=N[_+B-32];ju(V>>3,N,_)}function kf(N,_){var B,V=4;for(B=0;8>B;++B)V+=N[_-1+32*B];ju(V>>3,N,_)}function Cf(N,_){ju(128,N,_)}function Wc(N,_,B){var V=N[_-B],ee=N[_+0],ie=3*(ee-V)+R0[1020+N[_-2*B]-N[_+B]],oe=Pg[112+(ie+4>>3)];N[_-B]=ui[255+V+Pg[112+(ie+3>>3)]],N[_+0]=ui[255+ee-oe]}function Vc(N,_,B,V){var ee=N[_+0],ie=N[_+B];return Ui[255+N[_-2*B]-N[_-B]]>V||Ui[255+ie-ee]>V}function Tf(N,_,B,V){return 4*Ui[255+N[_-B]-N[_+0]]+Ui[255+N[_-2*B]-N[_+B]]<=V}function Su(N,_,B,V,ee){var ie=N[_-3*B],oe=N[_-2*B],de=N[_-B],fe=N[_+0],ve=N[_+B],De=N[_+2*B],He=N[_+3*B];return 4*Ui[255+de-fe]+Ui[255+oe-ve]>V?0:Ui[255+N[_-4*B]-ie]<=ee&&Ui[255+ie-oe]<=ee&&Ui[255+oe-de]<=ee&&Ui[255+He-De]<=ee&&Ui[255+De-ve]<=ee&&Ui[255+ve-fe]<=ee}function Of(N,_,B,V){var ee=2*V+1;for(V=0;16>V;++V)Tf(N,_+V,B,ee)&&Wc(N,_+V,B)}function Yc(N,_,B,V){var ee=2*V+1;for(V=0;16>V;++V)Tf(N,_+V*B,1,ee)&&Wc(N,_+V*B,1)}function vg(N,_,B,V){var ee;for(ee=3;0<ee;--ee)Of(N,_+=4*B,B,V)}function yg(N,_,B,V){var ee;for(ee=3;0<ee;--ee)Yc(N,_+=4,B,V)}function ko(N,_,B,V,ee,ie,oe,de){for(ie=2*ie+1;0<ee--;){if(Su(N,_,B,ie,oe))if(Vc(N,_,B,de))Wc(N,_,B);else{var fe=N,ve=_,De=B,He=fe[ve-2*De],ye=fe[ve-De],Me=fe[ve+0],qe=fe[ve+De],Ge=fe[ve+2*De],ze=27*(Xe=R0[1020+3*(Me-ye)+R0[1020+He-qe]])+63>>7,Je=18*Xe+63>>7,Xe=9*Xe+63>>7;fe[ve-3*De]=ui[255+fe[ve-3*De]+Xe],fe[ve-2*De]=ui[255+He+Je],fe[ve-De]=ui[255+ye+ze],fe[ve+0]=ui[255+Me-ze],fe[ve+De]=ui[255+qe-Je],fe[ve+2*De]=ui[255+Ge-Xe]}_+=V}}function Co(N,_,B,V,ee,ie,oe,de){for(ie=2*ie+1;0<ee--;){if(Su(N,_,B,ie,oe))if(Vc(N,_,B,de))Wc(N,_,B);else{var fe=N,ve=_,De=B,He=fe[ve-De],ye=fe[ve+0],Me=fe[ve+De],qe=Pg[112+(4+(Ge=3*(ye-He))>>3)],Ge=Pg[112+(Ge+3>>3)],ze=qe+1>>1;fe[ve-2*De]=ui[255+fe[ve-2*De]+ze],fe[ve-De]=ui[255+He+Ge],fe[ve+0]=ui[255+ye-qe],fe[ve+De]=ui[255+Me-ze]}_+=V}}function xg(N,_,B,V,ee,ie){ko(N,_,B,1,16,V,ee,ie)}function bg(N,_,B,V,ee,ie){ko(N,_,1,B,16,V,ee,ie)}function Kc(N,_,B,V,ee,ie){var oe;for(oe=3;0<oe;--oe)Co(N,_+=4*B,B,1,16,V,ee,ie)}function wg(N,_,B,V,ee,ie){var oe;for(oe=3;0<oe;--oe)Co(N,_+=4,1,B,16,V,ee,ie)}function D(N,_,B,V,ee,ie,oe,de){ko(N,_,ee,1,8,ie,oe,de),ko(B,V,ee,1,8,ie,oe,de)}function Q(N,_,B,V,ee,ie,oe,de){ko(N,_,1,ee,8,ie,oe,de),ko(B,V,1,ee,8,ie,oe,de)}function be(N,_,B,V,ee,ie,oe,de){Co(N,_+4*ee,ee,1,8,ie,oe,de),Co(B,V+4*ee,ee,1,8,ie,oe,de)}function Ae(N,_,B,V,ee,ie,oe,de){Co(N,_+4,1,ee,8,ie,oe,de),Co(B,V+4,1,ee,8,ie,oe,de)}function Be(){this.ba=new yt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function kt(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new E}function Rt(){this.xb=this.a=0,this.l=new wu,this.ca=new yt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new kt,this.ab=0,this.gc=o(4,tt),this.Oc=0}function Qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rr(N,_,B,V,ee,ie,oe){for(N=N==null?0:N[_+0],_=0;_<oe;++_)ee[ie+_]=N+B[V+_]&255,N=ee[ie+_]}function wr(N,_,B,V,ee,ie,oe){var de;if(N==null)rr(null,null,B,V,ee,ie,oe);else for(de=0;de<oe;++de)ee[ie+de]=N[_+de]+B[V+de]&255}function cn(N,_,B,V,ee,ie,oe){if(N==null)rr(null,null,B,V,ee,ie,oe);else{var de,fe=N[_+0],ve=fe,De=fe;for(de=0;de<oe;++de)ve=De+(fe=N[_+de])-ve,De=B[V+de]+(-256&ve?0>ve?0:255:ve)&255,ve=fe,ee[ie+de]=De}}function Ln(N,_,B,V){var ee=_.width,ie=_.o;if(t(N!=null&&_!=null),0>B||0>=V||B+V>ie)return null;if(!N.Cc){if(N.ga==null){var oe;if(N.ga=new Qt,(oe=N.ga==null)||(oe=_.width*_.o,t(N.Gb.length==0),N.Gb=a(oe),N.Uc=0,N.Gb==null?oe=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,oe=1),oe=!oe),!oe){oe=N.ga;var de=N.Fa,fe=N.P,ve=N.qc,De=N.mb,He=N.nb,ye=fe+1,Me=ve-1,qe=oe.l;if(t(de!=null&&De!=null&&_!=null),Cl[0]=null,Cl[1]=rr,Cl[2]=wr,Cl[3]=cn,oe.ca=De,oe.tb=He,oe.c=_.width,oe.i=_.height,t(0<oe.c&&0<oe.i),1>=ve)_=0;else if(oe.$a=3&de[fe+0],oe.Z=de[fe+0]>>2&3,oe.Lc=de[fe+0]>>4&3,fe=de[fe+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||fe)_=0;else if(qe.put=at,qe.ac=Yt,qe.bc=Sr,qe.ma=oe,qe.width=_.width,qe.height=_.height,qe.Da=_.Da,qe.v=_.v,qe.va=_.va,qe.j=_.j,qe.o=_.o,oe.$a)e:{t(oe.$a==1),_=Lc();t:for(;;){if(_==null){_=0;break e}if(t(oe!=null),oe.mc=_,_.c=oe.c,_.i=oe.i,_.l=oe.l,_.l.ma=oe,_.l.width=oe.c,_.l.height=oe.i,_.a=0,F(_.m,de,ye,Me),!Ka(oe.c,oe.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&fa(_.s)?(oe.ic=1,de=_.c*_.i,_.Ta=null,_.Ua=0,_.V=a(de),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(oe.ic=0,_=Fc(_,oe.c)),!_))break t;_=1;break e}oe.mc=null,_=0}else _=Me>=oe.c*oe.i;oe=!_}if(oe)return null;N.ga.Lc!=1?N.Ga=0:V=ie-B}t(N.ga!=null),t(B+V<=ie);e:{if(_=(de=N.ga).c,ie=de.l.o,de.$a==0){if(ye=N.rc,Me=N.Vc,qe=N.Fa,fe=N.P+1+B*_,ve=N.mb,De=N.nb+B*_,t(fe<=N.P+N.qc),de.Z!=0)for(t(Cl[de.Z]!=null),oe=0;oe<V;++oe)Cl[de.Z](ye,Me,qe,fe,ve,De,_),ye=ve,Me=De,De+=_,fe+=_;else for(oe=0;oe<V;++oe)n(ve,De,qe,fe,_),ye=ve,Me=De,De+=_,fe+=_;N.rc=ye,N.Vc=Me}else{if(t(de.mc!=null),_=B+V,t((oe=de.mc)!=null),t(_<=oe.i),oe.C>=_)_=1;else if(de.ic||Fi(),de.ic){de=oe.V,ye=oe.Ba,Me=oe.c;var Ge=oe.i,ze=(qe=1,fe=oe.$/Me,ve=oe.$%Me,De=oe.m,He=oe.s,oe.$),Je=Me*Ge,Xe=Me*_,nt=He.wc,et=ze<Xe?ds(He,ve,fe):null;t(ze<=Je),t(_<=Ge),t(fa(He));t:for(;;){for(;!De.h&&ze<Xe;){if(ve&nt||(et=ds(He,ve,fe)),t(et!=null),G(De),256>(Ge=gn(et.G[0],et.H[0],De)))de[ye+ze]=Ge,++ze,++ve>=Me&&(ve=0,++fe<=_&&!(fe%16)&&ma(oe,fe));else{if(!(280>Ge)){qe=0;break t}Ge=nn(Ge-256,De);var Ft,jt=gn(et.G[4],et.H[4],De);if(G(De),!(ze>=(jt=_n(Me,jt=nn(jt,De)))&&Je-ze>=Ge)){qe=0;break t}for(Ft=0;Ft<Ge;++Ft)de[ye+ze+Ft]=de[ye+ze+Ft-jt];for(ze+=Ge,ve+=Ge;ve>=Me;)ve-=Me,++fe<=_&&!(fe%16)&&ma(oe,fe);ze<Xe&&ve&nt&&(et=ds(He,ve,fe))}t(De.h==ne(De))}ma(oe,fe>_?_:fe);break t}!qe||De.h&&ze<Je?(qe=0,oe.a=De.h?5:3):oe.$=ze,_=qe}else _=pa(oe,oe.V,oe.Ba,oe.c,oe.i,_,yu);if(!_){V=0;break e}}B+V>=ie&&(N.Cc=1),V=1}if(!V)return null;if(N.Cc&&((V=N.ga)!=null&&(V.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+B*ee}function Ur(N,_,B,V,ee,ie){for(;0<ee--;){var oe,de=N,fe=_+(B?1:0),ve=N,De=_+(B?0:3);for(oe=0;oe<V;++oe){var He=ve[De+4*oe];He!=255&&(He*=32897,de[fe+4*oe+0]=de[fe+4*oe+0]*He>>23,de[fe+4*oe+1]=de[fe+4*oe+1]*He>>23,de[fe+4*oe+2]=de[fe+4*oe+2]*He>>23)}_+=ie}}function Vn(N,_,B,V,ee){for(;0<V--;){var ie;for(ie=0;ie<B;++ie){var oe=N[_+2*ie+0],de=15&(ve=N[_+2*ie+1]),fe=4369*de,ve=(240&ve|ve>>4)*fe>>16;N[_+2*ie+0]=(240&oe|oe>>4)*fe>>16&240|(15&oe|oe<<4)*fe>>16>>4&15,N[_+2*ie+1]=240&ve|de}_+=ee}}function Fn(N,_,B,V,ee,ie,oe,de){var fe,ve,De=255;for(ve=0;ve<ee;++ve){for(fe=0;fe<V;++fe){var He=N[_+fe];ie[oe+4*fe]=He,De&=He}_+=B,oe+=de}return De!=255}function us(N,_,B,V,ee){var ie;for(ie=0;ie<ee;++ie)B[V+ie]=N[_+ie]>>8}function Fi(){Uf=Ur,U5=Vn,z5=Fn,H5=us}function Js(N,_,B){O[N]=function(V,ee,ie,oe,de,fe,ve,De,He,ye,Me,qe,Ge,ze,Je,Xe,nt){var et,Ft=nt-1>>1,jt=de[fe+0]|ve[De+0]<<16,cr=He[ye+0]|Me[qe+0]<<16;t(V!=null);var Et=3*jt+cr+131074>>2;for(_(V[ee+0],255&Et,Et>>16,Ge,ze),ie!=null&&(Et=3*cr+jt+131074>>2,_(ie[oe+0],255&Et,Et>>16,Je,Xe)),et=1;et<=Ft;++et){var gr=de[fe+et]|ve[De+et]<<16,Kn=He[ye+et]|Me[qe+et]<<16,dr=jt+gr+cr+Kn+524296,At=dr+2*(gr+cr)>>3;Et=At+jt>>1,jt=(dr=dr+2*(jt+Kn)>>3)+gr>>1,_(V[ee+2*et-1],255&Et,Et>>16,Ge,ze+(2*et-1)*B),_(V[ee+2*et-0],255&jt,jt>>16,Ge,ze+(2*et-0)*B),ie!=null&&(Et=dr+cr>>1,jt=At+Kn>>1,_(ie[oe+2*et-1],255&Et,Et>>16,Je,Xe+(2*et-1)*B),_(ie[oe+2*et+0],255&jt,jt>>16,Je,Xe+(2*et+0)*B)),jt=gr,cr=Kn}1&nt||(Et=3*jt+cr+131074>>2,_(V[ee+nt-1],255&Et,Et>>16,Ge,ze+(nt-1)*B),ie!=null&&(Et=3*cr+jt+131074>>2,_(ie[oe+nt-1],255&Et,Et>>16,Je,Xe+(nt-1)*B)))}}function Ng(){zi[kg]=KI,zi[Cg]=e_,zi[J5]=GI,zi[Tg]=t_,zi[Og]=r_,zi[I0]=n_,zi[Z5]=JI,zi[L0]=e_,zi[F0]=t_,zi[Eg]=r_,zi[B0]=n_}function Pu(N){return N&-16384?0>N?0:255:N>>ZI}function Gc(N,_){return Pu((19077*N>>8)+(26149*_>>8)-14234)}function xl(N,_,B){return Pu((19077*N>>8)-(6419*_>>8)-(13320*B>>8)+8708)}function Jc(N,_){return Pu((19077*N>>8)+(33050*_>>8)-17685)}function Zc(N,_,B,V,ee){V[ee+0]=Gc(N,B),V[ee+1]=xl(N,_,B),V[ee+2]=Jc(N,_)}function Xc(N,_,B,V,ee){V[ee+0]=Jc(N,_),V[ee+1]=xl(N,_,B),V[ee+2]=Gc(N,B)}function ws(N,_,B,V,ee){var ie=xl(N,_,B);_=ie<<3&224|Jc(N,_)>>3,V[ee+0]=248&Gc(N,B)|ie>>5,V[ee+1]=_}function Qc(N,_,B,V,ee){var ie=240&Jc(N,_)|15;V[ee+0]=240&Gc(N,B)|xl(N,_,B)>>4,V[ee+1]=ie}function $c(N,_,B,V,ee){V[ee+0]=255,Zc(N,_,B,V,ee+1)}function Ef(N,_,B,V,ee){Xc(N,_,B,V,ee),V[ee+3]=255}function Af(N,_,B,V,ee){Zc(N,_,B,V,ee),V[ee+3]=255}function vn(N,_){return 0>N?0:N>_?_:N}function To(N,_,B){O[N]=function(V,ee,ie,oe,de,fe,ve,De,He){for(var ye=De+(-2&He)*B;De!=ye;)_(V[ee+0],ie[oe+0],de[fe+0],ve,De),_(V[ee+1],ie[oe+0],de[fe+0],ve,De+B),ee+=2,++oe,++fe,De+=2*B;1&He&&_(V[ee+0],ie[oe+0],de[fe+0],ve,De)}}function ku(N,_,B){return B==0?N==0?_==0?6:5:_==0?4:0:B}function jg(N,_,B,V,ee){switch(N>>>30){case 3:nd(_,B,V,ee,0);break;case 2:qi(_,B,V,ee);break;case 1:Nr(_,B,V,ee)}}function Bi(N,_){var B,V,ee=_.M,ie=_.Nb,oe=N.oc,de=N.pc+40,fe=N.oc,ve=N.pc+584,De=N.oc,He=N.pc+600;for(B=0;16>B;++B)oe[de+32*B-1]=129;for(B=0;8>B;++B)fe[ve+32*B-1]=129,De[He+32*B-1]=129;for(0<ee?oe[de-1-32]=fe[ve-1-32]=De[He-1-32]=129:(i(oe,de-32-1,127,21),i(fe,ve-32-1,127,9),i(De,He-32-1,127,9)),V=0;V<N.za;++V){var ye=_.ya[_.aa+V];if(0<V){for(B=-1;16>B;++B)n(oe,de+32*B-4,oe,de+32*B+12,4);for(B=-1;8>B;++B)n(fe,ve+32*B-4,fe,ve+32*B+4,4),n(De,He+32*B-4,De,He+32*B+4,4)}var Me=N.Gd,qe=N.Hd+V,Ge=ye.ad,ze=ye.Hc;if(0<ee&&(n(oe,de-32,Me[qe].y,0,16),n(fe,ve-32,Me[qe].f,0,8),n(De,He-32,Me[qe].ea,0,8)),ye.Za){var Je=oe,Xe=de-32+16;for(0<ee&&(V>=N.za-1?i(Je,Xe,Me[qe].y[15],4):n(Je,Xe,Me[qe+1].y,0,4)),B=0;4>B;B++)Je[Xe+128+B]=Je[Xe+256+B]=Je[Xe+384+B]=Je[Xe+0+B];for(B=0;16>B;++B,ze<<=2)Je=oe,Xe=de+i_[B],va[ye.Ob[B]](Je,Xe),jg(ze,Ge,16*+B,Je,Xe)}else if(Je=ku(V,ee,ye.Ob[0]),kl[Je](oe,de),ze!=0)for(B=0;16>B;++B,ze<<=2)jg(ze,Ge,16*+B,oe,de+i_[B]);for(B=ye.Gc,Je=ku(V,ee,ye.Dd),Ao[Je](fe,ve),Ao[Je](De,He),ze=Ge,Je=fe,Xe=ve,255&(ye=0|B)&&(170&ye?Xa(ze,256,Je,Xe):Fr(ze,256,Je,Xe)),ye=De,ze=He,255&(B>>=8)&&(170&B?Xa(Ge,320,ye,ze):Fr(Ge,320,ye,ze)),ee<N.Ub-1&&(n(Me[qe].y,0,oe,de+480,16),n(Me[qe].f,0,fe,ve+224,8),n(Me[qe].ea,0,De,He+224,8)),B=8*ie*N.B,Me=N.sa,qe=N.ta+16*V+16*ie*N.R,Ge=N.qa,ye=N.ra+8*V+B,ze=N.Ha,Je=N.Ia+8*V+B,B=0;16>B;++B)n(Me,qe+B*N.R,oe,de+32*B,16);for(B=0;8>B;++B)n(Ge,ye+B*N.B,fe,ve+32*B,8),n(ze,Je+B*N.B,De,He+32*B,8)}}function ed(N,_,B,V,ee,ie,oe,de,fe){var ve=[0],De=[0],He=0,ye=fe!=null?fe.kd:0,Me=fe??new Ze;if(N==null||12>B)return 7;Me.data=N,Me.w=_,Me.ha=B,_=[_],B=[B],Me.gb=[Me.gb];e:{var qe=_,Ge=B,ze=Me.gb;if(t(N!=null),t(Ge!=null),t(ze!=null),ze[0]=0,12<=Ge[0]&&!r(N,qe[0],"RIFF")){if(r(N,qe[0]+8,"WEBP")){ze=3;break e}var Je=ae(N,qe[0]+4);if(12>Je||4294967286<Je){ze=3;break e}if(ye&&Je>Ge[0]-8){ze=7;break e}ze[0]=Je,qe[0]+=12,Ge[0]-=12}ze=0}if(ze!=0)return ze;for(Je=0<Me.gb[0],B=B[0];;){e:{var Xe=N;Ge=_,ze=B;var nt=ve,et=De,Ft=qe=[0];if((Et=He=[He])[0]=0,8>ze[0])ze=7;else{if(!r(Xe,Ge[0],"VP8X")){if(ae(Xe,Ge[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var jt=ae(Xe,Ge[0]+8),cr=1+Te(Xe,Ge[0]+12);if(2147483648<=cr*(Xe=1+Te(Xe,Ge[0]+15))){ze=3;break e}Ft!=null&&(Ft[0]=jt),nt!=null&&(nt[0]=cr),et!=null&&(et[0]=Xe),Ge[0]+=18,ze[0]-=18,Et[0]=1}ze=0}}if(He=He[0],qe=qe[0],ze!=0)return ze;if(Ge=!!(2&qe),!Je&&He)return 3;if(ie!=null&&(ie[0]=!!(16&qe)),oe!=null&&(oe[0]=Ge),de!=null&&(de[0]=0),oe=ve[0],qe=De[0],He&&Ge&&fe==null){ze=0;break}if(4>B){ze=7;break}if(Je&&He||!Je&&!He&&!r(N,_[0],"ALPH")){B=[B],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{jt=N,ze=_,Je=B;var Et=Me.gb;nt=Me.na,et=Me.P,Ft=Me.Sa,cr=22,t(jt!=null),t(Je!=null),Xe=ze[0];var gr=Je[0];for(t(nt!=null),t(Ft!=null),nt[0]=null,et[0]=null,Ft[0]=0;;){if(ze[0]=Xe,Je[0]=gr,8>gr){ze=7;break e}var Kn=ae(jt,Xe+4);if(4294967286<Kn){ze=3;break e}var dr=8+Kn+1&-2;if(cr+=dr,0<Et&&cr>Et){ze=3;break e}if(!r(jt,Xe,"VP8 ")||!r(jt,Xe,"VP8L")){ze=0;break e}if(gr[0]<dr){ze=7;break e}r(jt,Xe,"ALPH")||(nt[0]=jt,et[0]=Xe+8,Ft[0]=Kn),Xe+=dr,gr-=dr}}if(B=B[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],ze!=0)break}B=[B],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(Et=N,ze=_,Je=B,nt=Me.gb[0],et=Me.Ja,Ft=Me.xa,jt=ze[0],Xe=!r(Et,jt,"VP8 "),cr=!r(Et,jt,"VP8L"),t(Et!=null),t(Je!=null),t(et!=null),t(Ft!=null),8>Je[0])ze=7;else{if(Xe||cr){if(Et=ae(Et,jt+4),12<=nt&&Et>nt-12){ze=3;break e}if(ye&&Et>Je[0]-8){ze=7;break e}et[0]=Et,ze[0]+=8,Je[0]-=8,Ft[0]=cr}else Ft[0]=5<=Je[0]&&Et[jt+0]==47&&!(Et[jt+4]>>5),et[0]=Je[0];ze=0}if(B=B[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],_=_[0],ze!=0)break;if(4294967286<Me.Ja)return 3;if(de==null||Ge||(de[0]=Me.xa?2:1),oe=[oe],qe=[qe],Me.xa){if(5>B){ze=7;break}de=oe,ye=qe,Ge=ie,N==null||5>B?N=0:5<=B&&N[_+0]==47&&!(N[_+4]>>5)?(Je=[0],Et=[0],nt=[0],F(et=new Y,N,_,B),Wn(et,Je,Et,nt)?(de!=null&&(de[0]=Je[0]),ye!=null&&(ye[0]=Et[0]),Ge!=null&&(Ge[0]=nt[0]),N=1):N=0):N=0}else{if(10>B){ze=7;break}de=qe,N==null||10>B||!fg(N,_+3,B-3)?N=0:(ye=N[_+0]|N[_+1]<<8|N[_+2]<<16,Ge=16383&(N[_+7]<<8|N[_+6]),N=16383&(N[_+9]<<8|N[_+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Me.Ja||!Ge||!N?N=0:(oe&&(oe[0]=Ge),de&&(de[0]=N),N=1))}if(!N||(oe=oe[0],qe=qe[0],He&&(ve[0]!=oe||De[0]!=qe)))return 3;fe!=null&&(fe[0]=Me,fe.offset=_-fe.w,t(4294967286>_-fe.w),t(fe.offset==fe.ha-B));break}return ze==0||ze==7&&He&&fe==null?(ie!=null&&(ie[0]|=Me.na!=null&&0<Me.na.length),V!=null&&(V[0]=oe),ee!=null&&(ee[0]=qe),0):ze}function Df(N,_,B){var V=_.width,ee=_.height,ie=0,oe=0,de=V,fe=ee;if(_.Da=N!=null&&0<N.Da,_.Da&&(de=N.cd,fe=N.bd,ie=N.v,oe=N.j,11>B||(ie&=-2,oe&=-2),0>ie||0>oe||0>=de||0>=fe||ie+de>V||oe+fe>ee))return 0;if(_.v=ie,_.j=oe,_.va=ie+de,_.o=oe+fe,_.U=de,_.T=fe,_.da=N!=null&&0<N.da,_.da){if(!je(de,fe,B=[N.ib],ie=[N.hb]))return 0;_.ib=B[0],_.hb=ie[0]}return _.ob=N!=null&&N.ob,_.Kb=N==null||!N.Sd,_.da&&(_.ob=_.ib<3*V/4&&_.hb<3*ee/4,_.Kb=0),1}function Mf(N){if(N==null)return 2;if(11>N.S){var _=N.f.RGBA;_.fb+=(N.height-1)*_.A,_.A=-_.A}else _=N.f.kb,N=N.height,_.O+=(N-1)*_.fa,_.fa=-_.fa,_.N+=(N-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(N-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(N-1)*_.lb,_.lb=-_.lb);return 0}function bl(N,_,B,V){if(V==null||0>=N||0>=_)return 2;if(B!=null){if(B.Da){var ee=B.cd,ie=B.bd,oe=-2&B.v,de=-2&B.j;if(0>oe||0>de||0>=ee||0>=ie||oe+ee>N||de+ie>_)return 2;N=ee,_=ie}if(B.da){if(!je(N,_,ee=[B.ib],ie=[B.hb]))return 2;N=ee[0],_=ie[0]}}V.width=N,V.height=_;e:{var fe=V.width,ve=V.height;if(N=V.S,0>=fe||0>=ve||!(N>=kg&&13>N))N=2;else{if(0>=V.Rd&&V.sd==null){oe=ie=ee=_=0;var De=(de=fe*a_[N])*ve;if(11>N||(ie=(ve+1)/2*(_=(fe+1)/2),N==12&&(oe=(ee=fe)*ve)),(ve=a(De+2*ie+oe))==null){N=1;break e}V.sd=ve,11>N?((fe=V.f.RGBA).eb=ve,fe.fb=0,fe.A=de,fe.size=De):((fe=V.f.kb).y=ve,fe.O=0,fe.fa=de,fe.Fd=De,fe.f=ve,fe.N=0+De,fe.Ab=_,fe.Cd=ie,fe.ea=ve,fe.W=0+De+ie,fe.Db=_,fe.Ed=ie,N==12&&(fe.F=ve,fe.J=0+De+2*ie),fe.Tc=oe,fe.lb=ee)}if(_=1,ee=V.S,ie=V.width,oe=V.height,ee>=kg&&13>ee)if(11>ee)N=V.f.RGBA,_&=(de=Math.abs(N.A))*(oe-1)+ie<=N.size,_&=de>=ie*a_[ee],_&=N.eb!=null;else{N=V.f.kb,de=(ie+1)/2,De=(oe+1)/2,fe=Math.abs(N.fa),ve=Math.abs(N.Ab);var He=Math.abs(N.Db),ye=Math.abs(N.lb),Me=ye*(oe-1)+ie;_&=fe*(oe-1)+ie<=N.Fd,_&=ve*(De-1)+de<=N.Cd,_=(_&=He*(De-1)+de<=N.Ed)&fe>=ie&ve>=de&He>=de,_&=N.y!=null,_&=N.f!=null,_&=N.ea!=null,ee==12&&(_&=ye>=ie,_&=Me<=N.Tc,_&=N.F!=null)}else _=0;N=_?0:2}}return N!=0||B!=null&&B.fd&&(N=Mf(V)),N}var td=64,ci=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],di=24,wl=32,Oo=8,Nl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];te("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(N){return N},O.Predictor2=function(N,_,B){return _[B+0]},O.Predictor3=function(N,_,B){return _[B+1]},O.Predictor4=function(N,_,B){return _[B-1]},O.Predictor5=function(N,_,B){return me(me(N,_[B+1]),_[B+0])},O.Predictor6=function(N,_,B){return me(N,_[B-1])},O.Predictor7=function(N,_,B){return me(N,_[B+0])},O.Predictor8=function(N,_,B){return me(_[B-1],_[B+0])},O.Predictor9=function(N,_,B){return me(_[B+0],_[B+1])},O.Predictor10=function(N,_,B){return me(me(N,_[B-1]),me(_[B+0],_[B+1]))},O.Predictor11=function(N,_,B){var V=_[B+0];return 0>=ce(V>>24&255,N>>24&255,(_=_[B-1])>>24&255)+ce(V>>16&255,N>>16&255,_>>16&255)+ce(V>>8&255,N>>8&255,_>>8&255)+ce(255&V,255&N,255&_)?V:N},O.Predictor12=function(N,_,B){var V=_[B+0];return($((N>>24&255)+(V>>24&255)-((_=_[B-1])>>24&255))<<24|$((N>>16&255)+(V>>16&255)-(_>>16&255))<<16|$((N>>8&255)+(V>>8&255)-(_>>8&255))<<8|$((255&N)+(255&V)-(255&_)))>>>0},O.Predictor13=function(N,_,B){var V=_[B-1];return(ke((N=me(N,_[B+0]))>>24&255,V>>24&255)<<24|ke(N>>16&255,V>>16&255)<<16|ke(N>>8&255,V>>8&255)<<8|ke(255&N,255&V))>>>0};var Rf=O.PredictorAdd0;O.PredictorAdd1=Ie,te("Predictor2","PredictorAdd2"),te("Predictor3","PredictorAdd3"),te("Predictor4","PredictorAdd4"),te("Predictor5","PredictorAdd5"),te("Predictor6","PredictorAdd6"),te("Predictor7","PredictorAdd7"),te("Predictor8","PredictorAdd8"),te("Predictor9","PredictorAdd9"),te("Predictor10","PredictorAdd10"),te("Predictor11","PredictorAdd11"),te("Predictor12","PredictorAdd12"),te("Predictor13","PredictorAdd13");var Cu=O.PredictorAdd2;Ve("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),Ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Pn,_g=O.ColorIndexInverseTransform,Ja=O.MapARGB,Za=O.VP8LColorIndexInverseTransformAlpha,If=O.MapAlpha,Lf=O.VP8LPredictorsAdd=[];Lf.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Ff,Bf,jl,_l,Sl,rd,Pl,nd,qi,Xa,Nr,Fr,kn,Yn,Eo,qf,Tu,Sg,R5,I5,L5,F5,B5,q5,Uf,U5,z5,H5,W5=a(511),V5=a(2041),Y5=a(225),K5=a(767),G5=0,R0=V5,Pg=Y5,ui=K5,Ui=W5,kg=0,Cg=1,J5=2,Tg=3,Og=4,I0=5,Z5=6,L0=7,F0=8,Eg=9,B0=10,DI=[2,3,7],MI=[3,3,11],X5=[280,256,256,256,40],RI=[0,1,1,1,0],II=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],LI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],FI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],BI=8,q0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],U0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zf=null,qI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],UI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Q5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],zI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],HI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],WI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],VI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],kl=[],va=[],Ao=[],YI=1,$5=2,Cl=[],zi=[];Js("UpsampleRgbLinePair",Zc,3),Js("UpsampleBgrLinePair",Xc,3),Js("UpsampleRgbaLinePair",Af,4),Js("UpsampleBgraLinePair",Ef,4),Js("UpsampleArgbLinePair",$c,4),Js("UpsampleRgba4444LinePair",Qc,2),Js("UpsampleRgb565LinePair",ws,2);var KI=O.UpsampleRgbLinePair,GI=O.UpsampleBgrLinePair,e_=O.UpsampleRgbaLinePair,t_=O.UpsampleBgraLinePair,r_=O.UpsampleArgbLinePair,n_=O.UpsampleRgba4444LinePair,JI=O.UpsampleRgb565LinePair,Ag=16,Dg=1<<Ag-1,Hf=-227,z0=482,ZI=6,s_=0,XI=a(256),QI=a(256),$I=a(256),eL=a(256),tL=a(z0-Hf),rL=a(z0-Hf);To("YuvToRgbRow",Zc,3),To("YuvToBgrRow",Xc,3),To("YuvToRgbaRow",Af,4),To("YuvToBgraRow",Ef,4),To("YuvToArgbRow",$c,4),To("YuvToRgba4444Row",Qc,2),To("YuvToRgb565Row",ws,2);var i_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Mg=[0,2,8],nL=[8,7,6,4,4,2,2,2,1,1,1,1],sL=1;this.WebPDecodeRGBA=function(N,_,B,V,ee){var ie=Cg,oe=new Be,de=new yt;oe.ba=de,de.S=ie,de.width=[de.width],de.height=[de.height];var fe=de.width,ve=de.height,De=new ut;if(De==null||N==null)var He=2;else t(De!=null),He=ed(N,_,B,De.width,De.height,De.Pd,De.Qd,De.format,null);if(He!=0?fe=0:(fe!=null&&(fe[0]=De.width[0]),ve!=null&&(ve[0]=De.height[0]),fe=1),fe){de.width=de.width[0],de.height=de.height[0],V!=null&&(V[0]=de.width),ee!=null&&(ee[0]=de.height);e:{if(V=new wu,(ee=new Ze).data=N,ee.w=_,ee.ha=B,ee.kd=1,_=[0],t(ee!=null),((N=ed(ee.data,ee.w,ee.ha,null,null,null,_,null,ee))==0||N==7)&&_[0]&&(N=4),(_=N)==0){if(t(oe!=null),V.data=ee.data,V.w=ee.w+ee.offset,V.ha=ee.ha-ee.offset,V.put=at,V.ac=Yt,V.bc=Sr,V.ma=oe,ee.xa){if((N=Lc())==null){oe=1;break e}if(function(ye,Me){var qe=[0],Ge=[0],ze=[0];t:for(;;){if(ye==null)return 0;if(Me==null)return ye.a=2,0;if(ye.l=Me,ye.a=0,F(ye.m,Me.data,Me.w,Me.ha),!Wn(ye.m,qe,Ge,ze)){ye.a=3;break t}if(ye.xb=$5,Me.width=qe[0],Me.height=Ge[0],!Ka(qe[0],Ge[0],1,ye,null))break t;return 1}return t(ye.a!=0),0}(N,V)){if(V=(_=bl(V.width,V.height,oe.Oa,oe.ba))==0){t:{V=N;r:for(;;){if(V==null){V=0;break t}if(t(V.s.yc!=null),t(V.s.Ya!=null),t(0<V.s.Wb),t((B=V.l)!=null),t((ee=B.ma)!=null),V.xb!=0){if(V.ca=ee.ba,V.tb=ee.tb,t(V.ca!=null),!Df(ee.Oa,B,Tg)){V.a=2;break r}if(!Fc(V,B.width)||B.da)break r;if((B.da||Qe(V.ca.S))&&Fi(),11>V.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),V.ca.f.kb.F!=null&&Fi()),V.Pb&&0<V.s.ua&&V.s.vb.X==null&&!H(V.s.vb,V.s.Wa.Xa)){V.a=1;break r}V.xb=0}if(!pa(V,V.V,V.Ba,V.c,V.i,B.o,gl))break r;ee.Dc=V.Ma,V=1;break t}t(V.a!=0),V=0}V=!V}V&&(_=N.a)}else _=N.a}else{if((N=new b0)==null){oe=1;break e}if(N.Fa=ee.na,N.P=ee.P,N.qc=ee.Sa,mg(N,V)){if((_=bl(V.width,V.height,oe.Oa,oe.ba))==0){if(N.Aa=0,B=oe.Oa,t((ee=N)!=null),B!=null){if(0<(fe=0>(fe=B.Md)?0:100<fe?255:255*fe/100)){for(ve=De=0;4>ve;++ve)12>(He=ee.pb[ve]).lc&&(He.ia=fe*nL[0>He.lc?0:He.lc]>>3),De|=He.ia;De&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=B.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}(function(ye,Me){if(ye==null)return 0;if(Me==null)return In(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!mg(ye,Me))return 0;if(t(ye.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(ye.L=0);var qe=Mg[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Me.v-qe>>4,ye.zb=Me.j-qe>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Me.o+15+qe>>4,ye.Hb=Me.va+15+qe>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var Ge=ye.ed;for(qe=0;4>qe;++qe){var ze;if(ye.Qa.Cb){var Je=ye.Qa.Lb[qe];ye.Qa.Fb||(Je+=Ge.Tb)}else Je=Ge.Tb;for(ze=0;1>=ze;++ze){var Xe=ye.gd[qe][ze],nt=Je;if(Ge.Pc&&(nt+=Ge.vd[0],ze&&(nt+=Ge.od[0])),0<(nt=0>nt?0:63<nt?63:nt)){var et=nt;0<Ge.wb&&(et=4<Ge.wb?et>>2:et>>1)>9-Ge.wb&&(et=9-Ge.wb),1>et&&(et=1),Xe.dd=et,Xe.tc=2*nt+et,Xe.ld=40<=nt?2:15<=nt?1:0}else Xe.tc=0;Xe.La=ze}}}qe=0}else In(ye,6,"Frame setup failed"),qe=ye.a;if(qe=qe==0){if(qe){ye.$c=0,0<ye.Aa||(ye.Ic=sL);t:{qe=ye.Ic,Ge=4*(et=ye.za);var Ft=32*et,jt=et+1,cr=0<ye.L?et*(0<ye.Aa?2:1):0,Et=(ye.Aa==2?2:1)*et;if((Xe=Ge+832+(ze=3*(16*qe+Mg[ye.L])/2*Ft)+(Je=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=Xe)qe=0;else{if(Xe>ye.Vb){if(ye.Vb=0,ye.Ec=a(Xe),ye.Fc=0,ye.Ec==null){qe=In(ye,1,"no memory during frame initialization.");break t}ye.Vb=Xe}Xe=ye.Ec,nt=ye.Fc,ye.Ac=Xe,ye.Bc=nt,nt+=Ge,ye.Gd=o(Ft,ug),ye.Hd=0,ye.rb=o(jt+1,bf),ye.sb=1,ye.wa=cr?o(cr,Li):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=et),t(!0),ye.oc=Xe,ye.pc=nt,nt+=832,ye.ya=o(Et,wf),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=et),ye.R=16*et,ye.B=8*et,et=(Ft=Mg[ye.L])*ye.R,Ft=Ft/2*ye.B,ye.sa=Xe,ye.ta=nt+et,ye.qa=ye.sa,ye.ra=ye.ta+16*qe*ye.R+Ft,ye.Ha=ye.qa,ye.Ia=ye.ra+8*qe*ye.B+Ft,ye.$c=0,nt+=ze,ye.mb=Je?Xe:null,ye.nb=Je?nt:null,t(nt+Je<=ye.Fc+ye.Vb),Bc(ye),i(ye.Ac,ye.Bc,0,Ge),qe=1}}if(qe){if(Me.ka=0,Me.y=ye.sa,Me.O=ye.ta,Me.f=ye.qa,Me.N=ye.ra,Me.ea=ye.Ha,Me.Vd=ye.Ia,Me.fa=ye.R,Me.Rc=ye.B,Me.F=null,Me.J=0,!G5){for(qe=-255;255>=qe;++qe)W5[255+qe]=0>qe?-qe:qe;for(qe=-1020;1020>=qe;++qe)V5[1020+qe]=-128>qe?-128:127<qe?127:qe;for(qe=-112;112>=qe;++qe)Y5[112+qe]=-16>qe?-16:15<qe?15:qe;for(qe=-255;510>=qe;++qe)K5[255+qe]=0>qe?0:255<qe?255:qe;G5=1}Pl=gg,nd=N0,Xa=j0,Nr=Ga,Fr=pg,qi=w0,kn=xg,Yn=bg,Eo=D,qf=Q,Tu=Kc,Sg=wg,R5=be,I5=Ae,L5=Of,F5=Yc,B5=vg,q5=yg,va[0]=O0,va[1]=jf,va[2]=C0,va[3]=T0,va[4]=E0,va[5]=Po,va[6]=So,va[7]=A0,va[8]=Nu,va[9]=D0,kl[0]=yl,kl[1]=S0,kl[2]=P0,kl[3]=_f,kl[4]=k0,kl[5]=zc,kl[6]=Sf,Ao[0]=_u,Ao[1]=_0,Ao[2]=Pf,Ao[3]=Hc,Ao[4]=kf,Ao[5]=M0,Ao[6]=Cf,qe=1}else qe=0}qe&&(qe=function(gr,Kn){for(gr.M=0;gr.M<gr.Va;++gr.M){var dr,At=gr.Jc[gr.M&gr.Xb],mt=gr.m,Cn=gr;for(dr=0;dr<Cn.za;++dr){var or=mt,yr=Cn,Jr=yr.Ac,hs=yr.Bc+4*dr,Ls=yr.zc,yn=yr.ya[yr.aa+dr];if(yr.Qa.Bb?yn.$b=Se(or,yr.Pa.jb[0])?2+Se(or,yr.Pa.jb[2]):Se(or,yr.Pa.jb[1]):yn.$b=0,yr.kc&&(yn.Ad=Se(or,yr.Bd)),yn.Za=!Se(or,145)+0,yn.Za){var Ns=yn.Ob,Fs=0;for(yr=0;4>yr;++yr){var Gn,xr=Ls[0+yr];for(Gn=0;4>Gn;++Gn){xr=HI[Jr[hs+Gn]][xr];for(var Pr=Q5[Se(or,xr[0])];0<Pr;)Pr=Q5[2*Pr+Se(or,xr[Pr])];xr=-Pr,Jr[hs+Gn]=xr}n(Ns,Fs,Jr,hs,4),Fs+=4,Ls[0+yr]=xr}}else xr=Se(or,156)?Se(or,128)?1:3:Se(or,163)?2:0,yn.Ob[0]=xr,i(Jr,hs,xr,4),i(Ls,0,xr,4);yn.Dd=Se(or,142)?Se(or,114)?Se(or,183)?1:3:2:0}if(Cn.m.Ka)return In(gr,7,"Premature end-of-partition0 encountered.");for(;gr.ja<gr.za;++gr.ja){if(Cn=At,or=(mt=gr).rb[mt.sb-1],Jr=mt.rb[mt.sb+mt.ja],dr=mt.ya[mt.aa+mt.ja],hs=mt.kc?dr.Ad:0)or.la=Jr.la=0,dr.Za||(or.Na=Jr.Na=0),dr.Hc=0,dr.Gc=0,dr.ia=0;else{var xn,kr;if(or=Jr,Jr=Cn,hs=mt.Pa.Xc,Ls=mt.ya[mt.aa+mt.ja],yn=mt.pb[Ls.$b],yr=Ls.ad,Ns=0,Fs=mt.rb[mt.sb-1],xr=Gn=0,i(yr,Ns,0,384),Ls.Za)var fs=0,ya=hs[3];else{Pr=a(16);var Tn=or.Na+Fs.Na;if(Tn=zf(Jr,hs[1],Tn,yn.Eb,0,Pr,0),or.Na=Fs.Na=(0<Tn)+0,1<Tn)Pl(Pr,0,yr,Ns);else{var Zs=Pr[0]+3>>3;for(Pr=0;256>Pr;Pr+=16)yr[Ns+Pr]=Zs}fs=1,ya=hs[0]}var Br=15&or.la,Jn=15&Fs.la;for(Pr=0;4>Pr;++Pr){var hi=1&Jn;for(Zs=kr=0;4>Zs;++Zs)Br=Br>>1|(hi=(Tn=zf(Jr,ya,Tn=hi+(1&Br),yn.Sc,fs,yr,Ns))>fs)<<7,kr=kr<<2|(3<Tn?3:1<Tn?2:yr[Ns+0]!=0),Ns+=16;Br>>=4,Jn=Jn>>1|hi<<7,Gn=(Gn<<8|kr)>>>0}for(ya=Br,fs=Jn>>4,xn=0;4>xn;xn+=2){for(kr=0,Br=or.la>>4+xn,Jn=Fs.la>>4+xn,Pr=0;2>Pr;++Pr){for(hi=1&Jn,Zs=0;2>Zs;++Zs)Tn=hi+(1&Br),Br=Br>>1|(hi=0<(Tn=zf(Jr,hs[2],Tn,yn.Qc,0,yr,Ns)))<<3,kr=kr<<2|(3<Tn?3:1<Tn?2:yr[Ns+0]!=0),Ns+=16;Br>>=2,Jn=Jn>>1|hi<<5}xr|=kr<<4*xn,ya|=Br<<4<<xn,fs|=(240&Jn)<<xn}or.la=ya,Fs.la=fs,Ls.Hc=Gn,Ls.Gc=xr,Ls.ia=43690&xr?0:yn.ia,hs=!(Gn|xr)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[dr.$b][dr.Za],mt.wa[mt.Y+mt.ja].La|=!hs),Cn.Ka)return In(gr,7,"Premature end-of-file encountered.")}if(Bc(gr),mt=Kn,Cn=1,dr=(At=gr).D,or=0<At.L&&At.M>=At.zb&&At.M<=At.Va,At.Aa==0)t:{if(dr.M=At.M,dr.uc=or,Bi(At,dr),Cn=1,dr=(kr=At.D).Nb,or=(xr=Mg[At.L])*At.R,Jr=xr/2*At.B,Pr=16*dr*At.R,Zs=8*dr*At.B,hs=At.sa,Ls=At.ta-or+Pr,yn=At.qa,yr=At.ra-Jr+Zs,Ns=At.Ha,Fs=At.Ia-Jr+Zs,Jn=(Br=kr.M)==0,Gn=Br>=At.Va-1,At.Aa==2&&Bi(At,kr),kr.uc)for(hi=(Tn=At).D.M,t(Tn.D.uc),kr=Tn.yb;kr<Tn.Hb;++kr){fs=kr,ya=hi;var Bs=(fi=(ms=Tn).D).Nb;xn=ms.R;var fi=fi.wa[fi.Y+fs],mi=ms.sa,Xs=ms.ta+16*Bs*xn+16*fs,pi=fi.dd,zr=fi.tc;if(zr!=0)if(t(3<=zr),ms.L==1)0<fs&&F5(mi,Xs,xn,zr+4),fi.La&&q5(mi,Xs,xn,zr),0<ya&&L5(mi,Xs,xn,zr+4),fi.La&&B5(mi,Xs,xn,zr);else{var gi=ms.B,xa=ms.qa,sd=ms.ra+8*Bs*gi+8*fs,Do=ms.Ha,ms=ms.Ia+8*Bs*gi+8*fs;Bs=fi.ld,0<fs&&(Yn(mi,Xs,xn,zr+4,pi,Bs),qf(xa,sd,Do,ms,gi,zr+4,pi,Bs)),fi.La&&(Sg(mi,Xs,xn,zr,pi,Bs),I5(xa,sd,Do,ms,gi,zr,pi,Bs)),0<ya&&(kn(mi,Xs,xn,zr+4,pi,Bs),Eo(xa,sd,Do,ms,gi,zr+4,pi,Bs)),fi.La&&(Tu(mi,Xs,xn,zr,pi,Bs),R5(xa,sd,Do,ms,gi,zr,pi,Bs))}}if(At.ia&&alert("todo:DitherRow"),mt.put!=null){if(kr=16*Br,Br=16*(Br+1),Jn?(mt.y=At.sa,mt.O=At.ta+Pr,mt.f=At.qa,mt.N=At.ra+Zs,mt.ea=At.Ha,mt.W=At.Ia+Zs):(kr-=xr,mt.y=hs,mt.O=Ls,mt.f=yn,mt.N=yr,mt.ea=Ns,mt.W=Fs),Gn||(Br-=xr),Br>mt.o&&(Br=mt.o),mt.F=null,mt.J=null,At.Fa!=null&&0<At.Fa.length&&kr<Br&&(mt.J=Ln(At,mt,kr,Br-kr),mt.F=At.mb,mt.F==null&&mt.F.length==0)){Cn=In(At,3,"Could not decode alpha data.");break t}kr<mt.j&&(xr=mt.j-kr,kr=mt.j,t(!(1&xr)),mt.O+=At.R*xr,mt.N+=At.B*(xr>>1),mt.W+=At.B*(xr>>1),mt.F!=null&&(mt.J+=mt.width*xr)),kr<Br&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=kr-mt.j,mt.U=mt.va-mt.v,mt.T=Br-kr,Cn=mt.put(mt))}dr+1!=At.Ic||Gn||(n(At.sa,At.ta-or,hs,Ls+16*At.R,or),n(At.qa,At.ra-Jr,yn,yr+8*At.B,Jr),n(At.Ha,At.Ia-Jr,Ns,Fs+8*At.B,Jr))}if(!Cn)return In(gr,6,"Output aborted.")}return 1}(ye,Me)),Me.bc!=null&&Me.bc(Me),qe&=1}return qe?(ye.cb=0,qe):0})(N,V)||(_=N.a)}}else _=N.a}_==0&&oe.Oa!=null&&oe.Oa.fd&&(_=Mf(oe.ba))}oe=_}ie=oe!=0?null:11>ie?de.f.RGBA.eb:de.f.kb.y}else ie=null;return ie};var a_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(O,L){for(var T="",k=0;k<4;k++)T+=String.fromCharCode(O[L++]);return T}function u(O,L){return O[L+0]|O[L+1]<<8}function h(O,L){return(O[L+0]|O[L+1]<<8|O[L+2]<<16)>>>0}function m(O,L){return(O[L+0]|O[L+1]<<8|O[L+2]<<16|O[L+3]<<24)>>>0}new c;var f=[0],g=[0],y=[],x=new c,p=e,v=function(O,L){var T={},k=0,E=!1,A=0,q=0;if(T.frames=[],!function(z,Y){for(var J=0;J<4;J++)if(z[Y+J]!="RIFF".charCodeAt(J))return!0;return!1}(O,L)){for(m(O,L+=4),L+=8;L<O.length;){var U=d(O,L),R=m(O,L+=4);L+=4;var C=R+(1&R);switch(U){case"VP8 ":case"VP8L":T.frames[k]===void 0&&(T.frames[k]={}),(re=T.frames[k]).src_off=E?q:L-8,re.src_size=A+R+8,k++,E&&(E=!1,A=0,q=0);break;case"VP8X":(re=T.header={}).feature_flags=O[L];var F=L+4;re.canvas_width=1+h(O,F),F+=3,re.canvas_height=1+h(O,F),F+=3;break;case"ALPH":E=!0,A=C+8,q=L-8;break;case"ANIM":(re=T.header).bgcolor=m(O,L),F=L+4,re.loop_count=u(O,F),F+=2;break;case"ANMF":var X,re;(re=T.frames[k]={}).offset_x=2*h(O,L),L+=3,re.offset_y=2*h(O,L),L+=3,re.width=1+h(O,L),L+=3,re.height=1+h(O,L),L+=3,re.duration=h(O,L),L+=3,X=O[L++],re.dispose=1&X,re.blend=X>>1&1}U!="ANMF"&&(L+=C)}return T}}(p,0);v.response=p,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,j=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,f=[b.canvas_height],g=[b.canvas_width];for(var S=0;S<j.length&&j[S].blend!=0;S++);}var P=j[0],M=x.WebPDecodeRGBA(p,P.src_off,P.src_size,g,f);P.rgba=M,P.imgwidth=g[0],P.imgheight=f[0];for(var I=0;I<g[0]*f[0]*4;I++)y[I]=M[I];return this.width=g,this.height=f,this.data=y,this}(function(e){var t,r,n,i,a,o,l,c,d,u=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new c,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new o,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new o,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=z;Object.defineProperty(this,"pdf",{get:function(){return Y}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(ae){J=!!ae}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(ae){ne=!!ae}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(ae){isNaN(ae)||(le=ae)}});var G=0;Object.defineProperty(this,"posY",{get:function(){return G},set:function(ae){isNaN(ae)||(G=ae)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ae){var H;typeof ae=="number"?H=[ae,ae,ae,ae]:((H=new Array(4))[0]=ae[0],H[1]=ae.length>=2?ae[1]:H[0],H[2]=ae.length>=3?ae[2]:H[0],H[3]=ae.length>=4?ae[3]:H[1]),d.margin=H}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(ae){he=ae}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(ae){xe=ae}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(ae){Se=ae}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ae){ae instanceof u&&(d=ae)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ae){d.path=ae}});var K=[];Object.defineProperty(this,"ctxStack",{get:function(){return K},set:function(ae){K=ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ae){var H;H=m(ae),this.ctx.fillStyle=H.style,this.ctx.isFillTransparent=H.a===0,this.ctx.fillOpacity=H.a,this.pdf.setFillColor(H.r,H.g,H.b,{a:H.a}),this.pdf.setTextColor(H.r,H.g,H.b,{a:H.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ae){var H=m(ae);this.ctx.strokeStyle=H.style,this.ctx.isStrokeTransparent=H.a===0,this.ctx.strokeOpacity=H.a,H.a===0?this.pdf.setDrawColor(255,255,255):(H.a,this.pdf.setDrawColor(H.r,H.g,H.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ae){["butt","round","square"].indexOf(ae)!==-1&&(this.ctx.lineCap=ae,this.pdf.setLineCap(ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ae){isNaN(ae)||(this.ctx.lineWidth=ae,this.pdf.setLineWidth(ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ae){["bevel","round","miter"].indexOf(ae)!==-1&&(this.ctx.lineJoin=ae,this.pdf.setLineJoin(ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ae){isNaN(ae)||(this.ctx.miterLimit=ae,this.pdf.setMiterLimit(ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ae){this.ctx.textBaseline=ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ae){["right","end","center","left","start"].indexOf(ae)!==-1&&(this.ctx.textAlign=ae)}});var we=null,Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(ae){we=null,Te=ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ae){var H;if(this.ctx.font=ae,(H=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ae))!==null){var Oe=H[1];H[2];var pe=H[3],je=H[4];H[5];var _e=H[6],W=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(je)[2];je=Math.floor(W==="px"?parseFloat(je)*this.pdf.internal.scaleFactor:W==="em"?parseFloat(je)*this.pdf.getFontSize():parseFloat(je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(je);var te=function(Ue){var Ve,rt,Ye=[],We=Ue.trim();if(We==="")return Nw;if(We in vC)return[vC[We]];for(;We!=="";){switch(rt=null,Ve=(We=xC(We)).charAt(0)){case'"':case"'":rt=Tee(We.substring(1),Ve);break;default:rt=Oee(We)}if(rt===null||(Ye.push(rt[0]),(We=xC(rt[1]))!==""&&We.charAt(0)!==","))return Nw;We=We.replace(/^,/,"")}return Ye}(_e);if(this.fontFaces){var Z=function(Ue,Ve){if(we===null){var rt=function(Ye){var We=[];return Object.keys(Ye).forEach(function(it){Ye[it].forEach(function(ft){var ue=null;switch(ft){case"bold":ue={family:it,weight:"bold"};break;case"italic":ue={family:it,style:"italic"};break;case"bolditalic":ue={family:it,weight:"bold",style:"italic"};break;case"":case"normal":ue={family:it}}ue!==null&&(ue.ref={name:it,style:ft},We.push(ue))})}),We}(Ue.getFontList());we=function(Ye){for(var We={},it=0;it<Ye.length;++it){var ft=ww(Ye[it]),ue=ft.family,Ke=ft.stretch,Qe=ft.style,ht=ft.weight;We[ue]=We[ue]||{},We[ue][Ke]=We[ue][Ke]||{},We[ue][Ke][Qe]=We[ue][Ke][Qe]||{},We[ue][Ke][Qe][ht]=ft}return We}(rt.concat(Ve))}return we}(this.pdf,this.fontFaces),me=te.map(function(Ue){return{family:Ue,stretch:"normal",weight:pe,style:Oe}}),$=function(Ue,Ve,rt){for(var Ye=(rt=rt||{}).defaultFontFamily||"times",We=Object.assign({},Cee,rt.genericFontFamilies||{}),it=null,ft=null,ue=0;ue<Ve.length;++ue)if(We[(it=ww(Ve[ue])).family]&&(it.family=We[it.family]),Ue.hasOwnProperty(it.family)){ft=Ue[it.family];break}if(!(ft=ft||Ue[Ye]))throw new Error("Could not find a font-family for the rule '"+yC(it)+"' and default family '"+Ye+"'.");if(ft=function(Ke,Qe){if(Qe[Ke])return Qe[Ke];var ht=L2[Ke],Dt=ht<=L2.normal?-1:1,yt=gC(Qe,FD,ht,Dt);if(!yt)throw new Error("Could not find a matching font-stretch value for "+Ke);return yt}(it.stretch,ft),ft=function(Ke,Qe){if(Qe[Ke])return Qe[Ke];for(var ht=LD[Ke],Dt=0;Dt<ht.length;++Dt)if(Qe[ht[Dt]])return Qe[ht[Dt]];throw new Error("Could not find a matching font-style for "+Ke)}(it.style,ft),!(ft=function(Ke,Qe){if(Qe[Ke])return Qe[Ke];if(Ke===400&&Qe[500])return Qe[500];if(Ke===500&&Qe[400])return Qe[400];var ht=kee[Ke],Dt=gC(Qe,BD,ht,Ke<400?-1:1);if(!Dt)throw new Error("Could not find a matching font-weight for value "+Ke);return Dt}(it.weight,ft)))throw new Error("Failed to resolve a font for the rule '"+yC(it)+"'.");return ft}(Z,me);this.pdf.setFont($.ref.name,$.ref.style)}else{var ke="";(pe==="bold"||parseInt(pe,10)>=700||Oe==="bold")&&(ke="bold"),Oe==="italic"&&(ke+="italic"),ke.length===0&&(ke="normal");for(var ce="",Ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Fe=0;Fe<te.length;Fe++){if(this.pdf.internal.getFont(te[Fe],ke,{noFallback:!0,disableWarning:!0})!==void 0){ce=te[Fe];break}if(ke==="bolditalic"&&this.pdf.internal.getFont(te[Fe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ce=te[Fe],ke="bold";else if(this.pdf.internal.getFont(te[Fe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ce=te[Fe],ke="normal";break}}if(ce===""){for(var Le=0;Le<te.length;Le++)if(Ie[te[Le]]){ce=Ie[te[Le]];break}}ce=ce===""?"Times":ce,this.pdf.setFont(ce,ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ae){this.ctx.globalCompositeOperation=ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ae){this.ctx.globalAlpha=ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ae){this.ctx.lineDashOffset=ae,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ae){this.ctx.lineDash=ae,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ae){this.ctx.ignoreClearRect=!!ae}})};h.prototype.setLineDash=function(z){this.lineDash=z},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){j.call(this,"fill",!1)},h.prototype.stroke=function(){j.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(z,Y){if(isNaN(z)||isNaN(Y))throw qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(z,Y));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(z,Y)},h.prototype.closePath=function(){var z=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Or(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){z=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(z.x,z.y)},h.prototype.lineTo=function(z,Y){if(isNaN(z)||isNaN(Y))throw qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(z,Y));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},h.prototype.quadraticCurveTo=function(z,Y,J,ne){if(isNaN(J)||isNaN(ne)||isNaN(z)||isNaN(Y))throw qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new o(J,ne)),G=this.ctx.transform.applyToPoint(new o(z,Y));this.path.push({type:"qct",x1:G.x,y1:G.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},h.prototype.bezierCurveTo=function(z,Y,J,ne,le,G){if(isNaN(le)||isNaN(G)||isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne))throw qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(le,G)),xe=this.ctx.transform.applyToPoint(new o(z,Y)),Se=this.ctx.transform.applyToPoint(new o(J,ne));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Se.x,y2:Se.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},h.prototype.arc=function(z,Y,J,ne,le,G){if(isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne)||isNaN(le))throw qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(G=!!G,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(z,Y));z=he.x,Y=he.y;var xe=this.ctx.transform.applyToPoint(new o(0,J)),Se=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(xe.x-Se.x,2)+Math.pow(xe.y-Se.y,2))}Math.abs(le-ne)>=2*Math.PI&&(ne=0,le=2*Math.PI),this.path.push({type:"arc",x:z,y:Y,radius:J,startAngle:ne,endAngle:le,counterclockwise:G})},h.prototype.arcTo=function(z,Y,J,ne,le){throw new Error("arcTo not implemented.")},h.prototype.rect=function(z,Y,J,ne){if(isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne))throw qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,Y),this.lineTo(z+J,Y),this.lineTo(z+J,Y+ne),this.lineTo(z,Y+ne),this.lineTo(z,Y),this.lineTo(z+J,Y),this.lineTo(z,Y)},h.prototype.fillRect=function(z,Y,J,ne){if(isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne))throw qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,Y,J,ne),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},h.prototype.strokeRect=function(z,Y,J,ne){if(isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne))throw qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(z,Y,J,ne),this.stroke())},h.prototype.clearRect=function(z,Y,J,ne){if(isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne))throw qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,Y,J,ne))},h.prototype.save=function(z){z=typeof z!="boolean"||z;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(z){var Y,J,ne,le;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))Y=0,J=0,ne=0,le=0;else{var G=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(G!==null)Y=parseInt(G[1]),J=parseInt(G[2]),ne=parseInt(G[3]),le=1;else if((G=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)Y=parseInt(G[1]),J=parseInt(G[2]),ne=parseInt(G[3]),le=parseFloat(G[4]);else{if(le=1,typeof z=="string"&&z.charAt(0)!=="#"){var he=new OD(z);z=he.ok?he.toHex():"#000000"}z.length===4?(Y=z.substring(1,2),Y+=Y,J=z.substring(2,3),J+=J,ne=z.substring(3,4),ne+=ne):(Y=z.substring(1,3),J=z.substring(3,5),ne=z.substring(5,7)),Y=parseInt(Y,16),J=parseInt(J,16),ne=parseInt(ne,16)}}return{r:Y,g:J,b:ne,a:le,style:z}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(z,Y,J,ne){if(isNaN(Y)||isNaN(J)||typeof z!="string")throw qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!f.call(this)){var le=C(this.ctx.transform.rotation),G=this.ctx.transform.scaleX;k.call(this,{text:z,x:Y,y:J,scale:G,angle:le,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(z,Y,J,ne){if(isNaN(Y)||isNaN(J)||typeof z!="string")throw qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){ne=isNaN(ne)?void 0:ne;var le=C(this.ctx.transform.rotation),G=this.ctx.transform.scaleX;k.call(this,{text:z,x:Y,y:J,scale:G,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(z){if(typeof z!="string")throw qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,J=this.pdf.internal.scaleFactor,ne=Y.internal.getFontSize(),le=Y.getStringUnitWidth(z)*ne/Y.internal.scaleFactor;return new function(G){var he=(G=G||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:le*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(z,Y){if(isNaN(z)||isNaN(Y))throw qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(z,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(z){if(isNaN(z))throw qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new c(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.translate=function(z,Y){if(isNaN(z)||isNaN(Y))throw qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,z,Y);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(z,Y,J,ne,le,G){if(isNaN(z)||isNaN(Y)||isNaN(J)||isNaN(ne)||isNaN(le)||isNaN(G))throw qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new c(z,Y,J,ne,le,G);this.ctx.transform=this.ctx.transform.multiply(he)},h.prototype.setTransform=function(z,Y,J,ne,le,G){z=isNaN(z)?1:z,Y=isNaN(Y)?0:Y,J=isNaN(J)?0:J,ne=isNaN(ne)?1:ne,le=isNaN(le)?0:le,G=isNaN(G)?0:G,this.ctx.transform=new c(z,Y,J,ne,le,G)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(z,Y,J,ne,le,G,he,xe,Se){var K=this.pdf.getImageProperties(z),we=1,Te=1,ae=1,H=1;ne!==void 0&&xe!==void 0&&(ae=xe/ne,H=Se/le,we=K.width/ne*xe/ne,Te=K.height/le*Se/le),G===void 0&&(G=Y,he=J,Y=0,J=0),ne!==void 0&&xe===void 0&&(xe=ne,Se=le),ne===void 0&&xe===void 0&&(xe=K.width,Se=K.height);for(var Oe,pe=this.ctx.transform.decompose(),je=C(pe.rotate.shx),_e=new c,W=(_e=(_e=(_e=_e.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale)).applyToRectangle(new l(G-Y*ae,he-J*H,ne*we,le*Te)),te=x.call(this,W),Z=[],me=0;me<te.length;me+=1)Z.indexOf(te[me])===-1&&Z.push(te[me]);if(b(Z),this.autoPaging)for(var $=Z[0],ke=Z[Z.length-1],ce=$;ce<ke+1;ce++){this.pdf.setPage(ce);var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fe=ce===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=ce===1?0:Le+(ce-2)*Ue;if(this.ctx.clip_path.length!==0){var rt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Oe,this.posX+this.margin[3],-Ve+Fe+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=rt}var Ye=JSON.parse(JSON.stringify(W));Ye=v([Ye],this.posX+this.margin[3],-Ve+Fe+this.ctx.prevPageLastElemOffset)[0];var We=(ce>$||ce<ke)&&y.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,Ue,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Ye.x,Ye.y,Ye.w,Ye.h,null,null,je),We&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",W.x,W.y,W.w,W.h,null,null,je)};var x=function(z,Y,J){var ne=[];Y=Y||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":ne.push(Math.floor((z.y+le)/J)+1);break;case"arc":ne.push(Math.floor((z.y+le-z.radius)/J)+1),ne.push(Math.floor((z.y+le+z.radius)/J)+1);break;case"qct":var G=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);ne.push(Math.floor((G.y+le)/J)+1),ne.push(Math.floor((G.y+G.h+le)/J)+1);break;case"bct":var he=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);ne.push(Math.floor((he.y+le)/J)+1),ne.push(Math.floor((he.y+he.h+le)/J)+1);break;case"rect":ne.push(Math.floor((z.y+le)/J)+1),ne.push(Math.floor((z.y+z.h+le)/J)+1)}for(var xe=0;xe<ne.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ne[xe];)p.call(this);return ne},p=function(){var z=this.fillStyle,Y=this.strokeStyle,J=this.font,ne=this.lineCap,le=this.lineWidth,G=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=Y,this.font=J,this.lineCap=ne,this.lineWidth=le,this.lineJoin=G},v=function(z,Y,J){for(var ne=0;ne<z.length;ne++)switch(z[ne].type){case"bct":z[ne].x2+=Y,z[ne].y2+=J;case"qct":z[ne].x1+=Y,z[ne].y1+=J;default:z[ne].x+=Y,z[ne].y+=J}return z},b=function(z){return z.sort(function(Y,J){return Y-J})},j=function(z,Y){for(var J,ne,le=this.fillStyle,G=this.strokeStyle,he=this.lineCap,xe=this.lineWidth,Se=Math.abs(xe*this.ctx.transform.scaleX),K=this.lineJoin,we=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),ae=[],H=0;H<Te.length;H++)if(Te[H].x!==void 0)for(var Oe=x.call(this,Te[H]),pe=0;pe<Oe.length;pe+=1)ae.indexOf(Oe[pe])===-1&&ae.push(Oe[pe]);for(var je=0;je<ae.length;je++)for(;this.pdf.internal.getNumberOfPages()<ae[je];)p.call(this);if(b(ae),this.autoPaging)for(var _e=ae[0],W=ae[ae.length-1],te=_e;te<W+1;te++){this.pdf.setPage(te),this.fillStyle=le,this.strokeStyle=G,this.lineCap=he,this.lineWidth=Se,this.lineJoin=K;var Z=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],me=te===1?this.posY+this.margin[0]:this.margin[0],$=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ce=te===1?0:$+(te-2)*ke;if(this.ctx.clip_path.length!==0){var Ie=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(J,this.posX+this.margin[3],-ce+me+this.ctx.prevPageLastElemOffset),S.call(this,z,!0),this.path=Ie}if(ne=JSON.parse(JSON.stringify(we)),this.path=v(ne,this.posX+this.margin[3],-ce+me+this.ctx.prevPageLastElemOffset),Y===!1||te===0){var Fe=(te>_e||te<W)&&y.call(this);Fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Z,ke,null).clip().discardPath()),S.call(this,z,Y),Fe&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Se,S.call(this,z,Y),this.lineWidth=xe;this.path=we},S=function(z,Y){if((z!=="stroke"||Y||!g.call(this))&&(z==="stroke"||Y||!f.call(this))){for(var J,ne,le=[],G=this.path,he=0;he<G.length;he++){var xe=G[he];switch(xe.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:xe,deltas:[],abs:[]});break;case"lt":var Se=le.length;if(G[he-1]&&!isNaN(G[he-1].x)&&(J=[xe.x-G[he-1].x,xe.y-G[he-1].y],Se>0)){for(;Se>=0;Se--)if(le[Se-1].close!==!0&&le[Se-1].begin!==!0){le[Se-1].deltas.push(J),le[Se-1].abs.push(xe);break}}break;case"bct":J=[xe.x1-G[he-1].x,xe.y1-G[he-1].y,xe.x2-G[he-1].x,xe.y2-G[he-1].y,xe.x-G[he-1].x,xe.y-G[he-1].y],le[le.length-1].deltas.push(J);break;case"qct":var K=G[he-1].x+2/3*(xe.x1-G[he-1].x),we=G[he-1].y+2/3*(xe.y1-G[he-1].y),Te=xe.x+2/3*(xe.x1-xe.x),ae=xe.y+2/3*(xe.y1-xe.y),H=xe.x,Oe=xe.y;J=[K-G[he-1].x,we-G[he-1].y,Te-G[he-1].x,ae-G[he-1].y,H-G[he-1].x,Oe-G[he-1].y],le[le.length-1].deltas.push(J);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(xe)}}ne=Y?null:z==="stroke"?"stroke":"fill";for(var pe=!1,je=0;je<le.length;je++)if(le[je].arc)for(var _e=le[je].abs,W=0;W<_e.length;W++){var te=_e[W];te.type==="arc"?I.call(this,te.x,te.y,te.radius,te.startAngle,te.endAngle,te.counterclockwise,void 0,Y,!pe):E.call(this,te.x,te.y),pe=!0}else if(le[je].close===!0)this.pdf.internal.out("h"),pe=!1;else if(le[je].begin!==!0){var Z=le[je].start.x,me=le[je].start.y;A.call(this,le[je].deltas,Z,me),pe=!0}ne&&O.call(this,ne),Y&&L.call(this)}},P=function(z){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-J;case"top":return z+Y-J;case"hanging":return z+Y-2*J;case"middle":return z+Y/2-J;default:return z}},M=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(Y,J){this.colorStops.push([Y,J])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(z,Y,J,ne,le,G,he,xe,Se){for(var K=U.call(this,J,ne,le,G),we=0;we<K.length;we++){var Te=K[we];we===0&&(Se?T.call(this,Te.x1+z,Te.y1+Y):E.call(this,Te.x1+z,Te.y1+Y)),q.call(this,z,Y,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}xe?L.call(this):O.call(this,he)},O=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(z,Y){this.pdf.internal.out(r(z)+" "+n(Y)+" m")},k=function(z){var Y;switch(z.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var J=this.pdf.getTextDimensions(z.text),ne=P.call(this,z.y),le=M.call(this,ne)-J.h,G=this.ctx.transform.applyToPoint(new o(z.x,ne)),he=this.ctx.transform.decompose(),xe=new c;xe=(xe=(xe=xe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Se,K,we,Te=this.ctx.transform.applyToRectangle(new l(z.x,ne,J.w,J.h)),ae=xe.applyToRectangle(new l(z.x,le,J.w,J.h)),H=x.call(this,ae),Oe=[],pe=0;pe<H.length;pe+=1)Oe.indexOf(H[pe])===-1&&Oe.push(H[pe]);if(b(Oe),this.autoPaging)for(var je=Oe[0],_e=Oe[Oe.length-1],W=je;W<_e+1;W++){this.pdf.setPage(W);var te=W===1?this.posY+this.margin[0]:this.margin[0],Z=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],me=this.pdf.internal.pageSize.height-this.margin[2],$=me-this.margin[0],ke=this.pdf.internal.pageSize.width-this.margin[1],ce=ke-this.margin[3],Ie=W===1?0:Z+(W-2)*$;if(this.ctx.clip_path.length!==0){var Fe=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Se,this.posX+this.margin[3],-1*Ie+te),S.call(this,"fill",!0),this.path=Fe}var Le=v([JSON.parse(JSON.stringify(ae))],this.posX+this.margin[3],-Ie+te+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*z.scale),we=this.lineWidth,this.lineWidth=we*z.scale);var Ue=this.autoPaging!=="text";if(Ue||Le.y+Le.h<=me){if(Ue||Le.y>=te&&Le.x<=ke){var Ve=Ue?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||ke-Le.x)[0],rt=v([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-Ie+te+this.ctx.prevPageLastElemOffset)[0],Ye=Ue&&(W>je||W<_e)&&y.call(this);Ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,$,null).clip().discardPath()),this.pdf.text(Ve,rt.x,rt.y,{angle:z.angle,align:Y,renderingMode:z.renderingMode}),Ye&&this.pdf.restoreGraphicsState()}}else Le.y<me&&(this.ctx.prevPageLastElemOffset+=me-Le.y);z.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=we)}else z.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*z.scale),we=this.lineWidth,this.lineWidth=we*z.scale),this.pdf.text(z.text,G.x+this.posX,G.y+this.posY,{angle:z.angle,align:Y,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=we)},E=function(z,Y,J,ne){J=J||0,ne=ne||0,this.pdf.internal.out(r(z+J)+" "+n(Y+ne)+" l")},A=function(z,Y,J){return this.pdf.lines(z,Y,J,null,null)},q=function(z,Y,J,ne,le,G,he,xe){this.pdf.internal.out([t(i(J+z)),t(a(ne+Y)),t(i(le+z)),t(a(G+Y)),t(i(he+z)),t(a(xe+Y)),"c"].join(" "))},U=function(z,Y,J,ne){for(var le=2*Math.PI,G=Math.PI/2;Y>J;)Y-=le;var he=Math.abs(J-Y);he<le&&ne&&(he=le-he);for(var xe=[],Se=ne?-1:1,K=Y;he>1e-5;){var we=K+Se*Math.min(he,G);xe.push(R.call(this,z,K,we)),he-=Math.abs(we-K),K=we}return xe},R=function(z,Y,J){var ne=(J-Y)/2,le=z*Math.cos(ne),G=z*Math.sin(ne),he=le,xe=-G,Se=he*he+xe*xe,K=Se+he*le+xe*G,we=4/3*(Math.sqrt(2*Se*K)-K)/(he*G-xe*le),Te=he-we*xe,ae=xe+we*he,H=Te,Oe=-ae,pe=ne+Y,je=Math.cos(pe),_e=Math.sin(pe);return{x1:z*Math.cos(Y),y1:z*Math.sin(Y),x2:Te*je-ae*_e,y2:Te*_e+ae*je,x3:H*je-Oe*_e,y3:H*_e+Oe*je,x4:z*Math.cos(J),y4:z*Math.sin(J)}},C=function(z){return 180*z/Math.PI},F=function(z,Y,J,ne,le,G){var he=z+.5*(J-z),xe=Y+.5*(ne-Y),Se=le+.5*(J-le),K=G+.5*(ne-G),we=Math.min(z,le,he,Se),Te=Math.max(z,le,he,Se),ae=Math.min(Y,G,xe,K),H=Math.max(Y,G,xe,K);return new l(we,ae,Te-we,H-ae)},X=function(z,Y,J,ne,le,G,he,xe){var Se,K,we,Te,ae,H,Oe,pe,je,_e,W,te,Z,me,$=J-z,ke=ne-Y,ce=le-J,Ie=G-ne,Fe=he-le,Le=xe-G;for(K=0;K<41;K++)je=(Oe=(we=z+(Se=K/40)*$)+Se*((ae=J+Se*ce)-we))+Se*(ae+Se*(le+Se*Fe-ae)-Oe),_e=(pe=(Te=Y+Se*ke)+Se*((H=ne+Se*Ie)-Te))+Se*(H+Se*(G+Se*Le-H)-pe),K==0?(W=je,te=_e,Z=je,me=_e):(W=Math.min(W,je),te=Math.min(te,_e),Z=Math.max(Z,je),me=Math.max(me,_e));return new l(Math.round(W),Math.round(te),Math.round(Z-W),Math.round(me-te))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,Y,J=(z=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:Y}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Tt.API),function(e){var t=function(o){var l,c,d,u,h,m,f,g,y,x;for(c=[],d=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(h=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(m=(h=((h=((h=((h=(h-(x=h%85))/85)-(y=h%85))/85)-(g=h%85))/85)-(f=h%85))/85)%85,c.push(m+33,f+33,g+33,y+33,x+33)):c.push(122);return function(p,v){for(var b=v;b>0;b--)p.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,d,u,h,m=String,f="length",g=255,y="charCodeAt",x="slice",p="replace";for(o[x](-2),o=o[x](0,-2)[p](/\s/g,"")[p]("z","!!!!!"),d=[],u=0,h=(o+=l="uuuuu"[x](o[f]%5||5))[f];h>u;u+=5)c=52200625*(o[y](u)-33)+614125*(o[y](u+1)-33)+7225*(o[y](u+2)-33)+85*(o[y](u+3)-33)+(o[y](u+4)-33),d.push(g&c>>24,g&c>>16,g&c>>8,g&c);return function(v,b){for(var j=b;j>0;j--)v.pop()}(d,l[f]),m.fromCharCode.apply(m,d)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=O2(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,l){var c=0,d=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(Tt.API),function(e){e.loadFile=function(t,r,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,m=0,f=function(g){var y=g.length,x=[],p=String.fromCharCode;for(m=0;m<y;m+=1)x.push(p(255&g.charCodeAt(m)));return x.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)}(i,a,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Tt.API),function(e){function t(){return(Zt.html2canvas?Promise.resolve(Zt.html2canvas):xh(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Zt.DOMPurify?Promise.resolve(Zt.DOMPurify):xh(()=>import("./purify.es-B6FQ9oRL.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Or(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var d=document.createElement(l);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},a=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(l(h,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(d){return this.set({src:i("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var g=u[f],y=g.src.find(function(x){return x.format==="truetype"});y&&d.addFont(y.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,u){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(u,h){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return d.updateProgress(null,u),m}).then(u,h).then(function(m){return d.updateProgress(1),m})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),m=d.call(h,l,c);return o.convert(m,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Tt.getPageSize=function(l,c,d){if(Or(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var h,m=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var g,y=0,x=0;if(f.hasOwnProperty(m))y=f[m][1]/h,x=f[m][0]/h;else try{y=d[1],x=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",x>y&&(g=x,x=y,y=g);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",y>x&&(g=x,x=y,y=g)}return{width:x,height:y,unit:c,k:h,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(ww):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}}(Tt.API),Tt.API.addJS=function(e){return wC=e,this.internal.events.subscribe("postPutResources",function(){Lv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Lv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+wC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Lv!==void 0&&bC!==void 0&&this.internal.out("/Names <</JavaScript "+Lv+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(a=0;a<d;a++){var h=r.internal.newObject();u.push(h);var m=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<u.length;a++)r.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(Tt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,a,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(h){for(var m,f=256*h.charCodeAt(4)+h.charCodeAt(5),g=h.length,y={width:0,height:0,numcomponents:1},x=4;x<g;x+=2){if(x+=f,t.indexOf(h.charCodeAt(x+1))!==-1){m=256*h.charCodeAt(x+5)+h.charCodeAt(x+6),y={width:256*h.charCodeAt(x+7)+h.charCodeAt(x+8),height:m,numcomponents:h.charCodeAt(x+9)};break}f=256*h.charCodeAt(x+2)+h.charCodeAt(x+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:i}}return u}}(Tt.API),Tt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=fee(e,{checkCrc:!0}),o=a.width,l=a.height,c=a.channels,d=a.palette,u=a.depth;i=d&&c===1?function(I){for(var O=I.width,L=I.height,T=I.data,k=I.palette,E=I.depth,A=!1,q=[],U=[],R=void 0,C=!1,F=0,X=0;X<k.length;X++){var re=Sk(k[X],4),z=re[0],Y=re[1],J=re[2],ne=re[3];q.push(z,Y,J),ne!=null&&(ne===0?(F++,U.length<1&&U.push(X)):ne<255&&(C=!0))}if(C||F>1){A=!0,U=void 0;var le=O*L;R=new Uint8Array(le);for(var G=new DataView(T.buffer),he=0;he<le;he++){var xe=jw(G,he,E),Se=Sk(k[xe],4)[3];R[he]=Se}}else F===0&&(U=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:A?8:void 0,colorBytes:T,alphaBytes:R,needSMask:A,palette:q,mask:U}}(a):c===2||c===4?function(I){for(var O=I.data,L=I.width,T=I.height,k=I.channels,E=I.depth,A=k===2?"DeviceGray":"DeviceRGB",q=k-1,U=L*T,R=q,C=U*R,F=1*U,X=Math.ceil(C*E/8),re=Math.ceil(F*E/8),z=new Uint8Array(X),Y=new Uint8Array(re),J=new DataView(O.buffer),ne=new DataView(z.buffer),le=new DataView(Y.buffer),G=!1,he=0;he<U;he++){for(var xe=he*k,Se=0;Se<R;Se++)OC(ne,jw(J,xe+Se,E),he*R+Se,E);var K=jw(J,xe+R,E);K<(1<<E)-1&&(G=!0),OC(le,K,1*he,E)}return{colorSpace:A,colorsPerPixel:q,sMaskBitsPerComponent:G?E:void 0,colorBytes:z,alphaBytes:Y,needSMask:G}}(a):function(I){var O=I.data,L=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?function(T){for(var k=T.length,E=new Uint8Array(2*k),A=new DataView(E.buffer,E.byteOffset,E.byteLength),q=0;q<k;q++)A.setUint16(2*q,T[q],!1);return E}(O):O,needSMask:!1}}(a);var h,m,f,g=i,y=g.colorSpace,x=g.colorsPerPixel,p=g.sMaskBitsPerComponent,v=g.colorBytes,b=g.alphaBytes,j=g.needSMask,S=g.palette,P=g.mask,M=null;return n!==Tt.API.image_compression.NONE&&typeof O2=="function"?(M=function(I){var O;switch(I){case Tt.API.image_compression.FAST:O=11;break;case Tt.API.image_compression.MEDIUM:O=13;break;case Tt.API.image_compression.SLOW:O=14;break;default:O=12}return O}(n),h=this.decode.FLATE_DECODE,m="/Predictor ".concat(M," /Colors ").concat(x," /BitsPerComponent ").concat(u," /Columns ").concat(o),e=SC(v,Math.ceil(o*x*u/8),x,u,n),j&&(f=SC(b,Math.ceil(o*p/8),1,p,n))):(h=void 0,m=void 0,e=v,j&&(f=b)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:e,index:t,filter:h,decodeParameters:m,transparency:P,palette:S,sMask:f,predictor:M,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:p,colorSpace:y}}},function(e){e.processGIF89A=function(t,r,n,i){var a=new Mee(t),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new _w(100).encode(d,100);return e.processJPEG.call(this,u,r,n,i)},e.processGIF87A=e.processGIF89A}(Tt.API),Na.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Na.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){qr.log("bit decode error:"+r)}},Na.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Na.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=a>>4,c=15&a,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Na.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Na.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,d=a>>15?255:0,u=n*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Na.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Na.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Na.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},Na.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,i){var a=new Na(t,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new _w(100).encode(c,100);return e.processJPEG.call(this,d,r,n,i)}}(Tt.API),AC.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,i){var a=new AC(t),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new _w(100).encode(c,100);return e.processJPEG.call(this,d,r,n,i)}}(Tt.API),Tt.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,d=0;d<i;d+=4){var u=n[d],h=n[d+1],m=n[d+2],f=n[d+3];a[l++]=u,a[l++]=h,a[l++]=m,o[c++]=f}var g=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Tt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hu=Tt.API,Fv=Hu.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,m=0,f=e.length,g=0,y=l[0]||c,x=[];for(r=0;r<f;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(m=h&&Or(d[n])==="object"&&!isNaN(parseInt(d[n][g],10))?d[n][g]/u:0,x.push((l[n]||y)/c+m)),g=n;return x},NC=Hu.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Hu.processArabic&&(e=Hu.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:Fv.apply(this,arguments).reduce(function(a,o){return a+o},0)},jC=function(e,t,r,n){for(var i=[],a=0,o=e.length,l=0;a!==o&&l+t[a]<r;)l+=t[a],a++;i.push(e.slice(0,a));var c=a;for(l=0;a!==o;)l+t[a]>n&&(i.push(e.slice(c,a)),l=0,c=a),l+=t[a],a++;return c!==a&&i.push(e.slice(c,a)),i},_C=function(e,t,r){r||(r={});var n,i,a,o,l,c,d,u=[],h=[u],m=r.textIndent||0,f=0,g=0,y=e.split(" "),x=Fv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var p=Array(c).join(" "),v=[];y.map(function(j){(j=j.split(/\s*\n/)).length>1?v=v.concat(j.map(function(S,P){return(P&&S.length?`
`:"")+S})):v.push(j[0])}),y=v,c=NC.apply(this,[p,r])}for(a=0,o=y.length;a<o;a++){var b=0;if(n=y[a],c&&n[0]==`
`&&(n=n.substr(1),b=1),m+f+(g=(i=Fv.apply(this,[n,r])).reduce(function(j,S){return j+S},0))>t||b){if(g>t){for(l=jC.apply(this,[n,i,t-(m+f),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);g=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(j,S){return j+S},0)}else u=[n];h.push(u),m=g+c,f=x}else u.push(n),m+=f+g,f=x}return d=c?function(j,S){return(S?p:"")+j.join(" ")}:function(j){return j.join(" ")},h.map(d)},Hu.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return h.metadata[m]?{widths:h.metadata[m].widths||{0:1},kerning:h.metadata[m].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(_C.apply(this,[n[l],o,a]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=t[a],i[t[a]]=r[a];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=e.__fontmetrics__.compress=function(m){var f,g,y,x,p=["{"];for(var v in m){if(f=m[v],isNaN(parseInt(v,10))?g="'"+v+"'":(v=parseInt(v,10),g=(g=o(v).slice(2)).slice(0,-1)+i[g.slice(-1)]),typeof f=="number")f<0?(y=o(f).slice(3),x="-"):(y=o(f).slice(2),x=""),y=x+y.slice(0,-1)+i[y.slice(-1)];else{if(Or(f)!=="object")throw new Error("Don't know what to do with value type "+Or(f)+".");y=l(f)}p.push(g+y)}return p.push("}"),p.join("")},c=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,g,y,x,p={},v=1,b=p,j=[],S="",P="",M=m.length-1,I=1;I<M;I+=1)(x=m[I])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(x):x=="{"?(j.push([b,y]),b={},y=void 0):x=="}"?((g=j.pop())[0][g[1]]=b,y=void 0,b=g[0]):x=="-"?v=-1:y===void 0?n.hasOwnProperty(x)?(S+=n[x],y=parseInt(S,16)*v,v=1,S=""):S+=x:n.hasOwnProperty(x)?(P+=n[x],b[y]=parseInt(P,16)*v,v=1,y=void 0,P=""):P+=x;return p},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var f=m.font,g=h.Unicode[f.postScriptName];g&&(f.metadata.Unicode={},f.metadata.Unicode.widths=g.widths,f.metadata.Unicode.kerning=g.kerning);var y=u.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(Tt.API),function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(dy(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Tt),Tt.API.addSvgAsImage=function(e,t,r,n,i,a,o,l){if(isNaN(t)||isNaN(r))throw qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(Zt.canvg?Promise.resolve(Zt.canvg):xh(()=>import("./index.es-cIAw46sz.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,r,n,i,o,l)})},Tt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},Tt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(g,y){var x,p=!1;for(x=0;x<g.length;x+=1)g[x]===y&&(p=!0);return p}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(h=0;h<f;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Or(e)==="object"){for(i in e)if(a=e[i],m(l,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&m(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(d=0;d<a.length;d+=1)if(n=!0,a[d].length===1&&typeof a[d][0]=="number")c.push(String(a[d]-1));else if(a[d].length>1){for(u=0;u<a[d].length;u+=1)typeof a[d][u]!="number"&&(n=!1);n===!0&&c.push([a[d][0]-1,a[d][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,y=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?y.push("/"+g+" /"+r[g].value):y.push("/"+g+" "+r[g].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Tt.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=a.length;h<m;++h){if(l=o.metadata.characterToGlyph(a.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(a){var o,l,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(a).sort(function(f,g){return f-g})).length;h<m;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(d=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",g=0;g<m.length;g++)f+=String.fromCharCode(m[g]);var y=d();u({data:f,addLength1:!0,objectId:y}),c("endobj");var x=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var p=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Gu(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var v=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Gu(l.fontName)),c("/FontDescriptor "+p+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Gu(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",f=0;f<h.length;f++)m+=String.fromCharCode(h[f]);var g=d();u({data:m,addLength1:!0,objectId:g}),c("endobj");var y=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var x=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Gu(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var p=0;p<l.metadata.hmtx.widths.length;p++)l.metadata.hmtx.widths[p]=parseInt(l.metadata.hmtx.widths[p]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Gu(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,d=a.y,u=a.options||{},h=a.mutex||{},m=h.pdfEscape,f=h.activeFontKey,g=h.fonts,y=f,x="",p=0,v="",b=g[y].encoding;if(g[y].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(v=l,y=f,Array.isArray(l)&&(v=l[0]),p=0;p<v.length;p+=1)g[y].metadata.hasOwnProperty("cmap")&&(o=g[y].metadata.cmap.unicode.codeMap[v[p].charCodeAt(0)]),o||v[p].charCodeAt(0)<256&&g[y].metadata.hasOwnProperty("Unicode")?x+=v[p]:x+="";var j="";return parseInt(y.slice(1))<14||b==="WinAnsiEncoding"?j=m(x,y).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(j=r(x,g[y])),h.isHex=!0,{text:j,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([i(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(i(Object.assign({},c,{text:o[d]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(Tt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Tt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,a,o,l,c,d,u,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,b=0;this.__bidiEngine__={};var j=function(T){var k=T.charCodeAt(),E=k>>8,A=y[E];return A!==void 0?h[256*A+(255&k)]:E===252||E===253?"AL":p.test(E)?"L":E===8?"R":"N"},S=function(T){for(var k,E=0;E<T.length;E++){if((k=j(T.charAt(E)))==="L")return!1;if(k==="R")return!0}return!1},P=function(T,k,E,A){var q,U,R,C,F=k[A];switch(F){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"N":case"AN":break;case"EN":v&&(F="AN");break;case"AL":v=!0,F="R";break;case"WS":case"BN":F="N";break;case"CS":A<1||A+1>=k.length||(q=E[A-1])!=="EN"&&q!=="AN"||(U=k[A+1])!=="EN"&&U!=="AN"?F="N":v&&(U="AN"),F=U===q?U:"N";break;case"ES":F=(q=A>0?E[A-1]:"B")==="EN"&&A+1<k.length&&k[A+1]==="EN"?"EN":"N";break;case"ET":if(A>0&&E[A-1]==="EN"){F="EN";break}if(v){F="N";break}for(R=A+1,C=k.length;R<C&&k[R]==="ET";)R++;F=R<C&&k[R]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(C=k.length,R=A+1;R<C&&k[R]==="NSM";)R++;if(R<C){var X=T[A],re=X>=1425&&X<=2303||X===64286;if(q=k[R],re&&(q==="R"||q==="AL")){F="R";break}}}F=A<1||(q=k[A-1])==="B"?"N":E[A-1];break;case"B":v=!1,i=!0,F=b;break;case"S":a=!0,F="N"}return F},M=function(T,k,E){var A=T.split("");return E&&I(A,E,{hiLevel:b}),A.reverse(),k&&k.reverse(),A.join("")},I=function(T,k,E){var A,q,U,R,C,F=-1,X=T.length,re=0,z=[],Y=b?f:m,J=[];for(v=!1,i=!1,a=!1,q=0;q<X;q++)J[q]=j(T[q]);for(U=0;U<X;U++){if(C=re,z[U]=P(T,J,z,U),A=240&(re=Y[C][g[z[U]]]),re&=15,k[U]=R=Y[re][5],A>0)if(A===16){for(q=F;q<U;q++)k[q]=1;F=-1}else F=-1;if(Y[re][6])F===-1&&(F=U);else if(F>-1){for(q=F;q<U;q++)k[q]=R;F=-1}J[U]==="B"&&(k[U]=0),E.hiLevel|=R}a&&function(ne,le,G){for(var he=0;he<G;he++)if(ne[he]==="S"){le[he]=b;for(var xe=he-1;xe>=0&&ne[xe]==="WS";xe--)le[xe]=b}}(J,k,X)},O=function(T,k,E,A,q){if(!(q.hiLevel<T)){if(T===1&&b===1&&!i)return k.reverse(),void(E&&E.reverse());for(var U,R,C,F,X=k.length,re=0;re<X;){if(A[re]>=T){for(C=re+1;C<X&&A[C]>=T;)C++;for(F=re,R=C-1;F<R;F++,R--)U=k[F],k[F]=k[R],k[R]=U,E&&(U=E[F],E[F]=E[R],E[R]=U);re=C}re++}}},L=function(T,k,E){var A=T.split(""),q={hiLevel:b};return E||(E=[]),I(A,E,q),function(U,R,C){if(C.hiLevel!==0&&u)for(var F,X=0;X<U.length;X++)R[X]===1&&(F=x.indexOf(U[X]))>=0&&(U[X]=x[F+1])}(A,E,q),O(2,A,k,E,q),O(1,A,k,E,q),A.join("")};return this.__bidiEngine__.doBidiReorder=function(T,k,E){if(function(q,U){if(U)for(var R=0;R<q.length;R++)U[R]=R;l===void 0&&(l=S(q)),d===void 0&&(d=S(q))}(T,k),o||!c||d)if(o&&c&&l^d)b=l?1:0,T=M(T,k,E);else if(!o&&c&&d)b=l?1:0,T=L(T,k,E),T=M(T,k);else if(!o||l||c||d){if(o&&!c&&l^d)T=M(T,k),l?(b=0,T=L(T,k,E)):(b=1,T=L(T,k,E),T=M(T,k));else if(o&&l&&!c&&d)b=1,T=L(T,k,E),T=M(T,k);else if(!o&&!c&&l^d){var A=u;l?(b=1,T=L(T,k,E),b=0,u=!1,T=L(T,k,E),u=A):(b=0,T=L(T,k,E),T=M(T,k),b=1,u=!1,T=L(T,k,E),u=A,T=M(T,k))}}else b=0,T=L(T,k,E);else b=l?1:0,T=L(T,k,E);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Tt),Tt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Pc(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Jee(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Ree(this.contents),this.head=new Lee(this),this.name=new zee(this),this.cmap=new UD(this),this.toUnicode={},this.hhea=new Fee(this),this.maxp=new Hee(this),this.hmtx=new Wee(this),this.post=new qee(this),this.os2=new Bee(this),this.loca=new Gee(this),this.glyf=new Vee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,a,o,l;for(o=0,a=0,l=(t=""+t).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Va,Pc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,a,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)r=t[n],a.push(this.writeByte(r));return a},e}(),Ree=function(){var e;function t(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,a,o,l,c,d,u,h,m,f,g,y;for(y in f=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),o=Math.floor(h/c),u=16*f-h,(i=new Pc).writeInt(this.scalarType),i.writeShort(f),i.writeShort(h),i.writeShort(o),i.writeShort(u),a=16*f,d=i.pos+a,l=null,g=[],r)for(m=r[y],i.writeString(y),i.writeInt(e(m)),i.writeInt(d),i.writeInt(m.length),g=g.concat(m),y==="head"&&(l=d),d+=m.length;d%4;)g.push(0),d++;return i.write(g),n=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(n),i.data},e=function(r){var n,i,a,o;for(r=zD.call(r);r.length%4;)r.push(0);for(a=new Pc(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),Iee={}.hasOwnProperty,No=function(e,t){for(var r in t)Iee.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Va=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Lee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Pc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),DC=function(){function e(t,r){var n,i,a,o,l,c,d,u,h,m,f,g,y,x,p,v,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),m=f/2,t.pos+=6,a=function(){var j,S;for(S=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)S.push(t.readUInt16());return S}(),t.pos+=2,y=function(){var j,S;for(S=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)S.push(t.readUInt16());return S}(),d=function(){var j,S;for(S=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)S.push(t.readUInt16());return S}(),u=function(){var j,S;for(S=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)S.push(t.readUInt16());return S}(),i=(this.length-t.pos+this.offset)/2,l=function(){var j,S;for(S=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)S.push(t.readUInt16());return S}(),c=p=0,b=a.length;p<b;c=++p)for(x=a[c],n=v=g=y[c];g<=x?v<=x:v>=x;n=g<=x?++v:--v)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-g)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,r){var n,i,a,o,l,c,d,u,h,m,f,g,y,x,p,v,b,j,S,P,M,I,O,L,T,k,E,A,q,U,R,C,F,X,re,z,Y,J,ne,le,G,he,xe,Se,K,we;switch(A=new Pc,o=Object.keys(t).sort(function(Te,ae){return Te-ae}),r){case"macroman":for(y=0,x=function(){var Te=[];for(g=0;g<256;++g)Te.push(0);return Te}(),v={0:0},a={},q=0,F=o.length;q<F;q++)v[xe=t[i=o[q]]]==null&&(v[xe]=++y),a[i]={old:t[i],new:v[t[i]]},x[i]=v[t[i]];return A.writeUInt16(1),A.writeUInt16(0),A.writeUInt32(12),A.writeUInt16(0),A.writeUInt16(262),A.writeUInt16(0),A.write(x),{charMap:a,subtable:A.data,maxGlyphID:y+1};case"unicode":for(k=[],h=[],b=0,v={},n={},p=d=null,U=0,X=o.length;U<X;U++)v[S=t[i=o[U]]]==null&&(v[S]=++b),n[i]={old:S,new:v[S]},l=v[S]-i,p!=null&&l===d||(p&&h.push(p),k.push(i),d=l),p=i;for(p&&h.push(p),h.push(65535),k.push(65535),L=2*(O=k.length),I=2*Math.pow(Math.log(O)/Math.LN2,2),m=Math.log(I/2)/Math.LN2,M=2*O-I,c=[],P=[],f=[],g=R=0,re=k.length;R<re;g=++R){if(T=k[g],u=h[g],T===65535){c.push(0),P.push(0);break}if(T-(E=n[T].new)>=32768)for(c.push(0),P.push(2*(f.length+O-g)),i=C=T;T<=u?C<=u:C>=u;i=T<=u?++C:--C)f.push(n[i].new);else c.push(E-T),P.push(0)}for(A.writeUInt16(3),A.writeUInt16(1),A.writeUInt32(12),A.writeUInt16(4),A.writeUInt16(16+8*O+2*f.length),A.writeUInt16(0),A.writeUInt16(L),A.writeUInt16(I),A.writeUInt16(m),A.writeUInt16(M),G=0,z=h.length;G<z;G++)i=h[G],A.writeUInt16(i);for(A.writeUInt16(0),he=0,Y=k.length;he<Y;he++)i=k[he],A.writeUInt16(i);for(Se=0,J=c.length;Se<J;Se++)l=c[Se],A.writeUInt16(l);for(K=0,ne=P.length;K<ne;K++)j=P[K],A.writeUInt16(j);for(we=0,le=f.length;we<le;we++)y=f[we],A.writeUInt16(y);return{charMap:n,subtable:A.data,maxGlyphID:b+1}}},e}(),UD=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new DC(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=DC.encode(t,r),(i=new Pc).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),Fee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Bee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),qee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),Uee=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},zee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,a,o,l,c,d,u,h,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},a=u=0,h=n.length;u<h;a=++u)i=n[a],t.pos=i.offset,d=t.readString(i.length),o=new Uee(d,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Hee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Wee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,a,o,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],r=d=0;0<=i?d<i:d>i;r=0<=i?++d:--d)u.push(t.readInt16());return u}(),this.widths=(function(){var d,u,h,m;for(m=[],d=0,u=(h=this.metrics).length;d<u;d++)a=h[d],m.push(a.advance);return m}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),zD=[].slice,Vee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,a,o,l,c,d,u,h;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new Pc(r.read(i))).readShort(),d=l.readShort(),h=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[t]=o===-1?new Kee(l,d,h,c,u):new Yee(l,o,d,h,c,u),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,a,o,l,c;for(o=[],a=[],l=0,c=r.length;l<c;l++)i=t[r[l]],a.push(o.length),i&&(o=o.concat(i.encode(n)));return a.push(o.length),{table:o,offsets:a}},e}(),Yee=function(){function e(t,r,n,i,a,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Kee=function(){function e(t,r,n,i,a){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Pc(zD.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Gee=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Va),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<n.length;++o)if(n[o]=i,a<r.length&&r[a]==o){++a,n[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var d=new Array(4*n.length),u=0;u<n.length;++u)d[4*u+3]=255&n[u],d[4*u+2]=(65280&n[u])>>8,d[4*u+1]=(16711680&n[u])>>16,d[4*u]=(4278190080&n[u])>>24;return d},e}(),Jee=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,a,o,l,c;for(i={},o=0,l=t.length;o<l;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))n=c[a],i[a]=n;return i},e.prototype.encode=function(t,r){var n,i,a,o,l,c,d,u,h,m,f,g,y,x,p;for(i in n=UD.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},p=n.charMap)f[(c=p[i]).old]=c.new;for(g in m=n.maxGlyphID,o)g in f||(f[g]=m++);return u=function(v){var b,j;for(b in j={},v)j[v[b]]=b;return j}(f),h=Object.keys(u).sort(function(v,b){return v-b}),y=function(){var v,b,j;for(j=[],v=0,b=h.length;v<b;v++)l=h[v],j.push(u[l]);return j}(),a=this.font.glyf.encode(o,y,f),d=this.font.loca.encode(a.offsets,y),x={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();Tt.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,a,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+r},t}();const HD=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:_t,AcroFormButton:Qn,AcroFormCheckBox:qm,AcroFormChoiceField:Ud,AcroFormComboBox:Hd,AcroFormEditBox:Fm,AcroFormListBox:zd,AcroFormPasswordField:Um,AcroFormPushButton:Bm,AcroFormRadioButton:Wd,AcroFormTextField:bc,GState:Np,ShadingPattern:Jl,TilingPattern:_d,default:Tt,jsPDF:Tt},Symbol.toStringTag,{value:"Module"})),tr={pageSize:"LETTER",sections:{showSupervisors:!0,showOfficers:!0,showSpecialAssignments:!0,showPTO:!0,showStaffingSummary:!1,showLogoSection:!0,showSpecialOccasions:!0},fontSizes:{header:12,sectionTitle:12,tableHeader:9,tableContent:9,footer:10,nameColumn:12.5,beatColumn:12.5,badgeColumn:12.5,notesColumn:12.5,ptoTimeColumn:10},columnOrder:{supervisors:"name-badge-position-unit",officers:"name-badge-beat-unit"},tableSettings:{rowHeight:6,cellPadding:3,showRowStriping:!0,compactMode:!0,borderWidth:1,columnSpacing:1,showVerticalLines:!0,columnWidths:{name:.35,beat:.08,badge:.1,unit:.1,notes:.35,assignment:.22,type:.15,time:.35}},colorSettings:{supervisorHeaderBgColor:"41,128,185",officerHeaderBgColor:"52,152,219",specialHeaderBgColor:"155,89,182",ptoHeaderBgColor:"243,156,18",headerTextColor:"255,255,255",officerTextColor:"0,0,0",supervisorTextColor:"0,0,0",specialAssignmentTextColor:"0,0,0",ptoTextColor:"0,0,0",evenRowColor:"255,255,255",oddRowColor:"248,249,250",primaryColor:"#2980b9",secondaryColor:"#3498db",accentColor:"#9b59b6",headerBgColor:"#2980b9"},pageSettings:{pageMargins:"20,20,20,20",pageSize:"LETTER",showPageNumbers:!0,compressPDF:!1}},zm={dark:[44,62,80],border:[222,226,230]},Vi=e=>{if(!e)return console.warn("parseColor: colorString is undefined or null, using default"),zm.dark;if(typeof e=="string"&&e.includes(","))try{const t=e.split(",").map(r=>parseInt(r.trim(),10));if(t.length===3&&t.every(r=>!isNaN(r)))return t}catch(t){console.warn("parseColor: Failed to parse RGB string:",e,t)}if(typeof e=="string"&&e.startsWith("#"))try{const t=e.replace("#","");if(t.length===3){const r=parseInt(t[0]+t[0],16),n=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16);return[r,n,i]}else if(t.length===6){const r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return[r,n,i]}}catch(t){console.warn("parseColor: Failed to parse hex color:",e,t)}return console.warn("parseColor: Invalid color format, using default:",e),zm.dark},Yi=(e,t)=>{const r=e.colorSettings[t];return r||(console.warn(`Missing color setting for ${t}, using default`),tr.colorSettings[t]||"44,62,80")},F2=(e,t="")=>{if(!e)return"";if(e.toLowerCase()==="city-wide")return"CW";if(e.toLowerCase()==="supervisor"){if(!t)return"Sup";const n=t.toLowerCase();return n.includes("sergeant")||n.includes("sgt")?"Sgt":n.includes("lieutenant")||n.includes("lt")?"LT":n.includes("captain")||n.includes("cpt")?"Cpt":t.substring(0,Math.min(3,t.length)).toUpperCase()}const r=e.replace(/^District\s*/i,"").replace(/^Beat\s*/i,"").replace(/^Unit\s*/i,"").trim();return r||e},co=e=>{if(!e)return"UNKNOWN";const t=e.trim().split(" ");return t.length<2?e.toUpperCase():t[t.length-1].toUpperCase()},Zee=(e,t)=>{if(!e)return!1;try{const r=It(e),n=t;return r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()}catch(r){return console.error("Error parsing birthday:",e,r),!1}},Xee=(e,t)=>{if(!e)return!1;try{const r=It(e),n=t;return r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()}catch(r){return console.error("Error parsing hire date:",e,r),!1}},Qee=(e,t)=>{const r=[],n=(l,c)=>{try{const d=It(l);let u=c.getFullYear()-d.getFullYear();const h=c.getMonth()-d.getMonth();return(h<0||h===0&&c.getDate()<d.getDate())&&u--,u}catch(d){return console.error("Error calculating age:",l,d),0}},i=(l,c)=>{try{const d=It(l);let u=c.getFullYear()-d.getFullYear();return(c.getMonth()<d.getMonth()||c.getMonth()===d.getMonth()&&c.getDate()<d.getDate())&&u--,Math.max(0,u)}catch(d){return console.error("Error calculating years of service:",l,d),0}},a=l=>{if(!(!l||!l.name)){if(l.birthday&&Zee(l.birthday,t)){const c=n(l.birthday,t);r.push({name:l.name,type:"birthday",icon:"",text:`Happy Birthday ${co(l.name)} (${c})`,displayName:co(l.name),age:c})}if(l.hire_date&&Xee(l.hire_date,t)){const c=i(l.hire_date,t);r.push({name:l.name,type:"anniversary",icon:"",text:`Congrats ${co(l.name)} (${c} year${c!==1?"s":""} anniversary)`,displayName:co(l.name),yearsOfService:c})}}};return e.supervisors&&e.supervisors.forEach(l=>a(l)),e.officers&&e.officers.forEach(l=>a(l)),e.specialAssignmentOfficers&&e.specialAssignmentOfficers.forEach(l=>a(l)),e.ptoRecords&&e.ptoRecords.forEach(l=>a(l)),r.filter((l,c,d)=>c===d.findIndex(u=>u.name===l.name&&u.type===l.type))},$ee=()=>"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",ete=(e,t,r)=>{const n=$ee();try{return e.addImage(n,"PNG",t,r,20,20),20}catch(i){console.error("Error drawing logo:",i);const a=20,o=Yi(tr,"primaryColor"),l=Vi(o);return e.setFillColor(l[0],l[1],l[2]),e.rect(t,r,a,a,"F"),e.setFontSize(6),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.text("LOGO",t+a/2,r+a/2,{align:"center",baseline:"middle"}),a}},tte=e=>{if(!(e!=null&&e.name))return"UNKNOWN";const t=co(e.name);if(e.isCombinedPartnership&&e.partnerData){const r=co(e.partnerData.partnerName);return`${t} + ${r}`}return t},MC=e=>{if(!(e!=null&&e.name))return"UNKNOWN";if(e.isCombinedPartnership&&e.partnerData){const t=co(e.name),r=co(e.partnerData.partnerName);return`${t} + ${r}`}return co(e.name)},Sw=(e,t="")=>{let r=(e==null?void 0:e.notes)||"";if(t&&t.toLowerCase()==="city-wide"){const l="City-Wide";r.toLowerCase().includes("city-wide")||(r?r=`${l} | ${r}`:r=l)}if(!e.isCombinedPartnership||!e.partnerData)return r;const n=e.partnerData.partnerBadge||"";let i=n?`(${n})`:"",a=r;return[/PARTNERSHIP:.*/i,/PARTNER:.*/i,/PARTNERS:.*/i,/\([0-9]+\)/g,/[0-9]+/g].forEach(l=>{a=a.replace(l,"").trim()}),a=a.replace(/^\|/,"").replace(/\|$/,"").replace(/^\s*-\s*/,"").trim(),i&&a?`${i} ${a}`:i||a},Bv=(e,t,r,n,i,a="officers",o=tr)=>{const c=e.internal.pageSize.getWidth()-i.left-i.right,u=(b=>{var M;const j=b.length,S=((M=o.tableSettings)==null?void 0:M.columnWidths)||tr.tableSettings.columnWidths,P={"REGULAR OFFICERS":S.name,"SPECIAL ASSIGNMENT OFFICERS":S.name,"PTO OFFICERS":S.name,OFFICERS:S.name,SUPERVISORS:S.name,BEAT:S.beat,ASSIGNMENT:S.assignment,"BADGE #":S.badge,UNIT:S.unit,NOTES:S.notes,TYPE:S.type,TIME:S.time};return b.map(I=>{const O=P[I]||1/j;return c*O})})(t),h=u.reduce((b,j)=>b+j,0);if(Math.abs(h-c)>1){const b=c/h;u.forEach((j,S)=>{u[S]=j*b})}let m=n;const f=o.tableSettings.rowHeight||tr.tableSettings.rowHeight;let g=8;a==="supervisors"?g=Math.max(o.fontSizes.nameColumn,o.fontSizes.beatColumn,o.fontSizes.badgeColumn,o.fontSizes.notesColumn):a==="special"?g=Math.max(o.fontSizes.nameColumn,o.fontSizes.badgeColumn,o.fontSizes.notesColumn):a==="pto"?g=Math.max(o.fontSizes.nameColumn,o.fontSizes.badgeColumn,o.fontSizes.ptoTimeColumn):g=Math.max(o.fontSizes.nameColumn,o.fontSizes.beatColumn,o.fontSizes.badgeColumn,o.fontSizes.notesColumn);const y=Math.max(0,(g-8)*.5),x=Math.max(f+y,6),p=Math.max(o.tableSettings.cellPadding||tr.tableSettings.cellPadding,2);let v=i.left;return t.forEach((b,j)=>{let S;switch(a){case"supervisors":S="supervisorHeaderBgColor";break;case"special":S="specialHeaderBgColor";break;case"pto":S="ptoHeaderBgColor";break;case"officers":default:S="officerHeaderBgColor";break}const P=Yi(o,S),M=Vi(P);e.setFillColor(M[0],M[1],M[2]),e.rect(v,m,u[j],x,"F"),e.setFont("helvetica","bold"),e.setFontSize(o.fontSizes.tableHeader||tr.fontSizes.tableHeader);const I=Yi(o,"headerTextColor"),O=Vi(I);e.setTextColor(O[0],O[1],O[2]);let L=b;const T=u[j]-p*2;let k=e.getTextWidth(L);if(k>T){const A={"SPECIAL ASSIGNMENT OFFICERS":"SPECIAL ASSIGN","REGULAR OFFICERS":"OFFICERS","PTO OFFICERS":"PTO",SUPERVISORS:"SUP",ASSIGNMENT:"ASSIGN","SPECIAL ASSIGNMENT":"SPECIAL"};if(A[b]&&(L=A[b],k=e.getTextWidth(L)),k>T){let q=L;for(;e.getTextWidth(q+"...")>T&&q.length>1;)q=q.substring(0,q.length-1);L=q+(q.length<L.length?"...":"")}}const E=v+(u[j]-e.getTextWidth(L))/2;e.text(L,Math.max(E,v+2),m+x-p),v+=u[j]}),m+=x,e.setFont("helvetica","normal"),r.forEach((b,j)=>{if(v=i.left,o.tableSettings.showRowStriping)if(j%2===0){const P=Yi(o,"evenRowColor"),M=Vi(P);e.setFillColor(M[0],M[1],M[2])}else{const P=Yi(o,"oddRowColor"),M=Vi(P);e.setFillColor(M[0],M[1],M[2])}else{const P=Yi(o,"evenRowColor"),M=Vi(P);e.setFillColor(M[0],M[1],M[2])}e.rect(v,m,c,x,"F"),e.setDrawColor(zm.border[0],zm.border[1],zm.border[2]),e.setLineWidth(.1),b.forEach((P,M)=>{e.rect(v,m,u[M],x,"S");let I;switch(a){case"supervisors":I="supervisorTextColor";break;case"special":I="specialAssignmentTextColor";break;case"pto":I="ptoTextColor";break;case"officers":default:I="officerTextColor";break}const O=Yi(o,I),L=Vi(O);e.setTextColor(L[0],L[1],L[2]);let T=(P==null?void 0:P.toString())||"";const k=u[M]-p*2,E=t[M].toUpperCase();E==="BEAT"&&(T=F2(T));let A=o.fontSizes.tableContent;E==="OFFICERS"||E==="SUPERVISORS"||E==="SPECIAL ASSIGNMENT OFFICERS"||E==="PTO OFFICERS"||E==="REGULAR OFFICERS"?A=o.fontSizes.nameColumn:E==="BEAT"?A=o.fontSizes.beatColumn:E==="BADGE #"?A=o.fontSizes.badgeColumn:E==="NOTES"?A=o.fontSizes.notesColumn:E==="TIME"?A=o.fontSizes.ptoTimeColumn:E==="TYPE"?A=o.fontSizes.badgeColumn:E==="UNIT"?A=o.fontSizes.beatColumn:E==="ASSIGNMENT"&&(A=o.fontSizes.notesColumn),A=Math.max(A,6),e.setFontSize(A);let q=T;if(e.getTextWidth(T)>k){let C=T;for(;e.getTextWidth(C+"...")>k&&C.length>1;)C=C.substring(0,C.length-1);q=C+(C.length<T.length?"...":"")}const U=["BADGE #","BEAT","UNIT","TYPE"],R=m+x-(x-A*.35)/2;if(U.includes(E)){const C=e.getTextWidth(q),F=v+(u[M]-C)/2;e.text(q,Math.max(F,v+2),R)}else e.text(q,v+p,R);v+=u[M]}),m+=x;const S=Math.max(30,g*2);m>e.internal.pageSize.getHeight()-S&&(e.addPage(),m=30,v=i.left,t.forEach((P,M)=>{let I;switch(a){case"supervisors":I="supervisorHeaderBgColor";break;case"special":I="specialHeaderBgColor";break;case"pto":I="ptoHeaderBgColor";break;case"officers":default:I="officerHeaderBgColor";break}const O=Yi(o,I),L=Vi(O);e.setFillColor(L[0],L[1],L[2]),e.rect(v,m,u[M],x,"F"),e.setFont("helvetica","bold"),e.setFontSize(o.fontSizes.tableHeader);const T=Yi(o,"headerTextColor"),k=Vi(T);e.setTextColor(k[0],k[1],k[2]);let E=P;const A=u[M]-p*2;let q=e.getTextWidth(E);if(q>A){const R={"SPECIAL ASSIGNMENT OFFICERS":"SPECIAL ASSIGN","REGULAR OFFICERS":"OFFICERS","PTO OFFICERS":"PTO",SUPERVISORS:"SUP",ASSIGNMENT:"ASSIGN","SPECIAL ASSIGNMENT":"SPECIAL"};if(R[P]&&(E=R[P],q=e.getTextWidth(E)),q>A){let C=E;for(;e.getTextWidth(C+"...")>A&&C.length>1;)C=C.substring(0,C.length-1);E=C+(C.length<E.length?"...":"")}}const U=v+(u[M]-e.getTextWidth(E))/2;e.text(E,Math.max(U,v+2),m+x-p),v+=u[M]}),m+=x)}),m+8},d5=()=>({exportToPDF:w.useCallback(async({selectedDate:t,shiftName:r,shiftData:n,layoutSettings:i=tr})=>{var a,o,l,c,d,u;try{if(console.log("PDF Export - Starting export with:",{selectedDate:t,shiftName:r,hasShiftData:!!n,hasLayoutSettings:!!i,layoutSettings:i}),!n||!t)throw new Error("No shift data or date provided for PDF export");const h={...tr,...i,fontSizes:{...tr.fontSizes,...(i==null?void 0:i.fontSizes)||{}},sections:{...tr.sections,...(i==null?void 0:i.sections)||{}},tableSettings:{...tr.tableSettings,...(i==null?void 0:i.tableSettings)||{}},colorSettings:{...tr.colorSettings,...(i==null?void 0:i.colorSettings)||{}}};console.log("Using layout settings:",h);const m=new Tt("p","mm","letter"),f=m.internal.pageSize.getWidth();let g=20;ete(m,15,15),m.setFontSize(h.fontSizes.header),m.setFont("helvetica","bold");const y=Yi(h,"primaryColor"),x=Vi(y);m.setTextColor(x[0],x[1],x[2]);const p=`${r.toUpperCase()}  ${((a=n.shift)==null?void 0:a.start_time)||"N/A"}-${((o=n.shift)==null?void 0:o.end_time)||"N/A"}`;m.text(p,45,28);const v=Pe(t,"EEE, MMM d, yyyy"),j=45+m.getTextWidth(p)+15;if(m.text(v,j,28),g=40,h.sections.showSupervisors&&n.supervisors&&n.supervisors.length>0){const O=[];n.supervisors.forEach(L=>{var q,U,R,C,F,X,re;if(L.hasPTO&&(((q=L.ptoData)==null?void 0:q.isFullShift)===!0||!((U=L.ptoData)!=null&&U.startTime)&&!((R=L.ptoData)!=null&&R.endTime)||((C=L.ptoData)==null?void 0:C.startTime)===((F=L.shift)==null?void 0:F.start_time)&&((X=L.ptoData)==null?void 0:X.endTime)===((re=L.shift)==null?void 0:re.end_time))){console.log(`PDF Export - Filtering out supervisor ${L.name} - full day PTO`);return}const k=tte(L),E=(L==null?void 0:L.position)||"",A=Sw(L,E);O.push([k,F2(E,(L==null?void 0:L.rank)||""),(L==null?void 0:L.badge)||"",(L==null?void 0:L.unitNumber)||"",A])}),O.length>0&&(g=Bv(m,["SUPERVISORS","BEAT","BADGE #","UNIT","NOTES"],O,g,{left:15,right:15},"supervisors",h),g+=4)}if(h.sections.showOfficers&&n.officers&&n.officers.length>0){const O=[];n.officers.forEach(L=>{var q,U,R,C,F,X,re;if(L.hasPTO&&(((q=L.ptoData)==null?void 0:q.isFullShift)===!0||!((U=L.ptoData)!=null&&U.startTime)&&!((R=L.ptoData)!=null&&R.endTime)||((C=L.ptoData)==null?void 0:C.startTime)===((F=L.shift)==null?void 0:F.start_time)&&((X=L.ptoData)==null?void 0:X.endTime)===((re=L.shift)==null?void 0:re.end_time))){console.log(`PDF Export - Filtering out officer ${L.name} - full day PTO`);return}const k=MC(L),E=(L==null?void 0:L.position)||"",A=Sw(L,E);O.push([k,F2(E),(L==null?void 0:L.badge)||"",(L==null?void 0:L.unitNumber)||"",A])}),O.length>0&&(g=Bv(m,["OFFICERS","BEAT","BADGE #","UNIT","NOTES"],O,g,{left:15,right:15},"officers",h))}if(h.sections.showSpecialAssignments&&n.specialAssignmentOfficers&&n.specialAssignmentOfficers.length>0){const O=[];n.specialAssignmentOfficers.forEach(L=>{var q,U,R,C,F,X,re;if(L.hasPTO&&(((q=L.ptoData)==null?void 0:q.isFullShift)===!0||!((U=L.ptoData)!=null&&U.startTime)&&!((R=L.ptoData)!=null&&R.endTime)||((C=L.ptoData)==null?void 0:C.startTime)===((F=L.shift)==null?void 0:F.start_time)&&((X=L.ptoData)==null?void 0:X.endTime)===((re=L.shift)==null?void 0:re.end_time))){console.log(`PDF Export - Filtering out special assignment ${L.name} - full day PTO`);return}const k=MC(L),E=(L==null?void 0:L.position)||"",A=Sw(L,E);O.push([k,(L==null?void 0:L.position)||"Special",(L==null?void 0:L.badge)||"",(L==null?void 0:L.unitNumber)||"",A])}),O.length>0&&(g=Bv(m,["SPECIAL ASSIGNMENT OFFICERS","ASSIGNMENT","BADGE #","UNIT","NOTES"],O,g,{left:15,right:15},"special",h))}if(h.sections.showPTO&&n.ptoRecords&&n.ptoRecords.length>0){const O=[];n.ptoRecords.forEach(T=>{const k=T!=null&&T.name?co(T.name):"UNKNOWN",E=(T==null?void 0:T.badge)||"",A=T!=null&&T.ptoType?T.ptoType.toUpperCase():"UNKNOWN",q=T!=null&&T.isFullShift?"FULL SHIFT":`${(T==null?void 0:T.startTime)||"N/A"}-${(T==null?void 0:T.endTime)||"N/A"}`;O.push([k,E,A,q])}),g=Bv(m,["PTO OFFICERS","BADGE #","TYPE","TIME"],O,g,{left:15,right:15},"pto",h)}if(h.sections.showStaffingSummary){g+=5;const O=((l=n.supervisors)==null?void 0:l.filter(F=>{var re,z,Y,J,ne,le,G;return!(F.hasPTO&&(((re=F.ptoData)==null?void 0:re.isFullShift)===!0||!((z=F.ptoData)!=null&&z.startTime)&&!((Y=F.ptoData)!=null&&Y.endTime)||((J=F.ptoData)==null?void 0:J.startTime)===((ne=F.shift)==null?void 0:ne.start_time)&&((le=F.ptoData)==null?void 0:le.endTime)===((G=F.shift)==null?void 0:G.end_time)))}))||[],L=((c=n.officers)==null?void 0:c.filter(F=>{var re,z,Y,J,ne,le,G;return!(F.hasPTO&&(((re=F.ptoData)==null?void 0:re.isFullShift)===!0||!((z=F.ptoData)!=null&&z.startTime)&&!((Y=F.ptoData)!=null&&Y.endTime)||((J=F.ptoData)==null?void 0:J.startTime)===((ne=F.shift)==null?void 0:ne.start_time)&&((le=F.ptoData)==null?void 0:le.endTime)===((G=F.shift)==null?void 0:G.end_time)))}))||[],T=O.length,k=n.minSupervisors||0,E=L.length,A=n.minOfficers||0;m.setFontSize(h.fontSizes.footer),m.setFont("helvetica","bold");const q=Yi(h,"primaryColor"),U=Vi(q);m.setTextColor(U[0],U[1],U[2]);const R=`STAFFING: Supervisors ${T}/${k}  Officers ${E}/${A}`;m.text(R,15,g);const C=`Generated: ${Pe(new Date,"MMM d, h:mm a")}`;m.text(C,f-15,g,{align:"right"}),g+=8}let S=0;if(h.sections.showSpecialOccasions)try{const O=Qee(n,t);if(S=O.length,O.length>0){const L=O.filter(A=>A.type==="birthday"),T=O.filter(A=>A.type==="anniversary");m.setFontSize(h.fontSizes.footer),m.setFont("helvetica","bold");const k=Yi(h,"accentColor")||"155,89,182",E=Vi(k);if(m.setTextColor(E[0],E[1],E[2]),m.setDrawColor(E[0],E[1],E[2]),m.setLineWidth(.3),m.line(15,g,f-15,g),g+=6,L.length>0){const q=`BIRTHDAYS: ${L.map(U=>U.text).join(", ")}`;if(m.getTextWidth(q)<f-30)m.text(q,15,g),g+=5;else{const U=m.splitTextToSize(q,f-30);m.text(U,15,g),g+=U.length*5}}if(T.length>0){const q=`ANNIVERSARIES: ${T.map(U=>U.text).join(", ")}`;if(m.getTextWidth(q)<f-30)m.text(q,15,g),g+=5;else{const U=m.splitTextToSize(q,f-30);m.text(U,15,g),g+=U.length*5}}m.setTextColor(x[0],x[1],x[2]),g+=4}}catch(O){console.warn(" Error processing special occasions, but continuing PDF export:",O)}const P=Pe(t,"yyyy-MM-dd"),M=Pe(t,"EEEE").toUpperCase(),I=`PAPD_Schedule_${r.replace(/\s+/g,"_")}_${M}_${P}.pdf`;return m.save(I),console.log(` PDF exported successfully with ${S} special occasions`),{success:!0}}catch(h){return console.error("PDF export error details:",{errorMessage:h==null?void 0:h.message,selectedDate:t,shiftName:r}),(d=h==null?void 0:h.message)!=null&&d.includes("specialOccasions")||(h==null?void 0:h.name)==="ReferenceError"&&((u=h==null?void 0:h.message)!=null&&u.includes("specialOccasions"))?(console.log(" Non-critical special occasions error, PDF was likely created successfully"),{success:!0}):{success:!1,error:h}}},[])}),os=["Supervisor","District 1","District 1/2","District 2","District 3","District 4","District 5","District 5/6","District 6","District 7/8","District 9","City-Wide","Other (Custom)"],Ia={Chief:1,"Deputy Chief":2,Lieutenant:3,Sergeant:4,Officer:5,Probationary:6},WD=[{value:"vacation",label:"Vacation",column:"vacation_hours"},{value:"holiday",label:"Holiday",column:"holiday_hours"},{value:"sick",label:"Sick",column:"sick_hours"},{value:"comp",label:"Comp",column:"comp_hours"}],Os=e=>{if(!e)return!1;const r=(typeof e=="string"?e:(e==null?void 0:e.toString())||"").toLowerCase().trim();return r==="probationary"||r.includes("probationary")||r.includes("ppo")||r==="ppo"||r.includes("probation")||r.includes("probationary officer")||r.includes("probationary peace officer")},RC=e=>{if(!e)return"";const t=e.trim().split(" ");return t[t.length-1]||""},rte=({officer:e,onPartnershipChange:t})=>{var b,j,S,P,M,I,O,L,T,k;const[r,n]=w.useState(!1),[i,a]=w.useState(""),[o,l]=w.useState(!1);if(e.hasPTO&&((b=e.ptoData)!=null&&b.isFullShift))return console.log(" Officer is on full day PTO, hiding partnership manager:",e.name),null;const c=e.isPartnership&&!e.partnershipSuspended,d=e.isPartnership&&e.partnershipSuspended,u=Os(((j=e.rank)==null?void 0:j.toString())||"");console.log(" PartnershipManager Debug:",{officerName:e.name,officerRank:e.rank,isOfficerPPO:u,hasActivePartnership:c,hasSuspendedPartnership:d,partnershipSuspended:e.partnershipSuspended,partnerData:e.partnerData});const{data:h,isLoading:m,error:f}=bt({queryKey:["emergency-partners",e.shift.id,e.date||Pe(new Date,"yyyy-MM-dd"),e.officerId],queryFn:async()=>{if(!u||!d)return console.log(" Emergency partners query skipped - not a PPO with suspended partnership"),[];const E=e.date||Pe(new Date,"yyyy-MM-dd");let A;try{if(A=It(E),!ta(A))throw new Error("Invalid date format")}catch{return console.error("Invalid date format:",E),[]}const q=A.getDay(),U=A;console.log(" === ENHANCED EMERGENCY PARTNERS QUERY ==="),console.log("Looking for regular officers (non-PPOs) for PPO emergency pairing"),console.log("Date:",E,"Day:",q,"Shift:",e.shift.id),console.log("PPO Officer:",e.name,"Rank:",e.rank);const{data:R,error:C}=await se.from("recurring_schedules").select(`
        id,
        officer_id,
        is_partnership,
        partner_officer_id,
        start_date,
        end_date,
        profiles:profiles!recurring_schedules_officer_id_fkey (
          id,
          full_name,
          badge_number,
          rank
        )
      `).eq("shift_type_id",e.shift.id).eq("day_of_week",q).neq("officer_id",e.officerId).lte("start_date",E).or(`end_date.is.null,end_date.gte.${E}`);if(C)throw console.error("Error fetching scheduled officers:",C),C;console.log(" All scheduled officers for emergency check:",R==null?void 0:R.map(Y=>{var J,ne;return{name:(J=Y.profiles)==null?void 0:J.full_name,rank:(ne=Y.profiles)==null?void 0:ne.rank,isPartnership:Y.is_partnership,partnerOfficerId:Y.partner_officer_id}}));const{data:F,error:X}=await se.from("schedule_exceptions").select(`
        id,
        officer_id,
        is_partnership,
        partner_officer_id,
        is_off,
        schedule_type,
        profiles:officer_id (
          id,
          full_name,
          badge_number,
          rank
        )
      `).eq("date",E).eq("shift_type_id",e.shift.id).neq("officer_id",e.officerId);if(X)throw console.error("Error fetching exceptions:",X),X;console.log(" All exceptions for emergency check:",F==null?void 0:F.map(Y=>{var J,ne;return{name:(J=Y.profiles)==null?void 0:J.full_name,rank:(ne=Y.profiles)==null?void 0:ne.rank,isPartnership:Y.is_partnership,scheduleType:Y.schedule_type,isOff:Y.is_off}}));const re=[],z=new Set;if(F)for(const Y of F){if(!Y.profiles)continue;const J=Y.officer_id;if(z.has(J))continue;if(z.add(J),Y.is_off){console.log(`    Skipping - on PTO via exception: ${Y.profiles.full_name}`);continue}if(Y.schedule_type==="emergency_partnership"){console.log(`    Skipping - already in emergency partnership: ${Y.profiles.full_name}`);continue}const ne=Os(Y.profiles.rank);if(ne){console.log(`    Skipping PPO for emergency assignment: ${Y.profiles.full_name}`);continue}if(Y.is_partnership&&!Y.partner_officer_id){console.log(`    Skipping - already partnered via exception: ${Y.profiles.full_name}`);continue}console.log(`    Available via exception: ${Y.profiles.full_name}`),re.push({id:J,name:Y.profiles.full_name,badge:Y.profiles.badge_number,rank:Y.profiles.rank,isPPO:ne,isPartnership:Y.is_partnership,scheduleType:Y.schedule_type,partnershipSuspended:!1,scheduleId:Y.id,source:"exception"})}if(R)for(const Y of R){if(!Y.profiles)continue;const J=Y.officer_id;if(z.has(J)){console.log(`    Skipping - has exception override: ${Y.profiles.full_name}`);continue}const ne=It(Y.start_date),le=Y.end_date?It(Y.end_date):null;if(!ta(ne)){console.log(`    Invalid start date: ${Y.start_date}`);continue}if(U<ne){console.log(`    Skipping - date before start: ${Y.profiles.full_name}`);continue}if(le&&!ta(le)){console.log(`    Invalid end date: ${Y.end_date}`);continue}if(le&&U>le){console.log(`    Skipping - date after end: ${Y.profiles.full_name}`);continue}const G=Os(Y.profiles.rank);if(G){console.log(`    Skipping PPO for emergency assignment: ${Y.profiles.full_name}`);continue}if(Y.is_partnership||Y.partner_officer_id){console.log(`    Skipping - already partnered in recurring: ${Y.profiles.full_name}`);continue}console.log(`    Available via recurring: ${Y.profiles.full_name}`),re.push({id:J,name:Y.profiles.full_name,badge:Y.profiles.badge_number,rank:Y.profiles.rank,isPPO:G,isPartnership:Y.is_partnership,scheduleType:null,partnershipSuspended:!1,scheduleId:Y.id,source:"recurring"})}return console.log(" Emergency partners found:",re.map(Y=>({name:Y.name,rank:Y.rank,isPPO:Y.isPPO,source:Y.source,isPartnered:Y.isPartnership,scheduleType:Y.scheduleType}))),re.sort((Y,J)=>{const ne=RC(Y.name).toLowerCase(),le=RC(J.name).toLowerCase();return ne.localeCompare(le)})},enabled:r&&o&&u&&d,staleTime:0}),{data:g,isLoading:y,error:x}=bt({queryKey:["available-ppo-partners",e.shift.id,e.date||Pe(new Date,"yyyy-MM-dd"),e.officerId],queryFn:async()=>{if(u)return console.log(" PPOs cannot create new partnerships - only emergency assignments"),[];const E=e.date||Pe(new Date,"yyyy-MM-dd");let A;try{if(A=It(E),!ta(A))throw new Error("Invalid date format")}catch{return console.error("Invalid date format:",E),[]}const q=A.getDay(),U=A;console.log(" REGULAR PARTNERSHIP CREATION QUERY"),console.log("Looking for available PPOs to partner with:",e.name),console.log("Date:",E,"Day:",q,"Shift:",e.shift.id);const{data:R,error:C}=await se.from("profiles").select("id, full_name, badge_number, rank").eq("active",!0).neq("id",e.officerId).order("full_name");if(C)throw console.error("Error fetching PPOs:",C),C;if(console.log("Found potential PPOs:",R==null?void 0:R.map(re=>({name:re.full_name,rank:re.rank,isPPO:Os(re.rank)}))),!R||R.length===0)return console.log("No PPOs found in profiles"),[];const F=R.filter(re=>Os(re.rank));if(console.log("Filtered to actual PPOs:",F.length),F.length===0)return[];const X=[];for(const re of F){console.log(`
--- Checking PPO ${re.full_name} ---`);try{const{data:z}=await se.from("schedule_exceptions").select("id, partner_officer_id, is_partnership, is_emergency_partnership").eq("officer_id",re.id).eq("date",E).eq("shift_type_id",e.shift.id).maybeSingle();if(z&&(z.is_partnership||z.is_emergency_partnership)){console.log(" Already partnered via exception");continue}const{data:Y}=await se.from("recurring_schedules").select("id, partner_officer_id, is_partnership, start_date, end_date").eq("officer_id",re.id).eq("shift_type_id",e.shift.id).eq("day_of_week",q).maybeSingle();if(Y){const ne=It(Y.start_date),le=Y.end_date?It(Y.end_date):null;if(U<ne){console.log(` Date ${E} is before schedule start ${Y.start_date}`);continue}if(le&&U>le){console.log(` Date ${E} is after schedule end ${Y.end_date}`);continue}if(Y.is_partnership||Y.partner_officer_id){console.log(" Already partnered in recurring schedule");continue}}const{data:J}=await se.from("schedule_exceptions").select("id").eq("officer_id",re.id).eq("date",E).eq("shift_type_id",e.shift.id).eq("is_off",!0).maybeSingle();if(J){console.log(" On PTO today");continue}console.log(` ${re.full_name} is available for regular partnership!`),X.push({id:re.id,full_name:re.full_name,badge_number:re.badge_number,rank:re.rank,source:"available"})}catch(z){console.error(`Error checking ${re.full_name}:`,z)}}return console.log(`
 Available PPOs for regular partnership:`,X.map(re=>re.full_name)),X},enabled:r&&!o&&!c&&!u,staleTime:0}),p=async()=>{if(!i){console.error("No partner selected");return}if(o){const E=h==null?void 0:h.find(A=>A.id===i);if(console.log(" Creating EMERGENCY partnership for PPO:",{ppo:e.name,ppoRank:e.rank,partner:E==null?void 0:E.name,partnerRank:E==null?void 0:E.rank,partnerId:i,shift:e.shift.name,date:e.date||Pe(new Date,"yyyy-MM-dd")}),!u){console.error(" Emergency partnerships only for PPOs!");return}t(e,i)}else{const E=g==null?void 0:g.find(A=>A.id===i);if(console.log(" Creating regular partnership:",{officer:e.name,officerRank:e.rank,partner:E==null?void 0:E.full_name,partnerRank:E==null?void 0:E.rank,partnerId:i,shift:e.shift.name,date:e.date||Pe(new Date,"yyyy-MM-dd")}),u){console.error(" Regular partnerships cannot be created by PPOs!");return}t(e,i)}n(!1),a(""),l(!1)},v=async()=>{console.log(" Removing partnership for:",{officer:e.name,officerId:e.officerId,isPPO:u,partnerData:e.partnerData,partnerOfficerId:e.partnerOfficerId}),t(e,void 0),n(!1)};return c?s.jsxs(rn,{open:r,onOpenChange:n,children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",size:"sm",className:"h-7 bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[s.jsx(jr,{className:"h-3 w-3 mr-1"}),"Manage Partner"]})}),s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsx(Yr,{children:s.jsxs(Kr,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Manage Partnership"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 border rounded-lg bg-blue-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"font-medium",children:"Current Partner:"}),((S=e.partnerData)==null?void 0:S.partnerIsPPO)&&s.jsxs(Re,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[s.jsx(hd,{className:"h-3 w-3 mr-1"}),"PPO"]})]}),s.jsx("p",{className:"font-semibold",children:((P=e.partnerData)==null?void 0:P.partnerName)||"Unknown Partner"}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-1 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:["Badge: ",((M=e.partnerData)==null?void 0:M.partnerBadge)||"N/A"]}),s.jsx("span",{children:""}),s.jsx("span",{children:((I=e.partnerData)==null?void 0:I.partnerRank)||"Unknown Rank"})]}),((O=e.partnerData)==null?void 0:O.partnerPosition)&&s.jsxs("div",{children:["Position: ",e.partnerData.partnerPosition]})]})]}),s.jsx("div",{className:"p-2 bg-gray-50 rounded border",children:s.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2",children:u?s.jsxs(s.Fragment,{children:[s.jsx(hd,{className:"h-3 w-3 text-yellow-600"}),s.jsx("span",{className:"font-medium",children:"You are a PPO"})]}):(L=e.partnerData)!=null&&L.partnerIsPPO?s.jsxs(s.Fragment,{children:[s.jsx(hd,{className:"h-3 w-3 text-yellow-600"}),s.jsx("span",{className:"font-medium",children:"Your partner is a PPO"})]}):s.jsxs(s.Fragment,{children:[s.jsx(jr,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Regular Partnership"})]})}),s.jsxs("p",{children:["Partnership active for ",e.shift.name," shift"]})]})}),s.jsx(Ne,{variant:"destructive",onClick:v,className:"w-full",children:"Remove Partnership"})]})]})]}):d?u?s.jsxs(rn,{open:r,onOpenChange:n,children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",size:"sm",className:"h-7 bg-amber-50 border-amber-300 text-amber-700 hover:bg-amber-100",onClick:()=>{l(!0),n(!0)},children:[s.jsx(On,{className:"h-3 w-3 mr-1"}),"Emergency Partner"]})}),s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsx(Yr,{children:s.jsxs(Kr,{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-5 w-5 text-amber-600"}),"Emergency Partner Assignment"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"font-medium text-amber-800",children:"PPO Officer:"}),s.jsxs(Re,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[s.jsx(hd,{className:"h-3 w-3 mr-1"}),"PPO"]})]}),s.jsx("p",{className:"font-semibold text-lg",children:e.name}),s.jsxs("p",{className:"text-sm text-amber-700",children:["Partnership suspended: ",e.partnershipSuspensionReason||"Partner on PTO"]}),((T=e.partnerData)==null?void 0:T.partnerName)&&s.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Original Partner:"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:[e.partnerData.partnerName," (on PTO)"]})]}),s.jsxs("div",{className:"mt-2 text-xs text-amber-800 bg-amber-100 p-2 rounded",children:[s.jsx("p",{className:"font-medium",children:" PPO Requirement:"}),s.jsx("p",{children:"Probationary Officers must always be partnered and cannot work alone."})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"emergency-partner",children:"Select Emergency Partner"}),s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{id:"emergency-partner",children:s.jsx(Vt,{placeholder:"Select available officer"})}),s.jsx(qt,{children:m?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-amber-600 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading available officers..."})]}):f?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx(On,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Error loading officers"}),s.jsx("div",{className:"text-xs text-red-500 mt-1",children:f.message})]}):!h||h.length===0?s.jsxs("div",{className:"p-4 text-center space-y-2",children:[s.jsx(On,{className:"h-8 w-8 text-amber-600 mx-auto"}),s.jsx("div",{className:"text-sm font-medium",children:"No available officers found"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"All regular officers are either:"}),s.jsxs("ul",{className:"text-xs text-left text-muted-foreground list-disc pl-4 space-y-1",children:[s.jsx("li",{children:"Already partnered"}),s.jsx("li",{children:"On PTO"}),s.jsx("li",{children:"Assigned to special duty"}),s.jsx("li",{children:"PPOs (cannot partner with PPOs in emergencies)"})]})]}):s.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[s.jsx("div",{className:"text-xs text-muted-foreground p-2 border-b sticky top-0 bg-background",children:"Select a regular officer (non-PPO) for temporary assignment"}),h.map(E=>s.jsx(ct,{value:E.id,children:s.jsxs("div",{className:"flex flex-col py-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:E.name}),s.jsx(Re,{variant:"outline",className:"text-xs",children:E.source})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:["Badge: ",E.badge||"N/A"]}),s.jsx("span",{children:""}),s.jsx("span",{children:E.rank||"Officer"})]}),E.isPPO&&s.jsx("span",{className:"text-red-600",children:" Cannot select PPO"})]})]})},E.id))]})})]})]}),s.jsxs(Ne,{onClick:p,disabled:!i||m,className:"w-full bg-amber-600 hover:bg-amber-700",children:[s.jsx(On,{className:"h-4 w-4 mr-2"}),"Assign Emergency Partner"]}),s.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-gray-50 rounded border",children:[s.jsx("p",{className:"font-medium mb-1",children:"Emergency Partnership Details:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[s.jsx("li",{children:"Temporary assignment for today only"}),s.jsx("li",{children:"Original partnership will resume tomorrow"}),s.jsx("li",{children:"Only regular officers (non-PPOs) available"}),s.jsx("li",{children:"Positions/districts preserved"})]})]})]})]})]}):s.jsxs("div",{className:"text-sm text-amber-600",children:[s.jsxs(Re,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-300",children:[s.jsx(On,{className:"h-3 w-3 mr-1"}),"Partnership Suspended"]}),s.jsx("p",{className:"text-xs mt-1",children:e.partnershipSuspensionReason||"Partner unavailable"}),((k=e.partnerData)==null?void 0:k.partnerName)&&s.jsxs("p",{className:"text-xs mt-1",children:["Partner: ",e.partnerData.partnerName]})]}):u?s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs(Re,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:[s.jsx(hd,{className:"h-3 w-3 mr-1"}),"PPO"]}),s.jsx("p",{className:"text-xs mt-1",children:"PPOs must be assigned a partner"})]}):s.jsxs(rn,{open:r,onOpenChange:n,children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",size:"sm",className:"h-7",children:[s.jsx(jr,{className:"h-3 w-3 mr-1"}),"Add Partner"]})}),s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsx(Yr,{children:s.jsx(Kr,{children:"Create Partnership with PPO"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select Probationary Officer (PPO)"})}),s.jsx(qt,{children:y?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading Probationary officers..."})]}):x?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx(On,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Error loading officers"}),s.jsx("div",{className:"text-xs text-red-500 mt-1",children:x.message})]}):!g||g.length===0?s.jsxs("div",{className:"p-4 text-center space-y-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"No available Probationary officers"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Shift: ",e.shift.name," (",e.shift.start_time," - ",e.shift.end_time,")"]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Date: ",e.date||Pe(new Date,"yyyy-MM-dd")]}),s.jsx("div",{className:"text-xs text-amber-600 mt-2",children:"Check browser console (F12) for debugging details"})]}):s.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[s.jsx("div",{className:"text-xs text-muted-foreground p-2 border-b sticky top-0 bg-background",children:"Select a Probationary Officer (PPO) to partner with"}),g.map(E=>s.jsx(ct,{value:E.id,children:s.jsxs("div",{className:"flex flex-col py-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:E.full_name}),s.jsx(Re,{className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-300",children:"PPO"})]}),s.jsx("div",{className:"text-xs text-muted-foreground space-y-1 mt-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:["Badge: ",E.badge_number||"N/A"]}),s.jsx("span",{children:""}),s.jsx("span",{children:E.rank})]})})]})},E.id))]})})]}),s.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-gray-50 rounded border",children:[s.jsx("div",{className:"font-medium mb-1",children:"PPO Partnership Requirements:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[s.jsx("li",{children:'Officer must be marked as "Probationary" (PPO)'}),s.jsx("li",{children:"Officer must be scheduled for this shift"}),s.jsx("li",{children:"Officer must not already be in a partnership"}),s.jsx("li",{children:"Officer must not be on PTO/off duty"}),s.jsx("li",{children:"Date must be within officer's schedule date range"}),s.jsx("li",{className:"font-medium text-blue-700",children:"PPOs cannot work alone and must be partnered"})]})]}),s.jsx(Ne,{onClick:p,disabled:!i||y,className:"w-full",children:"Create Partnership with PPO"})]})]})]})},nte=({officer:e,canEdit:t,onSavePosition:r,onSaveUnitNumber:n,onSaveNotes:i,onAssignPTO:a,onRemove:o,onPartnershipChange:l,isUpdating:c,sectionType:d="regular",backgroundColor:u,showSpecialOccasions:h=!0})=>{var R,C;const[m,f]=w.useState(null),[g,y]=w.useState(""),[x,p]=w.useState(""),[v,b]=w.useState(null),[j,S]=w.useState(""),[P,M]=w.useState(null),[I,O]=w.useState(""),L=e.rank==="Probationary",T=()=>{if(!t)return;f(`${e.scheduleId}-${e.type}`),e.position&&!os.includes(e.position)?(y("Other (Custom)"),p(e.position)):(y(e.position||""),p(""))},k=()=>{t&&(b(`${e.scheduleId}-${e.type}`),S(e.unitNumber||""))},E=()=>{t&&(M(`${e.scheduleId}-${e.type}`),O(e.notes||""))},A=()=>{const F=g==="Other (Custom)"?x:g;F&&(r(e,F),f(null),y(""),p(""))},q=()=>{n(e,j),b(null),S("")},U=()=>{i(e,I),M(null),O("")};return e.hasPTO&&((R=e.ptoData)!=null&&R.isFullShift)?null:s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-md border ${e.isPartnership?"border-blue-200":"border-transparent"}`,style:u?{backgroundColor:u}:{},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-3 mb-1",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium truncate",children:e.name}),L&&s.jsx(Re,{variant:"outline",className:"bg-yellow-100 text-yellow-800 border-yellow-800/50 hover:bg-yellow-100 font-bold",children:"PPO"}),h&&e.isBirthdayToday&&s.jsxs(Re,{className:"text-xs bg-pink-100 text-pink-800 hover:bg-pink-200 border-pink-200 flex items-center gap-1",title:` ${e.name}'s Birthday`,children:[s.jsx(ef,{className:"h-3 w-3"}),"Birthday"]}),h&&e.isAnniversaryToday&&s.jsxs(Re,{className:"text-xs bg-blue-100 text-blue-800 hover:bg-blue-200 border-blue-200 flex items-center gap-1",title:` ${e.name}'s Year ${e.yearsOfService||0} Anniversary`,children:[s.jsx(ni,{className:"h-3 w-3"}),"Year ",e.yearsOfService||0]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.rank||"Officer","  Badge #",e.badge,(e.type==="exception"||e.isExtraShift)&&s.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"(Extra Shift)"})]}),e.isPartnership&&e.partnerData&&s.jsxs("div",{className:"flex items-center gap-2 mt-1 p-2 bg-blue-100 rounded border border-blue-200",children:[s.jsx(jr,{className:"h-3 w-3 text-blue-600"}),s.jsxs("span",{className:"text-sm text-blue-700",children:["Partner: ",s.jsx("strong",{children:e.partnerData.partnerName}),e.partnerData.partnerBadge&&` (${e.partnerData.partnerBadge})`]})]})]})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.customTime&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:e.customTime}),e.isExtraShift&&e.custom_start_time&&e.custom_end_time&&s.jsxs(Re,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-300",children:[e.custom_start_time," - ",e.custom_end_time]}),e.type==="recurring"&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:"Regular"}),e.type==="exception"&&s.jsx(Re,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:"Extra Shift"}),e.hasPTO&&!((C=e.ptoData)!=null&&C.isFullShift)&&s.jsx(Re,{className:"text-xs bg-green-100 text-green-800 hover:bg-green-200 border-green-200",children:"Partial PTO"}),e.isPartnership&&s.jsx(Re,{className:"text-xs bg-blue-100 text-blue-800 hover:bg-blue-200 border-blue-200",children:"Partnership"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mx-4 min-w-0 flex-1",children:[s.jsxs("div",{className:"text-center min-w-16",children:[s.jsx(Ce,{htmlFor:`unit-${e.scheduleId}`,className:"text-xs text-muted-foreground mb-1 block",children:"Unit"}),t&&v===`${e.scheduleId}-${e.type}`?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(St,{id:`unit-${e.scheduleId}`,placeholder:"Unit #",value:j,onChange:F=>S(F.target.value),className:"w-16 h-8 text-sm"}),s.jsx(Ne,{size:"sm",onClick:q,disabled:c,className:"h-8 w-8",children:s.jsx(tl,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>{b(null),S("")},className:"h-8 w-8",children:s.jsx(Ms,{className:"h-3 w-3"})})]}):s.jsx(Re,{variant:e.unitNumber?"default":"outline",className:`w-16 ${t?"cursor-pointer hover:bg-muted transition-colors":""}`,onClick:k,children:e.unitNumber||(t?"Add":"-")})]}),s.jsxs("div",{className:"text-center min-w-24 flex-1",children:[s.jsx(Ce,{htmlFor:`notes-${e.scheduleId}`,className:"text-xs text-muted-foreground mb-1 block",children:"Notes"}),t&&P===`${e.scheduleId}-${e.type}`?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(St,{id:`notes-${e.scheduleId}`,placeholder:"Notes...",value:I,onChange:F=>O(F.target.value),className:"h-8 text-sm"}),s.jsx(Ne,{size:"sm",onClick:U,disabled:c,className:"h-8 w-8",children:s.jsx(tl,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>{M(null),O("")},className:"h-8 w-8",children:s.jsx(Ms,{className:"h-3 w-3"})})]}):s.jsx("div",{className:`text-xs p-2 rounded border border-dashed border-muted-foreground/30 ${t?"cursor-pointer hover:bg-muted":""} transition-colors min-h-8 flex items-center justify-center`,onClick:E,children:e.notes||(t?"Add notes":"-")})]})]}),s.jsx("div",{className:"flex items-center gap-2 shrink-0",children:t&&m===`${e.scheduleId}-${e.type}`?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Wt,{value:g,onValueChange:y,children:[s.jsx(Bt,{className:"w-32",children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsx(qt,{children:os.map(F=>s.jsx(ct,{value:F,children:F},F))})]}),g==="Other (Custom)"&&s.jsx(St,{placeholder:"Custom position",value:x,onChange:F=>p(F.target.value),className:"w-32"})]}),s.jsx(Ne,{size:"sm",onClick:A,disabled:c,children:s.jsx(tl,{className:"h-4 w-4"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>{f(null),y(""),p("")},children:s.jsx(Ms,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"text-right min-w-24",children:[s.jsx(Re,{variant:"secondary",className:"mb-1 w-full justify-center",children:e.position||(d==="special"?"Special Assignment":"No Position")}),t&&s.jsxs("div",{className:"flex gap-1 justify-center",children:[l&&d!=="pto"&&s.jsx(rte,{officer:e,onPartnershipChange:l}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:T,title:"Edit Position",className:"h-6 w-6",children:s.jsx(Zd,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>a(e),title:"Assign PTO",className:"h-6 w-6",children:s.jsx(pr,{className:"h-3 w-3"})}),e.type==="exception"&&o&&s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>o(e),disabled:c,title:"Remove Added Shift",className:"h-6 w-6 text-red-600 hover:text-red-800 hover:bg-red-100",children:s.jsx(es,{className:"h-3 w-3"})})]})]})})]})},ste=({ptoRecord:e,canEdit:t,onSaveUnitNumber:r,onSaveNotes:n,onEdit:i,onRemove:a,isUpdating:o,backgroundColor:l,showSpecialOccasions:c=!0})=>{const[d,u]=w.useState(null),[h,m]=w.useState(""),[f,g]=w.useState(null),[y,x]=w.useState(""),p=()=>{t&&(u(`pto-${e.id}`),m(e.unitNumber||""))},v=()=>{t&&(g(`pto-${e.id}`),x(e.notes||""))},b=()=>{r(e,h),u(null),m("")},j=()=>{n(e,y),g(null),x("")};return s.jsxs("div",{className:"flex items-center justify-between p-3",style:l?{backgroundColor:l}:{},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-3 mb-1",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium truncate text-gray-900",children:e.name}),c&&e.isBirthdayToday&&s.jsxs(Re,{className:"text-xs bg-pink-100 text-pink-800 hover:bg-pink-200 border-pink-200 flex items-center gap-1",title:` ${e.name}'s Birthday`,children:[s.jsx(ef,{className:"h-3 w-3"}),"Birthday"]}),c&&e.isAnniversaryToday&&s.jsxs(Re,{className:"text-xs bg-blue-100 text-blue-800 hover:bg-blue-200 border-blue-200 flex items-center gap-1",title:` ${e.name}'s Year ${e.yearsOfService||0} Anniversary`,children:[s.jsx(ni,{className:"h-3 w-3"}),"Year ",e.yearsOfService||0]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.rank||"Officer","  Badge #",e.badge]})]})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Re,{className:"text-xs bg-green-100 text-green-800 hover:bg-green-200 border-green-200",children:e.ptoType}),s.jsxs("span",{className:"text-gray-700",children:[e.startTime," - ",e.endTime,!e.isFullShift&&" (Partial Day)"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mx-4 min-w-0 flex-1",children:[s.jsxs("div",{className:"text-center min-w-16",children:[s.jsx(Ce,{htmlFor:`unit-pto-${e.id}`,className:"text-xs text-muted-foreground mb-1 block",children:"Unit"}),t&&d===`pto-${e.id}`?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(St,{id:`unit-pto-${e.id}`,placeholder:"Unit #",value:h,onChange:S=>m(S.target.value),className:"w-16 h-8 text-sm"}),s.jsx(Ne,{size:"sm",onClick:b,disabled:o,className:"h-8 w-8",children:s.jsx(tl,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>{u(null),m("")},className:"h-8 w-8",children:s.jsx(Ms,{className:"h-3 w-3"})})]}):s.jsx(Re,{variant:e.unitNumber?"default":"outline",className:`w-16 ${t?"cursor-pointer hover:bg-muted transition-colors":""}`,onClick:p,children:e.unitNumber||(t?"Add":"-")})]}),s.jsxs("div",{className:"text-center min-w-24 flex-1",children:[s.jsx(Ce,{htmlFor:`notes-pto-${e.id}`,className:"text-xs text-muted-foreground mb-1 block",children:"Notes"}),t&&f===`pto-${e.id}`?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(St,{id:`notes-pto-${e.id}`,placeholder:"Notes...",value:y,onChange:S=>x(S.target.value),className:"h-8 text-sm"}),s.jsx(Ne,{size:"sm",onClick:j,disabled:o,className:"h-8 w-8",children:s.jsx(tl,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>{g(null),x("")},className:"h-8 w-8",children:s.jsx(Ms,{className:"h-3 w-3"})})]}):s.jsx("div",{className:`text-xs p-2 rounded border border-dashed border-muted-foreground/30 ${t?"cursor-pointer hover:bg-muted":""} transition-colors min-h-8 flex items-center justify-center`,onClick:v,children:e.notes||(t?"Add notes":"-")})]})]}),t&&s.jsxs("div",{className:"flex gap-1 shrink-0",children:[s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>i(e),title:"Edit PTO",className:"h-6 w-6 text-red-600 hover:text-red-800 hover:bg-red-100",children:s.jsx(Zd,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>a(e),disabled:o,title:"Remove PTO",className:"h-6 w-6 text-red-600 hover:text-red-800 hover:bg-red-100",children:s.jsx(es,{className:"h-3 w-3"})})]})]})},lm=({title:e,officers:t=[],ptoRecords:r=[],minCount:n,currentCount:i,isUnderstaffed:a,canEdit:o,onSavePosition:l,onSaveUnitNumber:c,onSaveNotes:d,onAssignPTO:u,onRemoveOfficer:h,onEditPTO:m,onRemovePTO:f,onPartnershipChange:g,isUpdating:y=!1,sectionType:x="regular",colorSettings:p,showSpecialOccasions:v=!0})=>{var O,L,T;const b=x==="pto",j=b?r.length>0:t.length>0,P=(()=>{const E=p||{schedule_supervisor_bg:"240,248,255",schedule_supervisor_text:"25,25,112",schedule_officer_bg:"248,249,250",schedule_officer_text:"33,37,41",schedule_special_bg:"243,229,245",schedule_special_text:"102,51,153",schedule_pto_bg:"230,255,242",schedule_pto_text:"0,100,0"};switch(x){case"special":return{headerStyle:{backgroundColor:`rgb(${E.schedule_special_bg})`,color:`rgb(${E.schedule_special_text})`,borderColor:`rgb(${E.schedule_special_bg})`},contentStyle:{backgroundColor:`rgb(${E.schedule_special_bg})`}};case"pto":return{headerStyle:{backgroundColor:`rgb(${E.schedule_pto_bg})`,color:`rgb(${E.schedule_pto_text})`,borderColor:`rgb(${E.schedule_pto_bg})`},contentStyle:{backgroundColor:`rgb(${E.schedule_pto_bg})`}};case"regular":default:return e.toLowerCase().includes("supervisor")?{headerStyle:{backgroundColor:`rgb(${E.schedule_supervisor_bg})`,color:`rgb(${E.schedule_supervisor_text})`,borderColor:`rgb(${E.schedule_supervisor_bg})`},contentStyle:{backgroundColor:`rgb(${E.schedule_supervisor_bg})`}}:{headerStyle:{backgroundColor:`rgb(${E.schedule_officer_bg})`,color:`rgb(${E.schedule_officer_text})`,borderColor:`rgb(${E.schedule_officer_bg})`},contentStyle:{backgroundColor:`rgb(${E.schedule_officer_bg})`}}}})(),I=(()=>{if(!P.contentStyle||!P.contentStyle.backgroundColor){const k=p||defaultColors;return x==="special"?`rgb(${k.schedule_special_bg})`:x==="pto"?`rgb(${k.schedule_pto_bg})`:e.toLowerCase().includes("supervisor")?`rgb(${k.schedule_supervisor_bg})`:`rgb(${k.schedule_officer_bg})`}return P.contentStyle.backgroundColor})();return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between border-b pb-2 px-3 py-2 rounded-t-lg",style:P.headerStyle,children:[s.jsx("h4",{className:"font-semibold text-sm",style:{color:((O=P.headerStyle)==null?void 0:O.color)||"inherit"},children:e}),n!==void 0&&i!==void 0?s.jsxs(Re,{variant:a?"destructive":"outline",children:[i," / ",n]}):s.jsx(Re,{variant:"outline",children:b?r.length:t.length})]}),j?b?s.jsx("div",{className:"space-y-2 p-2 rounded-b-lg border",style:{backgroundColor:I,borderColor:(L=P.headerStyle)==null?void 0:L.borderColor},children:r.map(k=>s.jsx(ste,{ptoRecord:k,canEdit:o,onSaveUnitNumber:(E,A)=>c(E,A),onSaveNotes:(E,A)=>d(E,A),onEdit:m,onRemove:f,isUpdating:y},k.id))}):s.jsx("div",{className:"space-y-2 p-2 rounded-b-lg border",style:{backgroundColor:I,borderColor:(T=P.headerStyle)==null?void 0:T.borderColor},children:t.map(k=>s.jsx(nte,{officer:k,canEdit:o,onSavePosition:l,onSaveUnitNumber:(E,A)=>c(E,A),onSaveNotes:(E,A)=>d(E,A),onAssignPTO:u,onRemove:h,onPartnershipChange:g,isUpdating:y,sectionType:x,backgroundColor:I,showSpecialOccasions:v},`${k.scheduleId}-${k.type}`)).filter(Boolean)}):s.jsxs("p",{className:"text-sm text-muted-foreground italic",children:["No ",e.toLowerCase()," scheduled"]})]})},ite=(e,t)=>{const[r,n]=e.split(":").map(Number),[i,a]=t.split(":").map(Number),o=r*60+n;return(i*60+a-o)/60},IC=async(e,t,r,n,i,a)=>{try{console.log(" Updating recurring partnership in database");const[{data:o},{data:l}]=await Promise.all([se.from("recurring_schedules").select("id").eq("officer_id",e).eq("shift_type_id",r).eq("day_of_week",n).maybeSingle(),se.from("recurring_schedules").select("id").eq("officer_id",t).eq("shift_type_id",r).eq("day_of_week",n).maybeSingle()]);if(!o||!l)return console.log(" One or both officers don't have recurring schedules for this day"),{success:!1,error:"Missing recurring schedules"};const[c,d]=await Promise.all([se.from("recurring_schedules").update({is_partnership:!0,partner_officer_id:t,position_name:i}).eq("id",o.id),se.from("recurring_schedules").update({is_partnership:!0,partner_officer_id:e,position_name:a}).eq("id",l.id)]);return c.error||d.error?(console.error("Error updating recurring schedules:",c.error||d.error),{success:!1,error:c.error||d.error}):(console.log(" Recurring partnership updated in database"),{success:!0})}catch(o){return console.error("Error in updateRecurringPartnership:",o),{success:!1,error:o}}},LC=async(e,t,r,n)=>{var i,a;try{console.log(" Removing recurring partnership from database");const[{data:o},{data:l}]=await Promise.all([se.from("recurring_schedules").select("id, position_name").eq("officer_id",e).eq("shift_type_id",r).eq("day_of_week",n).maybeSingle(),se.from("recurring_schedules").select("id, position_name").eq("officer_id",t).eq("shift_type_id",r).eq("day_of_week",n).maybeSingle()]),c=[];if(o&&c.push(se.from("recurring_schedules").update({is_partnership:!1,partner_officer_id:null,position_name:(i=o.position_name)!=null&&i.includes("Riding Partner")?null:o.position_name}).eq("id",o.id)),l&&c.push(se.from("recurring_schedules").update({is_partnership:!1,partner_officer_id:null,position_name:(a=l.position_name)!=null&&a.includes("Riding Partner")?null:l.position_name}).eq("id",l.id)),c.length>0){const u=(await Promise.all(c)).filter(h=>h.error).map(h=>h.error);if(u.length>0)return console.error("Error removing recurring partnerships:",u),{success:!1,errors:u}}return console.log(" Recurring partnership removed from database"),{success:!0}}catch(o){return console.error("Error in removeRecurringPartnership:",o),{success:!1,error:o}}},VD=e=>{const t=Lr(),r=async(h,m,f,g)=>{if(!m){console.log("No partner to suspend");return}console.log(` Suspending partnership: ${h} with ${m} for ${f} PTO`);try{const[{data:y},{data:x}]=await Promise.all([se.from("profiles").select("full_name, rank").eq("id",h).single(),se.from("profiles").select("full_name, rank").eq("id",m).single()]),[{data:p},{data:v}]=await Promise.all([se.from("schedule_exceptions").select("id, is_partnership, is_off").eq("officer_id",h).eq("date",e).eq("shift_type_id",g).maybeSingle(),se.from("schedule_exceptions").select("id, is_partnership, is_off").eq("officer_id",m).eq("date",e).eq("shift_type_id",g).maybeSingle()]),b=[];if(p?b.push(se.from("schedule_exceptions").update({is_partnership:!1,partnership_suspended:!0,partnership_suspension_reason:f,partner_officer_id:m}).eq("id",p.id)):b.push(se.from("schedule_exceptions").insert({officer_id:h,date:e,shift_type_id:g,is_off:!0,reason:f,is_partnership:!1,partnership_suspended:!0,partnership_suspension_reason:f,partner_officer_id:m,schedule_type:"pto_partnership_suspension"})),v)b.push(se.from("schedule_exceptions").update({is_partnership:!1,partnership_suspended:!0,partnership_suspension_reason:f,partner_officer_id:h,is_off:!1}).eq("id",v.id));else{const S=It(e).getDay(),{data:P}=await se.from("recurring_schedules").select("position_name").eq("officer_id",m).eq("shift_type_id",g).eq("day_of_week",S).maybeSingle();b.push(se.from("schedule_exceptions").insert({officer_id:m,date:e,shift_type_id:g,is_off:!1,is_partnership:!1,partnership_suspended:!0,partnership_suspension_reason:f,partner_officer_id:h,schedule_type:"pto_partner_available",position_name:(P==null?void 0:P.position_name)||"Available for Reassignment"}))}return(await Promise.all(b)).forEach((S,P)=>{S.error&&console.error(`Error updating record ${P}:`,S.error)}),await se.from("partnership_exceptions").insert({officer_id:h,partner_officer_id:m,date:e,shift_type_id:g,reason:`Officer on ${f} leave`,exception_type:"pto_suspension",created_at:new Date().toISOString()}),console.log(` Partnership suspended: ${y==null?void 0:y.full_name}  ${x==null?void 0:x.full_name}`),{success:!0,partnerName:x==null?void 0:x.full_name}}catch(y){return console.error("Error suspending partnership:",y),{success:!1,error:y instanceof Error?y.message:"Unknown error"}}},n=async(h,m)=>{var f,g;console.log(` Checking for partnership restoration for officer: ${h}`);try{const{data:y}=await se.from("schedule_exceptions").select(`
          id,
          partner_officer_id,
          partnership_suspended,
          partner_profile:profiles!schedule_exceptions_partner_officer_id_fkey (
            id,
            full_name
          )
        `).eq("officer_id",h).eq("date",e).eq("shift_type_id",m).eq("partnership_suspended",!0).maybeSingle();return!(y!=null&&y.partnership_suspended)||!y.partner_officer_id?(console.log("No suspended partnership found"),{success:!1,restored:!1}):(console.log(" Restoring suspended partnership..."),await se.from("schedule_exceptions").update({is_partnership:!0,partnership_suspended:!1,partnership_suspension_reason:null}).eq("officer_id",h).eq("date",e).eq("shift_type_id",m),await se.from("schedule_exceptions").update({is_partnership:!0,partnership_suspended:!1,partnership_suspension_reason:null}).eq("officer_id",y.partner_officer_id).eq("date",e).eq("shift_type_id",m),await se.from("partnership_exceptions").update({resolved_at:new Date().toISOString()}).eq("officer_id",h).eq("partner_officer_id",y.partner_officer_id).eq("date",e).eq("shift_type_id",m).eq("exception_type","pto_suspension"),console.log(` Partnership restored with ${(f=y.partner_profile)==null?void 0:f.full_name}`),{success:!0,restored:!0,partnerName:(g=y.partner_profile)==null?void 0:g.full_name})}catch(y){return console.error("Error restoring partnership:",y),{success:!1,restored:!1,error:y instanceof Error?y.message:"Unknown error"}}},i=async h=>{var p,v,b,j,S,P,M,I;const m=It(h).getDay();console.log(` Auto-creating partnerships from recurring schedules for ${h} (day ${m})`);const{data:f,error:g}=await se.from("recurring_schedules").select(`
        id,
        officer_id,
        partner_officer_id,
        shift_type_id,
        day_of_week,
        start_date,
        end_date,
        officer_profile:profiles!recurring_schedules_officer_id_fkey (
          id,
          full_name,
          rank
        ),
        partner_profile:profiles!recurring_schedules_partner_officer_id_fkey (
          id,
          full_name,
          rank
        ),
        shift_types (
          id,
          name
        )
      `).eq("is_partnership",!0).eq("day_of_week",m).lte("start_date",h).or(`end_date.is.null,end_date.gte.${h}`);if(g)return console.error("Error fetching recurring partnerships:",g),{created:0,errors:[]};if(!f||f.length===0)return console.log("No recurring partnerships found for today"),{created:0,errors:[]};console.log(`Found ${f.length} recurring partnerships to process`);const y=[];let x=0;for(const O of f)try{const{data:L}=await se.from("schedule_exceptions").select("id").eq("officer_id",O.officer_id).eq("date",h).eq("shift_type_id",O.shift_type_id).eq("is_partnership",!0).maybeSingle();if(L){console.log(`Skipping - partnership already exists for ${(p=O.officer_profile)==null?void 0:p.full_name}`);continue}const[{data:T},{data:k}]=await Promise.all([se.from("schedule_exceptions").select("id").eq("officer_id",O.officer_id).eq("date",h).eq("shift_type_id",O.shift_type_id).eq("is_off",!0).maybeSingle(),se.from("schedule_exceptions").select("id").eq("officer_id",O.partner_officer_id).eq("date",h).eq("shift_type_id",O.shift_type_id).eq("is_off",!0).maybeSingle()]);if(T||k){console.log(`Skipping - ${T?(v=O.officer_profile)==null?void 0:v.full_name:(b=O.partner_profile)==null?void 0:b.full_name} is on PTO`);continue}const{error:E}=await se.from("schedule_exceptions").insert([{officer_id:O.officer_id,partner_officer_id:O.partner_officer_id,date:h,shift_type_id:O.shift_type_id,is_partnership:!0,is_off:!1,schedule_type:"partnership_from_recurring",position_name:Os((j=O.officer_profile)==null?void 0:j.rank)?"Riding Partner (PPO)":"Riding Partner"},{officer_id:O.partner_officer_id,partner_officer_id:O.officer_id,date:h,shift_type_id:O.shift_type_id,is_partnership:!0,is_off:!1,schedule_type:"partnership_from_recurring",position_name:Os((S=O.partner_profile)==null?void 0:S.rank)?"Riding Partner (PPO)":"Riding Partner"}]);E?(console.error(`Error creating partnership for ${(P=O.officer_profile)==null?void 0:P.full_name}:`,E),y.push(E.message)):(console.log(` Created partnership: ${(M=O.officer_profile)==null?void 0:M.full_name}  ${(I=O.partner_profile)==null?void 0:I.full_name}`),x++)}catch(L){console.error(`Error processing recurring partnership ${O.id}:`,L),y.push(L instanceof Error?L.message:"Unknown error")}return console.log(`Auto-creation complete: ${x} partnerships created, ${y.length} errors`),{created:x,errors:y}},a=Xt({mutationFn:async h=>{if(console.log(" Updating schedule with params:",h),h.type==="recurring"){const{data:m,error:f}=await se.from("schedule_exceptions").select("id, is_partnership, partner_officer_id").eq("officer_id",h.officerId).eq("date",h.date).eq("shift_type_id",h.shiftTypeId).eq("is_off",!1);if(f)throw f;if(m&&m.length>0){const g=m[0];if(h.isPartnership&&h.partnerOfficerId){console.log(" Updating partnership in exception");const{error:y}=await se.from("schedule_exceptions").update({position_name:h.positionName,unit_number:h.unitNumber,notes:h.notes,partner_officer_id:h.partnerOfficerId,is_partnership:h.isPartnership}).eq("id",g.id);if(y)throw y;const{data:x}=await se.from("schedule_exceptions").select("id").eq("officer_id",h.partnerOfficerId).eq("date",h.date).eq("shift_type_id",h.shiftTypeId).eq("is_off",!1).maybeSingle();x&&await se.from("schedule_exceptions").update({partner_officer_id:h.officerId,is_partnership:h.isPartnership}).eq("id",x.id)}else{const{error:y}=await se.from("schedule_exceptions").update({position_name:h.positionName,unit_number:h.unitNumber,notes:h.notes,partner_officer_id:h.partnerOfficerId||null,is_partnership:h.isPartnership||!1}).eq("id",g.id);if(y)throw y}}else{const{error:g}=await se.from("schedule_exceptions").insert({officer_id:h.officerId,date:h.date,shift_type_id:h.shiftTypeId,is_off:!1,position_name:h.positionName,unit_number:h.unitNumber,notes:h.notes,partner_officer_id:h.partnerOfficerId,is_partnership:h.isPartnership,custom_start_time:null,custom_end_time:null});if(g)throw g}}else{const{error:m}=await se.from("schedule_exceptions").update({position_name:h.positionName,unit_number:h.unitNumber,notes:h.notes,partner_officer_id:h.partnerOfficerId,is_partnership:h.isPartnership}).eq("id",h.scheduleId);if(m)throw m;if(h.isPartnership&&h.partnerOfficerId){const{data:f}=await se.from("schedule_exceptions").select("id").eq("officer_id",h.partnerOfficerId).eq("date",h.date).eq("shift_type_id",h.shiftTypeId).maybeSingle();f&&await se.from("schedule_exceptions").update({partner_officer_id:h.officerId,is_partnership:h.isPartnership}).eq("id",f.id)}}},onSuccess:()=>{ge.success("Schedule updated"),t.invalidateQueries({queryKey:["daily-schedule"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})},onError:h=>{ge.error(h.message||"Failed to update schedule")}}),o=Xt({mutationFn:async({officer:h,partnerOfficerId:m,action:f,position:g})=>{var y,x,p,v,b;if(console.log(" Partnership mutation:",{officerName:h.name,officerId:h.officerId,partnerOfficerId:m,action:f,position:g}),f==="create"&&m){if(!h.officerId||!m)throw new Error("Missing officer IDs for partnership");const j=h.date||e,S=h.shift.id,P=h.dayOfWeek||It(j).getDay(),[{data:M},{data:I}]=await Promise.all([se.from("schedule_exceptions").select("id").eq("officer_id",h.officerId).eq("date",j).eq("shift_type_id",S).eq("is_off",!0).maybeSingle(),se.from("schedule_exceptions").select("id").eq("officer_id",m).eq("date",j).eq("shift_type_id",S).eq("is_off",!0).maybeSingle()]);if(M)throw new Error(`${h.name} is on PTO and cannot be partnered`);if(I)throw new Error("Partner officer is on PTO and cannot be partnered");const[{data:O},{data:L}]=await Promise.all([se.from("schedule_exceptions").select("id, is_partnership, position_name, unit_number, notes, schedule_type").eq("officer_id",h.officerId).eq("date",j).eq("shift_type_id",S).eq("is_off",!1).maybeSingle(),se.from("schedule_exceptions").select("id, is_partnership, position_name, unit_number, notes, schedule_type").eq("officer_id",m).eq("date",j).eq("shift_type_id",S).eq("is_off",!1).maybeSingle()]);if(O!=null&&O.is_partnership)throw new Error(`${h.name} is already in a partnership for this shift`);if(L!=null&&L.is_partnership)throw new Error("Partner officer is already in a partnership for this shift");const[{data:T},{data:k}]=await Promise.all([se.from("profiles").select("full_name, rank").eq("id",h.officerId).single(),se.from("profiles").select("full_name, rank").eq("id",m).single()]),E=g||(O==null?void 0:O.position_name)||(Os(T==null?void 0:T.rank)?"Riding Partner (PPO)":"Riding Partner"),A=(L==null?void 0:L.position_name)||(Os(k==null?void 0:k.rank)?"Riding Partner (PPO)":"Riding Partner"),q=h.type==="recurring"||h.dayOfWeek!==void 0&&h.dayOfWeek!==null,U=[];O?U.push(se.from("schedule_exceptions").update({is_partnership:!0,partner_officer_id:m,position_name:E,schedule_type:f==="emergency"?"emergency_partnership":"manual_partnership"}).eq("id",O.id)):U.push(se.from("schedule_exceptions").insert({officer_id:h.officerId,date:j,shift_type_id:S,is_off:!1,is_partnership:!0,partner_officer_id:m,position_name:E,unit_number:h.unitNumber||null,notes:h.notes||null,schedule_type:f==="emergency"?"emergency_partnership":"manual_partnership",custom_start_time:null,custom_end_time:null})),L?U.push(se.from("schedule_exceptions").update({is_partnership:!0,partner_officer_id:h.officerId,position_name:A,schedule_type:f==="emergency"?"emergency_partnership":"manual_partnership"}).eq("id",L.id)):U.push(se.from("schedule_exceptions").insert({officer_id:m,date:j,shift_type_id:S,is_off:!1,is_partnership:!0,partner_officer_id:h.officerId,position_name:A,unit_number:h.partnerUnitNumber||null,notes:h.partnerNotes||null,schedule_type:f==="emergency"?"emergency_partnership":"manual_partnership",custom_start_time:null,custom_end_time:null}));const C=(await Promise.all(U)).filter(Y=>Y.error).map(Y=>Y.error);if(C.length>0)throw console.error("Errors creating partnership:",C),new Error(`Failed to create partnership: ${(y=C[0])==null?void 0:y.message}`);if(q){console.log(" Updating recurring_schedules for partnership");const Y=await IC(h.officerId,m,S,P,E,A);Y.success||console.warn(" Could not update recurring schedules, but exception was created:",Y.error)}const F=[se.from("schedule_exceptions").select("id, is_partnership, partner_officer_id, position_name").eq("officer_id",h.officerId).eq("date",j).eq("shift_type_id",S).eq("is_off",!1).single(),se.from("schedule_exceptions").select("id, is_partnership, partner_officer_id, position_name").eq("officer_id",m).eq("date",j).eq("shift_type_id",S).eq("is_off",!1).single()],X=await Promise.all(F),[re,z]=X;if(re.error||!((x=re.data)!=null&&x.is_partnership))throw console.error(" Officer partnership verification failed:",re.error),new Error("Failed to verify officer partnership creation");if(z.error||!((p=z.data)!=null&&p.is_partnership))throw console.error(" Partner partnership verification failed:",z.error),new Error("Failed to verify partner partnership creation");return console.log(" Partnership verified for both officers"),await se.from("partnership_exceptions").insert({officer_id:h.officerId,partner_officer_id:m,date:j,shift_type_id:S,reason:f==="emergency"?"Emergency reassignment":"Partnership created",exception_type:f==="emergency"?"emergency_reassignment":"created",created_at:new Date().toISOString()}),console.log(` Partnership created: ${T==null?void 0:T.full_name}  ${k==null?void 0:k.full_name}`),{success:!0,officerName:T==null?void 0:T.full_name,partnerName:k==null?void 0:k.full_name,officerPosition:E,partnerPosition:A}}else if(f==="remove"){console.log("Removing partnership for officer:",h.officerId);const j=h.date||e,S=h.shift.id,P=h.dayOfWeek||It(j).getDay(),M=h.partnerOfficerId||((v=h.partnerData)==null?void 0:v.partnerOfficerId),{data:I}=await se.from("schedule_exceptions").select("position_name, unit_number, notes, schedule_type").eq("officer_id",h.officerId).eq("date",j).eq("shift_type_id",S).eq("is_off",!1).maybeSingle(),{error:O}=await se.from("schedule_exceptions").update({is_partnership:!1,partner_officer_id:null,partnership_suspended:!1,partnership_suspension_reason:null,position_name:(I==null?void 0:I.schedule_type)==="manual_partnership"||(I==null?void 0:I.schedule_type)==="emergency_partnership"?null:I==null?void 0:I.position_name}).eq("officer_id",h.officerId).eq("date",j).eq("shift_type_id",S).eq("is_off",!1);if(O)throw console.error("Error removing officer partnership:",O),O;if(console.log("Successfully removed partnership from officer"),M){console.log("Removing partnership from partner officer:",M);const{data:L}=await se.from("schedule_exceptions").select("position_name, unit_number, notes, schedule_type").eq("officer_id",M).eq("date",j).eq("shift_type_id",S).eq("is_off",!1).maybeSingle(),{error:T}=await se.from("schedule_exceptions").update({is_partnership:!1,partner_officer_id:null,partnership_suspended:!1,partnership_suspension_reason:null,position_name:(L==null?void 0:L.schedule_type)==="manual_partnership"||(L==null?void 0:L.schedule_type)==="emergency_partnership"?null:L==null?void 0:L.position_name}).eq("officer_id",M).eq("date",j).eq("shift_type_id",S).eq("is_off",!1);T?console.error("Error removing partner relationship:",T):console.log("Successfully removed partnership from partner officer")}else console.warn("No partnerOfficerId found for removal");if((h.type==="recurring"||h.originalScheduleId)&&(console.log(" Also removing from recurring_schedules"),M)){const L=await LC(h.officerId,M,S,P);L.success||console.warn(" Could not remove from recurring schedules:",L.error)}return await se.from("partnership_exceptions").insert({officer_id:h.officerId,partner_officer_id:M,date:j,shift_type_id:S,reason:"Partnership removed",exception_type:"removed",created_at:new Date().toISOString()}),{success:!0,officerName:h.name,partnerName:(b=h.partnerData)==null?void 0:b.partnerName}}throw new Error(`Unknown action: ${f}`)},onSuccess:(h,m)=>{const f=m.action;f==="remove"?ge.success("Partnership removed successfully"):f==="emergency"?ge.success("Emergency partnership created successfully"):ge.success("Partnership created successfully"),t.invalidateQueries({queryKey:["daily-schedule"]}),t.invalidateQueries({queryKey:["weekly-schedule"]}),t.invalidateQueries({queryKey:["dashboard-stats"]}),t.invalidateQueries({queryKey:["available-partners"]}),setTimeout(()=>{t.invalidateQueries({queryKey:["daily-schedule"]})},500)},onError:h=>{console.error("Partnership mutation error:",h),ge.error(h.message||"Failed to update partnership")}}),l=Xt({mutationFn:async({officerId:h,shiftId:m,position:f,unitNumber:g,notes:y,partnerOfficerId:x,isPartnership:p})=>{const{data:v,error:b}=await se.from("schedule_exceptions").select("id").eq("officer_id",h).eq("date",e).eq("shift_type_id",m).eq("is_off",!1);if(b)throw b;if(v&&v.length>0){if(v.length>1){const S=v.slice(1);for(const P of S)await se.from("schedule_exceptions").delete().eq("id",P.id)}const{error:j}=await se.from("schedule_exceptions").update({position_name:f,unit_number:g,notes:y,partner_officer_id:x,is_partnership:p,custom_start_time:null,custom_end_time:null}).eq("id",v[0].id);if(j)throw j}else{const{error:j}=await se.from("schedule_exceptions").insert({officer_id:h,date:e,shift_type_id:m,is_off:!1,position_name:f,unit_number:g,notes:y,partner_officer_id:x,is_partnership:p,custom_start_time:null,custom_end_time:null});if(j)throw j;if(p&&x){const{error:S}=await se.from("schedule_exceptions").insert({officer_id:x,date:e,shift_type_id:m,is_off:!1,position_name:"Riding Partner",partner_officer_id:h,is_partnership:!0,custom_start_time:null,custom_end_time:null});S&&console.error("Error creating partner record:",S)}}},onSuccess:()=>{ge.success("Officer added to schedule"),t.invalidateQueries({queryKey:["daily-schedule"]})},onError:h=>{ge.error(h.message||"Failed to add officer")}}),c=Xt({mutationFn:async({ptoId:h,unitNumber:m,notes:f})=>{const{error:g}=await se.from("schedule_exceptions").update({unit_number:m,notes:f}).eq("id",h);if(g)throw g},onSuccess:()=>{ge.success("PTO details updated"),t.invalidateQueries({queryKey:["daily-schedule"]})},onError:h=>{ge.error(h.message||"Failed to update PTO details")}}),d=Xt({mutationFn:async h=>{if(console.log(" Removing officer from schedule:",h),h.type==="exception"){if(h.isPartnership&&h.partnerOfficerId){console.log(" Officer is in a partnership, removing partner too"),await se.from("schedule_exceptions").update({partner_officer_id:null,is_partnership:!1,partnership_suspended:!1,partnership_suspension_reason:null}).eq("id",h.scheduleId);const{data:f}=await se.from("schedule_exceptions").select("id").eq("officer_id",h.partnerOfficerId).eq("date",e).eq("shift_type_id",h.shift.id).maybeSingle();f&&await se.from("schedule_exceptions").update({partner_officer_id:null,is_partnership:!1,partnership_suspended:!1,partnership_suspension_reason:null}).eq("id",f.id)}const{error:m}=await se.from("schedule_exceptions").delete().eq("id",h.scheduleId);if(m)throw m}},onSuccess:()=>{ge.success("Officer removed from daily schedule"),t.invalidateQueries({queryKey:["daily-schedule"]})},onError:h=>{ge.error(h.message||"Failed to remove officer")}}),u=Xt({mutationFn:async h=>{var y;const m=ite(h.startTime,h.endTime);(y=WD.find(x=>x.value===h.ptoType))==null||y.column;const f=await n(h.officerId,h.shiftTypeId),{error:g}=await se.from("schedule_exceptions").delete().eq("id",h.id);if(g)throw g;return await se.from("schedule_exceptions").delete().eq("officer_id",h.officerId).eq("date",e).eq("shift_type_id",h.shiftTypeId).eq("is_off",!1),{restorationResult:f,hoursUsed:m}},onSuccess:h=>{let m="PTO removed and balance restored";h.restorationResult.restored&&(m+=`. Partnership with ${h.restorationResult.partnerName} has been restored.`),ge.success(m),t.invalidateQueries({queryKey:["daily-schedule"]}),t.invalidateQueries({queryKey:["weekly-schedule"]})},onError:h=>{ge.error(h.message||"Failed to remove PTO")}});return{updateScheduleMutation:a,updatePTODetailsMutation:c,removeOfficerMutation:d,addOfficerMutation:l,removePTOMutation:u,updatePartnershipMutation:o,suspendPartnershipForPTO:r,restorePartnershipAfterPTO:n,autoCreatePartnershipsFromRecurring:i,updateRecurringPartnership:IC,removeRecurringPartnership:LC}},ml=()=>bt({queryKey:["website-settings"],queryFn:async()=>{try{const{data:e,error:t}=await se.from("website_settings").select("*").limit(1).single();if(t){if(t.code==="PGRST116")return{enable_notifications:!1,show_pto_balances:!1,pto_balances_visible:!1,pdf_layout_settings:tr,show_staffing_overview:!0,show_pto_tab:!0,enable_anniversary_alerts:!1,enable_birthday_alerts:!1,anniversary_alert_recipients:["admin","supervisor"],enable_events_dashboard:!1,show_special_occasions_in_schedule:!0};throw t}return e.pdf_layout_settings?e.pdf_layout_settings={...tr,...e.pdf_layout_settings,fontSizes:{...tr.fontSizes,...e.pdf_layout_settings.fontSizes},sections:{...tr.sections,...e.pdf_layout_settings.sections},tableSettings:{...tr.tableSettings,...e.pdf_layout_settings.tableSettings},colorSettings:{...tr.colorSettings,...e.pdf_layout_settings.colorSettings}}:e.pdf_layout_settings=tr,e.show_special_occasions_in_schedule===void 0&&(e.show_special_occasions_in_schedule=!0),e.enable_events_dashboard===void 0&&(e.enable_events_dashboard=!1),e}catch(e){return console.error("Error in useWebsiteSettings:",e),{enable_notifications:!1,show_pto_balances:!1,pto_balances_visible:!1,pdf_layout_settings:tr,show_staffing_overview:!0,show_pto_tab:!0,enable_anniversary_alerts:!1,enable_birthday_alerts:!1,anniversary_alert_recipients:["admin","supervisor"],enable_events_dashboard:!1,show_special_occasions_in_schedule:!0}}}}),ate=({ppoOfficer:e,date:t,shift:r,open:n,onOpenChange:i})=>{var m;const[a,o]=w.useState(""),l=Lr(),c=f=>{if(!f||!f.rank)return!1;const g=f.rank.toString().toLowerCase().trim();return g==="ppo"||g==="probationary"||g==="probationary officer"||g==="probationary peace officer"||g==="probationary police officer"||g.includes("ppo")||g.includes("probationary officer")||g.includes("probationary peace officer")};w.useEffect(()=>{if(n&&e){const f=c(e);if(console.log(" PPO Validation Check:",{officerName:e.name,officerRank:e.rank,isPPO:f}),!f){ge.error("Emergency partner reassignment is only available for Probationary Officers (PPOs)"),i(!1);return}e.partnershipSuspended||(ge.error("Emergency partners are only needed when the original partnership is suspended"),i(!1))}},[n,e,i]);const{data:d,isLoading:u}=bt({queryKey:["emergency-partners",e==null?void 0:e.officerId,t,r==null?void 0:r.id],queryFn:async()=>{if(!e||!r)return console.log(" Missing officer or shift data"),[];console.log(" Finding emergency partners for PPO:",{ppoOfficer:e.name,ppoRank:e.rank,date:t,shiftId:r.id,shiftName:r.name});let f;try{if(f=It(t),!ta(f))throw new Error("Invalid date")}catch{return console.error("Invalid date format:",t),ge.error("Invalid date format"),[]}const g=f.getDay(),y=f;console.log(" Parsed date info:",{dayOfWeek:g,currentDate:Pe(y,"yyyy-MM-dd"),isValid:ta(y)});const{data:x,error:p}=await se.from("schedule_exceptions").select(`
          id,
          officer_id,
          is_partnership,
          partnership_suspended,
          is_off,
          notes,
          position_name,
          unit_number,
          profiles:officer_id (
            id,
            full_name,
            badge_number,
            rank
          )
        `).eq("date",t).eq("shift_type_id",r.id).neq("officer_id",e.officerId);if(p)throw console.error("Error finding schedule exceptions:",p),p;const{data:v,error:b}=await se.from("recurring_schedules").select(`
          id,
          officer_id,
          is_partnership,
          partnership_suspended,
          day_of_week,
          start_date,
          end_date,
          notes,
          position_name,
          unit_number,
          profiles:profiles!recurring_schedules_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank
          )
        `).eq("shift_type_id",r.id).eq("day_of_week",g);if(b)throw console.error("Error finding recurring schedules:",b),b;console.log(" Raw data counts:",{exceptionsCount:(x==null?void 0:x.length)||0,recurringCount:(v==null?void 0:v.length)||0});const j=new Map;if(x)for(const P of x){if(!P.profiles){console.log(" Skipping exception without profile");continue}if(P.is_off){console.log(` Skipping officer on PTO via exception: ${P.profiles.full_name}`);continue}if(j.has(P.officer_id)){console.log(` Skipping duplicate officer in exceptions: ${P.profiles.full_name}`);continue}j.set(P.officer_id,{id:P.officer_id,name:P.profiles.full_name,badge:P.profiles.badge_number,rank:P.profiles.rank,position:P.position_name,unitNumber:P.unit_number,isPartnership:P.is_partnership,partnershipSuspended:P.partnership_suspended,source:"exception",scheduleId:P.id,notes:P.notes,isPPO:c(P.profiles)})}if(v)for(const P of v){if(!P.profiles){console.log(" Skipping recurring schedule without profile");continue}if(j.has(P.officer_id)){console.log(` Skipping - has exception override: ${P.profiles.full_name}`);continue}const M=It(P.start_date),I=P.end_date?It(P.end_date):null;if(!ta(M)){console.log(` Invalid start date: ${P.start_date} for ${P.profiles.full_name}`);continue}if(y<M){console.log(` Skipping - date before start: ${P.profiles.full_name}`);continue}if(I&&!ta(I)){console.log(` Invalid end date: ${P.end_date} for ${P.profiles.full_name}`);continue}if(I&&y>I){console.log(` Skipping - date after end: ${P.profiles.full_name}`);continue}if(P.is_off){console.log(` Skipping officer marked as off in recurring: ${P.profiles.full_name}`);continue}j.set(P.officer_id,{id:P.officer_id,name:P.profiles.full_name,badge:P.profiles.badge_number,rank:P.profiles.rank,position:P.position_name,unitNumber:P.unit_number,isPartnership:P.is_partnership,partnershipSuspended:P.partnership_suspended,source:"recurring",scheduleId:P.id,notes:P.notes,isPPO:c(P.profiles)})}console.log(" Total officers found (before filtering):",Array.from(j.values()).map(P=>({name:P.name,rank:P.rank,isPPO:P.isPPO,position:P.position,source:P.source,hasPartnership:P.isPartnership,partnershipSuspended:P.partnershipSuspended})));const S=Array.from(j.values()).filter(P=>P.isPPO?(console.log(` Strictly excluding PPO: ${P.name} (Rank: ${P.rank})`),!1):P.isPartnership&&!P.partnershipSuspended?(console.log(` Skipping - in active partnership: ${P.name}`),!1):(console.log(` Available for emergency assignment: ${P.name} (${P.rank}) - Position: ${P.position} - Source: ${P.source}`),!0));return console.log(" Emergency partners found:",S.map(P=>({name:P.name,rank:P.rank,isPPO:P.isPPO,position:P.position,source:P.source,hasSuspendedPartnership:P.partnershipSuspended}))),S.sort((P,M)=>{const I=T=>{const k=T.trim().split(" ");return k[k.length-1]||""},O=I(P.name).toLowerCase(),L=I(M.name).toLowerCase();return O.localeCompare(L)})},enabled:n&&e&&r&&c(e)}),h=Xt({mutationFn:async f=>{var L;if(!f||!e||!r)throw new Error("Missing required data for emergency partnership");const g=d==null?void 0:d.find(T=>T.id===f);if(!g)throw new Error("Selected partner not found");if(c(g))throw new Error("Cannot assign a PPO as an emergency partner to another PPO");console.log(" Creating emergency partnership for PPO:",{ppo:e.name,ppoRank:e.rank,ppoId:e.officerId,ppoPosition:e.position,partner:g.name,partnerRank:g.rank,partnerId:f,partnerPosition:g.position,date:t,shift:r.name,shiftId:r.id});const{data:y,error:x}=await se.from("schedule_exceptions").select("*").eq("officer_id",e.officerId).eq("date",t).eq("shift_type_id",r.id).maybeSingle();if(x&&x.code!=="PGRST116")throw console.error("Error fetching PPO schedule:",x),x;const{data:p,error:v}=await se.from("schedule_exceptions").select("*").eq("officer_id",f).eq("date",t).eq("shift_type_id",r.id).maybeSingle();if(v&&v.code!=="PGRST116")throw console.error("Error fetching partner schedule:",v),v;const b=(y==null?void 0:y.position_name)||e.position||null,j=(p==null?void 0:p.position_name)||g.position||null,S={officer_id:e.officerId,partner_officer_id:f,date:t,shift_type_id:r.id,is_partnership:!0,is_emergency_partnership:!0,partnership_suspended:!1,partnership_suspension_reason:null,schedule_type:"emergency_partnership",notes:`EMERGENCY: Partnered with ${g.name} while original partner on PTO`,is_off:!1,position_name:b};y!=null&&y.unit_number?S.unit_number=y.unit_number:e.unitNumber&&(S.unit_number=e.unitNumber);const{error:P}=await se.from("schedule_exceptions").upsert(S,{onConflict:"officer_id,date,shift_type_id"});if(P)throw console.error("Error creating PPO emergency exception:",P),P;const M={officer_id:f,partner_officer_id:e.officerId,date:t,shift_type_id:r.id,is_partnership:!0,is_emergency_partnership:!0,partnership_suspended:!1,partnership_suspension_reason:null,schedule_type:"emergency_partnership",notes:`EMERGENCY: Partnered with PPO ${e.name} (original partner on PTO)`,is_off:!1,position_name:j};p!=null&&p.unit_number?M.unit_number=p.unit_number:g.unitNumber&&(M.unit_number=g.unitNumber);const{error:I}=await se.from("schedule_exceptions").upsert(M,{onConflict:"officer_id,date,shift_type_id"});if(I)throw console.error("Error creating partner emergency exception:",I),I;const{error:O}=await se.from("partnership_exceptions").insert({officer_id:e.officerId,partner_officer_id:f,date:t,shift_type_id:r.id,reason:"Emergency assignment - original PPO partner on PTO",exception_type:"emergency_reassignment",created_at:new Date().toISOString(),is_ppo_partnership:!0,can_emergency_reassign:!1,is_emergency_assignment:!0});return O&&console.error("Error logging emergency partnership exception:",O),(L=e.partnerData)!=null&&L.partnerOfficerId&&await se.from("partnership_exceptions").update({has_emergency_assignment:!0,emergency_assigned_to:f}).eq("officer_id",e.officerId).eq("partner_officer_id",e.partnerData.partnerOfficerId).eq("date",t).eq("exception_type","pto_suspension"),{partnerName:g.name,ppoPosition:b,partnerPosition:j,ppoName:e.name}},onSuccess:f=>{ge.success(`Emergency partnership created: PPO ${f.ppoName} paired with ${f.partnerName}. Positions preserved.`),l.invalidateQueries({queryKey:["daily-schedule"]}),l.invalidateQueries({queryKey:["weekly-schedule"]}),l.invalidateQueries({queryKey:["emergency-partners"]}),i(!1),o("")},onError:f=>{ge.error(f.message||"Failed to create emergency partnership"),console.error("Emergency partnership error:",f)}});return!e||!c(e)?null:s.jsx(rn,{open:n,onOpenChange:i,children:s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsxs(Yr,{children:[s.jsxs(Kr,{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-5 w-5 text-amber-600"}),"Emergency Partner Reassignment"]}),s.jsxs(as,{children:[e.name,"'s regular partner is unavailable. Select a temporary emergency partner for today."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"font-medium text-amber-800",children:"PPO Officer:"}),s.jsxs(Re,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[s.jsx(hd,{className:"h-3 w-3 mr-1"}),"PPO"]})]}),s.jsx("p",{className:"font-semibold text-lg",children:e.name}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-amber-700",children:"Badge:"}),s.jsx("span",{className:"ml-2 font-medium",children:e.badge||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-amber-700",children:"Rank:"}),s.jsx("span",{className:"ml-2 font-medium",children:e.rank||"N/A"})]}),e.position&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-amber-700",children:"Current Position:"}),s.jsx("span",{className:"ml-2 font-medium",children:e.position})]})]}),s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[s.jsx(pr,{className:"h-3 w-3"}),s.jsxs("span",{children:["Shift: ",r.name]})]}),s.jsxs("div",{className:"text-amber-700",children:["Date: ",Pe(It(t),"MMM d, yyyy")]})]}),((m=e.partnerData)==null?void 0:m.partnerName)&&s.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Original Partnership:"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:[e.partnerData.partnerName," is on PTO"]})]})]}),s.jsxs("div",{children:[s.jsx(Label,{htmlFor:"emergency-partner-select",children:"Select Emergency Partner"}),s.jsxs(Wt,{value:a,onValueChange:o,children:[s.jsx(Bt,{id:"emergency-partner-select",children:s.jsx(Vt,{placeholder:"Choose available officer"})}),s.jsx(qt,{children:u?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-amber-600 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading available officers..."})]}):(d==null?void 0:d.length)===0?s.jsxs("div",{className:"p-4 text-center space-y-2",children:[s.jsx(On,{className:"h-8 w-8 text-amber-600 mx-auto"}),s.jsx("p",{className:"text-sm font-medium",children:"No available officers found"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All regular officers are either:"}),s.jsxs("ul",{className:"text-xs text-left text-muted-foreground list-disc pl-4 space-y-1",children:[s.jsx("li",{children:"Already in active partnerships"}),s.jsx("li",{children:"On PTO/off duty"}),s.jsx("li",{children:"PPOs (cannot partner with PPOs)"}),s.jsx("li",{children:"Not scheduled for this shift"})]})]}):s.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[s.jsx("div",{className:"text-xs text-muted-foreground p-2 border-b sticky top-0 bg-background",children:"Select a regular officer (non-PPO) for temporary assignment"}),d==null?void 0:d.map(f=>s.jsx(ct,{value:f.id,children:s.jsxs("div",{className:"flex flex-col py-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:f.name}),s.jsx(Re,{variant:"outline",className:"text-xs",children:f.source==="exception"?"Exception":"Recurring"})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:["Badge: ",f.badge||"N/A"]}),s.jsx("span",{children:""}),s.jsx("span",{children:f.rank||"Officer"})]}),f.position&&s.jsxs("div",{className:"text-blue-600",children:["Position: ",f.position]}),f.partnershipSuspended&&s.jsxs("div",{className:"text-amber-600",children:[s.jsx(jr,{className:"h-3 w-3 inline mr-1"}),"Available (Partner on PTO)"]})]})]})},f.id))]})})]}),d&&d.length>0&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Select a regular officer (non-PPO) to temporarily partner with this PPO for today only."})]}),s.jsx(Ne,{onClick:()=>h.mutate(a),disabled:!a||h.isPending,className:"w-full bg-amber-600 hover:bg-amber-700",children:h.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Assigning Emergency Partner..."]}):s.jsxs(s.Fragment,{children:[s.jsx(On,{className:"h-4 w-4 mr-2"}),"Assign Emergency Partner"]})}),s.jsxs("div",{className:"text-xs text-muted-foreground p-3 bg-gray-50 rounded border space-y-2",children:[s.jsx("div",{className:"font-medium text-gray-800",children:"Emergency Assignment Rules:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[s.jsx("li",{children:"This is a temporary assignment for today only"}),s.jsx("li",{children:"The original partnership will automatically resume tomorrow"}),s.jsx("li",{children:"Only regular officers (non-PPOs) can be emergency partners"}),s.jsx("li",{children:"Both officers will keep their current positions/assignments"}),s.jsx("li",{children:"Emergency assignments are only for PPOs whose trainers are on PTO"})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[s.jsx(hd,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"PPO Requirement:"})]}),s.jsx("p",{className:"mt-1",children:"Probationary Officers (PPOs) must always be partnered with a regular officer and cannot work alone."})]})]})]})]})})},fn=e=>(e==null?void 0:e.split(" ").pop())||e,$y=(e="")=>{if(!e)return"";const t=e.trim().split(/\s+/);return t[t.length-1]||""},ote=(e,t=0,r=null,n=null,i=null)=>{if(console.log("calculateServiceCredit called with:",{hireDate:e,override:t,hasOverride:t!=null&&t>0,promotionDateSergeant:r,promotionDateLieutenant:n,currentRank:i}),t!=null&&t>0)return console.log(`Using override: ${t} (instead of calculating)`),t;console.log("No override or override is 0, calculating from dates...");let a=null;if(i){const o=i.toLowerCase();(o.includes("sergeant")||o.includes("sgt"))&&r?a=new Date(r):(o.includes("lieutenant")||o.includes("lt"))&&n?a=new Date(n):o.includes("chief")&&n&&(a=new Date(n))}if(!a&&e&&(a=new Date(e)),!a)return console.log("No relevant date found, returning 0"),0;try{const o=new Date,l=o.getFullYear()-a.getFullYear(),c=o.getMonth()-a.getMonth(),d=o.getDate()-a.getDate(),u=l+c/12+d/365,h=Math.max(0,Math.round(u*10)/10);return console.log(`Calculated service credit: ${h} from date: ${a.toISOString().split("T")[0]}`),h}catch(o){return console.error("Error calculating service credit:",o),0}},FC=e=>{const t=e.badge_number||e.badgeNumber;if(!t)return 9999;const r=parseInt(t);return isNaN(r)?9999:r},B2=e=>{if(console.log("getServiceCreditForSorting called for:",{name:e.full_name||e.officerName,existingServiceCredit:e.service_credit,existingServiceCreditAlt:e.serviceCredit,override:e.service_credit_override,hasOverride:e.service_credit_override!==void 0&&e.service_credit_override!==null&&e.service_credit_override>0}),e.service_credit!==void 0)return console.log(`Using existing service_credit: ${e.service_credit}`),e.service_credit;if(e.serviceCredit!==void 0)return console.log(`Using existing serviceCredit: ${e.serviceCredit}`),e.serviceCredit;const t=ote(e.hire_date||null,e.service_credit_override||0,e.promotion_date_sergeant||null,e.promotion_date_lieutenant||null,e.rank||null);return console.log(`Final calculated service credit: ${t} for ${e.full_name||e.officerName}`),t},lte=e=>!e||e.length===0?[]:[...e].sort((t,r)=>{const n=$y(t.full_name||t.officerName||""),i=$y(r.full_name||r.officerName||"");return n.localeCompare(i)}),pf=e=>{if(!e||e.length===0)return[];console.log("=== Sorting Officers Consistently ==="),console.log("Total officers to sort:",e.length);const t=[],r=[],n=[],i=[];e.forEach(o=>{var c;const l=((c=o.rank)==null?void 0:c.toLowerCase())||"";l.includes("probationary")||l.includes("ppo")?i.push(o):l.includes("lieutenant")||l.includes("lt")||l.includes("chief")?t.push(o):l.includes("sergeant")||l.includes("sgt")?r.push(o):n.push(o)}),console.log("Categories found:",{lieutenantsAndChiefs:t.length,sergeants:r.length,regularOfficers:n.length,ppos:i.length});const a=(o,l)=>{const c=B2(o),d=B2(l);if(d!==c)return console.log(`Service credit sort: ${o.full_name||o.officerName} (${c}) vs ${l.full_name||l.officerName} (${d}) -> ${d-c}`),d-c;const u=FC(o),h=FC(l);if(u!==h)return console.log(`Badge sort (equal credits): ${o.full_name||o.officerName} (${u}) vs ${l.full_name||l.officerName} (${h}) -> ${u-h}`),u-h;const m=$y(o.full_name||o.officerName||""),f=$y(l.full_name||l.officerName||"");return m.localeCompare(f)};return t.sort(a),r.sort(a),n.sort(a),i.sort(a),console.log("=== Sorting Complete ==="),[...t,...r,...n,...i]},go=e=>{if(!e)return"Ofc";const t=e.toLowerCase();return t.includes("sergeant")||t.includes("sgt")?"Sgt":t.includes("lieutenant")||t.includes("lt")?"LT":t.includes("deputy")||t.includes("deputy chief")?"DC":t.includes("chief")&&!t.includes("deputy")?"CHIEF":"Ofc"},YD=e=>{if(!e)return 99;const t=Object.keys(Ia).find(r=>r.toLowerCase()===e.toLowerCase());return t?Ia[t]:99},Es=e=>{var r;return(r=e.rank)!=null&&r.toLowerCase(),YD(e.rank)<Ia.Officer},cte=e=>{var t,r,n,i,a,o,l,c,d,u,h,m;return{id:e.id||e.officerId||((t=e.profile)==null?void 0:t.id),full_name:e.full_name||e.officerName||((r=e.profile)==null?void 0:r.full_name),officerName:e.officerName||e.full_name||((n=e.profile)==null?void 0:n.full_name),badge_number:e.badge_number||e.badgeNumber||((i=e.profile)==null?void 0:i.badge_number),badgeNumber:e.badgeNumber||e.badge_number||((a=e.profile)==null?void 0:a.badge_number),rank:e.rank||((o=e.profile)==null?void 0:o.rank),service_credit:e.service_credit||e.serviceCredit||((l=e.profile)==null?void 0:l.service_credit),serviceCredit:e.serviceCredit||e.service_credit||((c=e.profile)==null?void 0:c.service_credit),hire_date:e.hire_date||((d=e.profile)==null?void 0:d.hire_date),service_credit_override:e.service_credit_override||((u=e.profile)==null?void 0:u.service_credit_override)||0,promotion_date_sergeant:e.promotion_date_sergeant||((h=e.profile)==null?void 0:h.promotion_date_sergeant),promotion_date_lieutenant:e.promotion_date_lieutenant||((m=e.profile)==null?void 0:m.promotion_date_lieutenant)}},dte=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("riding with")||t.includes("riding partner")||t.includes("emergency partner")||t==="other"},ute=e=>{if(!e||dte(e))return!1;const r=e.toLowerCase().includes("other"),n=os.includes(e);return r||!n},hte=["vacation","holiday","sick","comp","other"],Pw=e=>{var n,i,a,o,l,c;if(!((n=e.shiftInfo)!=null&&n.hasPTO))return!1;const t=((o=(a=(i=e.shiftInfo)==null?void 0:i.ptoData)==null?void 0:a.ptoType)==null?void 0:o.toLowerCase())||"",r=((c=(l=e.shiftInfo)==null?void 0:l.reason)==null?void 0:c.toLowerCase())||"";return hte.some(d=>t.includes(d)||r.includes(d))},kw=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("other (custom)")||t.startsWith("other")},fte=e=>{if(!(e!=null&&e.officers))return{supervisorCount:0,officerCount:0,ppoCount:0};let t=0,r=0,n=0;e.officers.forEach(o=>{var f,g,y,x,p,v,b;if(((f=o.shiftInfo)==null?void 0:f.isOff)===!0)return;if(Pw(o)){console.log(` Excluding ${o.officerName} from staffing: PTO type`,((y=(g=o.shiftInfo)==null?void 0:g.ptoData)==null?void 0:y.ptoType)||((x=o.shiftInfo)==null?void 0:x.reason));return}const c=((p=o.shiftInfo)==null?void 0:p.position)||"";if(kw(c)){console.log(` Excluding ${o.officerName} from staffing: Other (Custom) assignment`,c);return}if(((v=o.shiftInfo)==null?void 0:v.hasPTO)===!0)return;const u=Es({rank:o.rank}),h=((b=o.rank)==null?void 0:b.toLowerCase())==="probationary",m=c.toLowerCase().includes("district")||c.toLowerCase().includes("city-wide");u&&m?(r++,console.log(` Counting ${o.officerName} as OFFICER (supervisor in district/city-wide): ${c}`)):u&&c==="Supervisor"?(t++,console.log(` Counting ${o.officerName} as SUPERVISOR: ${c}`)):u?(t++,console.log(` Counting ${o.officerName} as SUPERVISOR (non-district): ${c}`)):h?(n++,console.log(` Counting ${o.officerName} as PPO: ${c}`)):(r++,console.log(` Counting ${o.officerName} as OFFICER: ${c}`))});const i=e.officers.filter(o=>{var l,c;return!((l=o.shiftInfo)!=null&&l.isOff)&&!Pw(o)&&!kw(((c=o.shiftInfo)==null?void 0:c.position)||"")}).length,a=e.officers.filter(o=>{var l,c,d;return((l=o.shiftInfo)==null?void 0:l.is_extra_shift)===!0&&!((c=o.shiftInfo)!=null&&c.isOff)&&!Pw(o)&&!kw(((d=o.shiftInfo)==null?void 0:d.position)||"")}).length;return console.log(" FINAL Staffing calculation for",e.date,{totalOfficers:e.officers.length,workingOfficers:i,supervisorCount:t,officerCount:r,ppoCount:n,overtimeOfficersCounted:a,totalCounted:t+r+n}),{supervisorCount:t,officerCount:r,ppoCount:n}},KD=fte,GD=(e,t,r)=>{if(!e)return{minimumOfficers:0,minimumSupervisors:0};if(e instanceof Map){const i=e.get(t);if(i instanceof Map)return i.get(r)||{minimumOfficers:0,minimumSupervisors:0}}const n=e[t];return n&&typeof n=="object"?n[r]||{minimumOfficers:0,minimumSupervisors:0}:{minimumOfficers:0,minimumSupervisors:0}},JD=(e,t)=>e>0||t>0,u5=(e,t,r,n)=>{const i=t>0&&e<t,a=n>0&&r<n;return i||a},ZD=(e,t,r,n)=>{const i=t>0?Math.max(0,t-e):0,a=n>0?Math.max(0,n-r):0;return{supervisorsNeeded:i,officersNeeded:a}},mte=(e,t,r,n)=>{if(t===0&&n===0)return"No minimum requirements configured";const i=ZD(e,t,r,n);return i.supervisorsNeeded>0&&i.officersNeeded>0?`Understaffed: Need ${i.supervisorsNeeded} supervisor(s) and ${i.officersNeeded} officer(s)`:i.supervisorsNeeded>0?`Understaffed: Need ${i.supervisorsNeeded} supervisor(s)`:i.officersNeeded>0?`Understaffed: Need ${i.officersNeeded} officer(s)`:e>=t&&r>=n?"Adequately staffed":"Staffing status unknown"},pte=(e,t)=>{if(e===0&&t===0)return"No minimum";const r=[];return e>0&&r.push(`${e} sup`),t>0&&r.push(`${t} off`),r.join(", ")},gte=(e,t,r,n)=>{const i=ZD(e,t,r,n);if(t===0&&n===0)return"none";const a=i.supervisorsNeeded+i.officersNeeded;return a>=3?"danger":a>0?"warning":"none"},ex=(e,t,r)=>t===0?`${e} ${r}`:e<t?`${e}/${t} ${r} `:`${e}/${t} ${r}`,cm=(e,t)=>{if(!e)return!1;try{const r=It(e),n=t;return r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()}catch(r){return console.error("Error parsing birthday:",e,r),!1}},dm=(e,t)=>{if(!e)return!1;try{const r=It(e),n=t;return r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()}catch(r){return console.error("Error parsing hire date:",e,r),!1}},um=(e,t)=>{if(!e)return 0;try{const r=It(e),n=t;let i=n.getFullYear()-r.getFullYear();return(n.getMonth()<r.getMonth()||n.getMonth()===r.getMonth()&&n.getDate()<r.getDate())&&i--,Math.max(0,i)}catch(r){return console.error("Error calculating years of service:",e,r),0}},vte=({selectedDate:e,filterShiftId:t="all",isAdminOrSupervisor:r=!1,userRole:n="officer"})=>{console.log(" DailyScheduleView RENDERED - User Role:",n,"Filter Shift:",t),Lr();const{userEmail:i}=ff(),{data:a}=ml(),[o,l]=w.useState(null),[c,d]=w.useState(""),[u,h]=w.useState(""),[m,f]=w.useState(null),[g,y]=w.useState(""),[x,p]=w.useState(null),[v,b]=w.useState(""),[j,S]=w.useState(!1),[P,M]=w.useState(null),[I,O]=w.useState(null),[L,T]=w.useState(!1),[k,E]=w.useState(null),[A,q]=w.useState(null),{exportToPDF:U}=d5(),R=n==="supervisor"||n==="admin",C=Pe(e,"yyyy-MM-dd"),F=e.getDay(),{updateScheduleMutation:X,updatePTODetailsMutation:re,removeOfficerMutation:z,removePTOMutation:Y,updatePartnershipMutation:J}=VD(C),{data:ne,isLoading:le,refetch:G}=bt({queryKey:["daily-schedule",C,t],queryFn:()=>d0(e,t)}),he=async(W,te)=>{if(!te){ge.error("Please select or enter a position");return}X.mutate({scheduleId:W.scheduleId,type:W.type,positionName:te,date:C,officerId:W.officerId,shiftTypeId:W.shift.id,currentPosition:W.position,unitNumber:W.unitNumber,notes:W.notes},{onSuccess:()=>{Ir.logPositionChange(W.officerId,W.name,W.position,te,i,`Changed position from "${W.position}" to "${te}" for ${W.name}`),G()}})},xe=async(W,te)=>{X.mutate({scheduleId:W.scheduleId,type:W.type,positionName:W.position,date:C,officerId:W.officerId,shiftTypeId:W.shift.id,currentPosition:W.position,unitNumber:te,notes:W.notes},{onSuccess:()=>{Ir.logUnitNumberChange(W.officerId,W.name,W.unitNumber,te,i,`Changed unit from "${W.unitNumber||"None"}" to "${te}" for ${W.name}`),G()}})},Se=async(W,te)=>{X.mutate({scheduleId:W.scheduleId,type:W.type,positionName:W.position,date:C,officerId:W.officerId,shiftTypeId:W.shift.id,currentPosition:W.position,unitNumber:W.unitNumber,notes:te},{onSuccess:()=>{Ir.logNotesChange(W.officerId,W.name,i,`Updated notes for ${W.name}`),G()}})},K=(W,te)=>{if(console.log(" Creating partnership:",{officer:W.officerId,officerName:W.name,partnerOfficerId:te,scheduleId:W.scheduleId,type:W.type}),!(W!=null&&W.scheduleId)||!(W!=null&&W.officerId)||!te){ge.error("Invalid data for partnership creation");return}J.mutate({officer:{...W,date:W.date||C,dayOfWeek:W.dayOfWeek||F,scheduleId:W.scheduleId,officerId:W.officerId,type:W.type,shift:W.shift},partnerOfficerId:te,action:"create"},{onSuccess:()=>{G()}})},we=W=>{var Z;if(console.log(" Removing partnership:",{officer:W.officerId,officerName:W.name,officerData:W,partnerData:W.partnerData,partnerOfficerId:W.partnerOfficerId}),!(W!=null&&W.scheduleId)||!(W!=null&&W.officerId)){ge.error("Invalid officer data for partnership removal");return}let te=null;if((Z=W.partnerData)!=null&&Z.partnerOfficerId?(te=W.partnerData.partnerOfficerId,console.log("Found partner ID in partnerData:",te)):W.partnerOfficerId?(te=W.partnerOfficerId,console.log("Found partner ID in partnerOfficerId field:",te)):W.isCombinedPartnership&&W.originalPartnerOfficerId&&(te=W.originalPartnerOfficerId,console.log("Found partner ID in originalPartnerOfficerId:",te)),!te){console.error(" No partner officer ID found for removal. Officer data:",W),ge.error("Could not find partner information. Please refresh the page and try again.");return}console.log(" Removing partnership with partner ID:",te),J.mutate({officer:{...W,date:W.date||C,dayOfWeek:W.dayOfWeek||F,scheduleId:W.scheduleId,officerId:W.officerId,type:W.type,shift:W.shift,partnerOfficerId:te,partnerData:W.partnerData},partnerOfficerId:te,action:"remove"},{onSuccess:()=>{G()}})},Te=async(W,te)=>{te?(K(W,te),Ir.logPartnershipChange(W.officerId,W.name,te,"created",i,`Created partnership between ${W.name} and partner`)):(we(W),Ir.logPartnershipChange(W.officerId,W.name,W.partnerOfficerId,"removed",i,`Removed partnership for ${W.name}`))},ae=(W,te)=>{re.mutate({ptoId:W.id,unitNumber:te,notes:W.notes},{onSuccess:()=>{Ir.logUnitNumberChange(W.officerId,W.name,W.unitNumber||"None",te,i,`Changed unit number for PTO for ${W.name}`),G()}})},H=(W,te)=>{re.mutate({ptoId:W.id,unitNumber:W.unitNumber,notes:te},{onSuccess:()=>{Ir.logNotesChange(W.officerId,W.name,i,`Updated PTO notes for ${W.name}`),G()}})},Oe=W=>{R&&(M({officerId:W.officerId,name:W.name,scheduleId:W.id,type:"exception",existingPTO:{id:W.id,ptoType:W.ptoType,startTime:W.startTime,endTime:W.endTime,isFullShift:W.isFullShift}}),O({id:W.shiftTypeId,name:"Unknown Shift",start_time:W.startTime,end_time:W.endTime}),S(!0))},pe=W=>{E(W.shift),T(!0)},je=W=>{q({ppoOfficer:W,shift:W.shift})},_e=async W=>{try{ge.info("Generating PDF...");let te=a==null?void 0:a.pdf_layout_settings;!te||typeof te!="object"?(console.warn(" No valid layout settings found, using defaults"),te=tr):te={...tr,...te,fontSizes:{...tr.fontSizes,...te.fontSizes||{}},sections:{...tr.sections,...te.sections||{}},tableSettings:{...tr.tableSettings,...te.tableSettings||{}},colorSettings:{...tr.colorSettings,...te.colorSettings||{}}};const Z=await U({selectedDate:e,shiftName:W.shift.name,shiftData:W,layoutSettings:te});Z&&Z.success===!0?ge.success("PDF exported successfully"):(console.error("PDF export failed:",Z==null?void 0:Z.error),ge.error("Failed to export PDF"))}catch(te){console.error("PDF Export error:",te),ge.error(`Error generating PDF: ${te.message}`)}};return le?s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Daily Schedule"]})}),s.jsx(gt,{children:s.jsx(vs,{className:"h-96 w-full"})})]}):s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Schedule for ",Pe(e,"EEEE, MMMM d, yyyy")]})}),s.jsxs(gt,{className:"space-y-6",children:[ne==null?void 0:ne.map(W=>{const te=u5(W.currentSupervisors,W.minSupervisors,W.currentOfficers,W.minOfficers),Z=W.minSupervisors>0&&W.currentSupervisors<W.minSupervisors,me=W.minOfficers>0&&W.currentOfficers<W.minOfficers,$=!te;return s.jsxs("div",{id:`shift-card-${W.shift.id}`,className:"border rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:W.shift.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[W.shift.start_time," - ",W.shift.end_time]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[te&&s.jsxs(Re,{variant:"destructive",className:"gap-1",children:[s.jsx(On,{className:"h-3 w-3"}),"Understaffed"]}),$&&s.jsxs(Re,{variant:"default",className:"gap-1 bg-green-600",children:[s.jsx(tf,{className:"h-3 w-3"}),"Fully Staffed"]}),R&&s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>pe(W),title:"Add Officer",children:[s.jsx(pO,{className:"h-4 w-4 mr-1"}),"Add Officer"]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>_e(W),title:"Export to PDF",children:[s.jsx(Ai,{className:"h-4 w-4 mr-1"}),"Export PDF"]})]})]}),s.jsx(lm,{title:`Supervisors (${ex(W.currentSupervisors,W.minSupervisors,"")})`,officers:W.supervisors,minCount:W.minSupervisors,currentCount:W.currentSupervisors,isUnderstaffed:Z,canEdit:R,onSavePosition:he,onSaveUnitNumber:xe,onSaveNotes:Se,onAssignPTO:ke=>{M({officerId:ke.officerId,name:ke.name,scheduleId:ke.scheduleId,type:ke.type}),O(ke.shift),S(!0)},onRemoveOfficer:z.mutate,onPartnershipChange:Te,onEmergencyPartner:je,isUpdating:X.isPending,sectionType:"regular",colorSettings:a==null?void 0:a.color_settings,showSpecialOccasions:(a==null?void 0:a.show_special_occasions_in_schedule)!==!1}),s.jsx(lm,{title:`Officers (${ex(W.currentOfficers,W.minOfficers,"")})`,officers:W.officers,minCount:W.minOfficers,currentCount:W.currentOfficers,isUnderstaffed:me,canEdit:R,onSavePosition:he,onSaveUnitNumber:xe,onSaveNotes:Se,onAssignPTO:ke=>{M({officerId:ke.officerId,name:ke.name,scheduleId:ke.scheduleId,type:ke.type}),O(ke.shift),S(!0)},onRemoveOfficer:z.mutate,onPartnershipChange:Te,onEmergencyPartner:je,isUpdating:X.isPending,sectionType:"regular",colorSettings:a==null?void 0:a.color_settings,showSpecialOccasions:(a==null?void 0:a.show_special_occasions_in_schedule)!==!1}),W.suspendedPartnershipOfficers&&W.suspendedPartnershipOfficers.length>0&&s.jsx(lm,{title:"Partnerships (Suspended)",officers:W.suspendedPartnershipOfficers,minCount:0,currentCount:W.suspendedPartnershipOfficers.length,isUnderstaffed:!1,canEdit:R,onSavePosition:he,onSaveUnitNumber:xe,onSaveNotes:Se,onAssignPTO:ke=>{M({officerId:ke.officerId,name:ke.name,scheduleId:ke.scheduleId,type:ke.type}),O(ke.shift),S(!0)},onRemoveOfficer:z.mutate,onPartnershipChange:Te,onEmergencyPartner:je,isUpdating:X.isPending,sectionType:"suspendedPartnership",colorSettings:a==null?void 0:a.color_settings,showSpecialOccasions:(a==null?void 0:a.show_special_occasions_in_schedule)!==!1}),W.specialAssignmentOfficers&&W.specialAssignmentOfficers.length>0&&s.jsx(lm,{title:"Special Assignments",officers:W.specialAssignmentOfficers,minCount:0,currentCount:W.specialAssignmentOfficers.length,isUnderstaffed:!1,canEdit:R,onSavePosition:he,onSaveUnitNumber:xe,onSaveNotes:Se,onAssignPTO:ke=>{M({officerId:ke.officerId,name:ke.name,scheduleId:ke.scheduleId,type:ke.type}),O(ke.shift),S(!0)},onRemoveOfficer:z.mutate,onPartnershipChange:Te,onEmergencyPartner:je,isUpdating:X.isPending,sectionType:"special",colorSettings:a==null?void 0:a.color_settings,showSpecialOccasions:(a==null?void 0:a.show_special_occasions_in_schedule)!==!1}),W.ptoRecords&&W.ptoRecords.length>0&&s.jsx(lm,{title:"Time Off",ptoRecords:W.ptoRecords,canEdit:R,onSaveUnitNumber:ae,onSaveNotes:H,onEditPTO:Oe,onRemovePTO:Y.mutate,isUpdating:re.isPending,sectionType:"pto",colorSettings:a==null?void 0:a.color_settings,showSpecialOccasions:(a==null?void 0:a.show_special_occasions_in_schedule)!==!1})]},W.shift.id)}),(ne==null?void 0:ne.length)===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No schedule data available for ",Pe(e,"EEEE, MMMM d, yyyy")]})]}),P&&I&&s.jsx(s5,{open:j,onOpenChange:S,officer:P,shift:I,date:C,onSuccess:()=>{G()}}),A&&s.jsx(ate,{ppoOfficer:A.ppoOfficer,date:C,shift:A.shift,open:!!A,onOpenChange:W=>!W&&q(null)}),s.jsx(rn,{open:L,onOpenChange:T,children:s.jsxs(Vr,{children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Add Officer to Schedule"}),s.jsxs(as,{children:["Add an officer to the ",k==null?void 0:k.name," shift for ",Pe(e,"EEEE, MMMM d, yyyy")]})]}),s.jsx(yte,{shiftId:k==null?void 0:k.id,shift:k,date:C,onSuccess:()=>{T(!1),E(null)},onCancel:()=>{T(!1),E(null)},refetchSchedule:G})]})})]})},yte=({shiftId:e,date:t,onSuccess:r,onCancel:n,shift:i,refetchSchedule:a})=>{const[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(""),[m,f]=w.useState(""),[g,y]=w.useState(""),[x,p]=w.useState(!1),[v,b]=w.useState(""),[j,S]=w.useState(""),P=os;w.useEffect(()=>{i&&(b(i.start_time),S(i.end_time))},[i]);const{data:M,isLoading:I}=bt({queryKey:["available-officers",e,t],queryFn:async()=>{const{data:U,error:R}=await se.from("profiles").select("id, full_name, badge_number, rank").order("full_name");if(R)throw R;return U}}),O=(U,R)=>{const[C]=U.split(":").map(Number),[F]=R.split(":").map(Number);return F<C},L=(U,R)=>O(U,R)?`${U} - ${R} (next day)`:`${U} - ${R}`,T=(U,R)=>{const[C,F]=U.split(":").map(Number),[X,re]=R.split(":").map(Number),z=C*60+F;let Y=X*60+re;return Y<z&&(Y+=24*60),(Y-z)/60},k=Xt({mutationFn:async()=>{const U=c==="Other (Custom)"?g:c;if(!U)throw new Error("Please select or enter a position");if(x){if(!v||!j)throw new Error("Please enter both start and end times for partial shift");const ne=O(i.start_time,i.end_time),le=O(v,j);if(!ne&&!le&&v>=j)throw new Error("End time must be after start time");ne&&!le&&console.log(" Original shift crosses midnight but custom times don't")}const{data:R,error:C}=await se.from("schedule_exceptions").select("id").eq("officer_id",o).eq("date",t).eq("shift_type_id",e);if(C)throw C;if(R&&R.length>0)throw new Error("Officer already has a schedule for this date and shift");const F=x?v:i.start_time,X=x?j:i.end_time,re=T(F,X),{data:z,error:Y}=await se.from("schedule_exceptions").insert({officer_id:o,date:t,shift_type_id:e,position_name:U,unit_number:u,notes:m||`${x?"Partial":"Full"} overtime shift`,is_off:!1,is_extra_shift:!0,schedule_type:"exception",custom_start_time:x?v:null,custom_end_time:x?j:null,is_partial_shift:x,hours_worked:re}).select().single();if(Y)throw Y;const{data:{user:J}}=await se.auth.getUser();return J&&await se.from("audit_logs").insert({user_email:J.email,action_type:"extra_shift_created",table_name:"schedule_exceptions",description:`Added ${x?"partial":"full"} extra shift (${re} hours)`}),z},onSuccess:()=>{ge.success("Officer added to schedule successfully"),a&&a(),r()},onError:U=>{ge.error(U.message||"Failed to add officer to schedule")}}),E=U=>{if(U.preventDefault(),!o){ge.error("Please select an officer");return}k.mutate()},q=(()=>{const U=[];for(let R=0;R<24;R++)for(let C of["00","30"]){const F=`${R.toString().padStart(2,"0")}:${C}`;U.push(F)}return U})();return s.jsxs("form",{onSubmit:E,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"officer",children:"Select Officer"}),s.jsxs(Wt,{value:o,onValueChange:l,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Choose an officer"})}),s.jsx(qt,{children:lte(M||[]).map(U=>s.jsxs(ct,{value:U.id,children:[U.full_name," (",U.badge_number,") ",U.rank?` ${U.rank}`:""]},U.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"position",children:"Position"}),s.jsxs(Wt,{value:c,onValueChange:d,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsxs(qt,{children:[P.map(U=>s.jsx(ct,{value:U,children:U},U)),s.jsx(ct,{value:"Other (Custom)",children:"Other (Custom)"})]})]}),c==="Other (Custom)"&&s.jsx(St,{placeholder:"Enter custom position",value:g,onChange:U=>y(U.target.value),className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shift Hours"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"fullShift",checked:!x,onCheckedChange:U=>{U&&p(!1)}}),s.jsxs(Ce,{htmlFor:"fullShift",className:"cursor-pointer",children:["Full Shift ",L((i==null?void 0:i.start_time)||"??:??",(i==null?void 0:i.end_time)||"??:??")]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"partialShift",checked:x,onCheckedChange:U=>{p(U===!0)}}),s.jsx(Ce,{htmlFor:"partialShift",className:"cursor-pointer",children:"Partial/Custom Hours"})]}),x&&i&&O(i.start_time,i.end_time)&&s.jsx("div",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded border border-amber-200 ml-6",children:" This shift crosses midnight. For partial shifts, ensure your end time is correct. Example: Working 21:30 - 02:30 should be entered as 21:30 - 02:30 (it will calculate as 5 hours)."}),x&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Time"}),s.jsxs(Wt,{value:v,onValueChange:b,children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{className:"max-h-[200px]",children:q.map(U=>s.jsx(ct,{value:U,children:U},U))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Time"}),s.jsxs(Wt,{value:j,onValueChange:S,children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{className:"max-h-[200px]",children:q.map(U=>s.jsx(ct,{value:U,children:U},U))})]})]})]}),x&&v&&j&&s.jsxs("div",{className:"text-sm text-muted-foreground ml-6",children:["Shift Duration: ",T(v,j).toFixed(1)," hours"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"unitNumber",children:"Unit Number (Optional)"}),s.jsx(St,{id:"unitNumber",placeholder:"Enter unit number",value:u,onChange:U=>h(U.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),s.jsx(St,{id:"notes",placeholder:"Enter notes (e.g., reason for overtime)",value:m,onChange:U=>f(U.target.value)})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(Ne,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),s.jsx(Ne,{type:"submit",disabled:k.isPending,children:k.isPending?"Adding...":"Add Officer"})]})]})},d0=async(e,t="all")=>{const r=Pe(e,"yyyy-MM-dd"),n=e.getDay();console.log(" getScheduleData called for:",{dateStr:r,filterShiftId:t});const i=k=>k.sort((E,A)=>{const q=E.rank||"Officer",U=A.rank||"Officer";return(Ia[q]||99)-(Ia[U]||99)}),a=k=>{if(!k)return!1;const E=k.toLowerCase();return E.includes("sergeant")||E.includes("lieutenant")||E.includes("captain")||E.includes("chief")||E.includes("commander")||E.includes("supervisor")},{data:o,error:l}=await se.from("shift_types").select("*").order("start_time");if(l)throw l;const{data:c,error:d}=await se.from("minimum_staffing").select("minimum_officers, minimum_supervisors, shift_type_id").eq("day_of_week",n);d&&(console.error("Minimum staffing error:",d),c=[]);const{data:u,error:h}=await se.from("officer_default_assignments").select("*").or(`end_date.is.null,end_date.gte.${r}`).lte("start_date",r);h&&console.error("Default assignments error:",h);const m=k=>{if(!u)return null;const E=It(r);return u.find(A=>A.officer_id===k&&It(A.start_date)<=E&&(!A.end_date||It(A.end_date)>=E))},{data:f,error:g}=await se.from("recurring_schedules").select(`
      *,
      profiles:profiles!recurring_schedules_officer_id_fkey (
        id, 
        full_name, 
        badge_number, 
        rank,
        birthday,
        hire_date 
      ),
      shift_types (
        id, 
        name, 
        start_time, 
        end_time
      )
    `).eq("day_of_week",n).lte("start_date",r).or(`end_date.is.null,end_date.gte.${r}`);if(g)throw console.error("Recurring schedules error:",g),g;const{data:y,error:x}=await se.from("schedule_exceptions").select("*").eq("date",r);if(x)throw console.error("Schedule exceptions error:",x),x;const p=[...new Set(y==null?void 0:y.map(k=>k.officer_id).filter(Boolean))];let v=[];if(p.length>0){const{data:k,error:E}=await se.from("profiles").select("id, full_name, badge_number, rank, birthday, hire_date").in("id",p);E?console.error(" Profiles error:",E):v=k||[]}const b=new Map;f==null||f.forEach(k=>{k.profiles&&b.set(k.officer_id,k.profiles)}),v==null||v.forEach(k=>{b.set(k.id,k)});const j=k=>b.get(k),S=[...new Set(y==null?void 0:y.map(k=>k.shift_type_id).filter(Boolean))];let P=[];if(S.length>0){const{data:k,error:E}=await se.from("shift_types").select("id, name, start_time, end_time").in("id",S);E?console.error(" Shift types error:",E):P=k||[]}const M=(y==null?void 0:y.map(k=>({...k,profiles:v.find(E=>E.id===k.officer_id),shift_types:P.find(E=>E.id===k.shift_type_id)})))||[],I=(M==null?void 0:M.filter(k=>k.is_off))||[],O=(M==null?void 0:M.filter(k=>!k.is_off))||[];console.log(" DEBUG: Data counts",{recurring:f==null?void 0:f.length,workingExceptions:O.length,ptoExceptions:I.length,defaultAssignments:u==null?void 0:u.length});const L=o==null?void 0:o.map(k=>{var he,xe,Se;const E=c==null?void 0:c.find(K=>K.shift_type_id===k.id),A=new Map;f==null||f.filter(K=>{var we;return((we=K.shift_types)==null?void 0:we.id)===k.id}).forEach(K=>{var me,$,ke,ce,Ie,Fe,Le,Ue,Ve,rt,Ye,We,it,ft,ue,Ke,Qe,ht,Dt,yt,ut,Ut,Ct;const we=It(r),Te=It(K.start_date),ae=K.end_date?It(K.end_date):null;if(we<Te){console.log(`Skipping officer ${K.officer_id}: Date ${r} is before schedule start ${K.start_date}`);return}if(ae&&we>ae){console.log(`Skipping officer ${K.officer_id}: Date ${r} is after schedule end ${K.end_date}`);return}const H=`${K.officer_id}-${k.id}`,Oe=I==null?void 0:I.find(wt=>wt.officer_id===K.officer_id&&wt.shift_type_id===k.id&&wt.date===r),pe=O==null?void 0:O.find(wt=>wt.officer_id===K.officer_id&&wt.shift_type_id===k.id),je=m(K.officer_id),_e=((me=pe==null?void 0:pe.profiles)==null?void 0:me.rank)||(($=K.profiles)==null?void 0:$.rank),W=_e==null?void 0:_e.toLowerCase().includes("probationary");let te;if(Oe!=null&&Oe.custom_start_time&&(Oe!=null&&Oe.custom_end_time)){const wt=k.start_time,lt=k.end_time,Yt=Oe.custom_start_time,at=Oe.custom_end_time;Yt===wt&&at!==lt?te=`Working: ${at} - ${lt}`:Yt!==wt&&at===lt?te=`Working: ${wt} - ${Yt}`:Yt!==wt&&at!==lt?te=`Working: ${wt}-${Yt} & ${at}-${lt}`:te="Working: Check PTO"}else pe!=null&&pe.custom_start_time&&(pe!=null&&pe.custom_end_time)&&(te=`${pe.custom_start_time} - ${pe.custom_end_time}`);const Z=pe?{scheduleId:pe.id,officerId:K.officer_id,name:((ke=pe.profiles)==null?void 0:ke.full_name)||((ce=K.profiles)==null?void 0:ce.full_name)||"Unknown",badge:((Ie=pe.profiles)==null?void 0:Ie.badge_number)||((Fe=K.profiles)==null?void 0:Fe.badge_number),rank:_e,isPPO:W,position:pe.position_name||K.position_name||(je==null?void 0:je.position_name),unitNumber:pe.unit_number||K.unit_number||(je==null?void 0:je.unit_number),notes:pe.notes,type:"recurring",originalScheduleId:K.id,customTime:te,hasPTO:!!Oe,ptoData:Oe?{id:Oe.id,ptoType:Oe.reason,startTime:Oe.custom_start_time||k.start_time,endTime:Oe.custom_end_time||k.end_time,isFullShift:!Oe.custom_start_time&&!Oe.custom_end_time}:void 0,isPartnership:pe.is_partnership||K.is_partnership,partnerOfficerId:pe.partner_officer_id||K.partner_officer_id,partnershipSuspended:pe.partnership_suspended||!1,shift:k,isExtraShift:!1,date:r,dayOfWeek:n,birthday:((Le=pe.profiles)==null?void 0:Le.birthday)||((Ue=K.profiles)==null?void 0:Ue.birthday),hire_date:((Ve=pe.profiles)==null?void 0:Ve.hire_date)||((rt=K.profiles)==null?void 0:rt.hire_date),isBirthdayToday:(Ye=pe.profiles)!=null&&Ye.birthday?cm(pe.profiles.birthday,e):(We=K.profiles)!=null&&We.birthday?cm(K.profiles.birthday,e):!1,isAnniversaryToday:(it=pe.profiles)!=null&&it.hire_date?dm(pe.profiles.hire_date,e):(ft=K.profiles)!=null&&ft.hire_date?dm(K.profiles.hire_date,e):!1,yearsOfService:(ue=pe.profiles)!=null&&ue.hire_date?um(pe.profiles.hire_date,e):(Ke=K.profiles)!=null&&Ke.hire_date?um(K.profiles.hire_date,e):0}:{scheduleId:K.id,officerId:K.officer_id,name:((Qe=K.profiles)==null?void 0:Qe.full_name)||"Unknown",badge:(ht=K.profiles)==null?void 0:ht.badge_number,rank:_e,isPPO:W,position:K.position_name||(je==null?void 0:je.position_name),unitNumber:K.unit_number||(je==null?void 0:je.unit_number),notes:null,type:"recurring",originalScheduleId:K.id,customTime:te,hasPTO:!!Oe,ptoData:Oe?{id:Oe.id,ptoType:Oe.reason,startTime:Oe.custom_start_time||k.start_time,endTime:Oe.custom_end_time||k.end_time,isFullShift:!Oe.custom_start_time&&!Oe.custom_end_time}:void 0,isPartnership:K.is_partnership,partnerOfficerId:K.partner_officer_id,partnershipSuspended:K.partnership_suspended||!1,shift:k,isExtraShift:!1,date:r,dayOfWeek:n,birthday:(Dt=K.profiles)==null?void 0:Dt.birthday,hire_date:(yt=K.profiles)==null?void 0:yt.hire_date,isBirthdayToday:(ut=K.profiles)!=null&&ut.birthday?cm(K.profiles.birthday,e):!1,isAnniversaryToday:(Ut=K.profiles)!=null&&Ut.hire_date?dm(K.profiles.hire_date,e):!1,yearsOfService:(Ct=K.profiles)!=null&&Ct.hire_date?um(K.profiles.hire_date,e):0};A.set(H,Z)}),O==null||O.filter(K=>K.shift_type_id===k.id).forEach(K=>{var W,te,Z,me,$,ke,ce,Ie,Fe;const we=`${K.officer_id}-${k.id}`;if(A.has(we)){console.log(" Skipping duplicate officer (already in recurring):",(W=K.profiles)==null?void 0:W.full_name);return}const Te=f==null?void 0:f.some(Le=>{var Ue;return Le.officer_id===K.officer_id&&((Ue=Le.shift_types)==null?void 0:Ue.id)===k.id&&Le.day_of_week===n}),ae=I==null?void 0:I.find(Le=>Le.officer_id===K.officer_id&&Le.shift_type_id===k.id),H=(te=K.profiles)==null?void 0:te.rank,Oe=H==null?void 0:H.toLowerCase().includes("probationary"),pe=m(K.officer_id);let je;if(ae!=null&&ae.custom_start_time&&(ae!=null&&ae.custom_end_time)){const Le=k.start_time,Ue=k.end_time,Ve=ae.custom_start_time,rt=ae.custom_end_time;Ve===Le&&rt!==Ue?je=`Working: ${rt} - ${Ue}`:Ve!==Le&&rt===Ue?je=`Working: ${Le} - ${Ve}`:Ve!==Le&&rt!==Ue?je=`Working: ${Le}-${Ve} & ${rt}-${Ue}`:je="Working: Check PTO"}else K.custom_start_time&&K.custom_end_time&&(je=`${K.custom_start_time} - ${K.custom_end_time}`);const _e={scheduleId:K.id,officerId:K.officer_id,name:((Z=K.profiles)==null?void 0:Z.full_name)||"Unknown",badge:(me=K.profiles)==null?void 0:me.badge_number,rank:H,isPPO:Oe,position:K.position_name||(pe==null?void 0:pe.position_name),unitNumber:K.unit_number||(pe==null?void 0:pe.unit_number),notes:K.notes,type:Te?"recurring":"exception",originalScheduleId:null,customTime:je,hasPTO:!!ae,ptoData:ae?{id:ae.id,ptoType:ae.reason,startTime:ae.custom_start_time||k.start_time,endTime:ae.custom_end_time||k.end_time,isFullShift:!ae.custom_start_time&&!ae.custom_end_time}:void 0,isPartnership:K.is_partnership,partnerOfficerId:K.partner_officer_id,partnershipSuspended:K.partnership_suspended||!1,shift:k,isExtraShift:!Te,date:r,dayOfWeek:n,custom_start_time:K.custom_start_time,custom_end_time:K.custom_end_time,hours_worked:K.hours_worked,is_partial_shift:K.is_partial_shift,birthday:($=K.profiles)==null?void 0:$.birthday,hire_date:(ke=K.profiles)==null?void 0:ke.hire_date,isBirthdayToday:(ce=K.profiles)!=null&&ce.birthday?cm(K.profiles.birthday,e):!1,isAnniversaryToday:(Ie=K.profiles)!=null&&Ie.hire_date?dm(K.profiles.hire_date,e):!1,yearsOfService:(Fe=K.profiles)!=null&&Fe.hire_date?um(K.profiles.hire_date,e):0};A.set(we,_e)});const q=Array.from(A.values()),U=[],R=new Set,C=new Map;for(const K of q)K.isPartnership&&K.partnerOfficerId&&q.find(Te=>Te.officerId===K.partnerOfficerId)&&(C.set(K.officerId,K.partnerOfficerId),C.set(K.partnerOfficerId,K.officerId));for(const K of q){if(R.has(K.officerId))continue;const we=C.get(K.officerId);if(we&&C.get(we)===K.officerId){const Te=q.find(ae=>ae.officerId===we);if(Te){R.add(K.officerId),R.add(Te.officerId);const ae=K.hasPTO&&((he=K.ptoData)==null?void 0:he.isFullShift),H=Te.hasPTO&&((xe=Te.ptoData)==null?void 0:xe.isFullShift);if(ae&&H)continue;if(ae||H){const Oe=ae?Te:K,pe=ae?K:Te,je=Os(Oe.rank),_e=Os(pe.rank);if(console.log(" Partnership Suspension Check:",{workingOfficer:Oe.name,workingIsPPO:je,ptoOfficer:pe.name,ptoIsPPO:_e}),je){console.log(` PPO ${Oe.name} needs emergency partner (${pe.name} on PTO)`);const W={...Oe,isPartnership:!0,partnerOfficerId:pe.officerId,partnershipSuspended:!0,partnershipSuspensionReason:`${pe.name} on PTO`,partnerData:{partnerOfficerId:pe.officerId,partnerName:pe.name,partnerBadge:pe.badge,partnerRank:pe.rank,partnerIsPPO:_e},hasPTO:!1,ptoData:void 0,_suspendedPartnership:!0,_processed:!0};U.push(W)}else _e?(console.log(` Regular officer ${Oe.name} returns to regular list (PPO ${pe.name} on PTO)`),U.push({...Oe,isPartnership:!1,partnerOfficerId:null,partnershipSuspended:!1,partnerData:void 0,_suspendedPartnership:!1,_processed:!0})):(console.log(` Regular officer ${Oe.name} returns to regular list (regular partner on PTO)`),U.push({...Oe,isPartnership:!1,partnerOfficerId:null,partnershipSuspended:!1,partnerData:void 0,_suspendedPartnership:!1,_processed:!0}))}else{console.log(` Active partnership: ${K.name} + ${Te.name}`);let Oe=K,pe=Te;Os(K.rank)&&!Os(Te.rank)?(Oe=Te,pe=K):Os(Te.rank)&&!Os(K.rank)||(Oe=K.name.localeCompare(Te.name)<0?K:Te,pe=K.name.localeCompare(Te.name)<0?Te:K);const je={...Oe,isCombinedPartnership:!0,partnerData:{partnerOfficerId:pe.officerId,partnerName:pe.name,partnerBadge:pe.badge,partnerRank:pe.rank,partnerIsPPO:Os(pe.rank),partnerPosition:pe.position,partnerUnitNumber:pe.unitNumber,partnerScheduleId:pe.scheduleId,partnerType:pe.type},partnerOfficerId:pe.officerId,originalPartnerOfficerId:pe.officerId,position:Oe.position||pe.position,unitNumber:Oe.unitNumber||pe.unitNumber,notes:Oe.notes||pe.notes?`${Oe.notes||""}${Oe.notes&&pe.notes?" / ":""}${pe.notes||""}`.trim():null,isPartnership:!0,partnershipSuspended:!1,hasPTO:!1,ptoData:void 0,_suspendedPartnership:!1,_processed:!0};console.log(` Combined partnership created: ${je.name} + ${je.partnerData.partnerName}`),U.push(je)}}else U.push({...K,isPartnership:!1,partnerOfficerId:null,partnershipSuspended:!1}),R.add(K.officerId)}else if(K.hasPTO&&((Se=K.ptoData)!=null&&Se.isFullShift))R.add(K.officerId);else{const Te={...K};Te.isPartnership&&!Te.partnerOfficerId&&(Te.isPartnership=!1,Te.partnershipSuspended=!1),U.push(Te),R.add(K.officerId)}}const F=(I==null?void 0:I.filter(K=>K.shift_type_id===k.id).map(K=>{const we=j(K.officer_id);return{id:K.id,officerId:K.officer_id,name:(we==null?void 0:we.full_name)||"Unknown",badge:we==null?void 0:we.badge_number,rank:we==null?void 0:we.rank,ptoType:K.reason||"PTO",startTime:K.custom_start_time||k.start_time,endTime:K.custom_end_time||k.end_time,isFullShift:!K.custom_start_time&&!K.custom_end_time,shiftTypeId:k.id,unitNumber:K.unit_number,notes:K.notes,birthday:we==null?void 0:we.birthday,hire_date:we==null?void 0:we.hire_date,isBirthdayToday:we!=null&&we.birthday?cm(we.birthday,e):!1,isAnniversaryToday:we!=null&&we.hire_date?dm(we.hire_date,e):!1,yearsOfService:we!=null&&we.hire_date?um(we.hire_date,e):0}}))||[],X=K=>K.isPartnership,re=K=>{if(!K)return!1;const we=K.toLowerCase();return we.includes("riding with")||we.includes("riding partner")||we.includes("emergency partner")||we==="other"},z=U.filter(K=>X(K)?!1:ute(K.position)).sort((K,we)=>(K.name||"").localeCompare(we.name||"")),Y=i(U.filter(K=>{var Oe;const we=((Oe=K.position)==null?void 0:Oe.toLowerCase())||"";if(we.includes("other")||K.position&&!os.includes(K.position)||X(K))return!1;const ae=we.includes("supervisor"),H=a(K.rank);return ae||H})),J=U.filter(K=>{var Oe,pe;if(K.hasPTO&&((Oe=K.ptoData)!=null&&Oe.isFullShift))return!1;const we=((pe=K.position)==null?void 0:pe.toLowerCase())||"";if(we.includes("other")&&!re(K.position)||K.position&&!os.includes(K.position)&&!re(K.position))return!1;const ae=we.includes("supervisor"),H=a(K.rank);return ae||H?!1:K.partnershipSuspended?(console.log(` Excluding from regular officers (suspended partnership): ${K.name}`),!1):!0}).sort((K,we)=>{const Te=pe=>{if(!pe)return{sortKey:"9999",display:pe};const je=pe.toLowerCase();if(je.includes("city-wide")||je.includes("citywide"))return{sortKey:"0000",display:pe};const _e=pe.match(/\d+/g)||[];return _e.length===0?{sortKey:"9999"+je,display:pe}:{sortKey:_e.map(te=>te.padStart(4,"0")).join("."),display:pe}},ae=Te(K.position),H=Te(we.position),Oe=ae.sortKey.localeCompare(H.sortKey);return Oe!==0?Oe:(K.position||"").localeCompare(we.position||"")}),ne=U.filter(K=>{const we=K.isPartnership&&K.partnershipSuspended;return we&&console.log(` Adding to suspended partnerships: ${K.name} (partner on PTO)`),we}),le=Y.filter(K=>{var Te;return!(K.hasPTO&&((Te=K.ptoData)==null?void 0:Te.isFullShift))}),G=J.filter(K=>{var ae;const we=K.isPPO,Te=K.hasPTO&&((ae=K.ptoData)==null?void 0:ae.isFullShift);return!we&&!Te});return console.log(` Staffing counts for ${k.name}:`,{totalSupervisors:Y.length,countedSupervisors:le.length,totalOfficers:J.length,countedOfficers:G.length,ppos:J.filter(K=>K.isPPO).length,fullDayPTOs:F.filter(K=>K.isFullShift).length,suspendedPartnerships:ne.length,specialAssignments:z.length}),{shift:k,minSupervisors:(E==null?void 0:E.minimum_supervisors)||0,minOfficers:(E==null?void 0:E.minimum_officers)||0,currentSupervisors:le.length,currentOfficers:G.length,supervisors:Y,officers:J,suspendedPartnershipOfficers:ne,specialAssignmentOfficers:z,ptoRecords:F}});let T=L;return t&&t!=="all"&&(T=(L==null?void 0:L.filter(k=>k.shift.id===t))||[],console.log(" Filtered schedule:",{beforeFilter:L==null?void 0:L.length,afterFilter:T==null?void 0:T.length,filterShiftId:t})),T},xte=({isAdminOrSupervisor:e,userCurrentShift:t="all"})=>{const[r,n]=w.useState(new Date),[i,a]=w.useState("all"),[o,l]=w.useState(!1);w.useEffect(()=>{console.log(" DailyScheduleManagement mounted - userCurrentShift:",t),t&&a(t)},[t]),console.log(" DailyScheduleManagement - Current state:",{userCurrentShift:t,selectedShiftId:i,isCalendarOpen:o});const{data:c}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:g,error:y}=await se.from("shift_types").select("*").order("start_time");if(y)throw y;return g}}),d=g=>{g&&(n(g),l(!1))},u=()=>{n(g=>po(g,1))},h=()=>{n(g=>lr(g,1))},m=()=>{n(new Date)},f=g=>yp(g)?`Today, ${Pe(g,"MMM d, yyyy")}`:c6(g)?`Tomorrow, ${Pe(g,"MMM d, yyyy")}`:d6(g)?`Yesterday, ${Pe(g,"MMM d, yyyy")}`:Pe(g,"EEE, MMM d, yyyy");return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Daily Schedule Management"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{className:"w-48",children:s.jsx(Vt,{placeholder:"Filter by shift"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"all",children:"All Shifts"}),c==null?void 0:c.map(g=>s.jsx(ct,{value:g.id,children:g.name},g.id))]})]}),s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(Ne,{type:"button",variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8",title:"Previous day",children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex items-center",children:s.jsxs(Mr,{open:o,onOpenChange:l,children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"ghost",className:"gap-2 font-medium px-3 hover:bg-transparent",children:[s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"min-w-[140px] text-center",children:f(r)})]})}),s.jsxs(Tr,{className:"w-auto p-0",align:"center",children:[s.jsx(Dr,{mode:"single",selected:r,onSelect:d,initialFocus:!0,className:"rounded-md border"},"daily-schedule-calendar"),s.jsx("div",{className:"p-3 border-t",children:s.jsx(Ne,{size:"sm",variant:"outline",className:"w-full",onClick:m,children:"Go to Today"})})]})]})}),s.jsx(Ne,{type:"button",variant:"ghost",size:"icon",onClick:h,className:"h-8 w-8",title:"Next day",children:s.jsx(Ri,{className:"h-4 w-4"})})]})]})]})}),s.jsxs(gt,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage officer assignments by shift. Assign officers to specific positions and monitor staffing levels for each shift."}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ne,{size:"sm",variant:"outline",onClick:m,disabled:yp(r),children:"Today"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Use arrows or calendar to navigate dates"})]})]}),t!=="all"&&i===t&&s.jsx("div",{className:"mt-2 p-2 bg-primary/10 rounded text-xs text-primary",children:" Showing your assigned shift by default. You can change the shift filter above."})]})]}),s.jsx(vte,{selectedDate:r,filterShiftId:i,isAdminOrSupervisor:e,userRole:e?"admin":"officer"},`${r.toISOString()}-${i}`)]})},XD=$j,bte=e5,wte=t5,QD=w.forwardRef(({className:e,...t},r)=>s.jsx(Qp,{className:$e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));QD.displayName=Qp.displayName;const Nte=$h("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h5=w.forwardRef(({side:e="right",className:t,children:r,...n},i)=>s.jsxs(wte,{children:[s.jsx(QD,{}),s.jsxs($p,{ref:i,className:$e(Nte({side:e}),t),...n,children:[r,s.jsxs(i0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Ms,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h5.displayName=$p.displayName;const f5=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col space-y-2 text-center sm:text-left",e),...t});f5.displayName="SheetHeader";const m5=w.forwardRef(({className:e,...t},r)=>s.jsx(eg,{ref:r,className:$e("text-lg font-semibold text-foreground",e),...t}));m5.displayName=eg.displayName;const jte=w.forwardRef(({className:e,...t},r)=>s.jsx(tg,{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));jte.displayName=tg.displayName;function _te(e){const t=Ste(e),r=w.forwardRef((n,i)=>{const{children:a,...o}=n,l=w.Children.toArray(a),c=l.find(kte);if(c){const d=c.props.children,u=l.map(h=>h===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:w.isValidElement(d)?w.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function Ste(e){const t=w.forwardRef((r,n)=>{const{children:i,...a}=r;if(w.isValidElement(i)){const o=Tte(i),l=Cte(a,i.props);return i.type!==w.Fragment&&(l.ref=n?bo(n,o):o),w.cloneElement(i,l)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Pte=Symbol("radix.slottable");function kte(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Pte}function Cte(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function Tte(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var q2=["Enter"," "],Ote=["ArrowDown","PageUp","Home"],$D=["ArrowUp","PageDown","End"],Ete=[...Ote,...$D],Ate={ltr:[...q2,"ArrowRight"],rtl:[...q2,"ArrowLeft"]},Dte={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ng="Menu",[jp,Mte,Rte]=Ip(ng),[gu,eM]=Is(ng,[Rte,Oc,Vx]),u0=Oc(),tM=Vx(),[Ite,vu]=gu(ng),[Lte,sg]=gu(ng),rM=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:a,modal:o=!0}=e,l=u0(t),[c,d]=w.useState(null),u=w.useRef(!1),h=Rn(a),m=df(i);return w.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(Mx,{...l,children:s.jsx(Ite,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:d,children:s.jsx(Lte,{scope:t,onClose:w.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:n})})})};rM.displayName=ng;var Fte="MenuAnchor",p5=w.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=u0(r);return s.jsx(Bp,{...i,...n,ref:t})});p5.displayName=Fte;var g5="MenuPortal",[Bte,nM]=gu(g5,{forceMount:void 0}),sM=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:i}=e,a=vu(g5,t);return s.jsx(Bte,{scope:t,forceMount:r,children:s.jsx(cs,{present:r||a.open,children:s.jsx(Qh,{asChild:!0,container:i,children:n})})})};sM.displayName=g5;var ia="MenuContent",[qte,v5]=gu(ia),iM=w.forwardRef((e,t)=>{const r=nM(ia,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=vu(ia,e.__scopeMenu),o=sg(ia,e.__scopeMenu);return s.jsx(jp.Provider,{scope:e.__scopeMenu,children:s.jsx(cs,{present:n||a.open,children:s.jsx(jp.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(Ute,{...i,ref:t}):s.jsx(zte,{...i,ref:t})})})})}),Ute=w.forwardRef((e,t)=>{const r=vu(ia,e.__scopeMenu),n=w.useRef(null),i=Kt(t,n);return w.useEffect(()=>{const a=n.current;if(a)return Xx(a)},[]),s.jsx(y5,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:st(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),zte=w.forwardRef((e,t)=>{const r=vu(ia,e.__scopeMenu);return s.jsx(y5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Hte=_te("MenuContent.ScrollLock"),y5=w.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:g,...y}=e,x=vu(ia,r),p=sg(ia,r),v=u0(r),b=tM(r),j=Mte(r),[S,P]=w.useState(null),M=w.useRef(null),I=Kt(t,M,x.onContentChange),O=w.useRef(0),L=w.useRef(""),T=w.useRef(0),k=w.useRef(null),E=w.useRef("right"),A=w.useRef(0),q=g?Zp:w.Fragment,U=g?{as:Hte,allowPinchZoom:!0}:void 0,R=F=>{var G,he;const X=L.current+F,re=j().filter(xe=>!xe.disabled),z=document.activeElement,Y=(G=re.find(xe=>xe.ref.current===z))==null?void 0:G.textValue,J=re.map(xe=>xe.textValue),ne=tre(J,X,Y),le=(he=re.find(xe=>xe.textValue===ne))==null?void 0:he.ref.current;(function xe(Se){L.current=Se,window.clearTimeout(O.current),Se!==""&&(O.current=window.setTimeout(()=>xe(""),1e3))})(X),le&&setTimeout(()=>le.focus())};w.useEffect(()=>()=>window.clearTimeout(O.current),[]),Zx();const C=w.useCallback(F=>{var re,z;return E.current===((re=k.current)==null?void 0:re.side)&&nre(F,(z=k.current)==null?void 0:z.area)},[]);return s.jsx(qte,{scope:r,searchRef:L,onItemEnter:w.useCallback(F=>{C(F)&&F.preventDefault()},[C]),onItemLeave:w.useCallback(F=>{var X;C(F)||((X=M.current)==null||X.focus(),P(null))},[C]),onTriggerLeave:w.useCallback(F=>{C(F)&&F.preventDefault()},[C]),pointerGraceTimerRef:T,onPointerGraceIntentChange:w.useCallback(F=>{k.current=F},[]),children:s.jsx(q,{...U,children:s.jsx(Jp,{asChild:!0,trapped:i,onMountAutoFocus:st(a,F=>{var X;F.preventDefault(),(X=M.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(uu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:s.jsx(LA,{asChild:!0,...b,dir:p.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:P,onEntryFocus:st(c,F=>{p.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Rx,{role:"menu","aria-orientation":"vertical","data-state":wM(x.open),"data-radix-menu-content":"",dir:p.dir,...v,...y,ref:I,style:{outline:"none",...y.style},onKeyDown:st(y.onKeyDown,F=>{const re=F.target.closest("[data-radix-menu-content]")===F.currentTarget,z=F.ctrlKey||F.altKey||F.metaKey,Y=F.key.length===1;re&&(F.key==="Tab"&&F.preventDefault(),!z&&Y&&R(F.key));const J=M.current;if(F.target!==J||!Ete.includes(F.key))return;F.preventDefault();const le=j().filter(G=>!G.disabled).map(G=>G.ref.current);$D.includes(F.key)&&le.reverse(),$te(le)}),onBlur:st(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(O.current),L.current="")}),onPointerMove:st(e.onPointerMove,_p(F=>{const X=F.target,re=A.current!==F.clientX;if(F.currentTarget.contains(X)&&re){const z=F.clientX>A.current?"right":"left";E.current=z,A.current=F.clientX}}))})})})})})})});iM.displayName=ia;var Wte="MenuGroup",x5=w.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ot.div,{role:"group",...n,ref:t})});x5.displayName=Wte;var Vte="MenuLabel",aM=w.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ot.div,{...n,ref:t})});aM.displayName=Vte;var tx="MenuItem",BC="menu.itemSelect",h0=w.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...i}=e,a=w.useRef(null),o=sg(tx,e.__scopeMenu),l=v5(tx,e.__scopeMenu),c=Kt(t,a),d=w.useRef(!1),u=()=>{const h=a.current;if(!r&&h){const m=new CustomEvent(BC,{bubbles:!0,cancelable:!0});h.addEventListener(BC,f=>n==null?void 0:n(f),{once:!0}),tj(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(oM,{...i,ref:c,disabled:r,onClick:st(e.onClick,u),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:st(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:st(e.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||q2.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});h0.displayName=tx;var oM=w.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...a}=e,o=v5(tx,r),l=tM(r),c=w.useRef(null),d=Kt(t,c),[u,h]=w.useState(!1),[m,f]=w.useState("");return w.useEffect(()=>{const g=c.current;g&&f((g.textContent??"").trim())},[a.children]),s.jsx(jp.ItemSlot,{scope:r,disabled:n,textValue:i??m,children:s.jsx(FA,{asChild:!0,...l,focusable:!n,children:s.jsx(Ot.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:st(e.onPointerMove,_p(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:st(e.onPointerLeave,_p(g=>o.onItemLeave(g))),onFocus:st(e.onFocus,()=>h(!0)),onBlur:st(e.onBlur,()=>h(!1))})})})}),Yte="MenuCheckboxItem",lM=w.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...i}=e;return s.jsx(fM,{scope:e.__scopeMenu,checked:r,children:s.jsx(h0,{role:"menuitemcheckbox","aria-checked":rx(r)?"mixed":r,...i,ref:t,"data-state":w5(r),onSelect:st(i.onSelect,()=>n==null?void 0:n(rx(r)?!0:!r),{checkForDefaultPrevented:!1})})})});lM.displayName=Yte;var cM="MenuRadioGroup",[Kte,Gte]=gu(cM,{value:void 0,onValueChange:()=>{}}),dM=w.forwardRef((e,t)=>{const{value:r,onValueChange:n,...i}=e,a=Rn(n);return s.jsx(Kte,{scope:e.__scopeMenu,value:r,onValueChange:a,children:s.jsx(x5,{...i,ref:t})})});dM.displayName=cM;var uM="MenuRadioItem",hM=w.forwardRef((e,t)=>{const{value:r,...n}=e,i=Gte(uM,e.__scopeMenu),a=r===i.value;return s.jsx(fM,{scope:e.__scopeMenu,checked:a,children:s.jsx(h0,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":w5(a),onSelect:st(n.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,r)},{checkForDefaultPrevented:!1})})})});hM.displayName=uM;var b5="MenuItemIndicator",[fM,Jte]=gu(b5,{checked:!1}),mM=w.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...i}=e,a=Jte(b5,r);return s.jsx(cs,{present:n||rx(a.checked)||a.checked===!0,children:s.jsx(Ot.span,{...i,ref:t,"data-state":w5(a.checked)})})});mM.displayName=b5;var Zte="MenuSeparator",pM=w.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ot.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});pM.displayName=Zte;var Xte="MenuArrow",gM=w.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=u0(r);return s.jsx(Ix,{...i,...n,ref:t})});gM.displayName=Xte;var Qte="MenuSub",[Eae,vM]=gu(Qte),Nm="MenuSubTrigger",yM=w.forwardRef((e,t)=>{const r=vu(Nm,e.__scopeMenu),n=sg(Nm,e.__scopeMenu),i=vM(Nm,e.__scopeMenu),a=v5(Nm,e.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>u,[u]),w.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(p5,{asChild:!0,...d,children:s.jsx(oM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":wM(r.open),...e,ref:bo(t,i.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:st(e.onPointerMove,_p(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:st(e.onPointerLeave,_p(h=>{var f,g;u();const m=(f=r.content)==null?void 0:f.getBoundingClientRect();if(m){const y=(g=r.content)==null?void 0:g.dataset.side,x=y==="right",p=x?-5:5,v=m[x?"left":"right"],b=m[x?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+p,y:h.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:st(e.onKeyDown,h=>{var f;const m=a.searchRef.current!=="";e.disabled||m&&h.key===" "||Ate[n.dir].includes(h.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),h.preventDefault())})})})});yM.displayName=Nm;var xM="MenuSubContent",bM=w.forwardRef((e,t)=>{const r=nM(ia,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=vu(ia,e.__scopeMenu),o=sg(ia,e.__scopeMenu),l=vM(xM,e.__scopeMenu),c=w.useRef(null),d=Kt(t,c);return s.jsx(jp.Provider,{scope:e.__scopeMenu,children:s.jsx(cs,{present:n||a.open,children:s.jsx(jp.Slot,{scope:e.__scopeMenu,children:s.jsx(y5,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:st(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:st(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:st(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),m=Dte[o.dir].includes(u.key);h&&m&&(a.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});bM.displayName=xM;function wM(e){return e?"open":"closed"}function rx(e){return e==="indeterminate"}function w5(e){return rx(e)?"indeterminate":e?"checked":"unchecked"}function $te(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function ere(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function tre(e,t,r){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=ere(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function rre(e,t){const{x:r,y:n}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],d=l.x,u=l.y,h=c.x,m=c.y;u>n!=m>n&&r<(h-d)*(n-u)/(m-u)+d&&(i=!i)}return i}function nre(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return rre(r,t)}function _p(e){return t=>t.pointerType==="mouse"?e(t):void 0}var sre=rM,ire=p5,are=sM,ore=iM,lre=x5,cre=aM,dre=h0,ure=lM,hre=dM,fre=hM,mre=mM,pre=pM,gre=gM,vre=yM,yre=bM,f0="DropdownMenu",[xre]=Is(f0,[eM]),Gs=eM(),[bre,NM]=xre(f0),jM=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=Gs(t),d=w.useRef(null),[u,h]=la({prop:i,defaultProp:a??!1,onChange:o,caller:f0});return s.jsx(bre,{scope:t,triggerId:na(),triggerRef:d,contentId:na(),open:u,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(sre,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:r})})};jM.displayName=f0;var _M="DropdownMenuTrigger",SM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,a=NM(_M,r),o=Gs(r);return s.jsx(ire,{asChild:!0,...o,children:s.jsx(Ot.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:bo(t,a.triggerRef),onPointerDown:st(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:st(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});SM.displayName=_M;var wre="DropdownMenuPortal",PM=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Gs(t);return s.jsx(are,{...n,...r})};PM.displayName=wre;var kM="DropdownMenuContent",CM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=NM(kM,r),a=Gs(r),o=w.useRef(!1);return s.jsx(ore,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:t,onCloseAutoFocus:st(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:st(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!i.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CM.displayName=kM;var Nre="DropdownMenuGroup",jre=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(lre,{...i,...n,ref:t})});jre.displayName=Nre;var _re="DropdownMenuLabel",TM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(cre,{...i,...n,ref:t})});TM.displayName=_re;var Sre="DropdownMenuItem",OM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(dre,{...i,...n,ref:t})});OM.displayName=Sre;var Pre="DropdownMenuCheckboxItem",EM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(ure,{...i,...n,ref:t})});EM.displayName=Pre;var kre="DropdownMenuRadioGroup",Cre=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(hre,{...i,...n,ref:t})});Cre.displayName=kre;var Tre="DropdownMenuRadioItem",AM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(fre,{...i,...n,ref:t})});AM.displayName=Tre;var Ore="DropdownMenuItemIndicator",DM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(mre,{...i,...n,ref:t})});DM.displayName=Ore;var Ere="DropdownMenuSeparator",MM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(pre,{...i,...n,ref:t})});MM.displayName=Ere;var Are="DropdownMenuArrow",Dre=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(gre,{...i,...n,ref:t})});Dre.displayName=Are;var Mre="DropdownMenuSubTrigger",RM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(vre,{...i,...n,ref:t})});RM.displayName=Mre;var Rre="DropdownMenuSubContent",IM=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return s.jsx(yre,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IM.displayName=Rre;var Ire=jM,Lre=SM,Fre=PM,LM=CM,FM=TM,BM=OM,qM=EM,UM=AM,zM=DM,HM=MM,WM=RM,VM=IM;const ig=Ire,ag=Lre,Bre=w.forwardRef(({className:e,inset:t,children:r,...n},i)=>s.jsxs(WM,{ref:i,className:$e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(Ri,{className:"ml-auto h-4 w-4"})]}));Bre.displayName=WM.displayName;const qre=w.forwardRef(({className:e,...t},r)=>s.jsx(VM,{ref:r,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));qre.displayName=VM.displayName;const gf=w.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(Fre,{children:s.jsx(LM,{ref:n,sideOffset:t,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));gf.displayName=LM.displayName;const Ds=w.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(BM,{ref:n,className:$e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Ds.displayName=BM.displayName;const Ure=w.forwardRef(({className:e,children:t,checked:r,...n},i)=>s.jsxs(qM,{ref:i,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(zM,{children:s.jsx(Uh,{className:"h-4 w-4"})})}),t]}));Ure.displayName=qM.displayName;const zre=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(UM,{ref:n,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(zM,{children:s.jsx(Q9,{className:"h-2 w-2 fill-current"})})}),t]}));zre.displayName=UM.displayName;const YM=w.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(FM,{ref:n,className:$e("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));YM.displayName=FM.displayName;const U2=w.forwardRef(({className:e,...t},r)=>s.jsx(HM,{ref:r,className:$e("-mx-1 my-1 h-px bg-muted",e),...t}));U2.displayName=HM.displayName;const Hre=(e,t)=>{if(!e)return!1;try{const r=It(e);return r.getMonth()===t.getMonth()&&r.getDate()===t.getDate()}catch{return!1}},Wre=(e,t)=>{if(!e)return!1;try{const r=It(e);return r.getMonth()===t.getMonth()&&r.getDate()===t.getDate()}catch{return!1}},Vre=(e,t)=>{if(!e)return 0;try{const r=It(e),n=t;let i=n.getFullYear()-r.getFullYear();return(n.getMonth()<r.getMonth()||n.getMonth()===r.getMonth()&&n.getDate()<r.getDate())&&i--,Math.max(0,i)}catch{return 0}},Cw=({title:e,officers:t,expandedOfficers:r,onToggleOfficer:n,onOfficerAction:i,canEdit:a,sectionType:o="regular",showSpecialOccasions:l=!1,colorSettings:c})=>{const u=(()=>{const m=c||{};switch(o){case"special":return{headerBg:`bg-[rgb(${m.schedule_special_bg||"243,229,245"})]`,headerBorder:`border-[rgb(${m.schedule_special_bg||"243,229,245"})]`,cardBg:`bg-[rgb(${m.schedule_special_bg||"243,229,245"})]/50`,cardBorder:`border-[rgb(${m.schedule_special_bg||"243,229,245"})]`,textColor:`text-[rgb(${m.schedule_special_text||"102,51,153"})]`};case"supervisor":return{headerBg:`bg-[rgb(${m.schedule_supervisor_bg||"240,248,255"})]`,headerBorder:`border-[rgb(${m.schedule_supervisor_bg||"240,248,255"})]`,cardBg:`bg-[rgb(${m.schedule_supervisor_bg||"240,248,255"})]/50`,cardBorder:`border-[rgb(${m.schedule_supervisor_bg||"240,248,255"})]`,textColor:`text-[rgb(${m.schedule_supervisor_text||"25,25,112"})]`};case"pto":return{headerBg:`bg-[rgb(${m.schedule_pto_bg||"230,255,242"})]`,headerBorder:`border-[rgb(${m.schedule_pto_bg||"230,255,242"})]`,cardBg:`bg-[rgb(${m.schedule_pto_bg||"230,255,242"})]/50`,cardBorder:`border-[rgb(${m.schedule_pto_bg||"230,255,242"})]`,textColor:`text-[rgb(${m.schedule_pto_text||"0,100,0"})]`};default:return{headerBg:`bg-[rgb(${m.schedule_officer_bg||"248,249,250"})]`,headerBorder:`border-[rgb(${m.schedule_officer_bg||"248,249,250"})]`,cardBg:`bg-[rgb(${m.schedule_officer_bg||"248,249,250"})]/50`,cardBorder:`border-[rgb(${m.schedule_officer_bg||"248,249,250"})]`,textColor:`text-[rgb(${m.schedule_officer_text||"33,37,41"})]`}}})(),h=new Date;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:`font-semibold text-sm border-b pb-1 p-2 rounded-t-lg ${u.textColor}`,style:{backgroundColor:`rgb(${u.headerBg.replace("bg-[rgb(","").replace(")]","")})`,borderColor:`rgb(${u.headerBorder.replace("border-[rgb(","").replace(")]","")})`},children:e}),t.map(m=>{var b;const f=`${m.officerId}-${m.scheduleId}`,g=r.has(f),y=m.rank==="Probationary",x=l&&Hre(m.birthday,h),p=l&&Wre(m.hire_date,h),v=l?Vre(m.hire_date,h):0;return s.jsxs("div",{className:"border rounded-lg overflow-hidden",style:{backgroundColor:`rgb(${u.cardBg.replace("bg-[rgb(","").replace("/50","").replace(")]","").trim()})`,borderColor:`rgb(${u.cardBorder.replace("border-[rgb(","").replace(")]","")})`},children:[s.jsxs("div",{className:`p-3 flex items-center justify-between transition-colors ${g?u.headerBg:"active:bg-muted/50"}`,onClick:()=>n(m.officerId,m.scheduleId),children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:m.name}),l&&s.jsxs(s.Fragment,{children:[x&&s.jsx(Re,{variant:"outline",className:"bg-pink-100 text-pink-800 border-pink-300 text-xs",title:"Birthday Today!",children:""}),p&&s.jsx(Re,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-300 text-xs",title:`${v} Year Anniversary`,children:""})]}),y&&s.jsx(Re,{variant:"outline",className:"bg-yellow-100 text-yellow-800 border-yellow-800/50 text-xs",children:"PPO"}),m.partnershipSuspended&&m.isPartnership&&s.jsx(Re,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-300 text-xs",children:s.jsx(On,{className:"h-3 w-3 mr-1"})}),m.isPartnership&&!m.partnershipSuspended&&s.jsx(Re,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-800/50 text-xs",children:s.jsx(jr,{className:"h-3 w-3 mr-1"})}),m.hasPTO&&!((b=m.ptoData)!=null&&b.isFullShift)&&s.jsx(Re,{variant:"outline",className:"bg-green-100 text-green-800 border-green-800/50 text-xs",children:s.jsx(pr,{className:"h-3 w-3 mr-1"})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Re,{variant:"secondary",className:"text-xs",children:m.position||(o==="special"?"Special Assignment":"No Position")}),m.type==="exception"&&s.jsx(Re,{variant:"outline",className:"text-xs bg-orange-50",children:"Extra"}),m.isExtraShift&&m.custom_start_time&&m.custom_end_time&&s.jsxs(Re,{variant:"outline",className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:[m.custom_start_time," - ",m.custom_end_time]})]})]}),s.jsx(Ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:g?s.jsx(ij,{className:"h-4 w-4"}):s.jsx(Cx,{className:"h-4 w-4"})})]}),g&&s.jsxs("div",{className:"p-3 pt-0 space-y-3 border-t",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Rank"}),s.jsx("p",{className:"font-medium",children:m.rank||"Officer"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Badge"}),s.jsx("p",{className:"font-medium",children:m.badge||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Unit"}),s.jsx("p",{className:"font-medium",children:m.unitNumber||"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Type"}),s.jsx("p",{className:"font-medium capitalize",children:m.type})]})]}),m.customTime&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[s.jsx(pr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:m.customTime})]}),m.isExtraShift&&m.custom_start_time&&m.custom_end_time&&m.hours_worked&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-50 rounded border border-orange-200",children:[s.jsx(pr,{className:"h-4 w-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Partial Overtime"}),s.jsxs("p",{className:"text-sm text-orange-700",children:[m.custom_start_time," - ",m.custom_end_time," (",m.hours_worked," hours)"]})]})]}),l&&p&&v>0&&s.jsx("div",{className:"flex items-center gap-2 p-2 bg-amber-50 rounded border border-amber-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[v," Year",v>1?"s":""," of Service"]}),s.jsxs("p",{className:"text-xs text-amber-700",children:["Hire date: ",m.hire_date?Pe(It(m.hire_date),"MMM d, yyyy"):"N/A"]})]})]})}),l&&x&&s.jsx("div",{className:"flex items-center gap-2 p-2 bg-pink-50 rounded border border-pink-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-pink-800",children:"Birthday Today!"}),s.jsxs("p",{className:"text-xs text-pink-700",children:["Born: ",m.birthday?Pe(It(m.birthday),"MMM d, yyyy"):"N/A"]})]})]})}),m.partnershipSuspended&&m.isPartnership&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-amber-50 rounded border border-amber-200",children:[s.jsx(On,{className:"h-4 w-4 text-amber-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Partnership Suspended"}),s.jsx("p",{className:"text-sm text-amber-700",children:m.partnershipSuspensionReason||"Partner unavailable"})]})]}),m.notes&&s.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted rounded",children:[s.jsx($9,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),s.jsx("span",{className:"text-sm flex-1",children:m.notes})]}),m.isPartnership&&m.partnerData&&!m.partnershipSuspended&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded border border-blue-200",children:[s.jsx(jr,{className:"h-4 w-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Partner"}),s.jsxs("p",{className:"text-sm text-blue-700",children:[m.partnerData.partnerName,m.partnerData.partnerBadge&&` (${m.partnerData.partnerBadge})`]})]})]}),a&&s.jsx("div",{className:"flex gap-2 pt-2",children:s.jsxs(ig,{children:[s.jsx(ag,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",size:"sm",className:"flex-1",children:[s.jsx(aj,{className:"h-4 w-4 mr-1"}),"Actions"]})}),s.jsxs(gf,{align:"end",className:"w-48",children:[s.jsxs(Ds,{onClick:()=>i(m,"edit"),children:[s.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),s.jsxs(Ds,{onClick:()=>i(m,"pto"),children:[s.jsx(pr,{className:"h-4 w-4 mr-2"}),"Assign PTO"]}),m.type==="exception"&&s.jsxs(Ds,{onClick:()=>i(m,"remove"),className:"text-red-600",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Remove Shift"]})]})]})})]})]},f)})]})},Yre=({title:e,ptoRecords:t,canEdit:r,showSpecialOccasions:n=!1,colorSettings:i,onEditPTO:a,onRemovePTO:o})=>{const l=i||{},c=new Date,d=g=>{if(!g)return!1;try{const y=It(g);return y.getMonth()===c.getMonth()&&y.getDate()===c.getDate()}catch{return!1}},u=g=>{if(!g)return!1;try{const y=It(g);return y.getMonth()===c.getMonth()&&y.getDate()===c.getDate()}catch{return!1}},h=g=>{if(!g)return 0;try{const y=It(g),x=c;let p=x.getFullYear()-y.getFullYear();return(x.getMonth()<y.getMonth()||x.getMonth()===y.getMonth()&&x.getDate()<y.getDate())&&p--,Math.max(0,p)}catch{return 0}},m=g=>{a?a(g):ge.info("Edit PTO functionality coming soon")},f=g=>{o?o(g):ge.info("Remove PTO functionality coming soon")};return s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-sm border-b pb-1 p-2 rounded-t-lg",style:{backgroundColor:`rgb(${l.schedule_pto_bg||"230,255,242"})`,borderColor:`rgb(${l.schedule_pto_bg||"230,255,242"})`,color:`rgb(${l.schedule_pto_text||"0,100,0"})`},children:e}),t.map(g=>{const y=n&&d(g.birthday),x=n&&u(g.hire_date),p=n?h(g.hire_date):0;return s.jsx("div",{className:"border rounded-lg p-3",style:{backgroundColor:`rgb(${l.schedule_pto_bg||"230,255,242"})/0.5`,borderColor:`rgb(${l.schedule_pto_bg||"230,255,242"})`},children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"font-medium",children:g.name}),n&&s.jsxs(s.Fragment,{children:[y&&s.jsx(Re,{variant:"outline",className:"bg-pink-100 text-pink-800 border-pink-300 text-xs",title:"Birthday Today!",children:""}),x&&s.jsx(Re,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-300 text-xs",title:`${p} Year Anniversary`,children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Re,{variant:"outline",className:"text-xs",children:g.ptoType}),s.jsx(Re,{variant:"outline",className:"text-xs",children:g.isFullShift?"Full Day":"Partial"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[g.startTime," - ",g.endTime]}),g.unitNumber&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(bi,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:["Unit: ",g.unitNumber]})]}),g.notes&&s.jsx("p",{className:"text-sm mt-1",children:g.notes}),n&&x&&p>0&&s.jsx("div",{className:"mt-2 p-2 bg-amber-50 rounded border border-amber-200",children:s.jsxs("span",{className:"text-sm font-medium",children:[" ",p," Year",p>1?"s":""," Anniversary"]})}),n&&y&&s.jsx("div",{className:"mt-2 p-2 bg-pink-50 rounded border border-pink-200",children:s.jsx("span",{className:"text-sm font-medium",children:" Birthday Today!"})})]}),r&&s.jsxs(ig,{children:[s.jsx(ag,{asChild:!0,children:s.jsx(Ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(aj,{className:"h-4 w-4"})})}),s.jsxs(gf,{align:"end",className:"w-48",children:[s.jsxs(Ds,{onClick:()=>m(g),children:[s.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Edit PTO"]}),s.jsxs(Ds,{onClick:()=>f(g),className:"text-red-600",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Remove PTO"]})]})]})]})},g.id)})]})};function Kre(e,t){return w.useReducer((r,n)=>t[r][n]??r,e)}var N5="ScrollArea",[KM]=Is(N5),[Gre,ha]=KM(N5),GM=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=w.useState(null),[d,u]=w.useState(null),[h,m]=w.useState(null),[f,g]=w.useState(null),[y,x]=w.useState(null),[p,v]=w.useState(0),[b,j]=w.useState(0),[S,P]=w.useState(!1),[M,I]=w.useState(!1),O=Kt(t,T=>c(T)),L=df(i);return s.jsx(Gre,{scope:r,type:n,dir:L,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:P,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:M,onScrollbarYEnabledChange:I,onCornerWidthChange:v,onCornerHeightChange:j,children:s.jsx(Ot.div,{dir:L,...o,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});GM.displayName=N5;var JM="ScrollAreaViewport",ZM=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:i,...a}=e,o=ha(JM,r),l=w.useRef(null),c=Kt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(Ot.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});ZM.displayName=JM;var jo="ScrollAreaScrollbar",j5=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=ha(jo,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return w.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(Jre,{...n,ref:t,forceMount:r}):i.type==="scroll"?s.jsx(Zre,{...n,ref:t,forceMount:r}):i.type==="auto"?s.jsx(XM,{...n,ref:t,forceMount:r}):i.type==="always"?s.jsx(_5,{...n,ref:t}):null});j5.displayName=jo;var Jre=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=ha(jo,e.__scopeScrollArea),[a,o]=w.useState(!1);return w.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(cs,{present:r||a,children:s.jsx(XM,{"data-state":a?"visible":"hidden",...n,ref:t})})}),Zre=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=ha(jo,e.__scopeScrollArea),a=e.orientation==="horizontal",o=p0(()=>c("SCROLL_END"),100),[l,c]=Kre("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),w.useEffect(()=>{const d=i.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const f=d[u];h!==f&&(c("SCROLL"),o()),h=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[i.viewport,a,c,o]),s.jsx(cs,{present:r||l!=="hidden",children:s.jsx(_5,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:st(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:st(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),XM=w.forwardRef((e,t)=>{const r=ha(jo,e.__scopeScrollArea),{forceMount:n,...i}=e,[a,o]=w.useState(!1),l=e.orientation==="horizontal",c=p0(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Gh(r.viewport,c),Gh(r.content,c),s.jsx(cs,{present:n||a,children:s.jsx(_5,{"data-state":a?"visible":"hidden",...i,ref:t})})}),_5=w.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,i=ha(jo,e.__scopeScrollArea),a=w.useRef(null),o=w.useRef(0),[l,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=rR(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,f){return rne(m,o.current,l,f)}return r==="horizontal"?s.jsx(Xre,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollLeft,f=qC(m,l,i.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=h(m,i.dir))}}):r==="vertical"?s.jsx(Qre,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollTop,f=qC(m,l);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=h(m))}}):null}),Xre=w.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,a=ha(jo,e.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),d=Kt(t,c,a.onScrollbarXChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx($M,{"data-orientation":"horizontal",...i,ref:d,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":m0(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),sR(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:sx(o.paddingLeft),paddingEnd:sx(o.paddingRight)}})}})}),Qre=w.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,a=ha(jo,e.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),d=Kt(t,c,a.onScrollbarYChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx($M,{"data-orientation":"vertical",...i,ref:d,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":m0(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const m=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),sR(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:sx(o.paddingTop),paddingEnd:sx(o.paddingBottom)}})}})}),[$re,QM]=KM(jo),$M=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=e,f=ha(jo,r),[g,y]=w.useState(null),x=Kt(t,O=>y(O)),p=w.useRef(null),v=w.useRef(""),b=f.viewport,j=n.content-n.viewport,S=Rn(u),P=Rn(c),M=p0(h,10);function I(O){if(p.current){const L=O.clientX-p.current.left,T=O.clientY-p.current.top;d({x:L,y:T})}}return w.useEffect(()=>{const O=L=>{const T=L.target;(g==null?void 0:g.contains(T))&&S(L,j)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[b,g,j,S]),w.useEffect(P,[n,P]),Gh(g,M),Gh(f.content,M),s.jsx($re,{scope:r,scrollbar:g,hasThumb:i,onThumbChange:Rn(a),onThumbPointerUp:Rn(o),onThumbPositionChange:P,onThumbPointerDown:Rn(l),children:s.jsx(Ot.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:st(e.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),p.current=g.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),I(O))}),onPointerMove:st(e.onPointerMove,I),onPointerUp:st(e.onPointerUp,O=>{const L=O.target;L.hasPointerCapture(O.pointerId)&&L.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),p.current=null})})})}),nx="ScrollAreaThumb",eR=w.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=QM(nx,e.__scopeScrollArea);return s.jsx(cs,{present:r||i.hasThumb,children:s.jsx(ene,{ref:t,...n})})}),ene=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...i}=e,a=ha(nx,r),o=QM(nx,r),{onThumbPositionChange:l}=o,c=Kt(t,h=>o.onThumbChange(h)),d=w.useRef(void 0),u=p0(()=>{d.current&&(d.current(),d.current=void 0)},100);return w.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(u(),!d.current){const f=nne(h,l);d.current=f,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,u,l]),s.jsx(Ot.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:st(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),g=h.clientX-f.left,y=h.clientY-f.top;o.onThumbPointerDown({x:g,y})}),onPointerUp:st(e.onPointerUp,o.onThumbPointerUp)})});eR.displayName=nx;var S5="ScrollAreaCorner",tR=w.forwardRef((e,t)=>{const r=ha(S5,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(tne,{...e,ref:t}):null});tR.displayName=S5;var tne=w.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,i=ha(S5,r),[a,o]=w.useState(0),[l,c]=w.useState(0),d=!!(a&&l);return Gh(i.scrollbarX,()=>{var h;const u=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Gh(i.scrollbarY,()=>{var h;const u=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),d?s.jsx(Ot.div,{...n,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sx(e){return e?parseInt(e,10):0}function rR(e,t){const r=e/t;return isNaN(r)?0:r}function m0(e){const t=rR(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function rne(e,t,r,n="ltr"){const i=m0(r),a=i/2,o=t||a,l=i-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return nR([c,d],h)(e)}function qC(e,t,r="ltr"){const n=m0(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],d=xp(e,c);return nR([0,o],[0,l])(d)}function nR(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function sR(e,t){return e>0&&e<t}var nne=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&t(),r=a,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function p0(e,t){const r=Rn(e),n=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),w.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Gh(e,t){const r=Rn(t);ls(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}var iR=GM,sne=ZM,ine=tR;const P5=w.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(iR,{ref:n,className:$e("relative overflow-hidden",e),...r,children:[s.jsx(sne,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(aR,{}),s.jsx(ine,{})]}));P5.displayName=iR.displayName;const aR=w.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(j5,{ref:n,orientation:t,className:$e("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(eR,{className:"relative flex-1 rounded-full bg-border"})}));aR.displayName=j5.displayName;const ane=({filterShiftId:e="all",isAdminOrSupervisor:t=!1,userRole:r="officer",userCurrentShift:n="all"})=>{var _e,W,te;const[i,a]=w.useState(new Date),[o,l]=w.useState(new Set),[c,d]=w.useState(new Set),[u,h]=w.useState(null),[m,f]=w.useState(!1),[g,y]=w.useState(!1),[x,p]=w.useState(null),[v,b]=w.useState(n),[j,S]=w.useState(!1),[P,M]=w.useState(!1),[I,O]=w.useState(null),[L,T]=w.useState(!1),{exportToPDF:k}=d5(),E=r==="supervisor"||r==="admin",A=Pe(i,"yyyy-MM-dd"),{data:q}=ml(),U=(q==null?void 0:q.show_special_occasions_in_schedule)!==!1;w.useEffect(()=>{n&&n!==v&&(console.log(" Mobile: Updating selected shift from prop:",n),b(n))},[n]);const{data:R,isLoading:C}=bt({queryKey:["shift-types-mobile"],queryFn:async()=>{const{data:Z,error:me}=await se.from("shift_types").select("*").order("start_time");if(me)throw me;return Z&&Z.length>0&&(n&&n!=="all"?Z.some(ke=>ke.id===n)?console.log(" Mobile: Setting user's assigned shift:",n):(console.log(" Mobile: User's assigned shift not found, using first shift"),b(Z[0].id)):v||b(Z[0].id)),Z||[]}}),{data:F,isLoading:X,refetch:re}=bt({queryKey:["daily-schedule-mobile",A,v],queryFn:()=>v?d0(i,v):Promise.resolve([]),enabled:!!v}),{updateScheduleMutation:z,removeOfficerMutation:Y,removePTOMutation:J}=VD(A),ne=()=>{a(Z=>po(Z,1))},le=()=>{a(Z=>lr(Z,1))},G=()=>{a(new Date)},he=Z=>{Z&&(a(Z),T(!1))},xe=Z=>yp(Z)?`Today, ${Pe(Z,"MMM d")}`:c6(Z)?`Tomorrow, ${Pe(Z,"MMM d")}`:d6(Z)?`Yesterday, ${Pe(Z,"MMM d")}`:Pe(Z,"EEE, MMM d"),Se=Z=>{const me=new Set(o);me.has(Z)?me.delete(Z):me.add(Z),l(me)},K=(Z,me)=>{const $=`${Z}-${me}`,ke=new Set(c);ke.has($)?ke.delete($):ke.add($),d(ke)},we=Z=>{b(Z),l(new Set),d(new Set)},Te=(Z,me)=>{switch(h(Z),me){case"edit":y(!0);break;case"pto":p(Z.shift),f(!0);break;case"remove":confirm(`Remove ${Z.name} from this shift?`)&&Y.mutate(Z,{onSuccess:()=>{re()}});break}},ae=Z=>{h({officerId:Z.officerId,name:Z.name,scheduleId:Z.id,type:"exception",existingPTO:{id:Z.id,ptoType:Z.ptoType,startTime:Z.startTime,endTime:Z.endTime,isFullShift:Z.isFullShift}}),p({id:Z.shiftTypeId,name:"Unknown Shift",start_time:Z.startTime,end_time:Z.endTime}),f(!0)},H=Z=>{confirm(`Remove PTO for ${Z.name}?`)&&J.mutate(Z,{onSuccess:()=>{re()}})},Oe=(Z,me)=>{u&&(Z==="position"?z.mutate({scheduleId:u.scheduleId,type:u.type,positionName:me,date:A,officerId:u.officerId,shiftTypeId:u.shift.id,currentPosition:u.position,unitNumber:u.unitNumber,notes:u.notes},{onSuccess:()=>{re(),y(!1)}}):Z==="unit"?z.mutate({scheduleId:u.scheduleId,type:u.type,positionName:u.position,date:A,officerId:u.officerId,shiftTypeId:u.shift.id,currentPosition:u.position,unitNumber:me,notes:u.notes},{onSuccess:()=>{re(),y(!1)}}):Z==="notes"&&z.mutate({scheduleId:u.scheduleId,type:u.type,positionName:u.position,date:A,officerId:u.officerId,shiftTypeId:u.shift.id,currentPosition:u.position,unitNumber:u.unitNumber,notes:me},{onSuccess:()=>{re(),y(!1)}}))},pe=async Z=>{try{ge.info("Generating PDF..."),(await k({selectedDate:i,shiftName:Z.shift.name,shiftData:Z,layoutSettings:tr})).success?ge.success("PDF exported successfully"):ge.error("Failed to export PDF")}catch{ge.error("Error generating PDF")}},je=Z=>{O(Z.shift),M(!0)};return C?s.jsxs(pt,{className:"mx-4 mt-4",children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Daily Schedule"]})}),s.jsxs(gt,{children:[s.jsx(vs,{className:"h-12 w-full rounded-lg mb-4"}),s.jsx(vs,{className:"h-64 w-full rounded-lg"})]})]}):s.jsxs("div",{className:"pb-20",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-background border-b",children:s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Ne,{variant:"ghost",size:"icon",onClick:ne,className:"h-8 w-8",title:"Previous day",children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs(Mr,{open:L,onOpenChange:T,children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"ghost",className:"gap-2 font-medium",children:[s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"min-w-[140px] text-center",children:xe(i)})]})}),s.jsxs(Tr,{className:"w-auto p-0",align:"center",children:[s.jsx(Dr,{mode:"single",selected:i,onSelect:he,initialFocus:!0,className:"rounded-md border"}),s.jsx("div",{className:"p-3 border-t",children:s.jsx(Ne,{size:"sm",variant:"outline",className:"w-full",onClick:G,disabled:yp(i),children:"Go to Today"})})]})]}),s.jsx(Ne,{variant:"ghost",size:"icon",onClick:le,className:"h-8 w-8",title:"Next day",children:s.jsx(Ri,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:Pe(i,"EEEE, MMMM d, yyyy")})})]})}),s.jsxs(pt,{className:"mx-4 mt-4",children:[s.jsx(ir,{className:"pb-3",children:s.jsxs(ar,{className:"text-lg",children:[s.jsx(xt,{className:"h-5 w-5 inline mr-2"}),"Schedule for ",Pe(i,"MMM d, yyyy"),n!=="all"&&v===n&&s.jsx(Re,{variant:"outline",className:"ml-2 text-xs bg-primary/10",children:"Your Shift"})]})}),s.jsxs(gt,{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsxs(Wt,{value:v,onValueChange:we,children:[s.jsx(Bt,{className:"w-full",children:s.jsx(Vt,{placeholder:"Select a shift",children:((_e=R==null?void 0:R.find(Z=>Z.id===v))==null?void 0:_e.name)||"Select a shift"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"all",children:"All Shifts"}),R==null?void 0:R.map(Z=>s.jsxs(ct,{value:Z.id,children:[Z.name," (",Z.start_time," - ",Z.end_time,")"]},Z.id))]})]})}),v&&(R!=null&&R.find(Z=>Z.id===v))?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(W=R.find(Z=>Z.id===v))==null?void 0:W.start_time," - ",(te=R.find(Z=>Z.id===v))==null?void 0:te.end_time]}),n!=="all"&&v===n&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:"Your Assigned Shift"})]}):v==="all"?s.jsx("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:"Viewing all shifts"}):null]}),X?s.jsxs("div",{className:"space-y-4",children:[s.jsx(vs,{className:"h-12 w-full rounded-lg"}),s.jsx(vs,{className:"h-32 w-full rounded-lg"}),s.jsx(vs,{className:"h-32 w-full rounded-lg"})]}):F==null?void 0:F.map(Z=>{const me=Z.shift.id,$=o.has(me),ke=u5(Z.currentSupervisors,Z.minSupervisors,Z.currentOfficers,Z.minOfficers);Z.minSupervisors>0&&Z.currentSupervisors<Z.minSupervisors,Z.minOfficers>0&&Z.currentOfficers<Z.minOfficers;const ce=gte(Z.currentSupervisors,Z.minSupervisors,Z.currentOfficers,Z.minOfficers);return s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-muted/50 flex items-center justify-between active:bg-muted/70 transition-colors",onClick:()=>Se(me),children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold",children:Z.shift.name}),s.jsx(Ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:$?s.jsx(ij,{className:"h-4 w-4"}):s.jsx(Cx,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Re,{variant:ce==="danger"?"destructive":ce==="warning"?"warning":"default",className:"gap-1",children:ke?s.jsxs(s.Fragment,{children:[s.jsx(On,{className:"h-3 w-3"}),"Understaffed"]}):s.jsxs(s.Fragment,{children:[s.jsx(tf,{className:"h-3 w-3"}),JD(Z.minSupervisors,Z.minOfficers)?"Fully Staffed":"No Requirements"]})}),s.jsx(Re,{variant:"outline",children:ex(Z.currentSupervisors,Z.minSupervisors,"Sup")}),s.jsx(Re,{variant:"outline",children:ex(Z.currentOfficers,Z.minOfficers,"Off")}),s.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:Z.minSupervisors===0&&Z.minOfficers===0?"No minimum requirements set":ke?"Staffing below minimum":"Meeting minimum requirements"})]})]})}),$&&s.jsxs("div",{className:"p-4 pt-0 space-y-4",children:[s.jsxs("div",{className:"flex gap-2 pt-2",children:[E&&s.jsxs(Ne,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>je(Z),children:[s.jsx(pO,{className:"h-4 w-4 mr-1"}),"Add Officer"]}),s.jsxs(Ne,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>pe(Z),children:[s.jsx(Ai,{className:"h-4 w-4 mr-1"}),"Export PDF"]})]}),Z.supervisors.length>0&&s.jsx(Cw,{title:"Supervisors",officers:Z.supervisors,expandedOfficers:c,onToggleOfficer:K,onOfficerAction:Te,canEdit:E,sectionType:"supervisor",showSpecialOccasions:U,colorSettings:q==null?void 0:q.color_settings}),Z.officers.length>0&&s.jsx(Cw,{title:"Officers",officers:Z.officers,expandedOfficers:c,onToggleOfficer:K,onOfficerAction:Te,canEdit:E,sectionType:"regular",showSpecialOccasions:U,colorSettings:q==null?void 0:q.color_settings}),Z.specialAssignmentOfficers&&Z.specialAssignmentOfficers.length>0&&s.jsx(Cw,{title:"Special Assignments",officers:Z.specialAssignmentOfficers,expandedOfficers:c,onToggleOfficer:K,onOfficerAction:Te,canEdit:E,sectionType:"special",showSpecialOccasions:U,colorSettings:q==null?void 0:q.color_settings}),Z.ptoRecords&&Z.ptoRecords.length>0&&s.jsx(Yre,{title:"Time Off",ptoRecords:Z.ptoRecords,canEdit:E,showSpecialOccasions:U,colorSettings:q==null?void 0:q.color_settings,onEditPTO:ae,onRemovePTO:H})]})]},me)}),v&&(F==null?void 0:F.length)===0&&!X&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground border rounded-lg",children:[s.jsx(jr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No schedule data available for selected shift"}),s.jsx("p",{className:"text-sm mt-2",children:"Select a different shift or date"})]}),!v&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground border rounded-lg",children:[s.jsx(xt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Please select a shift to view schedule"})]})]})]}),u&&x&&s.jsx(s5,{open:m,onOpenChange:f,officer:u,shift:x,date:A}),s.jsx(one,{open:g,onOpenChange:y,officer:u,onSave:Oe,isLoading:z.isPending,allShifts:R}),s.jsx(lne,{open:P,onOpenChange:M,shift:I,date:A,onSuccess:()=>{M(!1),O(null),re()}})]})},one=({open:e,onOpenChange:t,officer:r,onSave:n,isLoading:i,allShifts:a})=>{const[o,l]=w.useState((r==null?void 0:r.position)||""),[c,d]=w.useState((r==null?void 0:r.unitNumber)||""),[u,h]=w.useState((r==null?void 0:r.notes)||""),[m,f]=w.useState("");if(!r)return null;const g=y=>{let x="";if(y==="position"){if(x=o==="Other (Custom)"?m:o,!x){ge.error("Please select or enter a position");return}}else y==="unit"?x=c:y==="notes"&&(x=u);n(y,x)};return s.jsx(XD,{open:e,onOpenChange:t,children:s.jsxs(h5,{side:"bottom",className:"h-[80vh]",children:[s.jsx(f5,{className:"text-left",children:s.jsxs(m5,{children:["Edit ",r.name]})}),s.jsx(P5,{className:"h-full pr-4",children:s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Position"}),s.jsxs("select",{className:"w-full p-3 border rounded-lg",value:o,onChange:y=>l(y.target.value),children:[s.jsx("option",{value:"",children:"Select Position"}),os.map(y=>s.jsx("option",{value:y,children:y},y)),s.jsx("option",{value:"Other (Custom)",children:"Other (Custom)"})]}),o==="Other (Custom)"&&s.jsx("input",{type:"text",placeholder:"Enter custom position",value:m,onChange:y=>f(y.target.value),className:"w-full p-3 border rounded-lg"}),s.jsx(Ne,{className:"w-full",onClick:()=>g("position"),disabled:i,children:i?"Saving...":"Save Position"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Unit Number"}),s.jsx("input",{type:"text",placeholder:"Unit number",value:c,onChange:y=>d(y.target.value),className:"w-full p-3 border rounded-lg"}),s.jsx(Ne,{className:"w-full",onClick:()=>g("unit"),disabled:i,children:i?"Saving...":"Save Unit"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Notes"}),s.jsx("textarea",{placeholder:"Add notes",value:u,onChange:y=>h(y.target.value),className:"w-full p-3 border rounded-lg min-h-[100px]"}),s.jsx(Ne,{className:"w-full",onClick:()=>g("notes"),disabled:i,children:i?"Saving...":"Save Notes"})]}),a&&(r==null?void 0:r.shift)&&s.jsxs("div",{className:"space-y-3 p-3 bg-muted rounded-lg",children:[s.jsx("h3",{className:"font-medium",children:"Current Assignment"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Shift:"}),s.jsx("span",{className:"font-medium",children:r.shift.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Time:"}),s.jsxs("span",{className:"font-medium",children:[r.shift.start_time," - ",r.shift.end_time]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:Pe(new Date(r.date||new Date),"MMM d, yyyy")})]})]})]})]})})]})})},lne=({open:e,onOpenChange:t,shift:r,date:n,onSuccess:i})=>{const[a,o]=w.useState(""),[l,c]=w.useState(""),[d,u]=w.useState(""),[h,m]=w.useState(""),[f,g]=w.useState(""),[y,x]=w.useState(!1),[p,v]=w.useState(""),[b,j]=w.useState(""),{data:S,isLoading:P}=bt({queryKey:["available-officers-mobile",r==null?void 0:r.id,n],queryFn:async()=>{if(!r)return[];const{data:E,error:A}=await se.from("profiles").select("id, full_name, badge_number, rank").order("full_name");if(A)throw A;return E},enabled:e&&!!r});w.useEffect(()=>{e&&r&&(v(r.start_time),j(r.end_time),x(!1),o(""),c(""),g(""),u(""),m(""))},[e,r]);const M=(E,A)=>{const[q]=E.split(":").map(Number),[U]=A.split(":").map(Number);return U<q},I=(E,A)=>M(E,A)?`${E} - ${A} (next day)`:`${E} - ${A}`,O=(E,A)=>{const[q,U]=E.split(":").map(Number),[R,C]=A.split(":").map(Number),F=q*60+U;let X=R*60+C;return X<F&&(X+=24*60),(X-F)/60},L=Xt({mutationFn:async()=>{if(!r)throw new Error("No shift selected");const E=l==="Other (Custom)"?f:l;if(!E)throw new Error("Please select or enter a position");if(!a)throw new Error("Please select an officer");if(y){if(!p||!b)throw new Error("Please enter both start and end times");const F=M(r.start_time,r.end_time),X=M(p,b);if(!F&&!X&&p>=b)throw new Error("End time must be after start time");F&&!X&&console.log(" Original shift crosses midnight but custom times don't")}const{data:A}=await se.from("schedule_exceptions").select("id").eq("officer_id",a).eq("date",n).eq("shift_type_id",r.id);if(A&&A.length>0)throw new Error("Officer already has a schedule for this date and shift");const q=y?p:r.start_time,U=y?b:r.end_time,R=O(q,U),{error:C}=await se.from("schedule_exceptions").insert({officer_id:a,date:n,shift_type_id:r.id,position_name:E,unit_number:d,notes:h||`${y?"Partial":"Full"} overtime shift`,is_off:!1,is_extra_shift:!0,schedule_type:"exception",custom_start_time:y?p:null,custom_end_time:y?b:null,is_partial_shift:y,hours_worked:R});if(C)throw C},onSuccess:()=>{ge.success("Officer added to schedule"),i()},onError:E=>{ge.error(E.message||"Failed to add officer")}}),k=(()=>{const E=[];for(let A=0;A<24;A++)for(let q of["00","30"])E.push(`${A.toString().padStart(2,"0")}:${q}`);return E})();return r?s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Add Officer to Shift"}),s.jsxs(as,{children:["Add an officer to ",r.name," ",I(r.start_time,r.end_time)]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Officer"}),s.jsxs(Wt,{value:a,onValueChange:o,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select officer"})}),s.jsx(qt,{children:S==null?void 0:S.map(E=>s.jsxs(ct,{value:E.id,children:[E.full_name," (",E.badge_number,") ",E.rank?` ${E.rank}`:""]},E.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Position"}),s.jsxs(Wt,{value:l,onValueChange:c,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsxs(qt,{children:[os.map(E=>s.jsx(ct,{value:E,children:E},E)),s.jsx(ct,{value:"Other (Custom)",children:"Other (Custom)"})]})]}),l==="Other (Custom)"&&s.jsx(St,{placeholder:"Enter custom position",value:f,onChange:E=>g(E.target.value),className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shift Hours"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"fullShift",checked:!y,onCheckedChange:E=>{E&&x(!1)}}),s.jsxs(Ce,{htmlFor:"fullShift",className:"cursor-pointer",children:["Full Shift ",I(r.start_time,r.end_time)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"partialShift",checked:y,onCheckedChange:E=>{x(E===!0)}}),s.jsx(Ce,{htmlFor:"partialShift",className:"cursor-pointer",children:"Partial/Custom Hours"})]}),y&&M(r.start_time,r.end_time)&&s.jsx("div",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded border border-amber-200 ml-6",children:" This shift crosses midnight. For partial shifts, ensure your end time is correct. Example: Working 21:30 - 02:30 should be entered as 21:30 - 02:30 (it will calculate as 5 hours)."}),y&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Time"}),s.jsxs(Wt,{value:p,onValueChange:v,children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{className:"max-h-[200px]",children:k.map(E=>s.jsx(ct,{value:E,children:E},E))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Time"}),s.jsxs(Wt,{value:b,onValueChange:j,children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{className:"max-h-[200px]",children:k.map(E=>s.jsx(ct,{value:E,children:E},E))})]})]})]}),y&&p&&b&&s.jsxs("div",{className:"text-sm text-muted-foreground ml-6",children:["Shift Duration: ",O(p,b).toFixed(1)," hours"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"unitNumber",children:"Unit Number (Optional)"}),s.jsx(St,{id:"unitNumber",placeholder:"Enter unit number",value:d,onChange:E=>u(E.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),s.jsx(St,{id:"notes",placeholder:"Enter notes (e.g., reason for overtime)",value:h,onChange:E=>m(E.target.value)})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(Ne,{variant:"outline",className:"flex-1",onClick:()=>t(!1),disabled:L.isPending,children:"Cancel"}),s.jsx(Ne,{className:"flex-1",onClick:()=>L.mutate(),disabled:!a||!l||L.isPending,children:L.isPending?"Adding...":"Add Officer"})]})]})]})}):null},vf=w.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:$e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));vf.displayName="Textarea";const cne=$h("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),vo=w.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:$e(cne({variant:t}),e),...r}));vo.displayName="Alert";const oR=w.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:$e("mb-1 font-medium leading-none tracking-tight",e),...t}));oR.displayName="AlertTitle";const yo=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:$e("text-sm [&_p]:leading-relaxed",e),...t}));yo.displayName="AlertDescription";const UC=async e=>{try{const{data:t}=await se.from("website_settings").select("*").single();if(!(t!=null&&t.enable_notifications))return console.log("Notifications are disabled globally"),!1;switch(e){case"pto_request":return(t==null?void 0:t.enable_pto_request_notifications)!==!1;case"pto_status":return(t==null?void 0:t.enable_pto_status_notifications)!==!1;case"schedule_change":return(t==null?void 0:t.enable_schedule_change_notifications)!==!1;case"vacancy_alert":return(t==null?void 0:t.enable_vacancy_alerts)!==!1;default:return!0}}catch(t){return console.error("Error checking notification settings:",t),!1}},lR=async(e,t,r,n="general",i)=>{try{console.log(" [SEND DEBUG] ===== START ====="),console.log(` User: ${e}, Title: "${t}"`),console.log(` Step 1: Checking if user ${e} exists in profiles...`);const{data:a,error:o}=await se.from("profiles").select("id, full_name, active").eq("id",e).maybeSingle();if(o||!a)return console.error(` Step 1 FAILED: User ${e} not found or error:`,(o==null?void 0:o.message)||"No profile"),console.log(" [SEND DEBUG] ===== END (User not found) ====="),!1;console.log(` Step 1 PASSED: User found - ${a.full_name} (active: ${a.active})`),console.log(" Step 2: Calling create_pto_notification function...");const{data:l,error:c}=await se.rpc("create_pto_notification",{p_user_id:e,p_title:t,p_message:r,p_type:n});if(c){console.error(" Step 2 FAILED - Database function error:",{code:c.code,message:c.message,details:c.details}),console.log(" Step 3: Trying fallback direct insert...");const{error:d}=await se.from("notifications").insert({user_id:e,title:t,message:r,type:n,related_id:i,is_read:!1,created_at:new Date().toISOString(),metadata:{}}).select("id").single();return d?(console.error(" Step 3 FAILED - Direct insert error:",{code:d.code,message:d.message,details:d.details}),console.log(" [SEND DEBUG] ===== END (All methods failed) ====="),!1):(console.log(" Step 3 PASSED: Notification created via fallback insert"),console.log(" [SEND DEBUG] ===== END (Success via fallback) ====="),!0)}return console.log(` Step 2 PASSED: Notification created via function, ID: ${l}`),console.log(" [SEND DEBUG] ===== END (Success via function) ====="),!0}catch(a){return console.error(` [SEND DEBUG] Unexpected error for user ${e}:`,a),console.log(" [SEND DEBUG] ===== END (Error) ====="),!1}},cR=async(e,t,r="general",n)=>{try{console.log(` Starting to notify supervisors and admins: ${e}`);const{data:i,error:a}=await se.from("user_roles").select("user_id").in("role",["supervisor","admin"]);if(a){console.error(" Error fetching user roles:",a),console.log("Error details:",{code:a.code,message:a.message,details:a.details});return}if(console.log(` Found ${(i==null?void 0:i.length)||0} supervisor/admin user IDs:`,i),i&&i.length>0){const o=i.map(d=>lR(d.user_id,e,t,r,n)),c=(await Promise.all(o)).filter(d=>d).length;console.log(` Notifications sent: ${c}/${i.length} successful`),c>0?ge.success(`Notified ${c} supervisor(s) and admin(s)`):(console.error(" All notifications failed to send"),ge.error("Failed to send notifications to supervisors"))}else console.warn(" WARNING: No supervisors/admins found in user_roles table!"),ge.warning("No supervisors found to notify. Please check user roles.")}catch(i){console.error(" Error in notifySupervisorsAndAdmins:",i)}},dR=async(e,t,r)=>{var n,i;try{console.log(` Starting PTO notification for request ${e}, action: ${r}`);const{data:a,error:o}=await se.from("time_off_requests").select(`
        *,
        profiles!time_off_requests_officer_id_fkey(full_name, badge_number)
      `).eq("id",e).single();if(o){console.error(" Error fetching PTO request:",o);return}if(console.log(" PTO request details:",{officer:(n=a.profiles)==null?void 0:n.full_name,type:a.pto_type,dates:`${a.start_date} to ${a.end_date}`}),r==="created"){if(!await UC("pto_request")){console.log(" PTO request notifications are disabled");return}console.log(" Sending PTO request notification to supervisors/admins");const c=`${(i=a.profiles)==null?void 0:i.full_name} has submitted a ${a.pto_type} time off request from ${Pe(new Date(a.start_date),"MMM d, yyyy")} to ${Pe(new Date(a.end_date),"MMM d, yyyy")}${a.reason?` - Reason: ${a.reason}`:""}`;await cR("New PTO Request Submitted",c,"pto_request",e),ge.success("PTO request submitted. Supervisors have been notified.")}else if(r==="approved"||r==="denied"){if(!await UC("pto_status")){console.log(" PTO status notifications are disabled");return}console.log(` Sending PTO ${r} notification to officer`);const c=r==="approved"?`Your ${a.pto_type} time off request for ${Pe(new Date(a.start_date),"MMM d, yyyy")} to ${Pe(new Date(a.end_date),"MMM d, yyyy")} has been approved${a.review_notes?` - Notes: ${a.review_notes}`:""}`:`Your ${a.pto_type} time off request for ${Pe(new Date(a.start_date),"MMM d, yyyy")} to ${Pe(new Date(a.end_date),"MMM d, yyyy")} has been denied${a.review_notes?` - Reason: ${a.review_notes}`:""}`;await lR(a.officer_id,`PTO Request ${r==="approved"?"Approved":"Denied"}`,c,"pto_status",e)?(console.log(` PTO ${r} notification sent to officer`),ge.success(`Officer has been notified of the ${r} status`)):console.error(` Failed to send PTO ${r} notification to officer`)}}catch(a){console.error(" Error in sendPTORequestNotification:",a),ge.error("Failed to send notification")}},gd=class gd{constructor(){fr(this,"permission","default");fr(this,"swRegistration",null)}static getInstance(){return gd.instance||(gd.instance=new gd),gd.instance}async initialize(){if(!("serviceWorker"in navigator)){console.log("Service workers not supported");return}if(!("Notification"in window)){console.log("Notifications not supported");return}try{this.swRegistration=await navigator.serviceWorker.register("/service-worker.js"),console.log("Service Worker registered:",this.swRegistration),await this.requestPermission(),this.permission==="granted"&&await this.subscribeToPushNotifications()}catch(t){console.error("Failed to initialize notifications:",t)}}async requestPermission(){return this.permission==="granted"?this.permission:(this.permission=await Notification.requestPermission(),console.log("Notification permission:",this.permission),this.permission)}isEnabled(){return this.permission==="granted"}showNotification(t,r){if(!this.isEnabled()){console.log("Notifications not enabled");return}"serviceWorker"in navigator&&this.swRegistration?this.swRegistration.showNotification(t,{icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png",...r}):new Notification(t,{icon:"/icons/icon-192x192.png",...r})}async subscribeToPushNotifications(){if(!this.swRegistration){console.log("Service worker not registered");return}try{const t=await this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.getPublicKey()});console.log("Push subscription:",t),await this.sendSubscriptionToServer(t)}catch(t){console.error("Failed to subscribe to push notifications:",t)}}getPublicKey(){return this.urlBase64ToUint8Array("BEl62iUYgU9x_jTOfV7qOA9Wb6lM6BfGJq8J1JcE7Y8XJcE7Y8XJcE7Y8XJcE7Y8")}urlBase64ToUint8Array(t){const r="=".repeat((4-t.length%4)%4),n=(t+r).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(n),a=new Uint8Array(i.length);for(let o=0;o<i.length;++o)a[o]=i.charCodeAt(o);return a}async sendSubscriptionToServer(t){try{await fetch("/api/save-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(r){console.error("Failed to send subscription to server:",r)}}scheduleNotification(t,r,n){setTimeout(()=>{this.showNotification(t,{body:r,tag:"scheduled-notification",requireInteraction:!0})},n)}scheduleShiftReminder(t,r){const n=new Date,i=new Date(t.getTime()-30*60*1e3);if(i>n){const a=i.getTime()-n.getTime();this.scheduleNotification("Shift Reminder",`Your shift starts in 30 minutes: ${r}`,a)}}testNotification(){this.showNotification("Test Notification",{body:"Notifications are working correctly!",tag:"test-notification",requireInteraction:!1})}};fr(gd,"instance");let z2=gd;const dne=({open:e,onOpenChange:t,userId:r})=>{const[n,i]=w.useState(),[a,o]=w.useState(),[l,c]=w.useState(""),[d,u]=w.useState("vacation"),[h,m]=w.useState(0),[f,g]=w.useState([]),[y,x]=w.useState(!1),p=Lr(),{data:v}=ml(),{data:b}=bt({queryKey:["user-profile-pto",r],queryFn:async()=>{const{data:k,error:E}=await se.from("profiles").select("vacation_hours, sick_hours, comp_hours, holiday_hours, full_name").eq("id",r).single();if(E)throw E;return k},enabled:e&&(v==null?void 0:v.show_pto_balances)}),{data:j}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:k,error:E}=await se.from("shift_types").select("*").order("start_time");if(E)throw E;return k},enabled:e});w.useEffect(()=>{n&&a&&r&&j?S():(g([]),m(0))},[n,a,r,j,e]);const S=async()=>{if(!n||!a||!r||!j){g([]);return}x(!0);try{const k=qa({start:cl(n),end:r6(a)}),E=Pe(n,"yyyy-MM-dd"),{data:A,error:q}=await se.from("recurring_schedules").select("day_of_week, shift_type_id, unit_number, position_name, start_date, end_date").eq("officer_id",r).or(`end_date.is.null,end_date.gte.${E}`).lte("start_date",Pe(a,"yyyy-MM-dd"));if(q)throw q;const U=[];for(const R of k){const C=R.getDay(),F=Pe(R,"yyyy-MM-dd"),X=Pe(R,"EEEE"),re=(A==null?void 0:A.filter(z=>{if(z.day_of_week!==C)return!1;const Y=new Date(z.start_date),J=z.end_date?new Date(z.end_date):null,ne=new Date(F);return ne>=Y&&(!J||ne<=J)}))||[];for(const z of re){const Y=j.find(J=>J.id===z.shift_type_id);Y&&U.push({date:F,dayName:X,shiftName:Y.name,shiftTime:`${Y.start_time} - ${Y.end_time}`,unitNumber:z.unit_number,positionName:z.position_name,hours:P(Y.start_time,Y.end_time)})}}g(U)}catch(k){console.error("Error fetching affected shifts:",k),ge.error("Failed to load scheduled shifts")}finally{x(!1)}},P=(k,E)=>{const[A,q]=k.split(":").map(Number),[U,R]=E.split(":").map(Number),C=A*60+q;return(U*60+R-C)/60},M=()=>{if(!b||!(v!=null&&v.show_pto_balances))return 0;switch(d){case"vacation":return b.vacation_hours||0;case"sick":return b.sick_hours||0;case"comp":return b.comp_hours||0;case"holiday":return b.holiday_hours||0;default:return 0}},I=()=>v!=null&&v.show_pto_balances?M()>=h:!0,O=Xt({mutationFn:async()=>{if(!n||!a)throw new Error("Please select start and end dates");const k=f.length>0?f.reduce((U,R)=>U+R.hours,0):(t6(a,n)+1)*8;if(v!=null&&v.show_pto_balances){const U=M();if(U<k)throw new Error(`Insufficient ${d} hours. Required: ${k.toFixed(1)}h, Available: ${U}h`)}const E=f.map(U=>`${U.date} (${U.dayName}): ${U.shiftName} ${U.shiftTime}`).join("; "),{data:A,error:q}=await se.from("time_off_requests").insert({officer_id:r,start_date:Pe(n,"yyyy-MM-dd"),end_date:Pe(a,"yyyy-MM-dd"),reason:l||null,status:"pending",pto_type:d,hours_used:k,affected_shifts:f.length>0?E:null}).select().single();if(q)throw q;return A},onSuccess:k=>{p.invalidateQueries({queryKey:["time-off-requests"]}),ge.success("Time off request submitted"),k!=null&&k.id?(console.log(" [DIALOG] PTO request submitted, calling sendPTORequestNotification"),console.log(" [DIALOG] Request ID:",k.id),console.log(" [DIALOG] User ID:",r),dR(k.id,r,"created")):console.error(" [DIALOG] No request ID returned after submission"),t(!1),i(void 0),o(void 0),c(""),u("vacation"),m(0),g([])},onError:k=>{ge.error(k.message)}}),L=M(),T=I();return f.reduce((k,E)=>k+E.hours,0),s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Request Time Off"}),s.jsx(as,{children:"Submit a request for time off. Your supervisor will review it."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO Type"}),s.jsxs(Wt,{value:d,onValueChange:u,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select PTO type"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"vacation",children:"Vacation"}),s.jsx(ct,{value:"sick",children:"Sick"}),s.jsx(ct,{value:"comp",children:"Comp Time"}),s.jsx(ct,{value:"holiday",children:"Holiday"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Date"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),n?Pe(n,"PPP"):s.jsx("span",{children:"Pick a date"})]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:n,onSelect:i,initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Date"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),a?Pe(a,"PPP"):s.jsx("span",{children:"Pick a date"})]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:a,onSelect:o,initialFocus:!0,className:"pointer-events-auto"})})]})]}),n&&a&&f.length>0&&s.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/30",children:[s.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Affected Scheduled Shifts (",f.length,")"]}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Total Shifts Affected:"}),s.jsx("span",{children:f.length})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Total Hours Affected:"}),s.jsxs("span",{children:[f.reduce((k,E)=>k+E.hours,0).toFixed(1)," hours"]})]})]}),s.jsxs("div",{className:"mt-2 max-h-40 overflow-y-auto",children:[s.jsx("p",{className:"font-medium mb-1 text-sm",children:"Shift Details:"}),f.map((k,E)=>s.jsxs("div",{className:"text-xs p-2 border-b last:border-b-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("span",{className:"font-medium",children:[k.dayName,", ",Pe(new Date(k.date),"MMM d")]}),s.jsx(Re,{variant:"outline",className:"text-xs",children:k.shiftName})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(pr,{className:"h-3 w-3"}),s.jsx("span",{children:k.shiftTime}),k.unitNumber&&s.jsxs(s.Fragment,{children:[s.jsx(bi,{className:"h-3 w-3 ml-2"}),s.jsx("span",{children:k.unitNumber})]}),k.positionName&&s.jsxs(s.Fragment,{children:[s.jsx(Vl,{className:"h-3 w-3 ml-2"}),s.jsx("span",{children:k.positionName})]})]})]},E))]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"These are your regularly scheduled shifts that will be affected by this time off request."})]}),n&&a&&f.length===0&&!y&&s.jsxs(vo,{className:"bg-yellow-50 border-yellow-200",children:[s.jsx(Ld,{className:"h-4 w-4 text-yellow-600"}),s.jsx(yo,{className:"text-yellow-800 text-sm",children:"No regularly scheduled shifts found in this date range. Please verify your schedule."})]}),y&&s.jsx("div",{className:"text-center py-2",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading scheduled shifts..."})}),(v==null?void 0:v.show_pto_balances)&&n&&a&&s.jsxs("div",{className:"space-y-2 p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Hours Required:"}),s.jsxs("span",{className:"text-sm",children:[h,"h"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Current Balance:"}),s.jsxs("span",{className:"text-sm",children:[L,"h"]})]}),!T&&s.jsxs(vo,{className:"bg-red-50 border-red-200 mt-2",children:[s.jsx(Ld,{className:"h-4 w-4 text-red-600"}),s.jsxs(yo,{className:"text-red-800 text-sm",children:["Insufficient ",d," hours for this request"]})]})]}),!(v!=null&&v.show_pto_balances)&&s.jsxs(vo,{className:"bg-blue-50 border-blue-200",children:[s.jsx(Ld,{className:"h-4 w-4 text-blue-600"}),s.jsx(yo,{className:"text-blue-800 text-sm",children:"PTO balances are currently managed as indefinite. Verify your balance in Executime before making a request."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"reason",children:"Reason (Optional)"}),s.jsx(vf,{id:"reason",placeholder:"Brief description of your time off request",value:l,onChange:k=>c(k.target.value),rows:3})]}),s.jsx(Ne,{className:"w-full",onClick:()=>O.mutate(),disabled:O.isPending||(v==null?void 0:v.show_pto_balances)&&!T||y,children:O.isPending?"Submitting...":"Submit Request"})]})]})})},une=({userId:e,isAdminOrSupervisor:t})=>{const[r,n]=w.useState(!1),i=Lr(),{data:a}=ml(),{data:o,isLoading:l}=bt({queryKey:["time-off-requests",e,t],queryFn:async()=>{let h=se.from("time_off_requests").select(`
          *,
          profiles!time_off_requests_officer_id_fkey(full_name, badge_number)
        `).order("created_at",{ascending:!1});t||(h=h.eq("officer_id",e));const{data:m,error:f}=await h;if(f)throw f;return m}}),c=Xt({mutationFn:async({id:h,status:m,notes:f})=>{const{error:g}=await se.from("time_off_requests").update({status:m,review_notes:f,reviewed_by:e,reviewed_at:new Date().toISOString()}).eq("id",h);if(g)throw g},onSuccess:(h,m)=>{i.invalidateQueries({queryKey:["time-off-requests"]}),ge.success("Request updated successfully"),(m.status==="approved"||m.status==="denied")&&dR(m.id,e,m.status==="approved"?"approved":"denied")},onError:h=>{ge.error("Failed to update request: "+h.message)}}),d=h=>{switch(h){case"approved":return"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20";case"denied":return"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20";default:return"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20"}},u=(a==null?void 0:a.enable_vacancy_alerts)!==!1;return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Time Off Requests"]}),s.jsx(en,{children:t?"Manage all time off requests":"View and submit your time off requests"})]}),!t&&s.jsxs(Ne,{onClick:()=>n(!0),size:"sm",children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"New Request"]})]}),!t&&!(a!=null&&a.show_pto_balances)&&s.jsxs(vo,{className:"mt-4 bg-blue-50 border-blue-200",children:[s.jsx(pr,{className:"h-4 w-4 text-blue-600"}),s.jsx(yo,{className:"text-blue-800",children:"PTO balances are currently managed as indefinite. Verify your balance in Executime before making a request"})]}),(a==null?void 0:a.enable_notifications)&&s.jsxs(vo,{className:"mt-4 bg-green-50 border-green-200",children:[s.jsx(ki,{className:"h-4 w-4 text-green-600"}),s.jsx(yo,{className:"text-green-800",children:t?"You will be notified when officers submit new time off requests":"You will be notified when your time off requests are approved or denied"})]}),!u&&t&&s.jsx(vo,{className:"mt-4 bg-yellow-50 border-yellow-200",children:s.jsx(yo,{className:"text-yellow-800",children:"Vacancy alerts are currently disabled in system settings"})})]}),s.jsx(gt,{children:l?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):!o||o.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No time off requests found."}):s.jsx("div",{className:"space-y-4",children:o.map(h=>{var m,f;return s.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[t&&s.jsxs("p",{className:"font-medium",children:[(m=h.profiles)==null?void 0:m.full_name," (#",(f=h.profiles)==null?void 0:f.badge_number,")"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Pe(new Date(h.start_date),"MMM d, yyyy")," -"," ",Pe(new Date(h.end_date),"MMM d, yyyy")]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium capitalize",children:h.pto_type||"vacation"}),h.hours_used>0&&`  ${h.hours_used} hours`]}),h.reason&&s.jsx("p",{className:"text-sm mt-2",children:h.reason}),h.review_notes&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[s.jsx("span",{className:"font-medium",children:"Review notes:"})," ",h.review_notes]}),h.affected_shifts&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[s.jsx("span",{className:"font-medium",children:"Affected shifts:"})," ",h.affected_shifts]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsx(Re,{className:d(h.status),children:h.status}),s.jsx("p",{className:"text-xs text-muted-foreground",children:Pe(new Date(h.created_at),"MMM d, h:mm a")})]})]}),t&&h.status==="pending"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>c.mutate({id:h.id,status:"approved"}),children:"Approve"}),s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>c.mutate({id:h.id,status:"denied"}),children:"Deny"})]})]},h.id)})})}),s.jsx(dne,{open:r,onOpenChange:n,userId:e})]})},hne=()=>{const e=Lr();return Xt({mutationFn:async t=>{console.log("Creating vacancy alert via function:",t);const{data:r,error:n}=await se.rpc("create_vacancy_alert_with_notifications",{p_shift_type_id:t.shift_type_id,p_date:t.date,p_current_staffing:t.current_staffing,p_minimum_required:t.minimum_required,p_custom_message:t.custom_message||null});if(n)throw console.error("Database function error:",n),n;console.log("Vacancy created successfully with ID:",r);const{data:i,error:a}=await se.from("vacancy_alerts").select("*, shift_types(name, start_time, end_time)").eq("id",r).single();if(a)throw console.error("Error fetching created vacancy:",a),a;return i},onSuccess:()=>{e.invalidateQueries({queryKey:["vacancy-alerts"]}),e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["understaffed-shifts"]}),e.invalidateQueries({queryKey:["all-vacancy-alerts"]}),e.invalidateQueries({queryKey:["existing-vacancy-alerts"]}),ge.success("Vacancy alert created and notifications sent to all officers")},onError:t=>{console.error("Create vacancy error:",t),ge.error("Failed to create vacancy alert: "+t.message)}})},fne=(e="all")=>bt({queryKey:["understaffed-shifts-detection",e],queryFn:async()=>{console.log(" Starting understaffed shift detection...");const t=[],r=new Date;for(let n=0;n<7;n++){const i=new Date;i.setDate(r.getDate()+n);const a=Pe(i,"yyyy-MM-dd"),o=i.getDay();try{const{data:l,error:c}=await se.from("minimum_staffing").select("minimum_officers, minimum_supervisors, shift_type_id").eq("day_of_week",o);if(c){console.error(` Error getting minimum staffing for ${a}:`,c);continue}console.log(" Minimum staffing requirements:",l);const d=await d0(i,e);if(!d||d.length===0){console.log(` No schedule data found for ${a}`);continue}console.log(` Schedule data for ${a}:`,d);for(const u of d){const h=u.shift;if(e!=="all"&&h.id!==e)continue;const m=l==null?void 0:l.find(x=>x.shift_type_id===h.id);if(!m){console.log(` No minimum staffing rule found for shift: ${h.name} (ID: ${h.id})`);continue}const f=m.minimum_supervisors,g=m.minimum_officers;console.log(`
 Checking shift: ${h.name} (${h.start_time} - ${h.end_time})`),console.log(` Min requirements: ${f} supervisors, ${g} officers`),console.log(` Current staffing: ${u.currentSupervisors} supervisors, ${u.currentOfficers} officers`);const y=u5(u.currentSupervisors,f,u.currentOfficers,g);if(y){const x=Array.isArray(u.officers)?u.officers.map(b=>{var M,I,O;const j=b.full_name||b.name||((M=b.profiles)==null?void 0:M.full_name)||"Unknown",S=b.is_supervisor||((I=b.profiles)==null?void 0:I.is_supervisor)||!1,P=b.badge_number||((O=b.profiles)==null?void 0:O.badge_number)||"N/A";return{name:j,position:S?"Supervisor":"Officer",isSupervisor:S,badge:P}}):[],p=mte(u.currentSupervisors,f,u.currentOfficers,g),v={date:a,shift_type_id:h.id,shift_types:{id:h.id,name:h.name,start_time:h.start_time,end_time:h.end_time},current_staffing:u.currentSupervisors+u.currentOfficers,minimum_required:f+g,current_supervisors:u.currentSupervisors,current_officers:u.currentOfficers,min_supervisors:f,min_officers:g,day_of_week:o,isSupervisorsUnderstaffed:f>0&&u.currentSupervisors<f,isOfficersUnderstaffed:g>0&&u.currentOfficers<g,position_type:p,assigned_officers:x,hasMinimumRule:!0,isZeroMinimum:f===0&&g===0,requirements_summary:pte(f,g),staffing_status:y?"understaffed":"adequate"};console.log(" Storing understaffed shift data:",v),t.push(v)}else console.log(" Shift is properly staffed"),f===0&&g===0&&console.log(" Shift has no minimum requirements (0/0)")}}catch(l){console.error(` Error processing date ${a}:`,l);continue}}return console.log(" Total understaffed shifts found:",t.length),t.length>0&&(console.log(" Understaffed Shifts Summary:"),t.forEach((n,i)=>{console.log(`${i+1}. ${n.date} - ${n.shift_types.name}: ${n.position_type}`)})),t},staleTime:5*60*1e3,gcTime:10*60*1e3}),mne=({isOfficerView:e=!1,userId:t})=>{var pe,je,_e;const[r,n]=w.useState(!1),[i,a]=w.useState(),[o,l]=w.useState(),[c,d]=w.useState("2"),[u,h]=w.useState(new Date),[m,f]=w.useState("all"),g=Lr(),[y,x]=w.useState(""),[p,v]=w.useState(!1),[b,j]=w.useState(null),[S,P]=w.useState(""),{data:M}=ml(),I=(M==null?void 0:M.enable_mass_alert_sending)!==!1;M!=null&&M.enable_notifications,w.useEffect(()=>{const W=se.channel("vacancy-alerts-changes").on("postgres_changes",{event:"*",schema:"public",table:"vacancy_alerts"},()=>{g.invalidateQueries({queryKey:["all-vacancy-alerts"]}),g.invalidateQueries({queryKey:["vacancy-alerts"]}),h(new Date)}).subscribe();return()=>{W.unsubscribe()}},[g]);const{data:O}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:W,error:te}=await se.from("shift_types").select("*").order("start_time");if(te)throw te;return W}}),{data:L,isLoading:T,refetch:k}=bt({queryKey:["all-vacancy-alerts"],queryFn:async()=>{console.log(" Fetching vacancy alerts...");const{data:W,error:te}=await se.from("vacancy_alerts").select(`
          *,
          shift_types (
            id, 
            name, 
            start_time, 
            end_time
          )
        `).order("date",{ascending:!1}).limit(20);if(te)throw console.error("Error fetching vacancy alerts:",te),te;return W},staleTime:3e4,gcTime:5*60*1e3}),{data:E,refetch:A}=bt({queryKey:["vacancy-responses-admin"],queryFn:async()=>{console.log(" Fetching officer responses...");const{data:W,error:te}=await se.from("vacancy_responses").select(`
          id,
          created_at,
          status,
          officer_id,
          alert_id,
          vacancy_alert_id,
          approved_by,
          approved_at,
          rejection_reason,
          profiles!vacancy_responses_officer_id_fkey(
            full_name,
            badge_number
          )
        `).order("created_at",{ascending:!1});if(te)throw console.error("Error fetching responses:",te),te;if(!W||W.length===0)return[];const Z=W.map(ce=>ce.alert_id||ce.vacancy_alert_id).filter(Boolean);if(Z.length===0)return console.log("No alert IDs found in responses"),W.map(ce=>({...ce,vacancy_alerts:null}));const{data:me,error:$}=await se.from("vacancy_alerts").select(`
          id,
          date,
          shift_type_id,
          shift_types(
            name
          )
        `).in("id",Z);if($)return console.error("Error fetching alerts:",$),W.map(ce=>({...ce,vacancy_alerts:null}));const ke=W.map(ce=>{const Ie=ce.alert_id||ce.vacancy_alert_id,Fe=me==null?void 0:me.find(Le=>Le.id===Ie);return{...ce,vacancy_alerts:Fe}});return console.log(" Final officer responses:",ke),ke}}),q=async W=>{var te;try{const{data:Z,error:me}=await se.from("vacancy_responses").select(`
          *,
          profiles!vacancy_responses_officer_id_fkey(
            full_name,
            badge_number
          )
        `).eq("id",W).single();if(me)throw console.error("Error fetching response details:",me),me;if(!Z){console.error("No response data found");return}const $=Z.alert_id||Z.vacancy_alert_id;if(!$){console.error("No alert ID found in response");return}const{data:ke,error:ce}=await se.from("vacancy_alerts").select(`
          date,
          shift_type_id,
          shift_types(
            name,
            start_time,
            end_time
          )
        `).eq("id",$).single();if(ce)throw console.error("Error fetching alert details:",ce),ce;const Ie=Z.profiles;console.log("Adding officer to shift as extra assignment:",{officer:Ie==null?void 0:Ie.full_name,officerId:Z.officer_id,shift:(te=ke.shift_types)==null?void 0:te.name,shiftTypeId:ke.shift_type_id,date:ke.date});const{error:Fe}=await se.from("schedule_exceptions").insert({officer_id:Z.officer_id,shift_type_id:ke.shift_type_id,date:ke.date,is_off:!1,position_name:"Extra Shift",unit_number:null,notes:`Approved vacancy request - ID: ${W}`,created_by:t,custom_start_time:null,custom_end_time:null});if(Fe)throw console.error("Error creating schedule exception:",Fe),Fe;console.log("Successfully added officer to shift as extra assignment"),await U(Z.officer_id,ke)}catch(Z){throw console.error("Error in addOfficerToShift:",Z),Z}},U=async(W,te)=>{var Z;try{const me=((Z=te.shift_types)==null?void 0:Z.name)||"Unknown Shift",$=te.date?Pe(new Date(te.date),"EEEE, MMM d, yyyy"):"Unknown Date",{error:ke}=await se.rpc("create_vacancy_notification",{officer_id:W,notification_title:"Extra Shift Assignment Confirmed",notification_message:`You have been assigned to ${me} on ${$} as an extra shift. This assignment was approved from your vacancy alert response.`,notification_type:"shift_assignment"});ke&&console.error("Error sending assignment notification:",ke)}catch(me){console.error("Error in sendShiftAssignmentNotification:",me)}},R=async(W,te,Z)=>{var me;try{const $=W.officer_id,ke=W.vacancy_alerts,ce=((me=ke==null?void 0:ke.shift_types)==null?void 0:me.name)||"Unknown Shift",Ie=ke!=null&&ke.date?Pe(new Date(ke.date),"EEEE, MMM d, yyyy"):"Unknown Date";let Fe="",Le="";te==="approved"?(Fe="Vacancy Request Approved",Le=`Your request for ${ce} on ${Ie} has been approved. You have been assigned to this shift.`):(Fe="Vacancy Request Denied",Le=`Your request for ${ce} on ${Ie} has been denied.`,Z&&(Le+=` Reason: ${Z}`));const{error:Ue}=await se.rpc("create_vacancy_notification",{officer_id:$,notification_title:Fe,notification_message:Le,notification_type:"vacancy_response"});Ue&&console.error("Error sending response notification:",Ue)}catch($){console.error("Error in sendResponseNotification:",$)}},C=Xt({mutationFn:async({responseId:W,status:te,rejectionReason:Z})=>{const $={status:te==="approved"?"accepted":"rejected",approved_by:t,approved_at:new Date().toISOString()};Z&&($.rejection_reason=Z),console.log("Updating response with data:",$);const{error:ke}=await se.from("vacancy_responses").update($).eq("id",W);if(ke)throw console.error("Supabase update error:",ke),ke;te==="approved"&&await q(W);const ce=E==null?void 0:E.find(Ie=>Ie.id===W);ce&&await R(ce,te,Z)},onSuccess:()=>{g.invalidateQueries({queryKey:["vacancy-responses-admin"]}),g.invalidateQueries({queryKey:["understaffed-shifts-detection"]}),g.invalidateQueries({queryKey:["daily-schedule"]}),ge.success("Response updated successfully")},onError:W=>{console.error("Update response error:",W),ge.error("Failed to update response: "+W.message)}}),{data:F,isLoading:X,error:re,refetch:z}=fne(m),{data:Y}=bt({queryKey:["existing-vacancy-alerts"],queryFn:async()=>{const{data:W,error:te}=await se.from("vacancy_alerts").select("*").eq("status","open");if(te)throw te;return W}}),J=()=>{k(),A(),z(),h(new Date),ge.success("Data refreshed")},ne=hne(),le=()=>{if(!i||!o){ge.error("Please select date and shift");return}let W="";parseInt(c)>0&&(W=`Need ${c} officer(s)`),ne.mutate({shift_type_id:o,date:Pe(i,"yyyy-MM-dd"),current_staffing:0,minimum_required:parseInt(c),custom_message:y,position_type:W,manual_notification_sent:!0},{onSuccess:()=>{n(!1),a(void 0),l(void 0),d("2"),x("")}})},G=Xt({mutationFn:async W=>{const{error:te}=await se.from("vacancy_alerts").update({status:"closed"}).eq("id",W);if(te)throw te},onSuccess:()=>{g.invalidateQueries({queryKey:["all-vacancy-alerts"]}),g.invalidateQueries({queryKey:["vacancy-alerts"]}),g.invalidateQueries({queryKey:["dashboard-stats"]}),ge.success("Alert closed")}}),he=Xt({mutationFn:async W=>{var Fe;if(console.log(" DEBUG - Starting sendAlertMutation:",{alertId:W.alertId,custom_message:W.custom_message,timestamp:new Date().toISOString()}),!W.custom_message){console.log("No custom message - skipping notifications");const{error:Le}=await se.from("vacancy_alerts").update({notification_sent:!0,notified_at:new Date().toISOString()}).eq("id",W.alertId);if(Le)throw Le;return}const{data:te,error:Z}=await se.from("profiles").select("id, email, phone, notification_preferences").eq("active",!0);if(Z)throw console.error("Error fetching officers:",Z),Z;console.log(` DEBUG - Found ${(te==null?void 0:te.length)||0} active officers`);const me=[],$=[],ke=W.custom_message,ce=`Vacancy Alert - ${Pe(new Date(W.date),"MMM d, yyyy")} - ${(Fe=W.shift_types)==null?void 0:Fe.name}`;console.log(" DEBUG - Sending message:",ke);for(const Le of te||[]){const Ue=Le.notification_preferences||{receiveEmails:!0,receiveTexts:!0};Ue.receiveEmails!==!1&&Le.email&&(console.log(` DEBUG - Sending email to: ${Le.email}`),me.push(fetch("https://ywghefarrcwbnraqyfgk.supabase.co/functions/v1/send-vacancy-alert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:Le.email,subject:ce,message:ke,alertId:W.alertId,customMessage:W.custom_message})}).catch(Ve=>{console.error(`Failed to send email to ${Le.email}:`,Ve)}))),Ue.receiveTexts!==!1&&Le.phone&&(console.log(` DEBUG - Sending text to: ${Le.phone}`),$.push(fetch("https://ywghefarrcwbnraqyfgk.supabase.co/functions/v1/send-text-alert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:Le.phone,message:ke,customMessage:W.custom_message})}).catch(Ve=>{console.error(`Failed to send text to ${Le.phone}:`,Ve)})))}await Promise.all([...me,...$]);const{error:Ie}=await se.from("vacancy_alerts").update({notification_sent:!0,notified_at:new Date().toISOString()}).eq("id",W.alertId);if(Ie)throw Ie},onSuccess:()=>{ge.success("Alerts sent successfully to all officers"),g.invalidateQueries({queryKey:["existing-vacancy-alerts"]}),g.invalidateQueries({queryKey:["all-vacancy-alerts"]})},onError:W=>{console.error("Send alert error:",W),ge.error("Failed to send alerts: "+W.message)}}),xe=W=>Y==null?void 0:Y.some(te=>te.date===W.date&&te.shift_type_id===W.shift_type_id),Se=W=>{console.log("Opening custom message dialog for shift:",W),j(W),P(""),v(!0)},K=()=>{var te;if(!b){ge.error("No shift selected");return}const W=S.trim()||`Urgent: ${b.minimum_required-b.current_staffing} more officers needed for ${(te=b.shift_types)==null?void 0:te.name} shift on ${Pe(new Date(b.date),"MMM d")}`;ne.mutate({shift_type_id:b.shift_type_id,date:b.date,current_staffing:b.current_staffing,minimum_required:b.minimum_required,custom_message:W},{onSuccess:()=>{v(!1),j(null),P(""),ge.success("Vacancy alert created with custom message")}})},we=()=>{if(!F)return;const W=F.filter(te=>!xe(te));if(W.length===0){ge.info("All understaffed shifts already have alerts");return}W.forEach(te=>{var me;const Z=`Urgent: ${te.minimum_required-te.current_staffing} more officers needed for ${(me=te.shift_types)==null?void 0:me.name} shift on ${Pe(new Date(te.date),"MMM d")}`;ne.mutate({shift_type_id:te.shift_type_id,date:te.date,current_staffing:te.current_staffing,minimum_required:te.minimum_required,custom_message:Z})}),ge.success(`Creating ${W.length} alerts with default messages`)},Te=W=>{const te=Y==null?void 0:Y.find(Z=>Z.date===W.date&&Z.shift_type_id===W.shift_type_id);if(!te){ge.error("Please create an alert first");return}he.mutate({...W,alertId:te.id})},ae=W=>{switch(W){case"interested":return"outline";case"accepted":return"default";case"rejected":return"destructive";default:return"outline"}},H=W=>{switch(W){case"interested":return"Pending";case"accepted":return"Approved";case"rejected":return"Denied";default:return W}},Oe=W=>{switch(W){case"interested":return s.jsx(pr,{className:"h-3 w-3"});case"accepted":return s.jsx(Uh,{className:"h-3 w-3"});case"rejected":return s.jsx(Ms,{className:"h-3 w-3"});default:return s.jsx(pr,{className:"h-3 w-3"})}};return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Vacancy Alerts"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last refreshed: ",u.toLocaleTimeString()]})]}),s.jsxs(Ne,{variant:"outline",onClick:J,children:[s.jsx(mh,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsx(ar,{children:"Current Vacancy Alerts"}),s.jsx(en,{children:"Open shifts that need coverage"})]}),s.jsx(gt,{children:T?s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading alerts..."})}):!L||L.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No vacancy alerts at this time."}):s.jsx("div",{className:"space-y-4",children:L.map(W=>{var me;const te=((me=W.shift_types)==null?void 0:me.name)||`Shift ID: ${W.shift_type_id}`,Z=W.shift_types?`${W.shift_types.start_time} - ${W.shift_types.end_time}`:"Time not available";return s.jsx("div",{className:"p-4 border rounded-lg space-y-2",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("p",{className:"font-medium",children:te})}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Pe(new Date(W.date),"EEEE, MMM d, yyyy"),"  ",Z]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Staffing: ",W.current_staffing," / ",W.minimum_required]}),W.position_type&&s.jsx("div",{className:"mt-2",children:s.jsxs(Re,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[W.position_type," needed"]})}),W.custom_message&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:s.jsx("p",{className:"text-sm text-blue-800",children:W.custom_message})})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 ml-4",children:[s.jsx("span",{className:$e("text-xs px-2 py-1 rounded",W.status==="open"?"bg-green-500/10 text-green-700":"bg-gray-500/10 text-gray-700"),children:W.status}),W.status==="open"&&s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>G.mutate(W.id),children:"Close Alert"})]})]})},W.id)})})})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Vacancy Management"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last refreshed: ",u.toLocaleTimeString()]})]}),s.jsxs(Ne,{variant:"outline",onClick:J,children:[s.jsx(mh,{className:"h-4 w-4 mr-2"}),"Refresh All"]})]}),I&&s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Officer Responses"]}),s.jsx(en,{children:"Review and manage officer responses to vacancy alerts"})]}),s.jsx(gt,{children:!E||E.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No responses yet."}):s.jsx("div",{className:"space-y-4",children:E.map(W=>{var $,ke,ce,Ie;const te=W.vacancy_alerts,Z=(($=te==null?void 0:te.shift_types)==null?void 0:$.name)||"Unknown Shift",me=te!=null&&te.date?Pe(new Date(te.date),"MMM d, yyyy"):"Unknown Date";return s.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("p",{className:"font-medium",children:[(ke=W.profiles)==null?void 0:ke.full_name," (#",(ce=W.profiles)==null?void 0:ce.badge_number,")"]}),s.jsxs(Re,{variant:ae(W.status),className:"flex items-center gap-1 capitalize",children:[Oe(W.status),H(W.status)]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Z," - ",me]}),W.approved_by&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[W.status==="accepted"?"Approved":"Denied"," on"," ",Pe(new Date(W.approved_at),"MMM d, yyyy 'at' h:mm a")]}),W.rejection_reason&&s.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded",children:s.jsxs("p",{className:"text-sm text-red-800",children:[s.jsx("strong",{children:"Reason:"})," ",W.rejection_reason]})})]}),W.status==="interested"&&s.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[s.jsxs(Ne,{size:"sm",onClick:()=>C.mutate({responseId:W.id,status:"approved"}),disabled:C.isPending,className:"flex items-center gap-1",children:[s.jsx(Uh,{className:"h-3 w-3"}),"Approve"]}),s.jsxs(rn,{children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{size:"sm",variant:"destructive",disabled:C.isPending,className:"flex items-center gap-1",children:[s.jsx(Ms,{className:"h-3 w-3"}),"Deny"]})}),s.jsxs(Vr,{children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Deny Response"}),s.jsxs(as,{children:["Provide a reason for denying this shift request from ",(Ie=W.profiles)==null?void 0:Ie.full_name,"."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"rejection-reason",children:"Reason for Denial"}),s.jsx("textarea",{id:"rejection-reason",placeholder:"Enter reason for denial (optional but recommended)",className:"w-full min-h-[80px] p-2 border rounded-md text-sm resize-y",maxLength:500})]}),s.jsx(Ne,{onClick:()=>{const Fe=document.getElementById("rejection-reason");C.mutate({responseId:W.id,status:"denied",rejectionReason:Fe.value})},disabled:C.isPending,variant:"destructive",children:C.isPending?"Denying...":"Confirm Denial"})]})]})]})]})]})},W.id)})})})]}),s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-5 w-5"}),"Automatic Understaffed Shift Detection"]}),s.jsx(en,{children:"Detects understaffing based on ACTUAL assigned positions in the daily schedule"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ne,{variant:"outline",onClick:()=>z(),disabled:X,children:[s.jsx(mh,{className:`h-4 w-4 mr-2 ${X?"animate-spin":""}`}),"Refresh"]}),I&&s.jsxs(Ne,{variant:"outline",onClick:we,disabled:ne.isPending||!(F!=null&&F.length),children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Create All Alerts"]})]})]})}),s.jsxs(gt,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(Ce,{htmlFor:"shift-select",className:"text-sm font-medium mb-2 block",children:"Select Shift to Scan"}),s.jsxs(Wt,{value:m,onValueChange:f,children:[s.jsx(Bt,{className:"w-full",children:s.jsx(Vt,{placeholder:"Select a shift to scan"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"all",children:"All Shifts"}),O==null?void 0:O.map(W=>s.jsxs(ct,{value:W.id,children:[W.name," (",W.start_time," - ",W.end_time,")"]},W.id))]})]})]}),X?s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Scanning for understaffed shifts..."})}):!F||F.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"No understaffed shifts found in the next 7 days."}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Check browser console for detailed scan results."})]}):s.jsx("div",{className:"space-y-4",children:F.map((W,te)=>{var ke,ce;const Z=xe(W),me=((ke=W.shift_types)==null?void 0:ke.name)||`Shift ID: ${W.shift_type_id}`,$=W.shift_types?`${W.shift_types.start_time} - ${W.shift_types.end_time}`:"Time not available";return s.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:me}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Pe(new Date(W.date+"T12:00:00"),"EEEE, MMM d, yyyy"),"  ",$]}),s.jsxs("div",{className:"bg-gray-100 p-2 rounded text-xs mt-2",children:[s.jsxs("p",{className:"text-gray-600",children:[s.jsx("strong",{children:"Staffing:"})," ",W.current_staffing,"/",W.minimum_required," |",s.jsx("strong",{children:" Supervisors:"})," ",W.current_supervisors,"/",W.min_supervisors," |",s.jsx("strong",{children:" Officers:"})," ",W.current_officers,"/",W.min_officers]}),W.position_type&&s.jsxs("p",{className:"text-gray-600 mt-1",children:[s.jsx("strong",{children:"Positions Needed:"})," ",W.position_type]}),s.jsxs("p",{className:"text-gray-500 mt-1",children:[s.jsx("strong",{children:"Assigned:"})," ",((ce=W.assigned_officers)==null?void 0:ce.map(Ie=>`${Ie.name} (${Ie.position||"No position"} - ${Ie.isSupervisor?"Supervisor":"Officer"})`).join(", "))||"None"]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsxs(Re,{variant:"destructive",children:["Total: ",W.current_staffing,"/",W.minimum_required]}),W.isSupervisorsUnderstaffed&&s.jsxs(Re,{variant:"destructive",children:["Needs ",W.min_supervisors-W.current_supervisors," supervisor(s)"]}),W.isOfficersUnderstaffed&&s.jsxs(Re,{variant:"destructive",children:["Needs ",W.min_officers-W.current_officers," officer(s)"]}),Z&&s.jsx(Re,{variant:"outline",className:"bg-green-500/10 text-green-700",children:"Alert Created"})]})]}),I&&s.jsx("div",{className:"flex flex-col gap-2",children:Z?s.jsxs(Ne,{size:"sm",onClick:()=>Te(W),disabled:he.isPending,children:[s.jsx(nB,{className:"h-3 w-3 mr-1"}),"Send Alert"]}):s.jsx(Ne,{size:"sm",onClick:()=>Se(W),disabled:ne.isPending,children:"Create Alert"})})]})},`${W.date}-${W.shift_type_id}-${te}`)})})]})]}),I&&s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ar,{children:"Manual Vacancy Alert Creation"}),s.jsx(en,{children:"Manually create vacancy alerts for specific shifts"})]}),s.jsxs(rn,{open:r,onOpenChange:n,children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Create Manual Alert"]})}),s.jsxs(Vr,{children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Create Vacancy Alert"}),s.jsx(as,{children:"Create an alert to request volunteers for an understaffed shift"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Date"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!i&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),i?Pe(i,"PPP"):s.jsx("span",{children:"Pick a date"})]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:i,onSelect:a,initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shift Type"}),s.jsxs(Wt,{value:o,onValueChange:l,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:O==null?void 0:O.map(W=>s.jsxs(ct,{value:W.id,children:[W.name," (",W.start_time," - ",W.end_time,")"]},W.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Minimum Required Officers"}),s.jsx(St,{type:"number",min:"1",value:c,onChange:W=>d(W.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"custom-message",children:"Custom Message (Optional)"}),s.jsx("textarea",{id:"custom-message",placeholder:"Add a custom message for this vacancy alert (e.g., 'Urgent coverage needed for special event')",value:y,onChange:W=>x(W.target.value),className:"w-full min-h-[80px] p-2 border rounded-md text-sm resize-y",maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length,"/500 characters"]})]}),s.jsx(Ne,{className:"w-full",onClick:le,disabled:ne.isPending,children:ne.isPending?"Creating...":"Create Alert"})]})]})]})]})}),s.jsx(gt,{children:T?s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading alerts..."})}):!L||L.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No vacancy alerts created yet."}):s.jsx("div",{className:"space-y-4",children:L.map(W=>{var me;const te=((me=W.shift_types)==null?void 0:me.name)||`Shift ID: ${W.shift_type_id}`,Z=W.shift_types?`${W.shift_types.start_time} - ${W.shift_types.end_time}`:"Time not available";return s.jsx("div",{className:"p-4 border rounded-lg space-y-2",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("p",{className:"font-medium",children:te})}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Pe(new Date(W.date),"EEEE, MMM d, yyyy"),"  ",Z]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Staffing: ",W.current_staffing," / ",W.minimum_required]}),W.custom_message&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:s.jsx("p",{className:"text-sm text-blue-800",children:W.custom_message})})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 ml-4",children:[s.jsx("span",{className:$e("text-xs px-2 py-1 rounded",W.status==="open"?"bg-green-500/10 text-green-700":"bg-gray-500/10 text-gray-700"),children:W.status}),W.status==="open"&&s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>G.mutate(W.id),children:"Close Alert"})]})]})},W.id)})})})]}),s.jsx(rn,{open:p,onOpenChange:v,children:s.jsxs(Vr,{children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Add Custom Message"}),s.jsxs(as,{children:["Add a custom message for the vacancy alert for"," ",(pe=b==null?void 0:b.shift_types)==null?void 0:pe.name," on"," ",b&&Pe(new Date(b.date),"EEEE, MMM d, yyyy")]})]}),s.jsxs("div",{className:"space-y-4",children:[b&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-sm font-medium",children:[(je=b.shift_types)==null?void 0:je.name," "," ",Pe(new Date(b.date),"MMM d, yyyy")]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Staffing: ",b.current_staffing," /"," ",b.minimum_required,"  Needs ",b.minimum_required-b.current_staffing," more officers"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"detection-custom-message",children:"Custom Message (Optional)"}),s.jsx("textarea",{id:"detection-custom-message",placeholder:"Add a custom message for this vacancy alert (e.g., 'Urgent coverage needed for special event', 'Mandatory overtime available', etc.)",value:S,onChange:W=>P(W.target.value),className:"w-full min-h-[100px] p-3 border rounded-md text-sm resize-y focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Leave blank to use default message"}),s.jsxs("span",{children:[S.length,"/500 characters"]})]})]}),!S.trim()&&s.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[s.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Default message that will be used:"}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Urgent: ",(b==null?void 0:b.minimum_required)-(b==null?void 0:b.current_staffing)," more officers needed for ",(_e=b==null?void 0:b.shift_types)==null?void 0:_e.name," shift on ",b&&Pe(new Date(b.date),"MMM d")]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(Ne,{variant:"outline",onClick:()=>v(!1),className:"flex-1",children:"Cancel"}),s.jsx(Ne,{onClick:K,disabled:ne.isPending,className:"flex-1",children:ne.isPending?"Creating...":"Create Alert"})]})]})]})})]})},ix=({officer:e,open:t,onOpenChange:r})=>{var le,G,he,xe,Se;const n=Lr(),i=e!==null,[a,o]=w.useState("basic"),{data:l}=ml(),c=K=>{if(K)try{const[we,Te,ae]=K.split("-").map(Number),H=new Date(we,Te-1,ae);if(ta(H))return H}catch(we){console.error("Error parsing date:",K,we)}},d=K=>{if(!K)return"";const we=K.getFullYear(),Te=String(K.getMonth()+1).padStart(2,"0"),ae=String(K.getDate()).padStart(2,"0");return`${we}-${Te}-${ae}`},[u,h]=w.useState(),[m,f]=w.useState(""),[g,y]=w.useState(),[x,p]=w.useState(""),[v,b]=w.useState(),[j,S]=w.useState(""),[P,M]=w.useState(),[I,O]=w.useState(""),[L,T]=w.useState(((le=e==null?void 0:e.service_credit_override)==null?void 0:le.toString())||""),[k,E]=w.useState(0),[A,q]=w.useState({full_name:(e==null?void 0:e.full_name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",badge_number:(e==null?void 0:e.badge_number)||"",rank:(e==null?void 0:e.rank)||"Officer",vacation_hours:((G=e==null?void 0:e.vacation_hours)==null?void 0:G.toString())||"0",sick_hours:((he=e==null?void 0:e.sick_hours)==null?void 0:he.toString())||"0",comp_hours:((xe=e==null?void 0:e.comp_hours)==null?void 0:xe.toString())||"0",holiday_hours:((Se=e==null?void 0:e.holiday_hours)==null?void 0:Se.toString())||"0"});w.useEffect(()=>{var K,we,Te,ae,H;if(t){const Oe=c((e==null?void 0:e.hire_date)||null),pe=c((e==null?void 0:e.promotion_date_sergeant)||null),je=c((e==null?void 0:e.promotion_date_lieutenant)||null),_e=c((e==null?void 0:e.birthday)||null);h(Oe),f(Oe?d(Oe):""),y(pe),p(pe?d(pe):""),b(je),S(je?d(je):""),M(_e),O(_e?d(_e):""),T(((K=e==null?void 0:e.service_credit_override)==null?void 0:K.toString())||""),q({full_name:(e==null?void 0:e.full_name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",badge_number:(e==null?void 0:e.badge_number)||"",rank:(e==null?void 0:e.rank)||"Officer",vacation_hours:((we=e==null?void 0:e.vacation_hours)==null?void 0:we.toString())||"0",sick_hours:((Te=e==null?void 0:e.sick_hours)==null?void 0:Te.toString())||"0",comp_hours:((ae=e==null?void 0:e.comp_hours)==null?void 0:ae.toString())||"0",holiday_hours:((H=e==null?void 0:e.holiday_hours)==null?void 0:H.toString())||"0"}),e!=null&&e.id?U():E(0)}},[t,e]);const U=async()=>{if(!(e!=null&&e.id))return;const{data:K}=await se.rpc("get_service_credit",{profile_id:e.id});E(K||0)},R=Xt({mutationFn:async K=>{if(!(e!=null&&e.id))throw new Error("No officer ID provided");const{data:{user:we}}=await se.auth.getUser(),{data:Te}=await se.from("profiles").select("*").eq("id",e.id).single(),ae={full_name:K.full_name,email:K.email,phone:K.phone||null,badge_number:K.badge_number||null,rank:K.rank,service_credit_override:L?Number(L):null};m?ae.hire_date=m:ae.hire_date=null,I?ae.birthday=I:ae.birthday=null,x?ae.promotion_date_sergeant=x:ae.promotion_date_sergeant=null,j?ae.promotion_date_lieutenant=j:ae.promotion_date_lieutenant=null,l!=null&&l.show_pto_balances&&(ae.vacation_hours=Number(K.vacation_hours)||0,ae.sick_hours=Number(K.sick_hours)||0,ae.comp_hours=Number(K.comp_hours)||0,ae.holiday_hours=Number(K.holiday_hours)||0);const{error:H}=await se.from("profiles").update(ae).eq("id",e.id);if(H)throw H;we&&await Ir.logProfileUpdate(e.id,K.full_name||e.full_name,Te,ae,we.id,we.email);const pe=(_e=>{const W=_e.toLowerCase();return W==="chief"||W==="deputy chief"?"admin":W==="sergeant"||W==="lieutenant"?"supervisor":"officer"})(K.rank),{error:je}=await se.from("user_roles").update({role:pe}).eq("user_id",e.id);je&&console.error("Failed to update role:",je)},onSuccess:()=>{ge.success("Profile updated successfully"),n.invalidateQueries({queryKey:["all-officers"]}),n.invalidateQueries({queryKey:["officers-pto"]}),r(!1)},onError:K=>{ge.error(K.message||"Failed to update profile")}}),C=Xt({mutationFn:async K=>{const{data:{user:we}}=await se.auth.getUser(),Te={email:K.email,full_name:K.full_name,phone:K.phone,badge_number:K.badge_number,rank:K.rank,service_credit_override:L?Number(L):null};m?Te.hire_date=m:Te.hire_date=null,I?Te.birthday=I:Te.birthday=null,x?Te.promotion_date_sergeant=x:Te.promotion_date_sergeant=null,j?Te.promotion_date_lieutenant=j:Te.promotion_date_lieutenant=null,l!=null&&l.show_pto_balances&&(Te.vacation_hours=Number(K.vacation_hours)||0,Te.sick_hours=Number(K.sick_hours)||0,Te.comp_hours=Number(K.comp_hours)||0,Te.holiday_hours=Number(K.holiday_hours)||0);const ae=await fetch("https://ywghefarrcwbnraqyfgk.supabase.co/functions/v1/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)}),H=await ae.json();if(!ae.ok)throw new Error(H.error||"Failed to create user");return we&&await Ir.logProfileUpdate(H.userId,K.full_name,null,Te,we.id,we.email),H},onSuccess:K=>{ge.success(K.message||"Profile created successfully"),n.invalidateQueries({queryKey:["all-officers"]}),r(!1)},onError:K=>{ge.error(K.message)}}),F=K=>{if(f(K),K){const[we,Te,ae]=K.split("-").map(Number);h(new Date(we,Te-1,ae))}else h(void 0)},X=K=>{if(p(K),K){const[we,Te,ae]=K.split("-").map(Number);y(new Date(we,Te-1,ae))}else y(void 0)},re=K=>{if(S(K),K){const[we,Te,ae]=K.split("-").map(Number);b(new Date(we,Te-1,ae))}else b(void 0)},z=K=>{if(O(K),K){const[we,Te,ae]=K.split("-").map(Number);M(new Date(we,Te-1,ae))}else M(void 0)},Y=K=>{if(K.preventDefault(),!A.full_name||!A.email){ge.error("Name and email are required");return}if(g&&u&&g<u){ge.error("Sergeant promotion date cannot be before hire date");return}if(v){if(u&&v<u){ge.error("Lieutenant promotion date cannot be before hire date");return}if(g&&v<g){ge.error("Lieutenant promotion date cannot be before Sergeant promotion date");return}}i?R.mutate(A):C.mutate(A)},J=()=>{const K=new Date,we=je=>{if(!je)return 0;const _e=K.getFullYear()-je.getFullYear(),W=K.getMonth()-je.getMonth(),te=K.getDate()-je.getDate();let Z=_e+W/12+te/365;return Math.max(0,Z)},Te=we(u),ae=we(g),H=we(v),Oe=Number(L)||0,pe=k;return{totalHireYears:Te.toFixed(1),sergeantYears:ae.toFixed(1),lieutenantYears:H.toFixed(1),override:Oe.toFixed(1),finalTotal:pe.toFixed(1)}},ne=R.isPending||C.isPending;return s.jsx(rn,{open:t,onOpenChange:r,children:s.jsxs(Vr,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:i?"Edit Officer Profile":"Create New Officer Profile"}),s.jsx(as,{children:i?"Update officer information":"Create a new officer profile"})]}),s.jsxs(fl,{value:a,onValueChange:o,className:"mt-4",children:[s.jsxs(sa,{className:"grid w-full grid-cols-3",children:[s.jsx(er,{value:"basic",children:"Basic Info"}),s.jsx(er,{value:"promotions",children:"Promotions"}),s.jsx(er,{value:"pto",children:"PTO"})]}),s.jsxs("form",{onSubmit:Y,children:[s.jsxs(Un,{value:"basic",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"full_name",children:"Full Name *"}),s.jsx(St,{id:"full_name",value:A.full_name,onChange:K=>q({...A,full_name:K.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"email",children:"Email *"}),s.jsx(St,{id:"email",type:"email",value:A.email,onChange:K=>q({...A,email:K.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"badge_number",children:"Badge Number"}),s.jsx(St,{id:"badge_number",value:A.badge_number,onChange:K=>q({...A,badge_number:K.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"phone",children:"Phone"}),s.jsx(St,{id:"phone",type:"tel",value:A.phone,onChange:K=>q({...A,phone:K.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"rank",children:"Rank"}),s.jsxs(Wt,{value:A.rank,onValueChange:K=>q({...A,rank:K}),children:[s.jsx(Bt,{id:"rank",children:s.jsx(Vt,{placeholder:"Select rank"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"Probationary",children:"Probationary"}),s.jsx(ct,{value:"Officer",children:"Officer"}),s.jsx(ct,{value:"Sergeant",children:"Sergeant"}),s.jsx(ct,{value:"Lieutenant",children:"Lieutenant"}),s.jsx(ct,{value:"Deputy Chief",children:"Deputy Chief"}),s.jsx(ct,{value:"Chief",children:"Chief"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Hire Date"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{type:"date",value:m,onChange:K=>F(K.target.value),max:d(new Date),className:"flex-1"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsx(Ne,{variant:"outline",size:"icon",children:s.jsx(xt,{className:"h-4 w-4"})})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:u,onSelect:K=>{K?(h(K),f(d(K))):(h(void 0),f(""))},disabled:K=>K>new Date,initialFocus:!0,className:$e("p-3 pointer-events-auto")})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{htmlFor:"birthday",className:"flex items-center gap-2",children:[s.jsx(ef,{className:"h-4 w-4"}),"Birthday"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{id:"birthday",type:"date",value:I,onChange:K=>z(K.target.value),max:d(new Date),className:"flex-1"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsx(Ne,{variant:"outline",size:"icon",children:s.jsx(xt,{className:"h-4 w-4"})})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:P,onSelect:K=>{K?(M(K),O(d(K))):(M(void 0),O(""))},disabled:K=>K>new Date,initialFocus:!0,className:$e("p-3 pointer-events-auto")})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for birthday alerts in settings"})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{htmlFor:"service_credit_override",className:"flex items-center gap-2",children:[s.jsx(ni,{className:"h-4 w-4"}),"Service Credit Adjustment (Years)"]}),s.jsx(St,{id:"service_credit_override",type:"number",placeholder:"0 (no adjustment)",value:L,onChange:K=>T(K.target.value),step:"0.1"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Current Service Credit:"})," ",k.toFixed(1)," years"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter positive values to add credit, negative to deduct (e.g., -2 to subtract 2 years)"})]})]}),s.jsxs(Un,{value:"promotions",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Qi,{className:"h-4 w-4"}),"Sergeant Promotion Date"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{type:"date",value:x,onChange:K=>X(K.target.value),max:d(new Date),min:m,className:"flex-1"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsx(Ne,{variant:"outline",size:"icon",children:s.jsx(xt,{className:"h-4 w-4"})})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:g,onSelect:K=>{K?(y(K),p(d(K))):(y(void 0),p(""))},disabled:K=>K>new Date||(u?K<u:!1),initialFocus:!0,className:$e("p-3 pointer-events-auto")})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Seniority at Sergeant rank restarts from this date"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Qi,{className:"h-4 w-4"}),"Lieutenant Promotion Date"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{type:"date",value:j,onChange:K=>re(K.target.value),max:d(new Date),min:x||m,className:"flex-1"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsx(Ne,{variant:"outline",size:"icon",children:s.jsx(xt,{className:"h-4 w-4"})})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:v,onSelect:K=>{K?(b(K),S(d(K))):(b(void 0),S(""))},disabled:K=>K>new Date||(g?K<g:u?K<u:!1),initialFocus:!0,className:$e("p-3 pointer-events-auto")})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Seniority at Lieutenant rank restarts from this date"})]}),i&&k>0&&s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30",children:[s.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Service Credit Breakdown"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[u&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total since hire:"}),s.jsxs("span",{children:[J().totalHireYears," years"]})]}),g&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sergeant seniority:"}),s.jsxs("span",{children:[J().sergeantYears," years"]})]}),v&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieutenant seniority:"}),s.jsxs("span",{children:[J().lieutenantYears," years"]})]}),Number(L)!==0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Adjustment:"}),s.jsxs("span",{className:Number(L)>0?"text-green-600":"text-red-600",children:[Number(L)>0?"+":"",J().override," years"]})]}),s.jsxs("div",{className:"flex justify-between border-t pt-1 font-semibold",children:[s.jsx("span",{children:"Final Service Credit:"}),s.jsxs("span",{children:[J().finalTotal," years"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"*Service credit calculation is based on the most recent promotion date for the current rank."})]})]})]}),s.jsx(Un,{value:"pto",className:"space-y-4",children:l!=null&&l.show_pto_balances?s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/30",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(pr,{className:"h-4 w-4"}),"PTO Balances"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"vacation_hours",children:"Vacation Hours"}),s.jsx(St,{id:"vacation_hours",type:"number",value:A.vacation_hours,onChange:K=>q({...A,vacation_hours:K.target.value}),step:"0.5",min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"sick_hours",children:"Sick Hours"}),s.jsx(St,{id:"sick_hours",type:"number",value:A.sick_hours,onChange:K=>q({...A,sick_hours:K.target.value}),step:"0.5",min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"comp_hours",children:"Comp Hours"}),s.jsx(St,{id:"comp_hours",type:"number",value:A.comp_hours,onChange:K=>q({...A,comp_hours:K.target.value}),step:"0.5",min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"holiday_hours",children:"Holiday Hours"}),s.jsx(St,{id:"holiday_hours",type:"number",value:A.holiday_hours,onChange:K=>q({...A,holiday_hours:K.target.value}),step:"0.5",min:"0"})]})]})]}):s.jsx("div",{className:"p-4 border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(pr,{className:"h-4 w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"PTO Management"}),s.jsx("p",{className:"text-xs",children:"PTO balances are currently managed as indefinite"})]})]})})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[s.jsx(Ne,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(Ne,{type:"submit",disabled:ne,onClick:Y,children:ne?"Saving...":i?"Save Changes":"Create Profile"})]})]})})};var pne=Symbol("radix.slottable");function gne(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=pne,t}var uR="AlertDialog",[vne]=Is(uR,[k8]),pl=k8(),hR=e=>{const{__scopeAlertDialog:t,...r}=e,n=pl(t);return s.jsx($j,{...n,...r,modal:!0})};hR.displayName=uR;var yne="AlertDialogTrigger",xne=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=pl(r);return s.jsx(e5,{...i,...n,ref:t})});xne.displayName=yne;var bne="AlertDialogPortal",fR=e=>{const{__scopeAlertDialog:t,...r}=e,n=pl(t);return s.jsx(t5,{...n,...r})};fR.displayName=bne;var wne="AlertDialogOverlay",mR=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=pl(r);return s.jsx(Qp,{...i,...n,ref:t})});mR.displayName=wne;var bh="AlertDialogContent",[Nne,jne]=vne(bh),_ne=gne("AlertDialogContent"),pR=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...i}=e,a=pl(r),o=w.useRef(null),l=Kt(t,o),c=w.useRef(null);return s.jsx(ZX,{contentName:bh,titleName:gR,docsSlug:"alert-dialog",children:s.jsx(Nne,{scope:r,cancelRef:c,children:s.jsxs($p,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:st(i.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(_ne,{children:n}),s.jsx(Pne,{contentRef:o})]})})})});pR.displayName=bh;var gR="AlertDialogTitle",vR=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=pl(r);return s.jsx(eg,{...i,...n,ref:t})});vR.displayName=gR;var yR="AlertDialogDescription",xR=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=pl(r);return s.jsx(tg,{...i,...n,ref:t})});xR.displayName=yR;var Sne="AlertDialogAction",bR=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=pl(r);return s.jsx(i0,{...i,...n,ref:t})});bR.displayName=Sne;var wR="AlertDialogCancel",NR=w.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:i}=jne(wR,r),a=pl(r),o=Kt(t,i);return s.jsx(i0,{...a,...n,ref:o})});NR.displayName=wR;var Pne=({contentRef:e})=>{const t=`\`${bh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${bh}\` by passing a \`${yR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${bh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},kne=hR,Cne=fR,jR=mR,_R=pR,SR=bR,PR=NR,kR=vR,CR=xR;const zC=kne,Tne=Cne,TR=w.forwardRef(({className:e,...t},r)=>s.jsx(jR,{className:$e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));TR.displayName=jR.displayName;const H2=w.forwardRef(({className:e,...t},r)=>s.jsxs(Tne,{children:[s.jsx(TR,{}),s.jsx(_R,{ref:r,className:$e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));H2.displayName=_R.displayName;const W2=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col space-y-2 text-center sm:text-left",e),...t});W2.displayName="AlertDialogHeader";const V2=({className:e,...t})=>s.jsx("div",{className:$e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});V2.displayName="AlertDialogFooter";const Y2=w.forwardRef(({className:e,...t},r)=>s.jsx(kR,{ref:r,className:$e("text-lg font-semibold",e),...t}));Y2.displayName=kR.displayName;const K2=w.forwardRef(({className:e,...t},r)=>s.jsx(CR,{ref:r,className:$e("text-sm text-muted-foreground",e),...t}));K2.displayName=CR.displayName;const G2=w.forwardRef(({className:e,...t},r)=>s.jsx(SR,{ref:r,className:$e(vp(),e),...t}));G2.displayName=SR.displayName;const J2=w.forwardRef(({className:e,...t},r)=>s.jsx(PR,{ref:r,className:$e(vp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));J2.displayName=PR.displayName;const qv=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],OR=({officer:e,open:t,onOpenChange:r})=>{if(!e)return console.error("OfficerScheduleManager: officer prop is undefined or null"),null;const n=Lr(),[i,a]=w.useState(!1),[o,l]=w.useState([]),[c,d]=w.useState(new Date),[u,h]=w.useState(void 0),[m,f]=w.useState(""),[g,y]=w.useState(null),[x,p]=w.useState(""),[v,b]=w.useState("none"),[j,S]=w.useState([]),[P,M]=w.useState(null),[I,O]=w.useState("schedules"),[L,T]=w.useState(!1),[k,E]=w.useState(new Date),[A,q]=w.useState(void 0),[U,R]=w.useState(""),[C,F]=w.useState("none"),[X,re]=w.useState(""),[z,Y]=w.useState(null),[J,ne]=w.useState(null);w.useEffect(()=>{const ue=async()=>{const{data:Ke,error:Qe}=await se.from("shift_positions").select("position_name").order("position_name");if(Qe)console.error("Error fetching shift positions:",Qe),ge.error("Failed to load positions");else{const ht=[...new Set(Ke==null?void 0:Ke.map(Dt=>Dt.position_name).filter(Boolean))];S(ht)}};t&&(e!=null&&e.id)&&ue()},[t,e==null?void 0:e.id]);const{data:le,isLoading:G}=bt({queryKey:["officer-schedules",e.id],queryFn:async()=>{const{data:ue,error:Ke}=await se.from("recurring_schedules").select(`
          *,
          shift_types(id, name, start_time, end_time)
        `).eq("officer_id",e.id).order("start_date",{ascending:!1});if(Ke)throw Ke;const Qe=new Date;Qe.setHours(0,0,0,0);const ht=ue.filter(yt=>{const ut=yt.end_date?new Date(yt.end_date):null;return!ut||ut>=Qe}),Dt=ue.filter(yt=>{const ut=yt.end_date?new Date(yt.end_date):null;return ut&&ut<Qe});return[...ht,...Dt]},enabled:t}),{data:he,isLoading:xe}=bt({queryKey:["officer-default-assignments",e.id],queryFn:async()=>{const{data:ue,error:Ke}=await se.from("officer_default_assignments").select("*").eq("officer_id",e.id).order("start_date",{ascending:!1});if(Ke)throw Ke;const Qe=new Date;Qe.setHours(0,0,0,0);const ht=(ue||[]).filter(yt=>{const ut=yt.end_date?new Date(yt.end_date):null;return!ut||ut>=Qe}),Dt=(ue||[]).filter(yt=>{const ut=yt.end_date?new Date(yt.end_date):null;return ut&&ut<Qe});return[...ht,...Dt]},enabled:t}),{data:Se}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:ue,error:Ke}=await se.from("shift_types").select("*").order("start_time");if(Ke)throw Ke;return ue},enabled:t}),K=Xt({mutationFn:async ue=>{const{data:{user:Ke}}=await se.auth.getUser(),{data:Qe}=await se.from("recurring_schedules").select("*").eq("id",ue).single(),{error:ht}=await se.from("recurring_schedules").delete().eq("id",ue);if(ht)throw ht;Ke&&Qe&&await Ir.logScheduleChange("Deleted",ue,Qe,Ke.id,Ke.email)},onSuccess:()=>{ge.success("Schedule removed"),n.invalidateQueries({queryKey:["officer-schedules",e.id]}),n.invalidateQueries({queryKey:["weekly-schedule"]}),y(null)},onError:ue=>{ge.error(ue.message||"Failed to remove schedule"),y(null)}}),we=Xt({mutationFn:async ue=>{const{data:{user:Ke}}=await se.auth.getUser(),Qe=new Date(ue.start);if(ue.end&&new Date(ue.end)<Qe)throw new Error("End date cannot be before start date");const ht=ue.days.map(ut=>({officer_id:e.id,day_of_week:ut,shift_type_id:ue.shiftId,start_date:ue.start,end_date:ue.end||null,unit_number:ue.unitNumber||null,position_name:ue.assignedPosition!=="none"?ue.assignedPosition:null}));console.log("Inserting schedules:",ht);const{data:Dt,error:yt}=await se.from("recurring_schedules").insert(ht).select();if(yt)throw console.error("Insert error:",yt),yt;if(!Dt||Dt.length===0)throw new Error("No schedules were created");if(Ke)for(const ut of Dt)await Ir.logScheduleChange("Created",ut.id,{officer_id:e.id,officer_name:e.full_name,day_of_week:ut.day_of_week,shift_type_id:ut.shift_type_id,start_date:ut.start_date,end_date:ut.end_date,unit_number:ut.unit_number,position_name:ut.position_name},Ke.id,Ke.email);return Dt},onSuccess:ue=>{console.log("Successfully created schedules:",ue),ge.success(`Created ${ue.length} schedule(s) successfully`),n.invalidateQueries({queryKey:["officer-schedules",e.id]}),n.invalidateQueries({queryKey:["weekly-schedule"]}),n.invalidateQueries({queryKey:["daily-schedule"]}),rt()},onError:ue=>{console.error("Schedule creation error:",ue),ge.error(ue.message||"Failed to add schedule")}}),Te=Xt({mutationFn:async({scheduleId:ue,updates:Ke})=>{const{error:Qe}=await se.from("recurring_schedules").update(Ke).eq("id",ue);if(Qe)throw Qe},onSuccess:()=>{ge.success("Schedule updated successfully"),n.invalidateQueries({queryKey:["officer-schedules",e.id]}),n.invalidateQueries({queryKey:["weekly-schedule"]}),n.invalidateQueries({queryKey:["daily-schedule"]}),M(null),rt()},onError:ue=>{ge.error(ue.message||"Failed to update schedule")}}),ae=Xt({mutationFn:async({scheduleId:ue,endDate:Ke})=>{const{error:Qe}=await se.from("recurring_schedules").update({end_date:Ke}).eq("id",ue);if(Qe)throw Qe},onSuccess:()=>{ge.success("Schedule ended"),n.invalidateQueries({queryKey:["officer-schedules",e.id]}),n.invalidateQueries({queryKey:["weekly-schedule"]}),n.invalidateQueries({queryKey:["daily-schedule"]})},onError:ue=>{ge.error(ue.message||"Failed to end schedule")}}),H=Xt({mutationFn:async ue=>{const{error:Ke}=await se.from("officer_default_assignments").update({end_date:ue.start}).eq("officer_id",e.id).or(`end_date.is.null,end_date.gte.${ue.start}`);Ke&&console.error("Failed to end previous assignments:",Ke);const{data:Qe,error:ht}=await se.from("officer_default_assignments").insert({officer_id:e.id,unit_number:ue.unitNumber||null,position_name:ue.assignedPosition!=="none"?ue.assignedPosition:null,start_date:ue.start,end_date:ue.end||null}).select().single();if(ht)throw ht;let Dt=se.from("recurring_schedules").update({unit_number:ue.unitNumber||null,position_name:ue.assignedPosition!=="none"?ue.assignedPosition:null}).eq("officer_id",e.id).gte("start_date",ue.start);ue.end?Dt=Dt.lte("start_date",ue.end):Dt=Dt.or(`end_date.is.null,end_date.gte.${new Date().toISOString().split("T")[0]}`);const{error:yt}=await Dt;return yt&&console.error("Failed to update schedules:",yt),Qe},onSuccess:()=>{ge.success("Default assignment added and previous assignments ended"),n.invalidateQueries({queryKey:["officer-default-assignments",e.id]}),n.invalidateQueries({queryKey:["officer-schedules",e.id]}),n.invalidateQueries({queryKey:["weekly-schedule"]}),n.invalidateQueries({queryKey:["daily-schedule"]}),Ye()},onError:ue=>{ge.error(ue.message||"Failed to add default assignment")}}),Oe=Xt({mutationFn:async({assignmentId:ue,updates:Ke})=>{const{error:Qe}=await se.from("officer_default_assignments").update(Ke).eq("id",ue);if(Qe)throw Qe},onSuccess:()=>{ge.success("Default assignment updated successfully"),n.invalidateQueries({queryKey:["officer-default-assignments",e.id]}),Y(null),Ye()},onError:ue=>{ge.error(ue.message||"Failed to update default assignment")}}),pe=Xt({mutationFn:async ue=>{const{error:Ke}=await se.from("officer_default_assignments").delete().eq("id",ue);if(Ke)throw Ke},onSuccess:()=>{ge.success("Default assignment removed"),n.invalidateQueries({queryKey:["officer-default-assignments",e.id]}),ne(null)},onError:ue=>{ge.error(ue.message||"Failed to remove default assignment"),ne(null)}}),je=()=>{if(o.length===0){ge.error("Please select at least one day");return}if(!m){ge.error("Please select a shift");return}if(u&&u<c){ge.error("End date cannot be before start date");return}we.mutate({days:o,shiftId:m,start:Pe(c,"yyyy-MM-dd"),end:u?Pe(u,"yyyy-MM-dd"):void 0,unitNumber:x||void 0,assignedPosition:v!=="none"?v:void 0})},_e=ue=>{M(ue),l([ue.day_of_week]),f(ue.shift_type_id),d(new Date(ue.start_date)),h(ue.end_date?new Date(ue.end_date):void 0),p(ue.unit_number||""),b(ue.position_name||"none")},W=()=>{if(!P)return;if(!m){ge.error("Please select a shift");return}if(o.length===0){ge.error("Please select at least one day");return}const Ke={day_of_week:o[0],shift_type_id:m,start_date:Pe(c,"yyyy-MM-dd"),end_date:u?Pe(u,"yyyy-MM-dd"):null,unit_number:x||null,position_name:v!=="none"?v:null};Te.mutate({scheduleId:P.id,updates:Ke})},te=()=>{const ue=(le==null?void 0:le.filter(Qe=>!Qe.end_date||new Date(Qe.end_date)>=new Date))||[],Ke=Pe(new Date,"yyyy-MM-dd");ue.forEach(Qe=>{ae.mutate({scheduleId:Qe.id,endDate:Ke})})},Z=()=>{((le==null?void 0:le.filter(Ke=>!Ke.end_date||new Date(Ke.end_date)>=new Date))||[]).length>0&&y("all")},me=ue=>{y(ue)},$=()=>{if(!U&&C==="none"){ge.error("Please provide at least a unit number or position");return}const ue=C==="Other (Custom)"?X:C;if(C==="Other (Custom)"&&!X.trim()){ge.error("Please enter a custom position");return}H.mutate({unitNumber:U||void 0,assignedPosition:ue!=="none"?ue:void 0,start:Pe(k,"yyyy-MM-dd"),end:A?Pe(A,"yyyy-MM-dd"):void 0})},ke=ue=>{Y(ue),R(ue.unit_number||"");const Ke=ue.position_name;Ke&&os.includes(Ke)?(F(Ke),re("")):Ke?(F("Other (Custom)"),re(Ke)):(F("none"),re("")),E(new Date(ue.start_date)),q(ue.end_date?new Date(ue.end_date):void 0)},ce=()=>{if(!z)return;if(!U&&C==="none"){ge.error("Please provide at least a unit number or position");return}const ue=C==="Other (Custom)"?X:C;if(C==="Other (Custom)"&&!X.trim()){ge.error("Please enter a custom position");return}const Ke={unit_number:U||null,position_name:ue!=="none"?ue:null,start_date:Pe(k,"yyyy-MM-dd"),end_date:A?Pe(A,"yyyy-MM-dd"):null};Oe.mutate({assignmentId:z.id,updates:Ke})},Ie=ue=>{ne(ue)},Fe=()=>{J&&pe.mutate(J)},Le=()=>{g==="all"?((le==null?void 0:le.filter(Ke=>!Ke.end_date||new Date(Ke.end_date)>=new Date))||[]).forEach(Ke=>{K.mutate(Ke.id)}):g&&K.mutate(g),y(null)},Ue=()=>{y(null)},Ve=ue=>{l(P?[ue]:Ke=>Ke.includes(ue)?Ke.filter(Qe=>Qe!==ue):[...Ke,ue])},rt=()=>{a(!1),l([]),f(""),d(new Date),h(void 0),p(""),b("none"),M(null)},Ye=()=>{T(!1),R(""),F("none"),re(""),E(new Date),q(void 0),Y(null)},We=!!P,it=(le==null?void 0:le.filter(ue=>!ue.end_date||new Date(ue.end_date)>=new Date))||[],ft=(he==null?void 0:he.filter(ue=>!ue.end_date||new Date(ue.end_date)>=new Date))||[];return s.jsxs(s.Fragment,{children:[s.jsx(rn,{open:t,onOpenChange:r,children:s.jsxs(Vr,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Manage Officer Schedule & Assignments"}),s.jsxs(as,{children:[e.full_name,"'s recurring work schedules and default assignments"]})]}),s.jsxs(fl,{value:I,onValueChange:O,className:"w-full",children:[s.jsxs(sa,{className:"grid w-full grid-cols-2",children:[s.jsx(er,{value:"schedules",children:"Work Schedules"}),s.jsx(er,{value:"assignments",children:"Default Assignments"})]}),s.jsxs(Un,{value:"schedules",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Regular Schedules"]}),G?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading schedules..."}):!le||le.length===0?s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No regular schedule set"}):s.jsxs("div",{className:"space-y-4",children:[it.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:"Active Schedules"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs(Ne,{variant:"outline",size:"sm",onClick:te,disabled:ae.isPending,className:"flex items-center gap-2",children:[s.jsx(X9,{className:"h-4 w-4"}),"End Schedule"]}),s.jsxs(Ne,{variant:"outline",size:"sm",onClick:Z,disabled:K.isPending,className:"flex items-center gap-2 text-destructive",children:[s.jsx(es,{className:"h-4 w-4"}),"Delete Schedule"]})]}),it.map(ue=>{var Ke,Qe,ht,Dt;return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Re,{variant:"outline",children:(Ke=qv.find(yt=>yt.value===ue.day_of_week))==null?void 0:Ke.label}),s.jsx("span",{className:"font-medium",children:(Qe=ue.shift_types)==null?void 0:Qe.name})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(ht=ue.shift_types)==null?void 0:ht.start_time," - ",(Dt=ue.shift_types)==null?void 0:Dt.end_time]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Pe(new Date(ue.start_date),"MMM d, yyyy"),ue.end_date&&` - ${Pe(new Date(ue.end_date),"MMM d, yyyy")}`,!ue.end_date&&" - Ongoing"]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ue.unit_number&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(bi,{className:"h-3 w-3 mr-1"}),ue.unit_number]}),ue.position_name&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(Vl,{className:"h-3 w-3 mr-1"}),ue.position_name]}),!ue.unit_number&&!ue.position_name&&s.jsx("span",{className:"text-xs text-muted-foreground italic",children:"No assignment details"})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>_e(ue),title:"Edit this schedule",children:s.jsx(Qo,{className:"h-4 w-4"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>me(ue.id),disabled:K.isPending,title:"Delete this schedule",children:s.jsx(es,{className:"h-4 w-4 text-destructive"})})]})]},ue.id)})]}),le.filter(ue=>ue.end_date&&new Date(ue.end_date)<new Date).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Ended Schedules"}),le.filter(ue=>ue.end_date&&new Date(ue.end_date)<new Date).map(ue=>{var Ke,Qe,ht,Dt;return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg opacity-60 bg-muted/50",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Re,{variant:"secondary",children:(Ke=qv.find(yt=>yt.value===ue.day_of_week))==null?void 0:Ke.label}),s.jsx("span",{className:"font-medium",children:(Qe=ue.shift_types)==null?void 0:Qe.name}),s.jsx(Re,{variant:"secondary",className:"text-xs",children:"Ended"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(ht=ue.shift_types)==null?void 0:ht.start_time," - ",(Dt=ue.shift_types)==null?void 0:Dt.end_time]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Pe(new Date(ue.start_date),"MMM d, yyyy"),ue.end_date&&` - ${Pe(new Date(ue.end_date),"MMM d, yyyy")}`]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ue.unit_number&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(bi,{className:"h-3 w-3 mr-1"}),ue.unit_number]}),ue.position_name&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(Vl,{className:"h-3 w-3 mr-1"}),ue.position_name]})]})]}),s.jsx("div",{className:"flex gap-1",children:s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>me(ue.id),disabled:K.isPending,title:"Delete this schedule",children:s.jsx(es,{className:"h-4 w-4 text-destructive"})})})]},ue.id)})]})]})]}),We&&s.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-blue-50/30",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Qo,{className:"h-4 w-4"}),"Edit Schedule"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Day of Week"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:qv.map(ue=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:`edit-day-${ue.value}`,checked:o.includes(ue.value),onCheckedChange:()=>Ve(ue.value)}),s.jsx(Ce,{htmlFor:`edit-day-${ue.value}`,className:"text-sm font-normal cursor-pointer",children:ue.label})]},ue.value))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Select one day for this schedule entry"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shift"}),s.jsxs(Wt,{value:m,onValueChange:f,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:Se==null?void 0:Se.map(ue=>s.jsxs(ct,{value:ue.id,children:[ue.name," (",ue.start_time," - ",ue.end_time,")"]},ue.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Date *"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),c?Pe(c,"PPP"):"Select date"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:c,onSelect:ue=>ue&&d(ue),initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Date (Optional)"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!u&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),u?Pe(u,"PPP"):"Ongoing"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:u,onSelect:h,initialFocus:!0,disabled:ue=>ue<c,className:"pointer-events-auto"})})]}),u&&s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>h(void 0),className:"w-full",children:"Clear End Date"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{variant:"outline",onClick:()=>M(null),children:"Cancel"}),s.jsx(Ne,{onClick:W,disabled:Te.isPending,children:Te.isPending?"Saving...":"Save Changes"})]})]}),!i&&!We?s.jsxs(Ne,{variant:"outline",className:"w-full",onClick:()=>a(!0),children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Add New Work Schedule"]}):(i||We)&&s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsx("h3",{className:"font-medium",children:We?"Edit Schedule":"Create Work Schedule"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Work Days (Select Multiple)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:qv.map(ue=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:`day-${ue.value}`,checked:o.includes(ue.value),onCheckedChange:()=>Ve(ue.value)}),s.jsx(Ce,{htmlFor:`day-${ue.value}`,className:"text-sm font-normal cursor-pointer",children:ue.label})]},ue.value))}),We&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Note: When editing, you can only select one day for this schedule entry"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shift"}),s.jsxs(Wt,{value:m,onValueChange:f,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:Se==null?void 0:Se.map(ue=>s.jsxs(ct,{value:ue.id,children:[ue.name," (",ue.start_time," - ",ue.end_time,")"]},ue.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Date *"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),c?Pe(c,"PPP"):"Select date"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:c,onSelect:ue=>ue&&d(ue),initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Date (Optional)"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!u&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),u?Pe(u,"PPP"):"Ongoing"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:u,onSelect:h,initialFocus:!0,disabled:ue=>ue<c,className:"pointer-events-auto"})})]}),u&&s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>h(void 0),className:"w-full",children:"Clear End Date"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{variant:"outline",onClick:rt,children:"Cancel"}),s.jsx(Ne,{onClick:We?W:je,disabled:We?Te.isPending:we.isPending,children:We?Te.isPending?"Saving...":"Save Changes":we.isPending?"Creating...":"Create Schedule"})]})]})]}),s.jsxs(Un,{value:"assignments",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(cj,{className:"h-4 w-4"}),"Default Assignments"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Set default unit numbers and positions for specific time periods. These will be used when no specific assignment is set on individual schedules."}),xe?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading assignments..."}):!he||he.length===0?s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No default assignments set"}):s.jsxs("div",{className:"space-y-4",children:[ft.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:"Active Assignments"}),ft.map(ue=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ue.unit_number&&s.jsxs(Re,{variant:"outline",className:"text-xs",children:[s.jsx(bi,{className:"h-3 w-3 mr-1"}),ue.unit_number]}),ue.position_name&&s.jsxs(Re,{variant:"outline",className:"text-xs",children:[s.jsx(Vl,{className:"h-3 w-3 mr-1"}),ue.position_name]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Pe(new Date(ue.start_date),"MMM d, yyyy"),ue.end_date&&` - ${Pe(new Date(ue.end_date),"MMM d, yyyy")}`,!ue.end_date&&" - Ongoing"]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>ke(ue),title:"Edit this assignment",children:s.jsx(Qo,{className:"h-4 w-4"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>Ie(ue.id),disabled:pe.isPending,title:"Delete this assignment",children:s.jsx(es,{className:"h-4 w-4 text-destructive"})})]})]},ue.id))]}),he.filter(ue=>ue.end_date&&new Date(ue.end_date)<new Date).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Ended Assignments"}),he.filter(ue=>ue.end_date&&new Date(ue.end_date)<new Date).map(ue=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg opacity-60 bg-muted/50",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ue.unit_number&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(bi,{className:"h-3 w-3 mr-1"}),ue.unit_number]}),ue.position_name&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(Vl,{className:"h-3 w-3 mr-1"}),ue.position_name]}),s.jsx(Re,{variant:"secondary",className:"text-xs",children:"Ended"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Pe(new Date(ue.start_date),"MMM d, yyyy"),ue.end_date&&` - ${Pe(new Date(ue.end_date),"MMM d, yyyy")}`]})]}),s.jsx("div",{className:"flex gap-1",children:s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>Ie(ue.id),disabled:pe.isPending,title:"Delete this assignment",children:s.jsx(es,{className:"h-4 w-4 text-destructive"})})})]},ue.id))]})]})]}),z&&s.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-blue-50/30",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Qo,{className:"h-4 w-4"}),"Edit Default Assignment"]}),s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-white",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[s.jsx(Vl,{className:"h-4 w-4"}),"Assignment Details"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{htmlFor:"edit-default-unit",className:"flex items-center gap-1",children:[s.jsx(bi,{className:"h-3 w-3"}),"Unit Number"]}),s.jsx(St,{id:"edit-default-unit",placeholder:"e.g., Unit 1, Patrol, Traffic",value:U,onChange:ue=>R(ue.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"edit-default-position",children:"Assigned Position"}),s.jsxs(Wt,{value:C,onValueChange:F,children:[s.jsx(Bt,{id:"edit-default-position",children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"none",children:"No position assigned"}),os.map(ue=>s.jsx(ct,{value:ue,children:ue},ue))]})]})]})]}),C==="Other (Custom)"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"edit-custom-position",children:"Custom Position"}),s.jsx(St,{id:"edit-custom-position",placeholder:"Enter custom position...",value:X,onChange:ue=>re(ue.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Date *"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!k&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),k?Pe(k,"PPP"):"Select date"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:k,onSelect:ue=>ue&&E(ue),initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Date (Optional)"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!A&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),A?Pe(A,"PPP"):"Ongoing"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:A,onSelect:q,initialFocus:!0,disabled:ue=>ue<k,className:"pointer-events-auto"})})]}),A&&s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>q(void 0),className:"w-full",children:"Clear End Date"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{variant:"outline",onClick:()=>Y(null),children:"Cancel"}),s.jsx(Ne,{onClick:ce,disabled:Oe.isPending,children:Oe.isPending?"Saving...":"Save Changes"})]})]}),!L&&!z?s.jsxs(Ne,{variant:"outline",className:"w-full",onClick:()=>T(!0),children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Add New Default Assignment"]}):L&&s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Create Default Assignment"}),s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-white",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[s.jsx(Vl,{className:"h-4 w-4"}),"Assignment Details"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{htmlFor:"default-unit",className:"flex items-center gap-1",children:[s.jsx(bi,{className:"h-3 w-3"}),"Unit Number"]}),s.jsx(St,{id:"default-unit",placeholder:"e.g., Unit 1, Patrol, Traffic",value:U,onChange:ue=>R(ue.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"default-position",children:"Assigned Position"}),s.jsxs(Wt,{value:C,onValueChange:F,children:[s.jsx(Bt,{id:"default-position",children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"none",children:"No position assigned"}),os.map(ue=>s.jsx(ct,{value:ue,children:ue},ue))]})]})]})]}),C==="Other (Custom)"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"custom-position",children:"Custom Position"}),s.jsx(St,{id:"custom-position",placeholder:"Enter custom position...",value:X,onChange:ue=>re(ue.target.value)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Provide at least a unit number or position"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Date *"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!k&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),k?Pe(k,"PPP"):"Select date"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:k,onSelect:ue=>ue&&E(ue),initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Date (Optional)"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!A&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),A?Pe(A,"PPP"):"Ongoing"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:A,onSelect:q,initialFocus:!0,disabled:ue=>ue<k,className:"pointer-events-auto"})})]}),A&&s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>q(void 0),className:"w-full",children:"Clear End Date"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* Leave end date empty for ongoing assignments"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{variant:"outline",onClick:Ye,children:"Cancel"}),s.jsx(Ne,{onClick:$,disabled:H.isPending,children:H.isPending?"Creating...":"Create Assignment"})]})]})]})]})]})}),s.jsx(zC,{open:!!g,onOpenChange:ue=>!ue&&y(null),children:s.jsxs(H2,{children:[s.jsxs(W2,{children:[s.jsx(Y2,{children:"Confirm Deletion"}),s.jsx(K2,{children:g==="all"?"Warning, you are deleting ALL active schedules which includes their history. This action cannot be undone.":"Warning, you are deleting the schedule which includes the history. This action cannot be undone."})]}),s.jsxs(V2,{children:[s.jsx(J2,{onClick:Ue,children:"Cancel"}),s.jsxs(G2,{onClick:Le,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Delete Schedule",g==="all"?"s":""]})]})]})}),s.jsx(zC,{open:!!J,onOpenChange:ue=>!ue&&ne(null),children:s.jsxs(H2,{children:[s.jsxs(W2,{children:[s.jsx(Y2,{children:"Confirm Deletion"}),s.jsx(K2,{children:"Are you sure you want to delete this default assignment? This action cannot be undone."})]}),s.jsxs(V2,{children:[s.jsx(J2,{onClick:()=>ne(null),children:"Cancel"}),s.jsx(G2,{onClick:Fe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Assignment"})]})]})})]})},HC=[{value:"vacation",label:"Vacation",column:"vacation_hours"},{value:"holiday",label:"Holiday",column:"holiday_hours"},{value:"sick",label:"Sick",column:"sick_hours"},{value:"comp",label:"Comp",column:"comp_hours"}],ER=({open:e,onOpenChange:t,officer:r})=>{const n=Lr(),[i,a]=w.useState("vacation"),[o,l]=w.useState(),[c,d]=w.useState(),[u,h]=w.useState(!0),[m,f]=w.useState([]),[g,y]=w.useState(!0),[x,p]=w.useState(""),[v,b]=w.useState(""),[j,S]=w.useState(!1),[P,M]=w.useState(0),[I,O]=w.useState([]),{data:L}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:A,error:q}=await se.from("shift_types").select("*").order("start_time");if(q)throw q;return A}});w.useEffect(()=>{e&&r&&(a("vacation"),l(void 0),d(void 0),h(!0),f([]),y(!0),p(""),b(""),M(0),O([]))},[e,r]),w.useEffect(()=>{o&&c&&m.length>0&&L?T():(M(0),O([]))},[o,c,u,m,g,x,v]);const T=async()=>{if(!(!o||!c||m.length===0||!L)){S(!0);try{const A=qa({start:o,end:c}),q=u?A.filter(F=>!ZP(F)):A,U=[];let R=0;const{data:C}=await se.from("recurring_schedules").select("day_of_week, shift_type_id").eq("officer_id",r.id).or(`end_date.is.null,end_date.gte.${Pe(o,"yyyy-MM-dd")}`);for(const F of q){const X=F.getDay(),re=Pe(F,"yyyy-MM-dd"),Y=((C==null?void 0:C.filter(J=>J.day_of_week===X))||[]).filter(J=>m.includes(J.shift_type_id));for(const J of Y){const ne=L.find(le=>le.id===J.shift_type_id);if(ne){if(U.push(`${re} - ${ne.name}`),g){const le=k(ne.start_time,ne.end_time);R+=le}else if(x&&v){const le=k(x,v);R+=le}}}}O(U),M(R)}catch(A){console.error("Error calculating PTO hours:",A)}finally{S(!1)}}},k=(A,q)=>{const[U,R]=A.split(":").map(Number),[C,F]=q.split(":").map(Number),X=U*60+R;return(C*60+F-X)/60},E=Xt({mutationFn:async()=>{var z;if(!r||!o||!c||m.length===0||!L)throw new Error("Please fill in all required fields");const{data:A,error:q}=await se.from("profiles").select("*").eq("id",r.id).single();if(q)throw q;const U=(z=HC.find(Y=>Y.value===i))==null?void 0:z.column;if(!U)throw new Error("Invalid PTO type");const R=A[U];if(R<P)throw new Error(`Insufficient ${i} balance. Available: ${R} hours, Required: ${P.toFixed(1)} hours`);const C=qa({start:o,end:c}),F=u?C.filter(Y=>!ZP(Y)):C,{data:X}=await se.from("recurring_schedules").select("id, day_of_week, shift_type_id, position_name").eq("officer_id",r.id).or(`end_date.is.null,end_date.gte.${Pe(o,"yyyy-MM-dd")}`),re=[];for(const Y of F){const J=Y.getDay(),ne=Pe(Y,"yyyy-MM-dd"),G=((X==null?void 0:X.filter(he=>he.day_of_week===J))||[]).filter(he=>m.includes(he.shift_type_id));for(const he of G){const xe=L.find(Se=>Se.id===he.shift_type_id);if(xe){const Se=g?xe.start_time:x,K=g?xe.end_time:v;if(re.push({officer_id:r.id,date:ne,shift_type_id:he.shift_type_id,is_off:!0,reason:i,custom_start_time:g?null:Se,custom_end_time:g?null:K}),!g){const we=K,Te=xe.end_time;we!==Te&&re.push({officer_id:r.id,date:ne,shift_type_id:he.shift_type_id,is_off:!1,position_name:he.position_name,custom_start_time:we,custom_end_time:Te})}}}}if(re.length>0){const{error:Y}=await se.from("schedule_exceptions").insert(re);if(Y)throw Y;const{error:J}=await se.from("profiles").update({[U]:R-P}).eq("id",r.id);if(J)throw J}return re.length},onSuccess:A=>{ge.success(`PTO assigned successfully for ${A} shift(s)`),n.invalidateQueries({queryKey:["all-officers"]}),n.invalidateQueries({queryKey:["daily-schedule"]}),n.invalidateQueries({queryKey:["weekly-schedule"]}),t(!1)},onError:A=>{ge.error(A.message||"Failed to assign PTO")}});return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Assign Bulk PTO"}),s.jsxs(as,{children:["Assign PTO for ",r==null?void 0:r.full_name," across multiple days and shifts"]})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO Type"}),s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{children:HC.map(A=>s.jsx(ct,{value:A.value,children:A.label},A.value))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ce,{children:"Date Range"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Start Date"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),o?Pe(o,"PPP"):"Select start date"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:o,onSelect:l,initialFocus:!0,disabled:A=>A<new Date})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"End Date"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),c?Pe(c,"PPP"):"Select end date"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{mode:"single",selected:c,onSelect:d,initialFocus:!0,disabled:A=>A<(o||new Date)})})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"excludeWeekends",checked:u,onCheckedChange:A=>h(A===!0)}),s.jsx(Ce,{htmlFor:"excludeWeekends",className:"cursor-pointer text-sm",children:"Exclude weekends"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shifts"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:L==null?void 0:L.map(A=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:`shift-${A.id}`,checked:m.includes(A.id),onCheckedChange:q=>{f(q?[...m,A.id]:m.filter(U=>U!==A.id))}}),s.jsxs(Ce,{htmlFor:`shift-${A.id}`,className:"cursor-pointer text-sm",children:[A.name," (",A.start_time," - ",A.end_time,")"]})]},A.id))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"fullShift",checked:g,onCheckedChange:A=>{y(A===!0),A&&(p(""),b(""))}}),s.jsx(Ce,{htmlFor:"fullShift",className:"cursor-pointer",children:"Full shift"})]}),!g&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO Start Time"}),s.jsx(St,{type:"time",value:x,onChange:A=>p(A.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO End Time"}),s.jsx(St,{type:"time",value:v,onChange:A=>b(A.target.value)})]})]})]}),I.length>0&&s.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/30",children:[s.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(pr,{className:"h-4 w-4"}),"PTO Summary"]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Total Hours:"})," ",P.toFixed(1)," hours"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Affected Shifts:"})," ",I.length]}),s.jsxs("div",{className:"mt-2 max-h-32 overflow-y-auto",children:[s.jsx("p",{className:"font-medium mb-1",children:"Affected Days:"}),I.map((A,q)=>s.jsx("p",{className:"text-xs text-muted-foreground",children:A},q))]})]})]})]}),s.jsxs(a0,{children:[s.jsx(Ne,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(Ne,{onClick:()=>E.mutate(),disabled:!i||!o||!c||m.length===0||P===0||E.isPending||j,children:E.isPending?"Assigning...":"Assign PTO"})]})]})})},k5=w.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:$e("w-full caption-bottom text-sm",e),...t})}));k5.displayName="Table";const C5=w.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:$e("[&_tr]:border-b",e),...t}));C5.displayName="TableHeader";const T5=w.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:$e("[&_tr:last-child]:border-0",e),...t}));T5.displayName="TableBody";const One=w.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:$e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));One.displayName="TableFooter";const Sd=w.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:$e("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Sd.displayName="TableRow";const Aa=w.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:$e("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Aa.displayName="TableHead";const xi=w.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:$e("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));xi.displayName="TableCell";const Ene=w.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:$e("mt-4 text-sm text-muted-foreground",e),...t}));Ene.displayName="TableCaption";const Ane=()=>{var _e,W,te,Z,me;const[e,t]=w.useState(""),[r,n]=w.useState({from:jn(new Date,{weekStartsOn:0}),to:tu(new Date,{weekStartsOn:6})}),[i,a]=w.useState("all"),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1),[m,f]=w.useState(""),[g,y]=w.useState(""),[x,p]=w.useState("all"),[v,b]=w.useState("one-time"),[j,S]=w.useState([]),[P,M]=w.useState(Pe(new Date,"yyyy-MM-dd")),[I,O]=w.useState(""),[L,T]=w.useState(""),[k,E]=w.useState(""),[A,q]=w.useState([]),U=Lr(),R=[{id:0,label:"Sunday",short:"Sun"},{id:1,label:"Monday",short:"Mon"},{id:2,label:"Tuesday",short:"Tue"},{id:3,label:"Wednesday",short:"Wed"},{id:4,label:"Thursday",short:"Thu"},{id:5,label:"Friday",short:"Fri"},{id:6,label:"Saturday",short:"Sat"}],C=$=>{if(!$||!$.rank)return!1;const ke=$.rank.toLowerCase();return ke==="probationary"||ke.includes("probationary")||ke.includes("ppo")},F=($,ke)=>{const ce=[];let Ie=new Date($);const Fe=new Date(ke);for(;Ie<=Fe;)ce.push(Pe(Ie,"yyyy-MM-dd")),Ie=lr(Ie,1);return ce},{data:X,isLoading:re,refetch:z}=bt({queryKey:["all-partnerships-range",r,i,x],queryFn:async()=>{const $=F(r.from,r.to);console.log(" Fetching partnerships for date range:",{from:Pe(r.from,"yyyy-MM-dd"),to:Pe(r.to,"yyyy-MM-dd"),days:$.length,shift:i,mode:x});const{data:ke,error:ce}=await se.from("recurring_schedules").select(`
          id,
          officer_id,
          partner_officer_id,
          day_of_week,
          start_date,
          end_date,
          shift_type_id,
          is_partnership,
          profiles:profiles!recurring_schedules_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank
          ),
          partner_profile:profiles!recurring_schedules_partner_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank
          ),
          shift_types (
            id,
            name,
            start_time,
            end_time
          )
        `).eq("is_partnership",!0).not("partner_officer_id","is",null);if(ce)throw console.error("Error fetching recurring partnerships:",ce),ce;const Ie=$.map(Ye=>se.from("schedule_exceptions").select(`
            id,
            officer_id,
            partner_officer_id,
            date,
            shift_type_id,
            is_partnership,
            partnership_suspended,
            partnership_suspension_reason,
            profiles:profiles!schedule_exceptions_officer_id_fkey (
              id,
              full_name,
              badge_number,
              rank
            ),
            partner_profile:profiles!schedule_exceptions_partner_officer_id_fkey (
              id,
              full_name,
              badge_number,
              rank
            ),
            shift_types (
              id,
              name,
              start_time,
              end_time
            )
          `).eq("is_partnership",!0).not("partner_officer_id","is",null).eq("date",Ye)),Le=(await Promise.all(Ie)).flatMap(Ye=>Ye.data||[]);console.log(" Partnerships found:",{recurring:(ke==null?void 0:ke.length)||0,exceptions:Le.length});const Ue=[];if(ke)for(const Ye of ke){if(!Ye.profiles||!Ye.partner_profile){console.log("Skipping recurring partnership with missing profile data:",Ye.id);continue}const We=[];for(const it of $){const ft=It(it),ue=It(Ye.start_date),Ke=Ye.end_date?It(Ye.end_date):null;ft<ue||Ke&&ft>Ke||Ye.day_of_week===ft.getDay()&&(i!=="all"&&Ye.shift_type_id!==i||We.push(it))}We.length>0&&Ue.push({id:Ye.id,type:"recurring",officer1:Ye.profiles,officer2:Ye.partner_profile,shift:Ye.shift_types,dates:We,dayOfWeek:Ye.day_of_week,startDate:Ye.start_date,endDate:Ye.end_date,isValid:!0,source:"recurring"})}for(const Ye of Le){if(!Ye.profiles||!Ye.partner_profile){console.log("Skipping exception partnership with missing profile data:",Ye.id);continue}i!=="all"&&Ye.shift_type_id!==i||Ue.push({id:Ye.id,type:"exception",officer1:Ye.profiles,officer2:Ye.partner_profile,shift:Ye.shift_types,dates:[Ye.date],date:Ye.date,partnershipSuspended:Ye.partnership_suspended,partnershipSuspensionReason:Ye.partnership_suspension_reason,isValid:!0,source:"exception"})}console.log(" Processed partnerships:",Ue.length);const Ve=Ue.map(Ye=>{if(Ye.type==="recurring"){const We=Ue.find(it=>{var ft,ue;return it.type==="recurring"&&it.officer1.id===Ye.officer2.id&&it.officer2.id===Ye.officer1.id&&((ft=it.shift)==null?void 0:ft.id)===((ue=Ye.shift)==null?void 0:ue.id)&&it.dayOfWeek===Ye.dayOfWeek});return{...Ye,isValid:!!We}}else{const We=Ue.find(it=>{var ft,ue;return it.type==="exception"&&it.officer1.id===Ye.officer2.id&&it.officer2.id===Ye.officer1.id&&it.date===Ye.date&&((ft=it.shift)==null?void 0:ft.id)===((ue=Ye.shift)==null?void 0:ue.id)});return{...Ye,isValid:!!We}}});let rt=Ve;return x==="active"?rt=Ve.filter(Ye=>Ye.isValid&&!Ye.partnershipSuspended):x==="orphaned"&&(rt=Ve.filter(Ye=>!Ye.isValid)),rt.sort((Ye,We)=>{const it=Ye.dates[0]||"9999-12-31",ft=We.dates[0]||"9999-12-31";return it.localeCompare(ft)}),rt}}),{data:Y}=bt({queryKey:["regular-officers"],queryFn:async()=>{const{data:$}=await se.from("profiles").select("id, full_name, badge_number, rank").order("full_name");return($==null?void 0:$.filter(ke=>!C(ke)))||[]}}),{data:J}=bt({queryKey:["ppo-officers"],queryFn:async()=>{const{data:$}=await se.from("profiles").select("id, full_name, badge_number, rank").order("full_name");return($==null?void 0:$.filter(ke=>C(ke)))||[]}}),{data:ne}=bt({queryKey:["all-shifts"],queryFn:async()=>{const{data:$}=await se.from("shift_types").select("*").order("start_time");return $||[]}}),le=Xt({mutationFn:async({regularOfficerId:$,ppoOfficerId:ke,date:ce,shiftId:Ie,type:Fe,startDate:Le,endDate:Ue,daysOfWeek:Ve})=>{var rt;if(Fe==="one-time"){const Ye=await se.from("schedule_exceptions").select("*").eq("date",ce).eq("shift_type_id",Ie).or(`officer_id.eq.${$},officer_id.eq.${ke}`).eq("is_partnership",!0);if(Ye.data&&Ye.data.length>0)throw new Error("One or both officers are already in a partnership for this date and shift");const{error:We}=await se.from("schedule_exceptions").insert([{officer_id:$,partner_officer_id:ke,date:ce,shift_type_id:Ie,is_partnership:!0,is_off:!1,schedule_type:"manual_partnership"},{officer_id:ke,partner_officer_id:$,date:ce,shift_type_id:Ie,is_partnership:!0,is_off:!1,schedule_type:"manual_partnership"}]);if(We)throw We}else{if(!Ve||Ve.length===0)throw new Error("Please select at least one day of the week");if(!Le)throw new Error("Please select a start date");const Ye=Ve.map(Qe=>se.from("recurring_schedules").select("*").eq("officer_id",$).eq("partner_officer_id",ke).eq("shift_type_id",Ie).eq("day_of_week",Qe).eq("is_partnership",!0));if((await Promise.all(Ye)).some(Qe=>Qe.data&&Qe.data.length>0))throw new Error("A recurring partnership already exists for one or more selected days");const ft=Ve.map(Qe=>se.rpc("create_or_update_partnership",{p_regular_officer_id:$,p_ppo_officer_id:ke,p_shift_type_id:Ie,p_day_of_week:Qe,p_start_date:Le,p_end_date:Ue||null,p_is_partnership:!0})),Ke=(await Promise.all(ft)).filter(Qe=>Qe.error).map(Qe=>Qe.error);if(Ke.length>0)throw console.error("Errors creating recurring partnerships:",Ke),new Error(`Failed to create recurring partnerships: ${(rt=Ke[0])==null?void 0:rt.message}`)}},onSuccess:()=>{ge.success(`${v==="one-time"?"One-time":"Recurring"} partnership created successfully`),d(!1),Te(),U.invalidateQueries({queryKey:["all-partnerships-range"]}),U.invalidateQueries({queryKey:["daily-schedule"]})},onError:$=>{ge.error($.message||"Failed to create partnership")}}),G=Xt({mutationFn:async({partnershipId:$,startDate:ke,endDate:ce,daysOfWeek:Ie})=>{var Ye;const{data:Fe}=await se.from("recurring_schedules").select("*").eq("id",$).single();if(!Fe)throw new Error("Partnership not found");const{data:Le}=await se.from("recurring_schedules").select("id").eq("officer_id",Fe.partner_officer_id).eq("partner_officer_id",Fe.officer_id).eq("shift_type_id",Fe.shift_type_id).eq("day_of_week",Fe.day_of_week).single(),Ue=[se.from("recurring_schedules").update({start_date:ke,end_date:ce||null}).eq("id",$)];Le&&Ue.push(se.from("recurring_schedules").update({start_date:ke,end_date:ce||null}).eq("id",Le.id));const rt=(await Promise.all(Ue)).filter(We=>We.error).map(We=>We.error);if(rt.length>0)throw new Error(`Failed to update partnership: ${(Ye=rt[0])==null?void 0:Ye.message}`)},onSuccess:()=>{ge.success("Recurring partnership updated successfully"),h(!1),U.invalidateQueries({queryKey:["all-partnerships-range"]}),U.invalidateQueries({queryKey:["daily-schedule"]})},onError:$=>{ge.error($.message||"Failed to update partnership")}}),he=Xt({mutationFn:async $=>{var ke;if($.type==="recurring"){await se.from("recurring_schedules").update({partner_officer_id:null,is_partnership:!1}).eq("id",$.id);const{data:ce}=await se.from("recurring_schedules").select("id").eq("officer_id",$.officer2.id).eq("partner_officer_id",$.officer1.id).eq("day_of_week",$.dayOfWeek);ce&&ce.length>0&&await se.from("recurring_schedules").update({partner_officer_id:null,is_partnership:!1}).eq("id",ce[0].id)}else{const ce=(ke=$.shift)==null?void 0:ke.id;if(!ce)throw console.error("No shift type ID found for partnership:",$),new Error("Cannot remove partnership: missing shift information");for(const Ie of $.dates)await se.from("schedule_exceptions").delete().eq("officer_id",$.officer1.id).eq("partner_officer_id",$.officer2.id).eq("date",Ie).eq("shift_type_id",ce),await se.from("schedule_exceptions").delete().eq("officer_id",$.officer2.id).eq("partner_officer_id",$.officer1.id).eq("date",Ie).eq("shift_type_id",ce)}},onSuccess:()=>{ge.success("Partnership removed successfully"),U.invalidateQueries({queryKey:["all-partnerships-range"]}),U.invalidateQueries({queryKey:["daily-schedule"]})},onError:$=>{ge.error("Failed to remove partnership"),console.error($)}}),xe=async()=>{ge.info("Scanning for orphaned partnerships...");const $=(X==null?void 0:X.filter(ke=>!ke.isValid))||[];if($.length===0){ge.success("No orphaned partnerships found");return}for(const ke of $)try{await he.mutateAsync(ke)}catch(ce){console.error(`Failed to fix orphaned partnership ${ke.id}:`,ce)}ge.success(`Fixed ${$.length} orphaned partnership(s)`),z()},Se=$=>{const ke=Math.round((r.to.getTime()-r.from.getTime())/864e5);n($==="prev"?{from:po(r.from,ke+1),to:po(r.to,ke+1)}:{from:lr(r.from,ke+1),to:lr(r.to,ke+1)})},K=$=>{S(ke=>ke.includes($)?ke.filter(ce=>ce!==$):[...ke,$])},we=$=>{q(ke=>ke.includes($)?ke.filter(ce=>ce!==$):[...ke,$])},Te=()=>{f(""),y(""),b("one-time"),S([]),M(Pe(new Date,"yyyy-MM-dd")),O("")},ae=()=>{const $=Pe(r.from,"yyyy-MM-dd");if(!m||!g||!i||i==="all"){ge.error("Please select both officers and a shift");return}if(v==="one-time"&&!$){ge.error("Please select a date for one-time partnership");return}if(v==="recurring"){if(j.length===0){ge.error("Please select at least one day of the week for recurring partnership");return}if(!P){ge.error("Please select a start date for recurring partnership");return}}le.mutate({regularOfficerId:m,ppoOfficerId:g,date:v==="one-time"?$:void 0,shiftId:i,type:v,startDate:v==="recurring"?P:void 0,endDate:v==="recurring"&&I||void 0,daysOfWeek:v==="recurring"?j:void 0})},H=$=>{if($.type!=="recurring"){ge.error("Only recurring partnerships can be edited");return}l($),T($.startDate),E($.endDate||""),q([$.dayOfWeek]),h(!0)},Oe=()=>{if(o){if(A.length===0){ge.error("Please select at least one day of the week");return}if(!L){ge.error("Please select a start date");return}G.mutate({partnershipId:o.id,startDate:L,endDate:k||void 0,daysOfWeek:A})}},pe=()=>{const $=Pe(r.from,"MMM d, yyyy"),ke=Pe(r.to,"MMM d, yyyy");return $===ke?$:`${$} - ${ke}`},je=$=>$.map(ce=>{var Ie;return(Ie=R.find(Fe=>Fe.id===ce))==null?void 0:Ie.short}).join(", ");return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Partnership Management"]}),s.jsx(en,{children:"View and manage officer partnerships within a date range"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ce,{children:"Date Range"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ne,{variant:"outline",size:"icon",onClick:()=>Se("prev"),children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),r!=null&&r.from?r.to?pe():Pe(r.from,"MMM d, yyyy"):s.jsx("span",{children:"Pick a date range"})]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{initialFocus:!0,mode:"range",defaultMonth:r.from,selected:r,onSelect:$=>{$!=null&&$.from&&$.to&&n({from:$.from,to:$.to})},numberOfMonths:2})})]}),s.jsx(Ne,{variant:"outline",size:"icon",onClick:()=>Se("next"),children:s.jsx(Ri,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"filter-shift",children:"Shift"}),s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"all",children:"All Shifts"}),ne==null?void 0:ne.map($=>s.jsxs(ct,{value:$.id,children:[$.name," (",$.start_time," - ",$.end_time,")"]},$.id))]})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"View Mode"}),s.jsxs(Wt,{value:x,onValueChange:$=>p($),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"View mode"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"all",children:"All Partnerships"}),s.jsx(ct,{value:"active",children:"Active Only"}),s.jsx(ct,{value:"orphaned",children:"Orphaned Only"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Ce,{htmlFor:"search",children:"Search"}),s.jsx(St,{id:"search",placeholder:"Search officers by name or badge number...",value:e,onChange:$=>t($.target.value),className:"w-full"})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs(Ne,{onClick:()=>z(),variant:"outline",className:"flex-1",children:[s.jsx(mh,{className:"h-4 w-4 mr-2"}),"Refresh"]}),s.jsxs(rn,{open:c,onOpenChange:d,children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{className:"flex-1",onClick:()=>Te(),children:[s.jsx(mO,{className:"h-4 w-4 mr-2"}),"Create Partnership"]})}),s.jsxs(Vr,{className:"max-w-2xl",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Create New Partnership"}),s.jsx(as,{children:"Pair a regular officer with a Probationary officer"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{children:"Partnership Type"}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"one-time",checked:v==="one-time",onCheckedChange:()=>b("one-time")}),s.jsx(Ce,{htmlFor:"one-time",className:"cursor-pointer",children:"One-time (Single Date)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"recurring",checked:v==="recurring",onCheckedChange:()=>b("recurring")}),s.jsx(Ce,{htmlFor:"recurring",className:"cursor-pointer",children:"Recurring (Weekly Schedule)"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"Regular Officer"}),s.jsxs(Wt,{value:m,onValueChange:f,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select regular officer"})}),s.jsx(qt,{children:Y==null?void 0:Y.map($=>s.jsxs(ct,{value:$.id,children:[$.full_name," (",$.badge_number,") - ",$.rank]},$.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"Probationary Officer (PPO)"}),s.jsxs(Wt,{value:g,onValueChange:y,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select PPO"})}),s.jsx(qt,{children:J==null?void 0:J.map($=>s.jsxs(ct,{value:$.id,children:[$.full_name," (",$.badge_number,") - ",$.rank]},$.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"Shift"}),s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:ne==null?void 0:ne.map($=>s.jsxs(ct,{value:$.id,children:[$.name," (",$.start_time," - ",$.end_time,")"]},$.id))})]})]}),v==="one-time"?s.jsxs("div",{children:[s.jsx(Ce,{children:"Date"}),s.jsx(St,{type:"date",value:Pe(r.from,"yyyy-MM-dd"),onChange:$=>{const ke=new Date($.target.value);n({from:ke,to:ke})}}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Currently viewing ",pe()]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ce,{children:"Days of Week"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:R.map($=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(on,{id:`day-${$.id}`,checked:j.includes($.id),onCheckedChange:()=>K($.id)}),s.jsx(Ce,{htmlFor:`day-${$.id}`,className:"cursor-pointer text-sm",children:$.short})]},$.id))}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Selected: ",je(j)||"None"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{children:"Start Date"}),s.jsx(St,{type:"date",value:P,onChange:$=>M($.target.value),min:Pe(new Date,"yyyy-MM-dd")})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"End Date (Optional)"}),s.jsx(St,{type:"date",value:I,onChange:$=>O($.target.value),min:P,placeholder:"Ongoing if empty"})]})]}),s.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(I1,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Recurring Schedule Summary:"})]}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:j.length>0&&P?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["Every: ",je(j)]}),s.jsxs("p",{children:["From: ",P]}),s.jsxs("p",{children:["Until: ",I||"Ongoing"]})]}):s.jsx("p",{children:"Complete the form to see schedule summary"})})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",onClick:()=>{d(!1),Te()},children:"Cancel"}),s.jsx(Ne,{onClick:ae,disabled:le.isPending,children:le.isPending?"Creating...":"Create Partnership"})]})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(pt,{children:s.jsxs(gt,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold",children:(X==null?void 0:X.length)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Partnerships"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:pe()})]})}),s.jsx(pt,{children:s.jsxs(gt,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(X==null?void 0:X.filter($=>$.isValid&&!$.partnershipSuspended).length)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active & Valid"})]})}),s.jsx(pt,{children:s.jsxs(gt,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold text-amber-600",children:(X==null?void 0:X.filter($=>$.partnershipSuspended).length)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Suspended"})]})}),s.jsx(pt,{children:s.jsxs(gt,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:(X==null?void 0:X.filter($=>!$.isValid).length)||0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Orphaned"}),(X==null?void 0:X.filter($=>!$.isValid).length)>0&&s.jsx(Ne,{size:"sm",variant:"outline",className:"mt-2",onClick:xe,children:"Fix Orphaned"})]})})]}),s.jsxs("div",{className:"border rounded-lg",children:[s.jsx("div",{className:"p-4 border-b bg-muted/50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold",children:["Partnerships (",(X==null?void 0:X.length)||0,")"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",pe()]})]})}),s.jsxs(k5,{children:[s.jsx(C5,{children:s.jsxs(Sd,{children:[s.jsx(Aa,{children:"Officers"}),s.jsx(Aa,{children:"Shift"}),s.jsx(Aa,{children:"Schedule"}),s.jsx(Aa,{children:"Type"}),s.jsx(Aa,{children:"Status"}),s.jsx(Aa,{children:"Actions"})]})}),s.jsx(T5,{children:re?s.jsx(Sd,{children:s.jsx(xi,{colSpan:6,className:"text-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(mh,{className:"h-6 w-6 animate-spin"}),s.jsx("p",{children:"Loading partnerships..."})]})})}):(X==null?void 0:X.length)===0?s.jsx(Sd,{children:s.jsx(xi,{colSpan:6,className:"text-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(jr,{className:"h-8 w-8 text-muted-foreground"}),s.jsx("p",{children:"No partnerships found for selected criteria"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Date Range: ",pe(),i!=="all"&&`  Shift: ${(_e=ne==null?void 0:ne.find($=>$.id===i))==null?void 0:_e.name}`]})]})})}):X==null?void 0:X.filter($=>{if(!e)return!0;const ke=e.toLowerCase();return $.officer1.full_name.toLowerCase().includes(ke)||$.officer2.full_name.toLowerCase().includes(ke)||$.officer1.badge_number.toLowerCase().includes(ke)||$.officer2.badge_number.toLowerCase().includes(ke)}).map($=>{var ke;return s.jsxs(Sd,{children:[s.jsx(xi,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:$.officer1.full_name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.officer1.badge_number,"  ",$.officer1.rank]}),C($.officer1)&&s.jsx(Re,{variant:"outline",className:"mt-1 bg-yellow-100 text-yellow-800",children:"PPO"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx("div",{className:"h-px flex-1 bg-border"}),s.jsx(jr,{className:"h-3 w-3"}),s.jsx("div",{className:"h-px flex-1 bg-border"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:$.officer2.full_name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.officer2.badge_number,"  ",$.officer2.rank]}),C($.officer2)&&s.jsx(Re,{variant:"outline",className:"mt-1 bg-yellow-100 text-yellow-800",children:"PPO"})]})]})}),s.jsx(xi,{children:$.shift?s.jsxs("div",{children:[s.jsx("p",{children:$.shift.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.shift.start_time," - ",$.shift.end_time]})]}):s.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),s.jsx(xi,{children:$.type==="exception"?s.jsxs("div",{children:[s.jsx("p",{children:$.date}),s.jsx(Re,{variant:"outline",className:"mt-1",children:"One-time"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(pr,{className:"h-3 w-3"}),s.jsx("p",{children:"Recurring Schedule"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("p",{children:["Day: ",(ke=R.find(ce=>ce.id===$.dayOfWeek))==null?void 0:ke.label]}),s.jsxs("p",{children:["Active on ",$.dates.length," day(s)"]}),s.jsxs("p",{children:[$.startDate," ",$.endDate?`- ${$.endDate}`:"(Ongoing)"]})]})]})}),s.jsx(xi,{children:s.jsx(Re,{variant:$.type==="recurring"?"default":"outline",children:$.type==="recurring"?"Recurring":"Exception"})}),s.jsx(xi,{children:$.partnershipSuspended?s.jsxs(Re,{className:"bg-amber-100 text-amber-800 hover:bg-amber-100",children:[s.jsx(On,{className:"h-3 w-3 mr-1"}),"Suspended"]}):$.isValid?s.jsxs(Re,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:[s.jsx(tf,{className:"h-3 w-3 mr-1"}),"Active"]}):s.jsxs(Re,{variant:"destructive",children:[s.jsx(On,{className:"h-3 w-3 mr-1"}),"Orphaned"]})}),s.jsx(xi,{children:s.jsxs("div",{className:"flex gap-2",children:[$.type==="recurring"&&$.isValid&&s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>H($),disabled:G.isPending,children:s.jsx(Qo,{className:"h-4 w-4"})}),s.jsx(Ne,{size:"sm",variant:"destructive",onClick:()=>{confirm(`Remove partnership between ${$.officer1.full_name} and ${$.officer2.full_name}?`)&&he.mutate($)},disabled:he.isPending,children:s.jsx(es,{className:"h-4 w-4"})})]})})]},`${$.type}-${$.id}-${$.dates[0]}`)})})]})]})]}),s.jsx(rn,{open:u,onOpenChange:h,children:s.jsxs(Vr,{className:"max-w-2xl",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Edit Recurring Partnership"}),s.jsxs(as,{children:["Update the schedule for ",(W=o==null?void 0:o.officer1)==null?void 0:W.full_name," and ",(te=o==null?void 0:o.officer2)==null?void 0:te.full_name]})]}),o&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(jr,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Current Partnership"})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[o.officer1.full_name," (",o.officer1.rank,") &",o.officer2.full_name," (",o.officer2.rank,")"]}),s.jsxs("p",{children:["Shift: ",(Z=o.shift)==null?void 0:Z.name]}),s.jsxs("p",{children:["Day: ",(me=R.find($=>$.id===o.dayOfWeek))==null?void 0:me.label]})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"Days of Week"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:R.map($=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(on,{id:`edit-day-${$.id}`,checked:A.includes($.id),onCheckedChange:()=>we($.id)}),s.jsx(Ce,{htmlFor:`edit-day-${$.id}`,className:"cursor-pointer text-sm",children:$.short})]},$.id))}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Selected: ",je(A)||"None"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{children:"Start Date"}),s.jsx(St,{type:"date",value:L,onChange:$=>T($.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ce,{children:"End Date (Optional)"}),s.jsx(St,{type:"date",value:k,onChange:$=>E($.target.value),min:L,placeholder:"Ongoing if empty"})]})]}),s.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(I1,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Updated Schedule Summary:"})]}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:A.length>0&&L?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["Every: ",je(A)]}),s.jsxs("p",{children:["From: ",L]}),s.jsxs("p",{children:["Until: ",k||"Ongoing"]})]}):s.jsx("p",{children:"Complete the form to see schedule summary"})})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsx(Ne,{onClick:Oe,disabled:G.isPending,children:G.isPending?"Updating...":"Update Partnership"})]})]})]})})]})},WC=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],Dne=({open:e,onOpenChange:t})=>{const r=Lr(),[n,i]=w.useState(""),[a,o]=w.useState(""),[l,c]=w.useState("none"),[d,u]=w.useState(""),[h,m]=w.useState(""),[f,g]=w.useState(!0),{data:y}=bt({queryKey:["officers"],queryFn:async()=>{const{data:S,error:P}=await se.from("profiles").select("id, full_name, badge_number, shift_type_id").order("full_name");if(P)throw P;return S}}),{data:x}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:S,error:P}=await se.from("shift_types").select("*").order("name");if(P)throw P;return S}}),{data:p}=bt({queryKey:["shift-positions"],queryFn:async()=>{const{data:S,error:P}=await se.from("shift_positions").select("id, position_name, position_order").order("position_order");if(P)throw P;return S}}),v=Xt({mutationFn:async()=>{var O;const S=y==null?void 0:y.find(L=>L.id===n),P=x==null?void 0:x.find(L=>L.id===a);console.log(`Creating schedule for officer: ${S==null?void 0:S.full_name}, shift: ${P==null?void 0:P.name}`);const{error:M}=await se.from("recurring_schedules").insert({officer_id:n,shift_type_id:a,position_name:l!=="none"?l:null,unit_number:h||null,day_of_week:parseInt(d),start_date:new Date().toISOString().split("T")[0],is_active:!0});if(M)throw M;console.log("Schedule created successfully");const{data:{user:I}}=await se.auth.getUser();I&&await se.from("audit_logs").insert({user_email:I.email,action_type:"recurring_schedule_created",table_name:"recurring_schedules",description:`Created recurring schedule for ${S==null?void 0:S.full_name} on ${(O=WC.find(L=>L.value===parseInt(d)))==null?void 0:O.label} shift (${P==null?void 0:P.name}).`})},onSuccess:()=>{ge.success("Recurring schedule created successfully"),r.invalidateQueries({queryKey:["weekly-schedule"]}),r.invalidateQueries({queryKey:["daily-schedule"]}),r.invalidateQueries({queryKey:["officers"]}),r.invalidateQueries({queryKey:["officers-for-alerts"]}),t(!1),i(""),o(""),c("none"),u(""),m(""),g(!0)},onError:S=>{ge.error(S.message||"Failed to create schedule")}}),j=(()=>{if(!n||!y||!x)return null;const S=y.find(P=>P.id===n);return S!=null&&S.shift_type_id?x.find(P=>P.id===S.shift_type_id):null})();return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"max-w-md",children:[s.jsx(Yr,{children:s.jsx(Kr,{children:"Create Recurring Schedule"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Officer"}),s.jsxs(Wt,{value:n,onValueChange:i,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select officer"})}),s.jsx(qt,{children:y==null?void 0:y.map(S=>s.jsxs(ct,{value:S.id,children:[S.full_name," (",S.badge_number,")",S.shift_type_id&&" "]},S.id))})]}),j&&s.jsxs("div",{className:"text-sm text-muted-foreground p-2 bg-blue-50 rounded",children:["Currently assigned to: ",s.jsx("span",{className:"font-medium",children:j.name})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Day of Week"}),s.jsxs(Wt,{value:d,onValueChange:u,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select day"})}),s.jsx(qt,{children:WC.map(S=>s.jsx(ct,{value:S.value.toString(),children:S.label},S.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Shift Type"}),s.jsxs(Wt,{value:a,onValueChange:o,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:x==null?void 0:x.map(S=>s.jsxs(ct,{value:S.id,children:[S.name," (",S.start_time," - ",S.end_time,")"]},S.id))})]})]}),s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-blue-50/30",children:[s.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[s.jsx(Vl,{className:"h-4 w-4"}),"Assignment Details (Optional)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{htmlFor:"unit-number",className:"flex items-center gap-1",children:[s.jsx(bi,{className:"h-3 w-3"}),"Unit Number"]}),s.jsx(St,{id:"unit-number",placeholder:"e.g., Unit 1, Patrol, Traffic",value:h,onChange:S=>m(S.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"assigned-position",children:"Assigned Position"}),s.jsxs(Wt,{value:l,onValueChange:c,children:[s.jsx(Bt,{id:"assigned-position",children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"none",children:"No position assigned"}),p==null?void 0:p.map(S=>s.jsx(ct,{value:S.position_name,children:S.position_name},S.id))]})]})]})]})]}),s.jsx(Ne,{className:"w-full",onClick:()=>v.mutate(),disabled:!n||!a||!d||v.isPending,children:v.isPending?"Creating...":"Create Schedule"})]})]})})},VC=["Supervisor","District 1","District 1/2","District 2","District 3","District 4","District 5","District 5/6","District 6","District 7/8","District 9","City-Wide","Other (Custom)"],Mne=({currentPosition:e,onSave:t,onCancel:r,isSaving:n=!1})=>{const[i,a]=w.useState(""),[o,l]=w.useState("");w.useEffect(()=>{e&&!VC.includes(e)?(a("Other (Custom)"),l(e)):(a(e||""),l(""))},[e]);const c=()=>{const d=i==="Other (Custom)"?o:i;d&&t(d)};return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Wt,{value:i,onValueChange:a,children:[s.jsx(Bt,{className:"w-48",children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsx(qt,{children:VC.map(d=>s.jsx(ct,{value:d,children:d},d))})]}),i==="Other (Custom)"&&s.jsx(St,{placeholder:"Enter special assignment",value:o,onChange:d=>l(d.target.value),className:"w-48"})]}),s.jsx(Ne,{size:"sm",onClick:c,disabled:n,children:s.jsx(tl,{className:"h-4 w-4"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:r,children:s.jsx(Ms,{className:"h-4 w-4"})})]})},Rne=()=>{const e=Lr();return Xt({mutationFn:async({scheduleId:t,type:r,positionName:n})=>{const i=r==="recurring"?"recurring_schedules":"schedule_exceptions",{error:a}=await se.from(i).update({position_name:n}).eq("id",t);if(a)throw a},onSuccess:()=>{ge.success("Position updated"),e.invalidateQueries({predicate:t=>t.queryKey[0]==="daily-schedule"||t.queryKey[0]==="weekly-schedule"})},onError:t=>{ge.error(t.message||"Failed to update position")}})},AR=({userId:e,isAdminOrSupervisor:t})=>{var _e,W;console.log(" OfficersManagement props:",{userId:e,isAdminOrSupervisor:t});const[r,n]=w.useState(!1),[i,a]=w.useState(!1),[o,l]=w.useState(""),[c,d]=w.useState(null),[u,h]=w.useState(null),[m,f]=w.useState(jn(new Date,{weekStartsOn:0})),[g,y]=w.useState(new Date),[x,p]=w.useState("weekly"),v=Lr(),{userEmail:b}=ff();w.useEffect(()=>{console.log(" useEffect - Initializing officer ID:",{userId:e,isAdminOrSupervisor:t,selectedOfficerId:o}),!t&&e&&o===""&&(console.log(" Setting officer ID to user ID:",e),l(e))},[e,t,o]);const j=()=>{f(qj(m))},S=()=>{f(dl(m,1))},P=()=>{f(jn(new Date,{weekStartsOn:0}))},M=()=>{y(Gx(g))},I=()=>{y(bs(g,1))},O=()=>{y(new Date)},L=te=>{const Z=te.trim().split(/\s+/);return Z[Z.length-1]||te},{data:T,isLoading:k}=bt({queryKey:["profiles"],queryFn:async()=>{console.log(" Fetching profiles...");const{data:te,error:Z}=await se.from("profiles").select("id, full_name, badge_number").order("full_name");if(Z)throw Z;return te.sort((me,$)=>{const ke=L(me.full_name||"").toLowerCase(),ce=L($.full_name||"").toLowerCase();return ke.localeCompare(ce)})},enabled:t});w.useEffect(()=>{if(t&&T&&T.length>0&&o===""){const te=T[0].id;console.log(" Setting default officer for admin:",te),l(te)}},[T,t,o]);const{data:E,isLoading:A,error:q,refetch:U}=bt({queryKey:["schedule",o,m.toISOString(),g.toISOString(),x],queryFn:async()=>{if(console.log(" Fetching schedules for officer:",o),!o)return console.log(" No officer selected, skipping schedule fetch"),{dailySchedules:[],dates:[],recurring:[],exceptions:[],startDate:"",endDate:""};const te=t?o:e;console.log(" Target user ID:",te);let Z,me,$;if(x==="weekly"){const Ue=jn(m,{weekStartsOn:0});Z=Ue,me=lr(Ue,6),$=Array.from({length:7},(Ve,rt)=>Pe(lr(Ue,rt),"yyyy-MM-dd")),console.log(" WEEKLY - Start:",Pe(Z,"EEE yyyy-MM-dd"),"End:",Pe(me,"EEE yyyy-MM-dd"))}else Z=ln(g),me=ca(g),$=qa({start:Z,end:me}).map(Ve=>Pe(Ve,"yyyy-MM-dd")),console.log(" MONTHLY - Start:",Pe(Z,"EEE yyyy-MM-dd"),"End:",Pe(me,"EEE yyyy-MM-dd"),"Days:",$.length);const{data:ke,error:ce}=await se.from("recurring_schedules").select(`
          *,
          shift_types(name, start_time, end_time)
        `).eq("officer_id",te).lte("start_date",Pe(me,"yyyy-MM-dd")).or(`end_date.is.null,end_date.gte.${Pe(Z,"yyyy-MM-dd")}`);if(ce)throw console.error("Recurring error:",ce),ce;const{data:Ie,error:Fe}=await se.from("schedule_exceptions").select(`
          *,
          shift_types(name, start_time, end_time)
        `).eq("officer_id",te).in("date",$);if(Fe)throw console.error("Exceptions error:",Fe),Fe;return console.log(" Schedule data fetched successfully"),{dailySchedules:$.map((Ue,Ve)=>{var ue,Ke,Qe,ht,Dt,yt,ut,Ut,Ct,wt;const rt=It(Ue),Ye=rt.getDay(),We=Ie==null?void 0:Ie.find(lt=>lt.date===Ue),it=ke==null?void 0:ke.find(lt=>{if(lt.day_of_week!==Ye)return!1;const Yt=It(lt.start_date),at=lt.end_date?It(lt.end_date):null,Sr=rt>=Yt,Wn=!at||rt<=at;return Sr&&Wn});let ft=null;if(We)ft={type:We.is_off?"Off":((ue=We.shift_types)==null?void 0:ue.name)||"Custom",time:We.is_off?"":We.custom_start_time&&We.custom_end_time?`${We.custom_start_time} - ${We.custom_end_time}`:`${(Ke=We.shift_types)==null?void 0:Ke.start_time} - ${(Qe=We.shift_types)==null?void 0:Qe.end_time}`,position:We.position_name,scheduleId:We.id,scheduleType:"exception",shift:We.shift_types,isOff:We.is_off,reason:We.reason,hasPTO:We.is_off,ptoData:We.is_off?{id:We.id,ptoType:We.reason,startTime:We.custom_start_time||((ht=We.shift_types)==null?void 0:ht.start_time)||"00:00",endTime:We.custom_end_time||((Dt=We.shift_types)==null?void 0:Dt.end_time)||"23:59",isFullShift:!We.custom_start_time&&!We.custom_end_time,shiftTypeId:We.shift_type_id}:void 0};else if(it){const lt=Ie==null?void 0:Ie.find(Yt=>Yt.officer_id===te&&Yt.date===Ue&&Yt.is_off);ft={type:(yt=it.shift_types)==null?void 0:yt.name,time:`${(ut=it.shift_types)==null?void 0:ut.start_time} - ${(Ut=it.shift_types)==null?void 0:Ut.end_time}`,position:it.position_name,scheduleId:it.id,scheduleType:"recurring",shift:it.shift_types,isOff:!1,hasPTO:!!lt,ptoData:lt?{id:lt.id,ptoType:lt.reason,startTime:lt.custom_start_time||((Ct=it.shift_types)==null?void 0:Ct.start_time),endTime:lt.custom_end_time||((wt=it.shift_types)==null?void 0:wt.end_time),isFullShift:!lt.custom_start_time&&!lt.custom_end_time,shiftTypeId:lt.shift_type_id}:void 0}}return{date:Ue,dayOfWeek:Ye,shiftInfo:ft,hasSchedule:!!ft,isCurrentMonth:x==="monthly"?mo(rt,g):!0}}),dates:$,recurring:ke,exceptions:Ie,startDate:Pe(Z,"yyyy-MM-dd"),endDate:Pe(me,"yyyy-MM-dd")}},enabled:!!o}),R=Rne(),C=Xt({mutationFn:async te=>{var Fe;const{data:{user:Z}}=await se.auth.getUser(),$=((Le,Ue)=>{const[Ve,rt]=Le.split(":").map(Number),[Ye,We]=Ue.split(":").map(Number),it=Ve*60+rt;return(Ye*60+We-it)/60})(te.startTime,te.endTime),ce=(Fe=[{value:"vacation",label:"Vacation",column:"vacation_hours"},{value:"holiday",label:"Holiday",column:"holiday_hours"},{value:"sick",label:"Sick",column:"sick_hours"},{value:"comp",label:"Comp",column:"comp_hours"}].find(Le=>Le.value===te.ptoType))==null?void 0:Fe.column;if(ce){const{data:Le,error:Ue}=await se.from("profiles").select("*").eq("id",te.officerId).single();if(Ue)throw Ue;const Ve=Le[ce],{error:rt}=await se.from("profiles").update({[ce]:Ve+$}).eq("id",te.officerId);if(rt)throw rt}const{error:Ie}=await se.from("schedule_exceptions").delete().eq("id",te.id);if(Ie)throw Ie;Z&&await Ir.log({user_id:Z.id,user_email:Z.email,action_type:"pto_removed",table_name:"schedule_exceptions",record_id:te.id,description:`PTO removed for officer ${te.officerId} on ${te.date}: ${te.ptoType} (${$} hours restored)`}),await se.from("schedule_exceptions").delete().eq("officer_id",te.officerId).eq("date",te.date).eq("shift_type_id",te.shiftTypeId).eq("is_off",!1)},onSuccess:()=>{ge.success("PTO removed and balance restored"),v.invalidateQueries({queryKey:["schedule"]})},onError:te=>{ge.error(te.message||"Failed to remove PTO")}}),F=(te,Z,me)=>{R.mutate({scheduleId:te,type:Z,positionName:me},{onSuccess:()=>{v.invalidateQueries({queryKey:["schedule",o,m.toISOString(),g.toISOString(),x]}),h(null)}})},X=te=>{const Z=`${te.scheduleId}-${te.scheduleType}`;h(Z)},re=(te,Z)=>{d({scheduleId:te.scheduleId,type:te.scheduleType,date:Z,shift:te.shift,...te.hasPTO&&te.ptoData?{existingPTO:te.ptoData}:{}}),a(!0)},z=async(te,Z)=>{var me,$,ke;if(!te.hasPTO||!te.ptoData){console.error(" No PTO data found in schedule:",te);return}try{console.log(" handleRemovePTO called with:",{schedule:te,date:Z}),console.log(" Full schedule object:",te);let ce="Unknown Officer";if(te.name)ce=te.name,console.log(" Found officer name in schedule.name:",ce);else if(te.officerName)ce=te.officerName,console.log(" Found officer name in schedule.officerName:",ce);else if((me=te.profiles)!=null&&me.full_name)ce=te.profiles.full_name,console.log(" Found officer name in schedule.profiles.full_name:",ce);else{console.log(" No officer name in schedule, fetching from database...");const{data:Le,error:Ue}=await se.from("profiles").select("full_name").eq("id",o).single();!Ue&&(Le!=null&&Le.full_name)?(ce=Le.full_name,console.log(" Found officer name from database:",ce)):console.error(" Could not find officer name in database")}console.log(" Final officer name for audit:",ce);let Ie=(($=te.shift)==null?void 0:$.id)||te.ptoData.shiftTypeId||te.originalShiftId;if(!Ie){console.log(" No direct shift ID found, inferring from officer's schedule...");const{data:Le,error:Ue}=await se.from("schedule_exceptions").select("shift_type_id").eq("officer_id",o).eq("date",Z).eq("is_off",!1).single();if(!Ue&&(Le!=null&&Le.shift_type_id))Ie=Le.shift_type_id,console.log(" Found shift_type_id from working schedule:",Ie);else{const Ve=It(Z).getDay(),{data:rt,error:Ye}=await se.from("recurring_schedules").select("shift_type_id").eq("officer_id",o).eq("day_of_week",Ve).or(`end_date.is.null,end_date.gte.${Z}`);!Ye&&(rt==null?void 0:rt.length)>0&&(Ie=(ke=rt[0])==null?void 0:ke.shift_type_id,console.log(" Found shift_type_id from recurring schedule:",Ie))}}if(!Ie){console.error(" No shift_type_id found after all attempts"),ge.error("Cannot remove PTO: Unable to determine shift");return}const Fe={id:te.ptoData.id,officerId:o,date:Z,shiftTypeId:Ie,ptoType:te.ptoData.ptoType,startTime:te.ptoData.startTime,endTime:te.ptoData.endTime};console.log(" Calling removePTOMutation with:",Fe),C.mutate(Fe,{onSuccess:()=>{console.log(" PTO removal successful, calling auditLogger..."),Ir.logPTORemoval(o,te.ptoData.ptoType,Z,b,`Removed ${te.ptoData.ptoType} PTO from ${ce}`).then(()=>{console.log(" Audit log entry created successfully for officer:",ce)}).catch(Le=>{console.error(" Failed to create audit log entry:",Le)})},onError:Le=>{console.error(" PTO removal mutation failed:",Le)}})}catch(ce){console.error(" Error in handleRemovePTO:",ce),ge.error("Unexpected error while removing PTO")}},Y=()=>{v.invalidateQueries({queryKey:["schedule",o,m.toISOString(),g.toISOString(),x]})},J=A||t&&k||!o;if(console.log(" Component state:",{isLoading:J,schedulesLoading:A,profilesLoading:k,selectedOfficerId:o,hasSchedules:!!E,error:q}),J)return console.log(" Rendering loading state"),s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Officer Schedule Management"]})}),s.jsx(gt,{children:s.jsx(vs,{className:"h-64 w-full"})})]});if(q)return console.log(" Rendering error state:",q),s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Officer Schedule Management"]})}),s.jsxs(gt,{children:[s.jsxs("p",{className:"text-red-500",children:["Error loading schedule: ",q.message]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Please check the console for more details."})]})]});console.log(" Rendering main component with schedules:",E);const ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],le=lr(m,6),G=jn(new Date,{weekStartsOn:0}).getTime()===m.getTime(),he=mo(g,new Date),xe=ln(g),Se=ca(g),K=qa({start:xe,end:Se}),we=xe.getDay(),Te=Se.getDay(),ae=Array.from({length:we},(te,Z)=>lr(xe,-we+Z)),H=Array.from({length:6-Te},(te,Z)=>lr(Se,Z+1)),Oe=[...ae,...K,...H],pe=()=>{var te;return s.jsx("div",{className:"space-y-4",children:(te=E==null?void 0:E.dailySchedules)==null?void 0:te.map(({date:Z,dayOfWeek:me,shiftInfo:$})=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsx("p",{className:"font-medium",children:ne[me]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Pe(It(Z),"MMM d")})]}),$?s.jsx("div",{className:"flex items-center gap-4",children:u===`${$.scheduleId}-${$.scheduleType}`?s.jsx(Mne,{currentPosition:$.position||"",onSave:ke=>F($.scheduleId,$.scheduleType,ke),onCancel:()=>h(null),isSaving:R.isPending}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium",children:$.type}),$.time&&s.jsx("p",{className:"text-sm text-muted-foreground",children:$.time}),$.position&&s.jsx(Re,{variant:"secondary",className:"mt-1",children:$.position}),$.isOff&&s.jsx(Re,{variant:"destructive",className:"mt-1",children:$.reason||"Time Off"})]}),t&&s.jsxs("div",{className:"flex items-center gap-2",children:[!$.isOff&&s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>X($),title:"Edit Position",children:s.jsx(Zd,{className:"h-4 w-4"})}),$.hasPTO?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{size:"sm",variant:"default",onClick:()=>re($,Z),title:"Edit PTO",children:s.jsx(pr,{className:"h-4 w-4"})}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>z($,Z),disabled:C.isPending,title:"Remove PTO",children:s.jsx(es,{className:"h-4 w-4 text-destructive"})})]}):s.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>re($,Z),title:"Assign PTO",children:s.jsx(pr,{className:"h-4 w-4"})})]})]})}):s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"No shift scheduled"}),t&&s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>ge.info("Add schedule feature coming soon"),children:"Add Shift"})]})]},Z))})},je=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:ne.map(te=>s.jsx("div",{className:"text-center font-medium text-sm py-2",children:te},te))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:Oe.map((te,Z)=>{var Ie;const me=Pe(te,"yyyy-MM-dd"),$=(Ie=E==null?void 0:E.dailySchedules)==null?void 0:Ie.find(Fe=>Fe.date===me),ke=mo(te,g),ce=tn(te,new Date);return s.jsxs("div",{className:`
                min-h-24 p-2 border rounded-lg text-sm
                ${ke?"bg-card":"bg-muted/30 text-muted-foreground"}
                ${ce?"border-primary ring-1 ring-primary":"border-border"}
                hover:bg-accent/50 transition-colors
              `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`
                  text-xs font-medium
                  ${ce?"bg-primary text-primary-foreground rounded-full w-6 h-6 flex items-center justify-center":""}
                `,children:Pe(te,"d")}),t&&($==null?void 0:$.shiftInfo)&&s.jsxs("div",{className:"flex gap-1",children:[!$.shiftInfo.isOff&&s.jsx(Ne,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:()=>X($.shiftInfo),title:"Edit Position",children:s.jsx(Zd,{className:"h-3 w-3"})}),$.shiftInfo.hasPTO?s.jsxs(s.Fragment,{children:[s.jsx(Ne,{size:"icon",variant:"default",className:"h-5 w-5",onClick:()=>re($.shiftInfo,me),title:"Edit PTO",children:s.jsx(pr,{className:"h-3 w-3"})}),s.jsx(Ne,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:()=>z($.shiftInfo,me),disabled:C.isPending,title:"Remove PTO",children:s.jsx(es,{className:"h-3 w-3 text-destructive"})})]}):s.jsx(Ne,{size:"icon",variant:"ghost",className:"h-5 w-5",onClick:()=>re($.shiftInfo,me),title:"Assign PTO",children:s.jsx(pr,{className:"h-3 w-3"})})]})]}),($==null?void 0:$.shiftInfo)&&s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsx("div",{className:"font-medium truncate",children:$.shiftInfo.type}),$.shiftInfo.time&&s.jsx("div",{className:"text-muted-foreground truncate",children:$.shiftInfo.time}),$.shiftInfo.position&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:$.shiftInfo.position}),$.shiftInfo.isOff&&s.jsx(Re,{variant:"destructive",className:"text-xs",children:$.shiftInfo.reason||"Off"})]})]},te.toISOString())})})]});return s.jsxs(s.Fragment,{children:[s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Officer Schedule Management"]}),t&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(Wt,{value:o,onValueChange:te=>l(te),children:[s.jsx(Bt,{className:"w-64",children:s.jsx(Vt,{placeholder:"Select officer"})}),s.jsx(qt,{children:T==null?void 0:T.map(te=>s.jsxs(ct,{value:te.id,children:[te.full_name," (Badge: ",te.badge_number,")"]},te.id))})]}),s.jsxs(Ne,{onClick:()=>n(!0),size:"sm",children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Add Schedule"]})]})]}),s.jsx(fl,{value:x,onValueChange:te=>p(te),children:s.jsxs(sa,{className:"grid w-full max-w-xs grid-cols-2",children:[s.jsxs(er,{value:"weekly",className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Weekly"]}),s.jsxs(er,{value:"monthly",className:"flex items-center gap-2",children:[s.jsx(eB,{className:"h-4 w-4"}),"Monthly"]})]})}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ne,{variant:"outline",size:"sm",onClick:x==="weekly"?j:M,title:x==="weekly"?"Previous Week":"Previous Month",children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold",children:x==="weekly"?`${Pe(m,"MMM d")} - ${Pe(le,"MMM d, yyyy")}`:Pe(g,"MMMM yyyy")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x==="weekly"?`Week of ${Pe(m,"MMMM d, yyyy")}`:`Month of ${Pe(g,"MMMM yyyy")}`})]}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:x==="weekly"?S:I,title:x==="weekly"?"Next Week":"Next Month",children:s.jsx(Ri,{className:"h-4 w-4"})})]}),s.jsx(Ne,{variant:x==="weekly"&&G||x==="monthly"&&he?"outline":"default",size:"sm",onClick:x==="weekly"?P:O,disabled:x==="weekly"&&G||x==="monthly"&&he,children:"Today"})]}),t&&o&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Viewing schedule for: ",(_e=T==null?void 0:T.find(te=>te.id===o))==null?void 0:_e.full_name]})]}),s.jsx(gt,{children:x==="weekly"?pe():je()})]}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Dne,{open:r,onOpenChange:n}),c&&s.jsx(s5,{open:i,onOpenChange:te=>{a(te),te||Y()},officer:{officerId:o,name:((W=T==null?void 0:T.find(te=>te.id===o))==null?void 0:W.full_name)||"Unknown",scheduleId:c.scheduleId,type:c.type,...c.existingPTO?{existingPTO:c.existingPTO}:{}},shift:c.shift,date:c.date})]})]})},Ine=({userId:e,isAdminOrSupervisor:t})=>{const[r,n]=w.useState(null),[i,a]=w.useState(null),[o,l]=w.useState(!1),[c,d]=w.useState(""),[u,h]=w.useState(null),[m,f]=w.useState("officers"),{data:g}=ml(),{data:y,isLoading:x}=bt({queryKey:["all-officers"],queryFn:async()=>{console.log("Fetching all officers...");const{data:j,error:S}=await se.from("profiles").select("*");if(S)throw console.error("Error fetching profiles:",S),S;const{data:P,error:M}=await se.from("user_roles").select("user_id, role");if(M)throw console.error("Error fetching roles:",M),M;console.log("Profiles found:",(j==null?void 0:j.length)||0);const O=(await Promise.all((j||[]).map(async L=>{const{data:T}=await se.rpc("get_service_credit",{profile_id:L.id});return{...L,service_credit:T||0,roles:(P==null?void 0:P.filter(k=>k.user_id===L.id).map(k=>k.role))||[]}}))).sort((L,T)=>{var A,q,U,R;const k=((q=(A=L.full_name)==null?void 0:A.split(" ").pop())==null?void 0:q.toLowerCase())||"",E=((R=(U=T.full_name)==null?void 0:U.split(" ").pop())==null?void 0:R.toLowerCase())||"";return k.localeCompare(E)});return console.log("Officers sorted:",O.length),O}}),p=j=>{var P;const S=((P=j.rank)==null?void 0:P.toLowerCase())||"";return S.includes("lieutenant")||S.includes("lt")?"Seniority at Lieutenant":S.includes("sergeant")||S.includes("sgt")?"Seniority at Sergeant":"Service Credit"},v=j=>{var M;const S=((M=j.rank)==null?void 0:M.toLowerCase())||"",P=[];return j.hire_date&&P.push(s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(xt,{className:"h-2 w-2"}),s.jsxs("span",{children:["Hire: ",Pe(new Date(j.hire_date),"MMM yyyy")]})]},"hire")),(S.includes("lieutenant")||S.includes("lt"))&&j.promotion_date_lieutenant?P.push(s.jsxs("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["Since: ",Pe(new Date(j.promotion_date_lieutenant),"MMM yyyy")]})]},"lt-since")):(S.includes("sergeant")||S.includes("sgt"))&&j.promotion_date_sergeant&&P.push(s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["Since: ",Pe(new Date(j.promotion_date_sergeant),"MMM yyyy")]})]},"sgt-since")),S.includes("lieutenant")||S.includes("lt")?j.promotion_date_sergeant&&P.push(s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["Sgt: ",Pe(new Date(j.promotion_date_sergeant),"MMM yyyy")]})]},"sgt-promo")):!S.includes("sergeant")&&!S.includes("sgt")&&(j.promotion_date_sergeant&&P.push(s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["Sgt: ",Pe(new Date(j.promotion_date_sergeant),"MMM yyyy")]})]},"sgt-promo")),j.promotion_date_lieutenant&&P.push(s.jsxs("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["LT: ",Pe(new Date(j.promotion_date_lieutenant),"MMM yyyy")]})]},"lt-promo"))),P},b=w.useMemo(()=>{if(!y)return[];if(!c.trim())return y;const j=c.toLowerCase().trim();return y.filter(S=>{var P,M,I,O,L;return((P=S.full_name)==null?void 0:P.toLowerCase().includes(j))||((M=S.email)==null?void 0:M.toLowerCase().includes(j))||((I=S.badge_number)==null?void 0:I.toLowerCase().includes(j))||((O=S.rank)==null?void 0:O.toLowerCase().includes(j))||((L=S.phone)==null?void 0:L.toLowerCase().includes(j))})},[y,c]);return s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Staff Management"]}),s.jsx(en,{children:"Manage officers, schedules, and partnerships"})]}),m==="officers"&&s.jsxs(Ne,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[s.jsx(Ti,{className:"h-4 w-4"}),"New Profile"]})]})}),s.jsxs(fl,{value:m,onValueChange:f,className:"w-full",children:[s.jsx("div",{className:"px-6",children:s.jsxs(sa,{className:"grid w-full grid-cols-3",children:[s.jsx(er,{value:"officers",children:"Officers"}),s.jsx(er,{value:"schedules",children:"Schedules"}),s.jsx(er,{value:"partnerships",children:"Partnerships"})]})}),s.jsxs(gt,{className:"pt-6",children:[s.jsxs(Un,{value:"officers",className:"mt-0 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search officers by name, badge, rank, email, or phone...",value:c,onChange:j=>d(j.target.value),className:"pl-10"}),c&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[b.length," ",b.length===1?"officer":"officers"]})})]}),x?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading officers..."})}):!y||y.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No officers found."}),s.jsxs(Ne,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[s.jsx(Ti,{className:"h-4 w-4"}),"Create First Officer Profile"]})]}):s.jsx("div",{className:"space-y-3",children:b.length===0&&c?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:['No officers found matching "',c,'"']}),s.jsx(Ne,{variant:"outline",onClick:()=>d(""),children:"Clear search"})]}):b.map(j=>{var S,P;return s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:j.full_name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:j.email}),j.badge_number&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Badge: ",j.badge_number]}),j.phone&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",j.phone]}),j.rank&&s.jsxs("p",{className:"text-sm font-medium text-primary",children:["Rank: ",j.rank]}),g!=null&&g.show_pto_balances&&(g!=null&&g.pto_balances_visible)?s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Vacation:"}),s.jsxs("span",{className:"font-medium",children:[j.vacation_hours||0,"h"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Sick:"}),s.jsxs("span",{className:"font-medium",children:[j.sick_hours||0,"h"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Comp:"}),s.jsxs("span",{className:"font-medium",children:[j.comp_hours||0,"h"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Holiday:"}),s.jsxs("span",{className:"font-medium",children:[j.holiday_hours||0,"h"]})]}),s.jsxs("div",{className:"col-span-2 space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ni,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("span",{className:"text-muted-foreground",children:[p(j),":"]}),s.jsxs("span",{className:"font-medium ml-1",children:[((S=j.service_credit)==null?void 0:S.toFixed(1))||0," yrs"]}),j.service_credit_override!==null&&s.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-500 ml-1",children:["(Adjusted ",j.service_credit_override>0?"+":"",j.service_credit_override.toFixed(1)," yrs)"]})]}),s.jsx("div",{className:"space-y-1 text-xs ml-4",children:v(j)})]})]}):s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(ni,{className:"h-3 w-3"}),s.jsxs("span",{children:[p(j),":"]}),s.jsxs("span",{className:"font-medium ml-1",children:[((P=j.service_credit)==null?void 0:P.toFixed(1))||0," yrs"]})]}),s.jsx("div",{className:"space-y-1 text-xs ml-4 mt-1",children:v(j)}),s.jsx("div",{className:"mt-1 text-xs text-muted-foreground italic",children:"PTO balances are currently managed as indefinite"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"flex flex-col gap-1",children:j.roles&&j.roles.length>0?j.roles.map((M,I)=>s.jsx(Re,{variant:"outline",className:"capitalize",children:M},I)):s.jsx(Re,{variant:"outline",children:"Officer"})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>n(j),children:[s.jsx(Zd,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>a(j),children:[s.jsx(xt,{className:"h-3 w-3 mr-1"}),"Schedule"]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>h(j),title:"Assign Bulk PTO",children:[s.jsx(xt,{className:"h-3 w-3 mr-1"}),"Bulk PTO"]})]})]})]})},j.id)})})]}),s.jsx(Un,{value:"schedules",className:"mt-0",children:s.jsx(AR,{userId:e,isAdminOrSupervisor:t})}),s.jsx(Un,{value:"partnerships",className:"mt-0",children:s.jsx(Ane,{})})]})]}),r&&s.jsx(ix,{officer:r,open:!!r,onOpenChange:j=>!j&&n(null)}),i&&s.jsx(OR,{officer:i,open:!!i,onOpenChange:j=>!j&&a(null)}),o&&s.jsx(ix,{officer:null,open:!!o,onOpenChange:j=>!j&&l(!1)}),u&&s.jsx(ER,{officer:u,open:!!u,onOpenChange:j=>!j&&h(null)})]})},Lne=e=>{const t=Lr();w.useEffect(()=>{if(!e)return;const r=se.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`officer_id=eq.${e}`},n=>{console.log("New notification received:",n),t.invalidateQueries({queryKey:["notifications"]}),xh(async()=>{const{toast:i}=await Promise.resolve().then(()=>wq);return{toast:i}},void 0,import.meta.url).then(({toast:i})=>{i.info(`New alert: ${n.new.title}`,{description:n.new.message,duration:5e3})})}).subscribe();return()=>{r.unsubscribe()}},[e,t])},Fne=({userId:e,isAdminOrSupervisor:t})=>{const r=Lr(),{data:n,isLoading:i}=bt({queryKey:["vacancy-alerts"],queryFn:async()=>{const{data:h,error:m}=await se.from("vacancy_alerts").select(`
          *,
          shift_types(name, start_time, end_time)
        `).eq("status","open").order("date",{ascending:!0});if(m)throw m;return h}}),{data:a,refetch:o}=bt({queryKey:["vacancy-responses",e],queryFn:async()=>{const{data:h,error:m}=await se.from("vacancy_responses").select("alert_id, status, rejection_reason, vacancy_alert_id").eq("officer_id",e);if(m)throw m;return h},enabled:!!e&&!t}),{data:l}=bt({queryKey:["notifications",e],queryFn:async()=>{const{data:h,error:m}=await se.from("notifications").select(`
          *,
          vacancy_alerts(
            date,
            shift_types(name)
          )
        `).eq("officer_id",e).eq("is_read",!1).order("created_at",{ascending:!1}).limit(10);if(m)throw m;return h},enabled:!!e}),c=Xt({mutationFn:async({alertId:h,status:m})=>{console.log("Submitting response for alert:",h,"status:",m);const{error:f}=await se.from("vacancy_responses").insert({vacancy_alert_id:h,officer_id:e,status:m});if(f)throw console.error("Supabase error:",f),f},onSuccess:(h,m)=>{r.invalidateQueries({queryKey:["vacancy-responses",e]}),r.invalidateQueries({queryKey:["vacancy-responses-admin"]}),o==null||o(),ge.success("Response submitted successfully")},onError:h=>{console.error("Response error:",h),h.code==="23505"?ge.error("You have already submitted a response for this vacancy alert"):ge.error("Failed to submit response: "+h.message)}}),d=Xt({mutationFn:async h=>{const{error:m}=await se.from("notifications").update({is_read:!0}).eq("id",h);if(m)throw m},onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]})}}),u=h=>a==null?void 0:a.find(m=>m.alert_id===h||m.vacancy_alert_id===h);return s.jsxs("div",{className:"space-y-6",children:[l&&l.length>0&&s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(ki,{className:"h-5 w-5 text-yellow-600"}),"New Alerts (",l.length,")"]})}),s.jsx(gt,{children:s.jsx("div",{className:"space-y-3",children:l.map(h=>{var m;return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-yellow-200 rounded-lg bg-yellow-50",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm",children:h.title}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:h.message}),h.vacancy_alerts&&s.jsxs(Re,{variant:"outline",className:"mt-2",children:[Pe(new Date(h.vacancy_alerts.date),"MMM d, yyyy")," - ",(m=h.vacancy_alerts.shift_types)==null?void 0:m.name]})]}),s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>d.mutate(h.id),className:"ml-2",children:s.jsx(Ms,{className:"h-4 w-4"})})]},h.id)})})})]}),s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-5 w-5"}),"Open Vacancy Alerts"]}),s.jsx(en,{children:t?"Shifts that need coverage - officers will be notified automatically":"Volunteer for open shifts to earn overtime"})]}),s.jsx(gt,{children:i?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading vacancy alerts..."}):!n||n.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No open vacancies at this time."}):s.jsx("div",{className:"space-y-4",children:n.map(h=>{var g,y,x,p;const m=u(h.id),f=h.current_staffing>=h.minimum_required;return s.jsxs("div",{className:$e("p-4 border rounded-lg space-y-3",(m==null?void 0:m.status)==="accepted"?"bg-green-50 border-green-200":(m==null?void 0:m.status)==="rejected"?"bg-gray-50 border-gray-200":f?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:(g=h.shift_types)==null?void 0:g.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Pe(new Date(h.date),"EEEE, MMM d, yyyy")}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(y=h.shift_types)==null?void 0:y.start_time," - ",(x=h.shift_types)==null?void 0:x.end_time]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsxs(Re,{variant:f?"outline":"destructive",className:f?"bg-green-100":"",children:[h.current_staffing," / ",h.minimum_required," staffed"]}),f&&s.jsx(tf,{className:"h-4 w-4 text-green-600"})]}),h.position_type&&s.jsx("div",{className:"mt-2",children:s.jsxs(Re,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[h.position_type," needed"]})}),h.custom_message&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:s.jsx("p",{className:"text-sm text-blue-800",children:h.custom_message})})]})}),"// In VacancyAlerts.tsx - update the button rendering section",!t&&s.jsx("div",{className:"flex gap-2",children:m?s.jsxs("div",{className:"space-y-2 w-full",children:[s.jsx(Re,{variant:m.status==="accepted"?"default":m.status==="rejected"?"destructive":"outline",className:"capitalize",children:m.status==="accepted"?"Approved":m.status==="rejected"?"Not Approved":"Pending Review"}),m.status==="accepted"&&s.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-sm",children:[s.jsx("p",{className:"text-green-800 font-medium",children:" Your request has been approved"}),s.jsxs("p",{className:"text-green-700 mt-1",children:["Your request for ",(p=h.shift_types)==null?void 0:p.name," on ",Pe(new Date(h.date),"MMM d, yyyy")," has been approved. Please report for duty as scheduled."]})]}),m.status==="rejected"&&m.rejection_reason&&s.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-sm",children:[s.jsx("p",{className:"text-red-800 font-medium",children:" Your request was not approved"}),s.jsx("p",{className:"text-red-700 mt-1",children:m.rejection_reason})]})]}):s.jsx(Ne,{size:"sm",onClick:()=>c.mutate({alertId:h.id,status:"interested"}),disabled:c.isPending||f||!!m,children:c.isPending?"Submitting...":"Request Shift"})})]},h.id)})})})]})]})},Bne={show_pto_tab:!0},qne=({activeTab:e,onTabChange:t,isAdminOrSupervisor:r,isAdmin:n})=>{Hp();const{data:i}=bt({queryKey:["website-settings-mobile-nav"],queryFn:async()=>{console.log("Fetching website settings for mobile navigation...");const{data:d,error:u}=await se.from("website_settings").select("*").single();return u?(console.log("Error fetching website settings for mobile nav:",u),Bne):(console.log("Website settings fetched for mobile nav:",d),d)}}),a=(i==null?void 0:i.show_pto_tab)??!0,o=[{id:"daily",label:"Riding List",icon:xt},{id:"schedule",label:"The Book",icon:xt}];a&&o.push({id:"requests",label:"PTO",icon:pr});const l=[{id:"daily",label:"Riding List",icon:xt},{id:"schedule",label:"The Book",icon:xt},{id:"vacancies",label:"Vacancies",icon:On},{id:"staff",label:"Staff",icon:jr}];a&&l.push({id:"requests",label:"PTO",icon:pr}),n&&l.push({id:"settings",label:"Settings",icon:cj});const c=r?l:o;return s.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 md:hidden",children:s.jsx("div",{className:"flex items-center justify-around h-16",children:c.map(d=>{const u=d.icon;return s.jsxs("button",{onClick:()=>t(d.id),className:$e("flex flex-col items-center justify-center h-full transition-colors flex-1",e===d.id?"text-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[s.jsx(u,{className:"h-5 w-5 mb-1"}),s.jsx("span",{className:"text-xs font-medium",children:d.label})]},d.id)})})})};var g0="Switch",[Une]=Is(g0),[zne,Hne]=Une(g0),DR=w.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,f]=w.useState(null),g=Kt(t,b=>f(b)),y=w.useRef(!1),x=m?u||!!m.closest("form"):!0,[p,v]=la({prop:i,defaultProp:a??!1,onChange:d,caller:g0});return s.jsxs(zne,{scope:r,checked:p,disabled:l,children:[s.jsx(Ot.button,{type:"button",role:"switch","aria-checked":p,"aria-required":o,"data-state":LR(p),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:st(e.onClick,b=>{v(j=>!j),x&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})}),x&&s.jsx(IR,{control:m,bubbles:!y.current,name:n,value:c,checked:p,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});DR.displayName=g0;var MR="SwitchThumb",RR=w.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=Hne(MR,r);return s.jsx(Ot.span,{"data-state":LR(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});RR.displayName=MR;var Wne="SwitchBubbleInput",IR=w.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},a)=>{const o=w.useRef(null),l=Kt(o,a),c=e0(r),d=Dx(t);return w.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const g=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(g)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IR.displayName=Wne;function LR(e){return e?"checked":"unchecked"}var FR=DR,Vne=RR;const sr=w.forwardRef(({className:e,...t},r)=>s.jsx(FR,{className:$e("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:s.jsx(Vne,{className:$e("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));sr.displayName=FR.displayName;var Yne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kne=Yne.reduce((e,t)=>{const r=Wx(`Primitive.${t}`),n=w.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Gne="Separator",YC="horizontal",Jne=["horizontal","vertical"],BR=w.forwardRef((e,t)=>{const{decorative:r,orientation:n=YC,...i}=e,a=Zne(n)?n:YC,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Kne.div,{"data-orientation":a,...l,...i,ref:t})});BR.displayName=Gne;function Zne(e){return Jne.includes(e)}var qR=BR;const ao=w.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>s.jsx(qR,{ref:i,decorative:r,orientation:t,className:$e("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));ao.displayName=qR.displayName;const Xne=({settings:e,handleToggle:t,isPending:r})=>s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(ki,{className:"h-5 w-5"}),"Notification & Alert Settings"]}),s.jsx(en,{children:"Control different notification features and alert systems"})]}),s.jsxs(gt,{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Mass Alert System"}),s.jsxs("div",{className:"pl-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"mass-alert-toggle",className:"text-base",children:"Enable Mass Alert Sending"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:'Controls the "Create Manual Alert" and "Create All Alerts" buttons on the Vacancy Management page. When disabled, users cannot send alerts to people or receive responses.'})]}),s.jsx(sr,{id:"mass-alert-toggle",checked:(e==null?void 0:e.enable_mass_alert_sending)!==!1,onCheckedChange:n=>t("enable_mass_alert_sending",n),disabled:r})]}),s.jsxs("div",{className:`flex items-center justify-between ${e!=null&&e.enable_mass_alert_sending?"":"opacity-60"}`,children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"vacancy-button-toggle",className:`text-base ${e!=null&&e.enable_mass_alert_sending?"":"text-muted-foreground"}`,children:"Show Vacancy Alert Subscription Buttons"}),s.jsx("div",{className:`text-sm ${e!=null&&e.enable_mass_alert_sending,"text-muted-foreground"}`,children:"Allow users to subscribe to vacancy alerts (requires Mass Alert System to be enabled)"})]}),s.jsx(sr,{id:"vacancy-button-toggle",checked:(e==null?void 0:e.show_vacancy_alert_buttons)!==!1,onCheckedChange:n=>t("show_vacancy_alert_buttons",n),disabled:r||!(e!=null&&e.enable_mass_alert_sending)})]})]})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Dashboard Display Settings"}),s.jsx("div",{className:"pl-4 space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"staffing-overview-toggle",className:"text-base",children:"Show Staffing Overview"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Display the Staffing Overview section on the dashboard for admin/supervisor users"})]}),s.jsx(sr,{id:"staffing-overview-toggle",checked:(e==null?void 0:e.show_staffing_overview)!==!1,onCheckedChange:n=>t("show_staffing_overview",n),disabled:r})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Tab Visibility Settings"}),s.jsx("div",{className:"pl-4 space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"pto-tab-toggle",className:"text-base",children:"Show PTO Tab"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"When enabled, all users can see and access the PTO tab. When disabled, the PTO tab is hidden from all users."})]}),s.jsx(sr,{id:"pto-tab-toggle",checked:(e==null?void 0:e.show_pto_tab)!==!1,onCheckedChange:n=>t("show_pto_tab",n),disabled:r})]})})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Automated Notifications"}),s.jsxs("div",{className:"pl-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"notifications-toggle",className:"text-base",children:"Enable All Automated Notifications"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Master switch for automated notifications (PTO requests, schedule changes, etc.)"})]}),s.jsx(sr,{id:"notifications-toggle",checked:(e==null?void 0:e.enable_notifications)||!1,onCheckedChange:n=>t("enable_notifications",n),disabled:r})]}),s.jsxs("div",{className:`flex items-center justify-between ${e!=null&&e.enable_notifications?"":"opacity-60"}`,children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"supervisor-pto-notifications-toggle",className:`text-base ${e!=null&&e.enable_notifications?"":"text-muted-foreground"}`,children:"Supervisor PTO Notifications"}),s.jsx("div",{className:`text-sm ${e!=null&&e.enable_notifications,"text-muted-foreground"}`,children:"Notify supervisors when other supervisors request PTO"})]}),s.jsx(sr,{id:"supervisor-pto-notifications-toggle",checked:(e==null?void 0:e.enable_supervisor_pto_notifications)!==!1,onCheckedChange:n=>t("enable_supervisor_pto_notifications",n),disabled:r||!(e!=null&&e.enable_notifications)})]}),!(e!=null&&e.enable_notifications)&&s.jsxs(vo,{className:"bg-gray-50 border-gray-200",children:[s.jsx(Ld,{className:"h-4 w-4 text-gray-600"}),s.jsx(yo,{className:"text-gray-700",children:"Automated notifications are currently disabled. Enable above to configure individual settings."})]}),s.jsxs("div",{className:`flex items-center justify-between ${e!=null&&e.enable_notifications?"":"opacity-60"}`,children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"vacancy-alerts-toggle",className:`text-base ${e!=null&&e.enable_notifications?"":"text-muted-foreground"}`,children:"Send Vacancy Alert Notifications"}),s.jsx("div",{className:`text-sm ${e!=null&&e.enable_notifications,"text-muted-foreground"}`,children:"Automatically send notifications when vacancies occur to subscribed users"})]}),s.jsx(sr,{id:"vacancy-alerts-toggle",checked:(e==null?void 0:e.enable_vacancy_alerts)!==!1,onCheckedChange:n=>t("enable_vacancy_alerts",n),disabled:r||!(e!=null&&e.enable_notifications)})]}),s.jsxs("div",{className:`flex items-center justify-between ${e!=null&&e.enable_notifications?"":"opacity-60"}`,children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"pto-request-notifications-toggle",className:`text-base ${e!=null&&e.enable_notifications?"":"text-muted-foreground"}`,children:"PTO Request Notifications"}),s.jsx("div",{className:`text-sm ${e!=null&&e.enable_notifications,"text-muted-foreground"}`,children:"Notify supervisors and admins when a new PTO request is submitted"})]}),s.jsx(sr,{id:"pto-request-notifications-toggle",checked:(e==null?void 0:e.enable_pto_request_notifications)!==!1,onCheckedChange:n=>t("enable_pto_request_notifications",n),disabled:r||!(e!=null&&e.enable_notifications)})]}),s.jsxs("div",{className:`flex items-center justify-between ${e!=null&&e.enable_notifications?"":"opacity-60"}`,children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"pto-status-notifications-toggle",className:`text-base ${e!=null&&e.enable_notifications?"":"text-muted-foreground"}`,children:"PTO Status Notifications"}),s.jsx("div",{className:`text-sm ${e!=null&&e.enable_notifications,"text-muted-foreground"}`,children:"Notify officers when their PTO request is approved or denied"})]}),s.jsx(sr,{id:"pto-status-notifications-toggle",checked:(e==null?void 0:e.enable_pto_status_notifications)!==!1,onCheckedChange:n=>t("enable_pto_status_notifications",n),disabled:r||!(e!=null&&e.enable_notifications)})]}),s.jsxs("div",{className:`flex items-center justify-between ${e!=null&&e.enable_notifications?"":"opacity-60"}`,children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"schedule-change-notifications-toggle",className:`text-base ${e!=null&&e.enable_notifications?"":"text-muted-foreground"}`,children:"Schedule Change Notifications"}),s.jsx("div",{className:`text-sm ${e!=null&&e.enable_notifications,"text-muted-foreground"}`,children:"Notify users when their schedule is updated"})]}),s.jsx(sr,{id:"schedule-change-notifications-toggle",checked:(e==null?void 0:e.enable_schedule_change_notifications)!==!1,onCheckedChange:n=>t("enable_schedule_change_notifications",n),disabled:r||!(e!=null&&e.enable_notifications)})]})]})]})]})]}),KC=({settings:e,handleToggle:t,isPending:r})=>s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsx(ar,{children:"PTO Settings"}),s.jsx(en,{children:"Manage PTO balance visibility and tracking"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"pto-toggle",className:"text-base",children:"Enable PTO Balances"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"When disabled, all PTO balance tracking is turned off and treated as indefinite"})]}),s.jsx(sr,{id:"pto-toggle",checked:(e==null?void 0:e.show_pto_balances)||!1,onCheckedChange:n=>t("show_pto_balances",n),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"pto-visibility-toggle",className:"text-base",children:"Show PTO Balances in Staff Profiles"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"When enabled, PTO balances will be visible in staff profiles (requires PTO Balances to be enabled)"})]}),s.jsx(sr,{id:"pto-visibility-toggle",checked:(e==null?void 0:e.pto_balances_visible)||!1,onCheckedChange:n=>t("pto_balances_visible",n),disabled:r||!(e!=null&&e.show_pto_balances)})]})]})]}),GC=({ptoVisibility:e,handlePtoVisibilityToggle:t,isPending:r})=>s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(Fd,{className:"h-5 w-5"}),"PTO Type Visibility"]}),s.jsx(en,{children:"Control which PTO types are displayed in the monthly calendar view"})]}),s.jsxs(gt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"vacation-pto-toggle",className:"text-base",children:"Show Vacation PTO"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Display vacation time off in the monthly calendar view"})]}),s.jsx(sr,{id:"vacation-pto-toggle",checked:(e==null?void 0:e.show_vacation_pto)||!1,onCheckedChange:n=>t("show_vacation_pto",n),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"holiday-pto-toggle",className:"text-base",children:"Show Holiday PTO"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Display holiday time off in the monthly calendar view"})]}),s.jsx(sr,{id:"holiday-pto-toggle",checked:(e==null?void 0:e.show_holiday_pto)||!1,onCheckedChange:n=>t("show_holiday_pto",n),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"sick-pto-toggle",className:"text-base",children:"Show Sick PTO"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Display sick time off in the monthly calendar view"})]}),s.jsx(sr,{id:"sick-pto-toggle",checked:(e==null?void 0:e.show_sick_pto)||!1,onCheckedChange:n=>t("show_sick_pto",n),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"comp-pto-toggle",className:"text-base",children:"Show Comp Time PTO"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Display comp time off in the monthly calendar view"})]}),s.jsx(sr,{id:"comp-pto-toggle",checked:(e==null?void 0:e.show_comp_pto)||!1,onCheckedChange:n=>t("show_comp_pto",n),disabled:r})]})]})]}),JC=e=>{if(!e)return console.warn("RGB string is undefined, returning default black"),"#000000";try{const t=e.split(",").map(r=>parseInt(r.trim()));return t.length!==3||t.some(isNaN)?(console.warn("Invalid RGB string:",e,"returning default black"),"#000000"):`#${t[0].toString(16).padStart(2,"0")}${t[1].toString(16).padStart(2,"0")}${t[2].toString(16).padStart(2,"0")}`}catch(t){return console.error("Error converting RGB to hex:",t,"rgb:",e),"#000000"}},qn=({label:e,value:t,onChange:r})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:e}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{type:"color",value:JC(t),onChange:n=>r(n.target.value),className:"w-12 h-10 p-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["RGB: ",t]}),s.jsx("div",{className:"text-sm",children:JC(t)})]})]})]}),Qne=({colorSettings:e,handleColorChange:t,isPending:r,settings:n,ptoVisibility:i,updateSettingsMutation:a,setColorSettings:o})=>{const l=()=>{const d={...e,...{schedule_supervisor_bg:"240,248,255",schedule_supervisor_text:"25,25,112",schedule_officer_bg:"248,249,250",schedule_officer_text:"33,37,41",schedule_special_bg:"243,229,245",schedule_special_text:"102,51,153",schedule_pto_bg:"230,255,242",schedule_pto_text:"0,100,0"}};o(d),a.mutate({id:n==null?void 0:n.id,color_settings:d,pto_type_visibility:i})};return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(lj,{className:"h-5 w-5"}),"Riding List - Schedule Section Colors"]}),s.jsx(en,{children:"Customize the background colors for different sections in daily schedule view"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:`rgb(${e.schedule_supervisor_bg})`}}),s.jsx(Ce,{className:"font-medium",children:"Supervisor Section"})]}),s.jsx(qn,{label:"Background Color",value:e.schedule_supervisor_bg,onChange:c=>t("schedule_supervisor_bg",c)}),s.jsx(qn,{label:"Text Color",value:e.schedule_supervisor_text,onChange:c=>t("schedule_supervisor_text",c)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:`rgb(${e.schedule_officer_bg})`}}),s.jsx(Ce,{className:"font-medium",children:"Officer Section"})]}),s.jsx(qn,{label:"Background Color",value:e.schedule_officer_bg,onChange:c=>t("schedule_officer_bg",c)}),s.jsx(qn,{label:"Text Color",value:e.schedule_officer_text,onChange:c=>t("schedule_officer_text",c)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:`rgb(${e.schedule_special_bg})`}}),s.jsx(Ce,{className:"font-medium",children:"Special Assignment Section"})]}),s.jsx(qn,{label:"Background Color",value:e.schedule_special_bg,onChange:c=>t("schedule_special_bg",c)}),s.jsx(qn,{label:"Text Color",value:e.schedule_special_text,onChange:c=>t("schedule_special_text",c)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:`rgb(${e.schedule_pto_bg})`}}),s.jsx(Ce,{className:"font-medium",children:"PTO Section"})]}),s.jsx(qn,{label:"Background Color",value:e.schedule_pto_bg,onChange:c=>t("schedule_pto_bg",c)}),s.jsx(qn,{label:"Text Color",value:e.schedule_pto_text,onChange:c=>t("schedule_pto_text",c)})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(Ne,{variant:"outline",onClick:l,disabled:r,children:"Reset Schedule Colors to Defaults"})})]})]})},$ne=({colorSettings:e,handleColorChange:t,resetToDefaults:r,isPending:n})=>s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(lj,{className:"h-5 w-5"}),"Color Customization"]}),s.jsx(en,{children:"Customize the colors used in PDF exports and weekly schedule display"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold",children:"PDF Export Colors"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(qn,{label:"Supervisor PTO Background",value:e.pdf_supervisor_pto_bg,onChange:i=>t("pdf_supervisor_pto_bg",i)}),s.jsx(qn,{label:"Officer PTO Background",value:e.pdf_officer_pto_bg,onChange:i=>t("pdf_officer_pto_bg",i)}),s.jsx(qn,{label:"Sick Time Background",value:e.pdf_sick_bg,onChange:i=>t("pdf_sick_bg",i)}),s.jsx(qn,{label:"Off Days Background",value:e.pdf_off_day_bg,onChange:i=>t("pdf_off_day_bg",i)})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold",children:"Weekly Schedule Colors"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(qn,{label:"Supervisor Rows Background",value:e.weekly_supervisor_bg,onChange:i=>t("weekly_supervisor_bg",i)}),s.jsx(qn,{label:"Officer Rows Background",value:e.weekly_officer_bg,onChange:i=>t("weekly_officer_bg",i)}),s.jsx(qn,{label:"PPO Rows Background",value:e.weekly_ppo_bg,onChange:i=>t("weekly_ppo_bg",i)}),s.jsx(qn,{label:"PTO Background",value:e.weekly_pto_bg,onChange:i=>t("weekly_pto_bg",i)})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold",children:"PTO Type Colors"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(qn,{label:"Vacation Background",value:e.pdf_vacation_bg,onChange:i=>t("pdf_vacation_bg",i)}),s.jsx(qn,{label:"Sick Time Background",value:e.pdf_sick_bg,onChange:i=>t("pdf_sick_bg",i)}),s.jsx(qn,{label:"Holiday Background",value:e.pdf_holiday_bg,onChange:i=>t("pdf_holiday_bg",i)}),s.jsx(qn,{label:"Comp Time Background",value:e.pdf_comp_bg,onChange:i=>t("pdf_comp_bg",i)})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(Ne,{variant:"outline",onClick:r,disabled:n,children:"Reset to Default Colors"})})]})]}),ese=()=>{const[e,t]=w.useState(""),[r,n]=w.useState(""),[i,a]=w.useState(""),{data:o,isLoading:l}=bt({queryKey:["all-officers-for-password-reset"],queryFn:async()=>{const{data:m,error:f}=await se.from("profiles").select("id, full_name, email, rank").order("full_name");if(f)throw f;return m||[]}}),c=(o==null?void 0:o.filter(m=>{var f,g,y;return((f=m.full_name)==null?void 0:f.toLowerCase().includes(i.toLowerCase()))||((g=m.email)==null?void 0:g.toLowerCase().includes(i.toLowerCase()))||((y=m.rank)==null?void 0:y.toLowerCase().includes(i.toLowerCase()))}))||[],d=Xt({mutationFn:async()=>{if(!e)throw new Error("Please select an officer");if(!r)throw new Error("Please enter a new password");if(r.length<6)throw new Error("Password must be at least 6 characters");const{data:{session:m}}=await se.auth.getSession();if(!m)throw new Error("You must be logged in to reset passwords");const f=await fetch("https://ywghefarrcwbnraqyfgk.supabase.co/functions/v1/update-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m.access_token}`},body:JSON.stringify({userId:e,newPassword:r})}),g=await f.json();if(!f.ok)throw new Error(g.error||"Failed to reset password");return await Ir.log({user_id:m.user.id,user_email:m.user.email,action_type:"password_reset",table_name:"auth.users",record_id:e,description:`Password reset for officer ${h==null?void 0:h.full_name} (${h==null?void 0:h.email})`}),g},onSuccess:()=>{ge.success("Password reset successfully"),n(""),t("")},onError:m=>{ge.error(m.message||"Failed to reset password")}}),u=()=>{d.mutate()},h=o==null?void 0:o.find(m=>m.id===e);return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(Ry,{className:"h-5 w-5"}),"Password Reset"]}),s.jsx(en,{children:"Reset passwords for officers and staff members"})]}),s.jsxs(gt,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"officer-search",children:"Search Officers"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(St,{id:"officer-search",placeholder:"Search by name, email, or rank...",value:i,onChange:m=>a(m.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"officer-select",children:"Select Officer"}),s.jsxs(Wt,{value:e,onValueChange:t,children:[s.jsx(Bt,{id:"officer-select",children:s.jsx(Vt,{placeholder:"Choose an officer to reset password"})}),s.jsx(qt,{children:l?s.jsxs("div",{className:"flex items-center justify-center py-2",children:[s.jsx(Ci,{className:"h-4 w-4 animate-spin mr-2"}),s.jsx("span",{children:"Loading officers..."})]}):c.length===0?s.jsx("div",{className:"text-center py-2 text-muted-foreground",children:"No officers found"}):c.map(m=>s.jsx(ct,{value:m.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:m.full_name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[m.email,"  ",m.rank]})]})},m.id))})]})]}),h&&s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Selected Officer:"}),s.jsx("p",{className:"text-sm",children:h.full_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:h.email}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Rank: ",h.rank]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"new-password",children:"New Password"}),s.jsx(St,{id:"new-password",type:"password",placeholder:"Enter new password",value:r,onChange:m=>n(m.target.value),disabled:!e}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters long"})]}),s.jsx(Ne,{onClick:u,disabled:!e||!r||d.isPending,className:"w-full",children:d.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"h-4 w-4 animate-spin mr-2"}),"Resetting Password..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ry,{className:"h-4 w-4 mr-2"}),"Reset Password"]})}),s.jsxs("div",{className:"p-3 border rounded-lg bg-amber-50 dark:bg-amber-950/20",children:[s.jsx("h4",{className:"font-medium text-sm text-amber-800 dark:text-amber-300",children:"Security Notice"}),s.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-1",children:[" Passwords are reset immediately after clicking the button",s.jsx("br",{})," The officer will need to use the new password on their next login",s.jsx("br",{})," Consider notifying the officer about the password change"]})]})]})]})};function UR(e,t,r,n,i){n=n||{};var a=1.15,o=i.internal.scaleFactor,l=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,d=l*c,u=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof e=="string"?e.split(u):e,m=h.length||1),r+=l*(2-a),n.valign==="middle"?r-=m/2*d:n.valign==="bottom"&&(r-=m*d),n.halign==="center"||n.halign==="right"){var f=l;if(n.halign==="center"&&(f*=.5),h&&m>=1){for(var g=0;g<h.length;g++)i.text(h[g],t-i.getStringUnitWidth(h[g])*f,r),r+=d;return i}t-=i.getStringUnitWidth(e)*f}return n.halign==="justify"?i.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(e,t,r),i}var ZC={},wh=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:ZC=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,i,a;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=e.unifyColor(t.lineColor),u&&(a=this.jsPDFDocument).setDrawColor.apply(a,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,i,a){return this.jsPDFDocument.rect(t,r,n,i,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return ZC||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Z2=function(e,t){return Z2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Z2(e,t)};function zR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Z2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var HR=function(e){zR(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function tse(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function rse(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function ax(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],i=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function WR(e,t,r,n){var i=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:a});var o=VR(i,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function VR(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function v0(e,t){var r,n,i,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function YR(e,t){var r=v0(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function nse(e,t,r,n,i){var a={},o=1.3333333333333333,l=Tw(t,function(b){return i.getComputedStyle(b).backgroundColor});l!=null&&(a.fillColor=l);var c=Tw(t,function(b){return i.getComputedStyle(b).color});c!=null&&(a.textColor=c);var d=ise(n,r);d&&(a.cellPadding=d);var u="borderTopColor",h=o*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var f=(parseFloat(m)||0)/h;f&&(a.lineWidth=f)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?u="borderRightColor":a.lineWidth.bottom?u="borderBottomColor":a.lineWidth.left&&(u="borderLeftColor"));var g=Tw(t,function(b){return i.getComputedStyle(b)[u]});g!=null&&(a.lineColor=g);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(a.fontSize=x/o);var p=sse(n);p&&(a.fontStyle=p);var v=(n.fontFamily||"").toLowerCase();return e.indexOf(v)!==-1&&(a.font=v),a}function sse(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Tw(e,t){var r=KR(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function KR(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:KR(e.parentElement,t):r}function ise(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(l){return parseInt(l||"0")/n}),o=v0(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function GR(e,t,r,n,i){var a,o;n===void 0&&(n=!1),i===void 0&&(i=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],m=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:m};for(var f=0;f<l.rows.length;f++){var g=l.rows[f],y=(o=(a=g==null?void 0:g.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),x=ase(c,d,r,g,n,i);x&&(y==="thead"?u.push(x):y==="tfoot"?m.push(x):h.push(x))}return{head:u,body:h,foot:m}}function ase(e,t,r,n,i,a){for(var o=new HR(n),l=0;l<n.cells.length;l++){var c=n.cells[l],d=r.getComputedStyle(c);if(i||d.display!=="none"){var u=void 0;a&&(u=nse(e,c,t,d,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:ose(c)})}}var h=r.getComputedStyle(n);if(o.length>0&&(i||h.display!=="none"))return o}function ose(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function lse(e,t,r){for(var n=0,i=[e,t,r];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function $o(e,t,r,n,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a}function JR(e,t){var r=new wh(e),n=r.getDocumentOptions(),i=r.getGlobalOptions();lse(i,n,t);var a=$o({},i,n,t),o;typeof window<"u"&&(o=window);var l=cse(i,n,t),c=dse(i,n,t),d=use(r,a),u=fse(r,a,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function cse(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],h=r[c];n.columnStyles=$o({},d,u,h)}else{var m=[e,t,r],f=m.map(function(g){return g[c]||{}});n[c]=$o({},f[0],f[1],f[2])}},a=0,o=Object.keys(n);a<o.length;a++){var l=o[a];i(l)}return n}function dse(e,t,r){for(var n=[e,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=n;a<o.length;a++){var l=o[a];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}function use(e,t){var r,n,i,a,o,l,c,d,u,h,m,f,g=v0(t.margin,40/e.scaleFactor()),y=(r=hse(e,t.startY))!==null&&r!==void 0?r:g.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var p;t.showHead===!0?p="everyPage":t.showHead===!1?p="never":p=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var v=(a=t.useCss)!==null&&a!==void 0?a:!1,b=t.theme||(v?"plain":"striped"),j=!!t.horizontalPageBreak,S=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:v,theme:b,startY:y,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:p,showFoot:x,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=t.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:j,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:(f=t.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function hse(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),i=e.pageNumber(),a=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;a=o===i}return typeof t=="number"?t:(t==null||t===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function fse(e,t,r){var n=t.head||[],i=t.body||[],a=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=GR(e,t.html,r,o,t.useCss)||{};n=l.head||n,i=l.body||n,a=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||mse(n,i,a);return{columns:c,head:n,body:i,foot:a}}function mse(e,t,r){var n=e[0]||t[0]||r[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,l;Array.isArray(n)?l=n[parseInt(a)]:l=n[a],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(n)?d=i.length:d=a+(c>0?"_".concat(c):"");var u={dataKey:d};i.push(u)}}),i}var X2=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),pse=function(e){zR(t,e);function t(r,n,i,a,o,l){var c=e.call(this,r,n,l)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return t}(X2),gse=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,i,a,o){for(var l=0,c=r;l<c.length;l++){var d=c[l],u=new pse(t,this,n,i,a,o),h=d(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new X2(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new X2(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),ZR=function(){function e(t,r,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof HR&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,i){var a;return Math.max(n,((a=r.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(i,a){var o=n.cells[a.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>i?d:i},0)},e}(),XR=function(){function e(t,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=v0(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),vse=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,i=t.allRows();n<i.length;n++){var a=i[n],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function yse(e,t){xse(e,t);var r=[],n=0;t.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(t);o?a.width=o:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var i=t.getWidth(e.pageSize().width)-n;i&&(i=Q2(r,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=Q2(r,i,function(a){return a.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),wse(t),Nse(t,e),bse(t)}function xse(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,i=YR(e,t);t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,a,c,null);var h=d.padding("horizontal");d.contentWidth=ax(d.text,d.styles,e)+h;var m=ax(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=m+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>i?(d.minWidth=i,d.wrappedWidth=i):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/r;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function Q2(e,t,r){for(var n=t,i=e.reduce(function(f,g){return f+g.wrappedWidth},0),a=0;a<e.length;a++){var o=e[a],l=o.wrappedWidth/i,c=n*l,d=o.width+c,u=r(o),h=d<u?u:d;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var m=e.filter(function(f){return t<0?f.width>r(f):!0});m.length&&(t=Q2(m,t,r))}return t}function bse(e){for(var t={},r=1,n=e.allRows(),i=0;i<n.length;i++)for(var a=n[i],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(r>1)r--,delete a.cells[c.index];else if(d)d.cell.height+=a.height,r=d.cell.colSpan,delete a.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=a.cells[c.index];if(!u)continue;if(u.height=a.height,u.rowSpan>1){var h=n.length-i,m=u.rowSpan>h?h:u.rowSpan;t[c.index]={cell:u,left:m,row:a}}}}}function wse(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],i=null,a=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])a+=c.width,delete n.cells[c.index];else if(i){var d=i;delete n.cells[c.index],i=null,d.width=c.width+a}else{var d=n.cells[c.index];if(!d)continue;if(o=d.colSpan,a=0,d.colSpan>1){i=d,a+=c.width;continue}d.width=c.width+a}}}function Nse(e,t){for(var r={count:0,height:0},n=0,i=e.allRows();n<i.length;n++){for(var a=i[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=XC(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=XC(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<m*d.rowSpan?r={height:m,count:d.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>a.height&&(a.height=m)}}r.count--}}function XC(e,t,r,n,i){return e.map(function(a){return jse(a,t,r,n,i)})}function jse(e,t,r,n,i){var a=1e4*n.scaleFactor();if(t=Math.ceil(t*a)/a,t>=ax(e,r,n))return e;for(;t<ax(e+i,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function QR(e,t){var r=new wh(e),n=_se(t,r.scaleFactor()),i=new gse(t,n);return yse(r,i),r.applyStyles(r.userStyles),i}function _se(e,t){var r=e.content,n=Pse(r.columns);if(r.head.length===0){var i=QC(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=QC(n,"foot");i&&r.foot.push(i)}var a=e.settings.theme,o=e.styles;return{columns:n,head:Ow("head",r.head,n,o,a,t),body:Ow("body",r.body,n,o,a,t),foot:Ow("foot",r.foot,n,o,a,t)}}function Ow(e,t,r,n,i,a){var o={},l=t.map(function(c,d){for(var u=0,h={},m=0,f=0,g=0,y=r;g<y.length;g++){var x=y[g];if(o[x.index]==null||o[x.index].left===0)if(f===0){var p=void 0;Array.isArray(c)?p=c[x.index-m-u]:p=c[x.dataKey];var v={};typeof p=="object"&&!Array.isArray(p)&&(v=(p==null?void 0:p.styles)||{});var b=kse(e,x,d,i,n,a,v),j=new XR(p,b,e);h[x.dataKey]=j,h[x.index]=j,f=j.colSpan-1,o[x.index]={left:j.rowSpan-1,times:f}}else f--,m++;else o[x.index].left--,f=o[x.index].times,u++}return new ZR(c,d,e,h)});return l}function QC(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var i=Sse(t,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function Sse(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Pse(e){return e.map(function(t,r){var n,i;return typeof t=="object"?i=(n=t.dataKey)!==null&&n!==void 0?n:r:i=r,new vse(i,t,r)})}function kse(e,t,r,n,i,a,o){var l=rse(n),c;e==="head"?c=i.headStyles:e==="body"?c=i.bodyStyles:e==="foot"&&(c=i.footStyles);var d=$o({},l.table,l[e],i.styles,c),u=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},h=e==="body"?u:{},m=e==="body"&&r%2===0?$o({},l.alternateRow,i.alternateRowStyles):{},f=tse(a),g=$o({},f,d,m,h);return $o(g,o)}function Cse(e,t,r){var n;r===void 0&&(r={});var i=YR(e,t),a=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var f=t.columns.find(function(g){return g.dataKey===m||g.index===m});f&&!a.has(f.index)&&(a.set(f.index,!0),o.push(f.index),l.push(t.columns[f.index]),i-=f.wrappedWidth)});for(var d=!0,u=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(a.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(d||i>=h)d=!1,o.push(u),l.push(t.columns[u]),i-=h;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function Tse(e,t){for(var r=[],n=0;n<t.columns.length;n++){var i=Cse(e,t,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function $R(e,t){var r=t.settings,n=r.startY,i=r.margin,a={x:i.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+i.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(m,f){return m+f.height},0);l+=d}var u=new wh(e);(r.pageBreak==="always"||r.startY!=null&&l>u.pageSize().height)&&(tI(u),a.y=i.top),t.callWillDrawPageHooks(u,a);var h=$o({},a);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?Ose(u,t,h,a):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(m){return ul(u,t,m,a,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(m,f){var g=f===t.body.length-1;ox(u,t,m,g,h,a,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(m){return ul(u,t,m,a,t.columns)})),WR(u,t,h,a),t.callEndPageHooks(u,a),t.finalY=a.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function Ose(e,t,r,n){var i=Tse(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?Hm(e,t,r,n,d.columns,!0):$C(e,t,n,d.columns),Ese(e,t,r,n,d.columns),Ew(e,t,n,d.columns)});else for(var o=-1,l=i[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?Hm(e,t,r,n,u,!0):$C(e,t,n,u),d=e4(e,t,o+1,n,u),Ew(e,t,n,u)}var h=d-o;i.slice(1).forEach(function(m){e.applyStyles(e.userStyles),Hm(e,t,r,n,m.columns,!0),e4(e,t,o+1,n,m.columns,h),Ew(e,t,n,m.columns)}),o=d};o<t.body.length-1;)c()}function $C(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(a){return ul(e,t,a,r,n)})}function Ese(e,t,r,n,i){e.applyStyles(e.userStyles),t.body.forEach(function(a,o){var l=o===t.body.length-1;ox(e,t,a,l,r,n,i)})}function e4(e,t,r,n,i,a){e.applyStyles(e.userStyles),a=a??t.body.length;var o=Math.min(r+a,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,d){var u=r+d===t.body.length-1,h=eI(e,t,u,n);c.canEntireRowFit(h,i)&&(ul(e,t,c,n,i),l=r+d)}),l}function Ew(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(a){return ul(e,t,a,r,n)})}function Ase(e,t,r){var n=r.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),a=Math.floor((t-i)/n);return Math.max(0,a)}function Dse(e,t,r,n){var i={};e.spansMultiplePages=!0,e.height=0;for(var a=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new XR(d.raw,d.styles,d.section);u=$o(u,d),u.text=[];var h=Ase(d,t,n);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var m=n.scaleFactor(),f=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(m,f),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(m,f),u.contentHeight>a&&(a=u.contentHeight),i[c.index]=u}}var g=new ZR(e.raw,-1,e.section,i,!0);g.height=a;for(var y=0,x=r.columns;y<x.length;y++){var c=x[y],u=g.cells[c.index];u&&(u.height=g.height);var d=e.cells[c.index];d&&(d.height=e.height)}return g}function Mse(e,t,r,n){var i=e.pageSize().height,a=n.settings.margin,o=a.top+a.bottom,l=i-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),d=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(n.columns),h=t.getMaxCellHeight(n.columns)>l;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function ox(e,t,r,n,i,a,o){var l=eI(e,t,n,a);if(r.canEntireRowFit(l,o))ul(e,t,r,a,o);else if(Mse(e,r,l,t)){var c=Dse(r,l,t,e);ul(e,t,r,a,o),Hm(e,t,i,a,o),ox(e,t,c,n,i,a,o)}else Hm(e,t,i,a,o),ox(e,t,r,n,i,a,o)}function ul(e,t,r,n,i){n.x=t.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var l=o[a],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(d===!1){n.x+=l.width;continue}Rse(e,c,n);var u=c.getTextPos();UR(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Rse(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=VR(n.lineWidth,n.fillColor);i&&e.rect(t.x,r.y,t.width,t.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Ise(e,t,r,n.lineWidth))}function Ise(e,t,r,n){var i,a,o,l;n.top&&(i=r.x,a=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,a,o,l)),n.bottom&&(i=r.x,a=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,a,o,l)),n.left&&(i=r.x,a=r.y,o=r.x,l=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,i,a,o,l)),n.right&&(i=r.x+t.width,a=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,i,a,o,l));function c(d,u,h,m,f){e.getDocument().setLineWidth(d),e.getDocument().line(u,h,m,f,"S")}}function eI(e,t,r,n){var i=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-i}function Hm(e,t,r,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(l){return ul(e,t,l,n,i)}),t.callEndPageHooks(e,n);var o=t.settings.margin;WR(e,t,r,n),tI(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return ul(e,t,l,n,i)}),e.applyStyles(e.userStyles))}function tI(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Lse(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=JR(this,n),a=QR(this,i);return $R(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,i){UR(t,r,n,i,this)},e.API.autoTableSetDefaults=function(t){return wh.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){wh.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new wh(this),a=GR(i,t,window,r,!1),o=a.head,l=a.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var Aw;function Fse(e,t){var r=JR(e,t),n=QR(e,r);$R(e,n)}try{if(typeof window<"u"&&window){var t4=window,r4=t4.jsPDF||((Aw=t4.jspdf)===null||Aw===void 0?void 0:Aw.jsPDF);r4&&Lse(r4)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Bse=async(e,t,r="audit-report.pdf")=>{try{const n=new Tt;n.setFontSize(20),n.text("AUDIT REPORT",105,15,{align:"center"}),n.setFontSize(10),n.text(`Date Range: ${t.startDate.toLocaleDateString()} to ${t.endDate.toLocaleDateString()}`,14,25);let i="Filters: ";t.actionTypes.length>0&&(i+=`Actions: ${t.actionTypes.join(", ")} `),t.users.length>0&&(i+=`Users: ${t.users.join(", ")} `),t.tables.length>0&&(i+=`Tables: ${t.tables.join(", ")}`),n.text(i,14,32),n.text(`Generated: ${new Date().toLocaleString()}`,14,39);const a=e.map(d=>[new Date(d.created_at).toLocaleString(),d.user_email,d.action_type,d.table_name||"N/A",d.description,d.ip_address||"N/A"]);n.autoTable({startY:45,head:[["Timestamp","User","Action","Table","Description","IP Address"]],body:a,theme:"grid",styles:{fontSize:8},headStyles:{fillColor:[41,128,185]},columnStyles:{0:{cellWidth:25},1:{cellWidth:25},2:{cellWidth:20},3:{cellWidth:15},4:{cellWidth:60},5:{cellWidth:20}}});const o=n.lastAutoTable.finalY+10;n.setFontSize(12),n.text("SUMMARY",14,o),n.setFontSize(10);const l=e.reduce((d,u)=>(d[u.action_type]=(d[u.action_type]||0)+1,d),{});let c=o+8;return Object.entries(l).forEach(([d,u])=>{n.text(`${d}: ${u} events`,20,c),c+=5}),n.text(`Total Events: ${e.length}`,20,c+5),n.save(r),!0}catch(n){return console.error("Error generating audit PDF:",n),!1}},qse=()=>{const[e,t]=w.useState({from:po(new Date,2),to:new Date}),[r,n]=w.useState([]),[i,a]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),{data:u,isLoading:h}=bt({queryKey:["audit-logs",e,r,i,o],queryFn:async()=>{let x=se.from("audit_logs").select("*").gte("created_at",e.from.toISOString()).lte("created_at",e.to.toISOString()).order("created_at",{ascending:!1});r.length>0&&(x=x.in("action_type",r)),i.length>0&&(x=x.in("user_email",i)),o.length>0&&(x=x.in("table_name",o));const{data:p,error:v}=await x;if(v)throw console.error("Error fetching audit logs:",v),v;return p}}),{data:m}=bt({queryKey:["audit-distinct-values"],queryFn:async()=>{const{data:x}=await se.from("audit_logs").select("action_type").not("action_type","is",null),{data:p}=await se.from("audit_logs").select("user_email").not("user_email","is",null),{data:v}=await se.from("audit_logs").select("table_name").not("table_name","is",null);return{actionTypes:[...new Set((x==null?void 0:x.map(b=>b.action_type))||[])],users:[...new Set((p==null?void 0:p.map(b=>b.user_email))||[])],tables:[...new Set((v==null?void 0:v.map(b=>b.table_name))||[])]}}}),f=(u==null?void 0:u.filter(x=>x.description.toLowerCase().includes(c.toLowerCase())||x.user_email.toLowerCase().includes(c.toLowerCase())||x.action_type.toLowerCase().includes(c.toLowerCase())))||[],g=async()=>{if(!f.length){ge.error("No audit data to export");return}try{await Bse(f,{startDate:e.from,endDate:e.to,actionTypes:r,users:i,tables:o},`audit-report-${new Date().toISOString().split("T")[0]}.pdf`)?ge.success("Audit report exported successfully"):ge.error("Failed to export audit report")}catch{ge.error("Error exporting audit report")}},y=()=>{n([]),a([]),l([]),d(""),t({from:po(new Date,2),to:new Date})};return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(Fd,{className:"h-5 w-5"}),"Audit Logs"]}),s.jsx(en,{children:"View and export system activity and changes"})]}),s.jsxs(gt,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Date Range"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!e&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),e!=null&&e.from?e.to?s.jsxs(s.Fragment,{children:[Pe(e.from,"LLL dd, y")," -"," ",Pe(e.to,"LLL dd, y")]}):Pe(e.from,"LLL dd, y"):s.jsx("span",{children:"Pick a date range"})]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{initialFocus:!0,mode:"range",defaultMonth:e==null?void 0:e.from,selected:e,onSelect:x=>t(x),numberOfMonths:2})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Action Type"}),s.jsxs(Wt,{value:"",onValueChange:x=>{x&&!r.includes(x)&&n([...r,x])},children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Filter by action"})}),s.jsx(qt,{children:m==null?void 0:m.actionTypes.map(x=>s.jsx(ct,{value:x,children:x},x))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(x=>s.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[x,s.jsx("button",{onClick:()=>n(r.filter(p=>p!==x)),className:"hover:text-destructive",children:""})]},x))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"User"}),s.jsxs(Wt,{value:"",onValueChange:x=>{x&&!i.includes(x)&&a([...i,x])},children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Filter by user"})}),s.jsx(qt,{children:m==null?void 0:m.users.map(x=>s.jsx(ct,{value:x,children:x},x))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:i.map(x=>s.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[x,s.jsx("button",{onClick:()=>a(i.filter(p=>p!==x)),className:"hover:text-destructive",children:""})]},x))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bd,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search logs...",value:c,onChange:x=>d(x.target.value),className:"pl-8"})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ne,{onClick:g,disabled:!f.length,children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),s.jsxs(Ne,{variant:"outline",onClick:y,children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),s.jsxs(Re,{variant:"secondary",children:[f.length," events"]})]}),s.jsx("div",{className:"border rounded-lg",children:s.jsx("div",{className:"max-h-96 overflow-auto",children:h?s.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading audit logs..."}):f.length===0?s.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No audit logs found for the selected filters"}):s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-muted/50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Timestamp"}),s.jsx("th",{className:"p-2 text-left",children:"User"}),s.jsx("th",{className:"p-2 text-left",children:"Action"}),s.jsx("th",{className:"p-2 text-left",children:"Description"}),s.jsx("th",{className:"p-2 text-left",children:"IP Address"})]})}),s.jsx("tbody",{children:f.map(x=>s.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[s.jsx("td",{className:"p-2",children:Pe(new Date(x.created_at),"MMM dd, yyyy HH:mm")}),s.jsx("td",{className:"p-2 font-medium",children:x.user_email}),s.jsx("td",{className:"p-2",children:s.jsx(Re,{variant:"outline",children:x.action_type})}),s.jsx("td",{className:"p-2",children:x.description}),s.jsx("td",{className:"p-2 text-muted-foreground",children:x.ip_address||"N/A"})]},x.id))})]})})})]})]})},Sp=e=>{if(!e)return 0;const t=e.split(":").map(Number),r=t[0],n=t[1]||0;return r*60+n},n4=e=>{const t=Sp(e),r=Math.floor(t/60),n=t%60,i=r>=12?"PM":"AM";return`${r%12||12}:${n.toString().padStart(2,"0")} ${i}`},rI=e=>{if(!e)return!1;const t=new Date,r=t.getHours()*60+t.getMinutes(),n=Sp(e.start_time),i=Sp(e.end_time);return e.crosses_midnight||i<n?r>=n||r<i:r>=n&&r<i},Use=e=>{const t=[];return e==null||e.forEach(r=>{rI(r)&&t.push(r.name)}),t};var $2={};const zse=async e=>{try{if(!("serviceWorker"in navigator)||!("PushManager"in window))return console.warn("Push notifications not supported"),!1;const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered");const r=await Notification.requestPermission();if(r!=="granted")return console.log("Notification permission denied:",r),!1;const n=$2.NEXT_PUBLIC_VAPID_PUBLIC_KEY;if(!n)return console.error("VAPID public key not configured"),!1;const i=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vse(n)}),{error:a}=await se.from("user_push_subscriptions").upsert({user_id:e,subscription:JSON.stringify(i),enabled:!0},{onConflict:"user_id,subscription"});return a?(console.error("Error saving subscription:",a),!1):(console.log("Push notification subscription saved"),!0)}catch(t){return console.error("Error subscribing to push notifications:",t),!1}},Hse=async e=>{try{const{error:t}=await se.from("user_push_subscriptions").update({enabled:!1}).eq("user_id",e);if(t){console.error("Error unsubscribing:",t);return}const n=await(await navigator.serviceWorker.ready).pushManager.getSubscription();n&&await n.unsubscribe(),console.log("Unsubscribed from push notifications")}catch(t){console.error("Error unsubscribing from push notifications:",t)}},O5=async(e,t,r,n="info",i)=>{try{const a=Array.isArray(e)?e:[e],o=await fetch(`${$2.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/send-push-notification`,{method:"POST",headers:{Authorization:`Bearer ${$2.NEXT_PUBLIC_SUPABASE_ANON_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({userIds:a,title:t,body:r,alertType:n,data:i})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(a){return console.error("Error sending push notification:",a),{success:!1}}},s4=async(e,t,r="info",n)=>{try{const{data:i,error:a}=await se.from("user_push_subscriptions").select("user_id").eq("enabled",!0);if(a)return console.error("Error fetching users:",a),{success:!1};if(!i||i.length===0)return console.log("No users with push notifications enabled"),{success:!1,results:{total:0,successful:0,failed:0}};const o=i.map(l=>l.user_id);return await O5(o,e,t,r,n)}catch(i){return console.error("Error sending to all:",i),{success:!1}}},Wse=async(e,t,r,n="info",i)=>{try{const{data:a,error:o}=await se.from("user_roles").select("user_id").eq("role",e);if(o)return console.error(`Error fetching ${e}s:`,o),{success:!1};if(!a||a.length===0)return console.log(`No ${e}s found`),{success:!1,results:{total:0,successful:0,failed:0}};const l=a.map(u=>u.user_id),{data:c}=await se.from("user_push_subscriptions").select("user_id").in("user_id",l).eq("enabled",!0);if(!c||c.length===0)return console.log(`No ${e}s with push notifications enabled`),{success:!1,results:{total:0,successful:0,failed:0}};const d=c.map(u=>u.user_id);return await O5(d,t,r,n,i)}catch(a){return console.error(`Error sending to ${e}s:`,a),{success:!1}}},Vse=e=>{const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),i=new Uint8Array(n.length);for(let a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i},vd=class vd{constructor(){}static getInstance(){return vd.instance||(vd.instance=new vd),vd.instance}async sendAlertToAll(t,r,n="info"){var i;try{console.log(` Sending alert to ALL users: ${t}`);const a=await s4(t,r,n),{data:o}=await se.from("profiles").select("id").eq("active",!0);if(o&&o.length>0){const c=o.map(u=>u.id).map(u=>({user_id:u,title:t,message:r,type:"alert",alert_type:n,is_read:!1,created_at:new Date().toISOString(),metadata:{alertType:n}})),{error:d}=await se.from("notifications").insert(c);d&&console.error("Error creating in-app notifications:",d)}ge.success(`Alert sent to all users (${((i=a.results)==null?void 0:i.successful)||0} via push)`)}catch(a){console.error("Error sending alert to all:",a),ge.error("Failed to send alert")}}async sendAlertToRole(t,r,n,i="info"){var a;try{console.log(` Sending alert to ${t}s: ${r}`);const o=await Wse(t,r,n,i),{data:l}=await se.from("user_roles").select("user_id").eq("role",t);if(l&&l.length>0){const d=l.map(h=>h.user_id).map(h=>({user_id:h,title:r,message:n,type:"alert",alert_type:i,is_read:!1,created_at:new Date().toISOString(),metadata:{alertType:i,role:t}})),{error:u}=await se.from("notifications").insert(d);u&&console.error("Error creating in-app notifications:",u)}ge.success(`Alert sent to ${t}s (${((a=o.results)==null?void 0:a.successful)||0} via push)`)}catch(o){console.error(`Error sending alert to ${t}s:`,o),ge.error(`Failed to send alert to ${t}s`)}}async sendAlertToUsers(t,r,n,i="info"){var a;try{const o=Array.isArray(t)?t:[t];console.log(` Sending alert to ${o.length} users: ${r}`);const l=await O5(o,r,n,i),c=o.map(u=>({user_id:u,title:r,message:n,type:"alert",alert_type:i,is_read:!1,created_at:new Date().toISOString(),metadata:{alertType:i}})),{error:d}=await se.from("notifications").insert(c);d&&console.error("Error creating in-app notifications:",d),ge.success(`Alert sent to ${o.length} users (${((a=l.results)==null?void 0:a.successful)||0} via push)`)}catch(o){console.error("Error sending alert to users:",o),ge.error("Failed to send alert")}}async sendEmergencyAlert(t,r){var n,i;try{console.log(` Sending EMERGENCY alert: ${t}`);const a=await s4(` EMERGENCY: ${t}`,r,"emergency",{priority:"high",sound:"default"}),{data:o}=await se.from("profiles").select("id").eq("active",!0);if(o&&o.length>0){const l=o.map(c=>({user_id:c.id,title:` EMERGENCY: ${t}`,message:r,type:"emergency",alert_type:"critical",is_read:!1,created_at:new Date().toISOString(),metadata:{emergency:!0,timestamp:new Date().toISOString()}}));await se.from("notifications").insert(l)}console.log(` Emergency alert sent: ${((n=a.results)==null?void 0:n.successful)||0} via push`),ge.success(`Emergency alert sent (${((i=a.results)==null?void 0:i.successful)||0} via push)`)}catch(a){console.error("Error sending emergency alert:",a),ge.error("Failed to send emergency alert")}}async sendPTORequestNotification(t,r,n){var i;try{console.log(` Sending PTO notification for request ${t}, action: ${n}`);const{data:a,error:o}=await se.from("time_off_requests").select(`
          *,
          profiles!time_off_requests_officer_id_fkey(full_name, badge_number)
        `).eq("id",t).single();if(o){console.error("Error fetching PTO request:",o);return}if(n==="created"){const l=`${(i=a.profiles)==null?void 0:i.full_name} has submitted a ${a.pto_type} time off request`;await cR("New PTO Request Submitted",l,"pto_request",t),ge.success("PTO request submitted. Supervisors have been notified.")}else if(n==="approved"||n==="denied"){const l=n==="approved"?`Your ${a.pto_type} time off request has been approved`:`Your ${a.pto_type} time off request has been denied`;await this.sendAlertToUsers(a.officer_id,`PTO Request ${n==="approved"?"Approved":"Denied"}`,l,"info"),ge.success(`Officer has been notified of the ${n} status`)}}catch(a){console.error("Error in sendPTORequestNotification:",a),ge.error("Failed to send notification")}}async sendShiftChangeAlert(t,r,n,i){const a=`Your shift on ${new Date(i).toLocaleDateString()} has been changed from ${r} to ${n}`;await this.sendAlertToUsers(t,"Shift Change Notification",a,"warning")}async sendVacancyAlert(t,r,n){const i=`New vacancy posted for ${t} on ${new Date(r).toLocaleDateString()} (${n})`;await this.sendAlertToRole("supervisor","New Vacancy Posted",i,"info")}async getUserNotificationSettings(t){try{const{data:r}=await se.from("profiles").select("notification_settings").eq("id",t).single();return(r==null?void 0:r.notification_settings)||{push_enabled:!1,in_app_enabled:!0,email_enabled:!1,preferences:{pto_alerts:!0,shift_alerts:!0,emergency_alerts:!0,schedule_changes:!0,vacancy_alerts:!0}}}catch(r){return console.error("Error fetching notification settings:",r),{push_enabled:!1,in_app_enabled:!0,email_enabled:!1,preferences:{pto_alerts:!0,shift_alerts:!0,emergency_alerts:!0,schedule_changes:!0,vacancy_alerts:!0}}}}async updateUserNotificationSettings(t,r){try{const n=await this.getUserNotificationSettings(t),i={...n,...r,preferences:{...n.preferences,...r.preferences},updated_at:new Date().toISOString()},{error:a}=await se.from("profiles").update({notification_settings:i,notifications_enabled:i.push_enabled||i.in_app_enabled||i.email_enabled}).eq("id",t);if(a)throw console.error("Error updating notification settings:",a),a;console.log("Notification settings updated for user:",t),r.push_enabled===!0?await zse(t):r.push_enabled===!1&&await Hse(t)}catch(n){throw console.error("Error updating notification settings:",n),n}}async sendTestNotification(t){try{await this.sendAlertToUsers(t,"Test Notification","This is a test notification to verify the system is working correctly.","info"),ge.success("Test notification sent!")}catch(r){console.error("Error sending test notification:",r),ge.error("Failed to send test notification")}}};fr(vd,"instance");let eN=vd;const Yse=eN.getInstance(),Kse=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(""),[i,a]=w.useState([]),[o,l]=w.useState(!1),[c,d]=w.useState("both"),[u,h]=w.useState(!0),[m,f]=w.useState("info"),[g,y]=w.useState(!0),{data:x}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:k,error:E}=await se.from("shift_types").select("id, name, start_time, end_time, crosses_midnight").order("name",{ascending:!0});return E?(console.error("Error fetching shift types:",E),[]):k}}),p=new Date().toISOString().split("T")[0],v=new Date().getDay(),{data:b,isLoading:j}=bt({queryKey:["officers-active-schedules",p,u],queryFn:async()=>{console.log(" Fetching officers with active schedules...");try{const{data:k,error:E}=await se.from("profiles").select("id, full_name, badge_number, phone, email, push_subscription, notification_preferences").eq("active",!0).order("full_name",{ascending:!0});if(E)return console.error(" Error fetching officers:",E),[];console.log(` Found ${(k==null?void 0:k.length)||0} active officers`);const A=await Promise.all(k.map(async C=>{var F,X,re;try{let z=se.from("recurring_schedules").select(`
                  shift_type_id,
                  start_date,
                  end_date,
                  day_of_week,
                  shift_types!inner(id, name, start_time, end_time, crosses_midnight)
                `).eq("officer_id",C.id).eq("is_active",!0).lte("start_date",p).or(`end_date.is.null,end_date.gte.${p}`).order("created_at",{ascending:!1}).limit(1);u||(z=z.eq("day_of_week",v));const{data:Y}=await z;if(Y&&Y.length>0){const J=Y[0],ne=J.shift_types;if(ne){const le=rI(ne);return{...C,current_shift:{id:ne.id,name:ne.name,is_active_now:le,schedule_type:u?"period":"specific_day"},shift_details:ne,schedule_info:{start_date:J.start_date,end_date:J.end_date,day_of_week:J.day_of_week},has_push:!!C.push_subscription&&((F=C.notification_preferences)==null?void 0:F.push_enabled)!==!1}}}return{...C,current_shift:null,schedule_info:null,has_push:!!C.push_subscription&&((X=C.notification_preferences)==null?void 0:X.push_enabled)!==!1}}catch(z){return console.error(` Error processing ${C.full_name}:`,z),{...C,current_shift:null,schedule_info:null,has_push:!!C.push_subscription&&((re=C.notification_preferences)==null?void 0:re.push_enabled)!==!1}}})),q=A.filter(C=>C.current_shift).length,U=A.filter(C=>{var F;return(F=C.current_shift)==null?void 0:F.is_active_now}).length,R=A.filter(C=>C.has_push).length;return console.log(` Results: ${q} with schedules, ${U} on shift, ${R} with push`),A}catch(k){return console.error(" Error fetching officers:",k),[]}},enabled:!!x});w.useEffect(()=>{if(x&&x.length>0&&i.length===0){const k=x.map(E=>E.name);a(k)}},[x]);const S=Use(x||[]),P=(b==null?void 0:b.filter(k=>k.current_shift?i.includes(k.current_shift.name):!1))||[],M=P.filter(k=>k.has_push).length,I=P.length-M,O=k=>{i.includes(k)?a(i.filter(E=>E!==k)):a([...i,k])},L=async()=>{var k;if(!r.trim()){ge.error("Please enter a message");return}if(P.length===0){ge.error("No officers match the selected shifts");return}l(!0),console.log(` Starting to send alert to ${P.length} officers...`);try{let E=0,A=0,q=0;const U=`${m==="critical"?" CRITICAL: ":m==="warning"?" WARNING: ":""}Department Alert`,R=P.map(F=>F.id);if(g&&M>0&&(c==="push"||c==="both"))try{const F=m==="critical"?"critical":m==="warning"?"warning":"info";await Yse.sendAlertToUsers(R,U,r,F),A=M}catch(F){console.error("Error sending push notifications:",F)}if(c==="in_app"||c==="both"){const F=P.map(z=>({user_id:z.id,title:U,message:r,type:"manual_alert",alert_type:m,is_read:!1,created_at:new Date().toISOString()})),{error:X,count:re}=await se.from("notifications").insert(F,{count:"exact"});X?(console.error(" Failed to create in-app notifications:",X),q+=P.length):E=re||P.length}const{data:C}=await se.auth.getUser();await se.from("audit_logs").insert({user_email:(k=C.user)==null?void 0:k.email,action_type:"manual_alert_sent",table_name:"notifications",description:`Sent ${m} alert to ${P.length} officers on shifts: ${i.join(", ")}. Push: ${A} sent, In-app: ${E}.`}),ge.success(`Alert sent! In-app: ${E}, Push: ${A}, Failed: ${q}`,{duration:5e3,action:{label:"Details",onClick:()=>{ge.info(`Total: ${P.length} officers
With push: ${M}
Without push: ${I}
Shifts: ${i.join(", ")}`)}}}),t(!1),n("")}catch(E){console.error(" Error sending manual alert:",E),ge.error("Failed to send alert")}finally{l(!1)}},T=k=>{switch(k){case"critical":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-amber-100 text-amber-800 border-amber-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}};return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"h-5 w-5"}),"Manual Alert System"]}),s.jsx(en,{children:"Send alerts to officers based on their assigned shifts. Now with push notifications!"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 border rounded-lg bg-blue-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ce,{className:"font-medium text-blue-800",children:"Schedule Filtering"}),s.jsx("p",{className:"text-sm text-blue-700",children:u?"Include all officers with active schedules (any day of week)":"Only officers scheduled for today's specific day of week"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Day of Week"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u,onChange:k=>h(k.target.checked)}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsx("span",{className:"text-sm text-gray-600",children:"Active Period"})]})]})}),s.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-800",children:"Current Status"}),s.jsxs("p",{className:"text-sm text-green-700",children:[new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),s.jsx("br",{}),new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Active shifts: ",S.length>0?S.join(", "):"None"]})})]})}),s.jsxs("div",{children:[s.jsx(Ce,{className:"text-base mb-2 block",children:"Alert Type"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["info","warning","critical"].map(k=>s.jsxs(Ne,{type:"button",variant:m===k?"default":"outline",onClick:()=>f(k),className:`flex-1 min-w-[100px] ${k==="critical"?"hover:bg-red-100":k==="warning"?"hover:bg-amber-100":"hover:bg-blue-100"}`,children:[k==="critical"&&" ",k==="warning"&&" ",k.charAt(0).toUpperCase()+k.slice(1)]},k))})]}),s.jsxs("div",{children:[s.jsx(Ce,{className:"text-base mb-2 block",children:"Shift Schedule"}),s.jsx("div",{className:"space-y-2 text-sm",children:x==null?void 0:x.map(k=>{const E=n4(k.start_time),A=n4(k.end_time),q=k.crosses_midnight||Sp(k.end_time)<Sp(k.start_time),U=S.includes(k.name);return s.jsxs("div",{className:`flex justify-between items-center p-2 rounded ${U?"bg-green-100 border border-green-200":"bg-gray-50"}`,children:[s.jsx("span",{className:"font-medium",children:k.name}),s.jsxs("span",{children:[E," - ",A,q&&" "]}),U&&s.jsx("span",{className:"text-green-600 font-bold text-xs",children:"ACTIVE"})]},k.id)})})]}),s.jsxs("div",{children:[s.jsx(Ce,{className:"text-base mb-2 block",children:"Filter by Shift"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:x==null?void 0:x.map(k=>s.jsx(Ne,{type:"button",variant:i.includes(k.name)?"default":"outline",onClick:()=>O(k.name),className:"flex-1 min-w-[100px]",children:k.name},k.id))})]}),s.jsx("div",{className:"bg-muted p-4 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Officers:"}),s.jsx("div",{className:"text-2xl font-bold mt-1",children:j?"...":P.length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Push Enabled:"}),s.jsxs("div",{className:"text-2xl font-bold mt-1",children:[j?"...":M,s.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",Math.round(M/P.length*100)||0,"%)"]})]})]})]})}),s.jsxs("div",{children:[s.jsx(Ce,{className:"text-base mb-2 block",children:"Send Method"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(Ne,{type:"button",variant:c==="in_app"?"default":"outline",onClick:()=>d("in_app"),className:"flex-1 min-w-[100px] flex flex-col items-center py-3",children:[s.jsx(iB,{className:"h-4 w-4 mb-1"}),"In-App Only"]}),s.jsxs(Ne,{type:"button",variant:c==="push"?"default":"outline",onClick:()=>d("push"),className:"flex-1 min-w-[100px] flex flex-col items-center py-3",children:[s.jsx(Dm,{className:"h-4 w-4 mb-1"}),"Push Only"]}),s.jsxs(Ne,{type:"button",variant:c==="both"?"default":"outline",onClick:()=>d("both"),className:"flex-1 min-w-[100px] flex flex-col items-center py-3",children:[s.jsx(ki,{className:"h-4 w-4 mb-1"}),"Both"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dm,{className:"h-4 w-4"}),s.jsx("label",{className:"font-medium",children:"Enable Push Notifications"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send push notifications to officers' devices"})]}),s.jsx(sr,{checked:g,onCheckedChange:y,disabled:M===0})]}),M===0&&s.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-800",children:[s.jsx(Ld,{className:"h-4 w-4 inline mr-1"}),"No officers have push notifications enabled.",s.jsx(Ne,{variant:"link",className:"p-0 h-auto ml-1",onClick:()=>ge.info("Officers need to enable push notifications in their settings"),children:"Learn more"})]})})]}),s.jsxs(rn,{open:e,onOpenChange:t,children:[s.jsx(yc,{asChild:!0,children:s.jsxs(Ne,{className:"w-full",size:"lg",disabled:j||P.length===0||i.length===0,children:[s.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Create Manual Alert"]})}),s.jsxs(Vr,{className:"sm:max-w-[500px]",children:[s.jsxs(Yr,{children:[s.jsxs(Kr,{className:"flex items-center gap-2",children:[s.jsx(Re,{className:T(m),children:m.toUpperCase()}),"Send Manual Alert"]}),s.jsxs(as,{children:["This alert will be sent to ",P.length," officer(s) on ",i.join(", ")," shifts",g&&M>0&&s.jsxs("span",{className:"block mt-1",children:[s.jsx(Dm,{className:"h-3 w-3 inline mr-1"}),"Push notifications will be sent to ",M," officer(s)"]})]})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"alert-message",children:"Alert Message *"}),s.jsx(vf,{id:"alert-message",placeholder:"Enter your alert message here... Be clear and concise.",value:r,onChange:k=>n(k.target.value),rows:6,className:"resize-none font-mono",required:!0}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length,"/500 characters"]})]})}),s.jsxs(a0,{className:"flex flex-col gap-2 sm:flex-row",children:[s.jsx(Ne,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),s.jsx(Ne,{onClick:L,disabled:!r.trim()||o||r.length>500,className:`${m==="critical"?"bg-red-600 hover:bg-red-700":m==="warning"?"bg-amber-600 hover:bg-amber-700":""}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"h-4 w-4 mr-2"}),"Send Alert"]})})]})]})]})]})]})},Gse=()=>s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsx(ar,{className:"text-lg",children:"How These Settings Work"})}),s.jsxs(gt,{className:"space-y-3 text-sm text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Mass Alert System:"}),' Controls the entire vacancy alert system including "Create Manual Alert" and "Create All Alerts" buttons. When disabled, users cannot send mass alerts or receive responses from them.']}),s.jsxs("div",{children:[s.jsx("strong",{children:"Vacancy Alert Subscription Buttons:"})," When disabled, users cannot subscribe to vacancy alerts. Requires Mass Alert System to be enabled."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Automated Notifications:"})," Master switch for all automated notification features (PTO requests, schedule changes, etc.). When disabled, no automated notifications will be sent regardless of individual settings."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Vacancy Alert Notifications:"})," When enabled, automatically sends notifications to subscribed users when vacancies occur. Requires Automated Notifications to be enabled."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PTO Request Notifications:"})," Supervisors and administrators will receive in-app notifications when officers submit new time off requests."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PTO Status Notifications:"})," Officers will receive in-app notifications when their time off requests are approved or denied."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Schedule Change Notifications:"})," Users will be notified when their schedule is modified by supervisors or administrators."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Show Staffing Overview:"})," When enabled, admin and supervisor users will see the Staffing Overview section on their dashboard showing current shift staffing levels. When disabled, this section is hidden."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PTO Balances:"})," When disabled, all PTO balance tracking is turned off. Staff will have indefinite time off availability, and balance calculations are suspended."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"PTO Type Visibility:"})," Control which types of PTO are displayed in the monthly calendar view. This does not affect PTO assignment or balance tracking."]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Color Customization:"})," Changes to colors will affect both PDF exports and the weekly schedule display. Changes are saved automatically."]})]})]});var nI=["PageUp","PageDown"],sI=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],iI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},yf="Slider",[tN,Jse,Zse]=Ip(yf),[aI]=Is(yf,[Zse]),[Xse,y0]=aI(yf),oI=w.forwardRef((e,t)=>{const{name:r,min:n=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:g,...y}=e,x=w.useRef(new Set),p=w.useRef(0),b=o==="horizontal"?Qse:$se,[j=[],S]=la({prop:u,defaultProp:d,onChange:T=>{var E;(E=[...x.current][p.current])==null||E.focus(),h(T)}}),P=w.useRef(j);function M(T){const k=sie(j,T);L(T,k)}function I(T){L(T,p.current)}function O(){const T=P.current[p.current];j[p.current]!==T&&m(j)}function L(T,k,{commit:E}={commit:!1}){const A=lie(a),q=cie(Math.round((T-n)/a)*a+n,A),U=xp(q,[n,i]);S((R=[])=>{const C=rie(R,U,k);if(oie(C,c*a)){p.current=C.indexOf(U);const F=String(C)!==String(R);return F&&E&&m(C),F?C:R}else return R})}return s.jsx(Xse,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:i,valueIndexToChangeRef:p,thumbs:x.current,values:j,orientation:o,form:g,children:s.jsx(tN.Provider,{scope:e.__scopeSlider,children:s.jsx(tN.Slot,{scope:e.__scopeSlider,children:s.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:t,onPointerDown:st(y.onPointerDown,()=>{l||(P.current=j)}),min:n,max:i,inverted:f,onSlideStart:l?void 0:M,onSlideMove:l?void 0:I,onSlideEnd:l?void 0:O,onHomeKeyDown:()=>!l&&L(n,0,{commit:!0}),onEndKeyDown:()=>!l&&L(i,j.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:k})=>{if(!l){const q=nI.includes(T.key)||T.shiftKey&&sI.includes(T.key)?10:1,U=p.current,R=j[U],C=a*q*k;L(R+C,U,{commit:!0})}}})})})})});oI.displayName=yf;var[lI,cI]=aI(yf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Qse=w.forwardRef((e,t)=>{const{min:r,max:n,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,m]=w.useState(null),f=Kt(t,b=>m(b)),g=w.useRef(void 0),y=df(i),x=y==="ltr",p=x&&!a||!x&&a;function v(b){const j=g.current||h.getBoundingClientRect(),S=[0,j.width],M=E5(S,p?[r,n]:[n,r]);return g.current=j,M(b-j.left)}return s.jsx(lI,{scope:e.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:s.jsx(dI,{dir:y,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const j=v(b.clientX);o==null||o(j)},onSlideMove:b=>{const j=v(b.clientX);l==null||l(j)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const S=iI[p?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:S?-1:1})}})})}),$se=w.forwardRef((e,t)=>{const{min:r,max:n,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=w.useRef(null),h=Kt(t,u),m=w.useRef(void 0),f=!i;function g(y){const x=m.current||u.current.getBoundingClientRect(),p=[0,x.height],b=E5(p,f?[n,r]:[r,n]);return m.current=x,b(y-x.top)}return s.jsx(lI,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:s.jsx(dI,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const x=g(y.clientY);a==null||a(x)},onSlideMove:y=>{const x=g(y.clientY);o==null||o(x)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:y=>{const p=iI[f?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:p?-1:1})}})})}),dI=w.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=y0(yf,r);return s.jsx(Ot.span,{...d,ref:t,onKeyDown:st(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):nI.concat(sI).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:st(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():n(h)}),onPointerMove:st(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:st(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),uI="SliderTrack",hI=w.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=y0(uI,r);return s.jsx(Ot.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});hI.displayName=uI;var rN="SliderRange",fI=w.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=y0(rN,r),a=cI(rN,r),o=w.useRef(null),l=Kt(t,o),c=i.values.length,d=i.values.map(m=>gI(m,i.min,i.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return s.jsx(Ot.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:l,style:{...e.style,[a.startEdge]:u+"%",[a.endEdge]:h+"%"}})});fI.displayName=rN;var nN="SliderThumb",mI=w.forwardRef((e,t)=>{const r=Jse(e.__scopeSlider),[n,i]=w.useState(null),a=Kt(t,l=>i(l)),o=w.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(eie,{...e,ref:a,index:o})}),eie=w.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:i,...a}=e,o=y0(nN,r),l=cI(nN,r),[c,d]=w.useState(null),u=Kt(t,v=>d(v)),h=c?o.form||!!c.closest("form"):!0,m=Dx(c),f=o.values[n],g=f===void 0?0:gI(f,o.min,o.max),y=nie(n,o.values.length),x=m==null?void 0:m[l.size],p=x?iie(x,g,l.direction):0;return w.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${p}px)`},children:[s.jsx(tN.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Ot.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:st(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&s.jsx(pI,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},n)]})});mI.displayName=nN;var tie="RadioBubbleInput",pI=w.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const i=w.useRef(null),a=Kt(i,n),o=e0(t);return w.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("input",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Ot.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});pI.displayName=tie;function rie(e=[],t,r){const n=[...e];return n[r]=t,n.sort((i,a)=>i-a)}function gI(e,t,r){const a=100/(r-t)*(e-t);return xp(a,[0,100])}function nie(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function sie(e,t){if(e.length===1)return 0;const r=e.map(i=>Math.abs(i-t)),n=Math.min(...r);return r.indexOf(n)}function iie(e,t,r){const n=e/2,a=E5([0,50],[0,n]);return(n-a(t)*r)*r}function aie(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function oie(e,t){if(t>0){const r=aie(e);return Math.min(...r)>=t}return!0}function E5(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function lie(e){return(String(e).split(".")[1]||"").length}function cie(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var vI=oI,die=hI,uie=fI,hie=mI;const Uo=w.forwardRef(({className:e,...t},r)=>s.jsxs(vI,{ref:r,className:$e("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(die,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(uie,{className:"absolute h-full bg-primary"})}),s.jsx(hie,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Uo.displayName=vI.displayName;const fie=e=>{if(!e)return"#000000";const t=e.split(",").map(a=>parseInt(a.trim(),10));if(t.length!==3||t.some(a=>isNaN(a)))return"#000000";const[r,n,i]=t;return"#"+[r,n,i].map(a=>{const o=a.toString(16);return o.length===1?"0"+o:o}).join("")},mie=e=>{if(e=e.replace("#",""),e.length===3&&(e=e.split("").map(i=>i+i).join("")),e.length!==6)return"0,0,0";const t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return`${t},${r},${n}`},pie=({settings:e,onSave:t,onPreview:r,isPending:n,isPreviewLoading:i=!1})=>{const[a,o]=w.useState(()=>{const b={...tr,...(e==null?void 0:e.pdf_layout_settings)||{}};return{sections:{showSupervisors:!0,showOfficers:!0,showSpecialAssignments:!0,showPTO:!0,showStaffingSummary:!0,showLogoSection:!0,showSpecialOccasions:!0,...b.sections},tableSettings:{rowHeight:30,cellPadding:8,showRowStriping:!0,borderWidth:1,columnSpacing:4,showVerticalLines:!0,...b.tableSettings},fontSizes:{header:18,tableHeader:12,tableContent:10,footer:9,...b.fontSizes},colorSettings:{primaryColor:"44,62,80",headerTextColor:"255,255,255",supervisorHeaderBgColor:"52,152,219",officerHeaderBgColor:"46,204,113",specialHeaderBgColor:"155,89,182",ptoHeaderBgColor:"241,196,15",officerTextColor:"0,0,0",supervisorTextColor:"0,0,0",specialAssignmentTextColor:"0,0,0",ptoTextColor:"0,0,0",evenRowColor:"255,255,255",oddRowColor:"248,249,250",...b.colorSettings},columnOrder:{supervisors:"name-badge-position-unit",officers:"name-badge-beat-unit",...b.columnOrder},...b}}),[l,c]=w.useState({}),d=(b,j)=>{o(S=>({...S,sections:{...S.sections,[b]:j}}))},u=(b,j)=>{o(S=>({...S,tableSettings:{...S.tableSettings,[b]:j}}))},h=(b,j)=>{o(S=>({...S,fontSizes:{...S.fontSizes,[b]:j[0]}}))},m=(b,j)=>{o(S=>({...S,colorSettings:{...S.colorSettings,[b]:j}}))},f=(b,j)=>{const S=mie(j);m(b,S)},g=(b,j)=>{o(S=>({...S,columnOrder:{...S.columnOrder,[b]:j}}))},y=b=>{c(j=>({...j,[b]:!j[b]}))},x=()=>{t(a),ge.success("PDF layout settings saved")},p=()=>{r()},v=[{key:"primaryColor",label:"Primary Color",description:"Used for headers and titles"},{key:"headerTextColor",label:"Header Text Color",description:""},{key:"supervisorHeaderBgColor",label:"Supervisor Header BG",description:""},{key:"officerHeaderBgColor",label:"Officer Header BG",description:""},{key:"specialHeaderBgColor",label:"Special Assignment Header BG",description:""},{key:"ptoHeaderBgColor",label:"PTO Header BG",description:""},{key:"officerTextColor",label:"Officer Text Color",description:""},{key:"supervisorTextColor",label:"Supervisor Text Color",description:""},{key:"specialAssignmentTextColor",label:"Special Assignment Text Color",description:""},{key:"ptoTextColor",label:"PTO Text Color",description:""},{key:"evenRowColor",label:"Even Row Color",description:""},{key:"oddRowColor",label:"Odd Row Color",description:""}];return s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ar,{children:"PDF Export Layout Settings"}),s.jsx(en,{children:"Customize how your PDF riding lists are formatted and styled"})]}),s.jsx(Ne,{onClick:p,disabled:i||n,className:"bg-blue-600 text-white hover:bg-blue-700",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Preview..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fd,{className:"h-4 w-4 mr-2"}),"Preview Layout"]})})]})}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Section Visibility"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showSupervisors",checked:a.sections.showSupervisors,onCheckedChange:b=>d("showSupervisors",b)}),s.jsx(Ce,{htmlFor:"showSupervisors",children:"Supervisors Section"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showOfficers",checked:a.sections.showOfficers,onCheckedChange:b=>d("showOfficers",b)}),s.jsx(Ce,{htmlFor:"showOfficers",children:"Officers Section"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showSpecialAssignments",checked:a.sections.showSpecialAssignments,onCheckedChange:b=>d("showSpecialAssignments",b)}),s.jsx(Ce,{htmlFor:"showSpecialAssignments",children:"Special Assignments"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showPTO",checked:a.sections.showPTO,onCheckedChange:b=>d("showPTO",b)}),s.jsx(Ce,{htmlFor:"showPTO",children:"PTO Section"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showSpecialOccasions",checked:a.sections.showSpecialOccasions,onCheckedChange:b=>d("showSpecialOccasions",b)}),s.jsxs(Ce,{htmlFor:"showSpecialOccasions",className:"flex items-center gap-1",children:[s.jsx("span",{children:"Special Occasions"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"()"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showStaffingSummary",checked:a.sections.showStaffingSummary,onCheckedChange:b=>d("showStaffingSummary",b)}),s.jsx(Ce,{htmlFor:"showStaffingSummary",children:"Staffing Summary"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showLogoSection",checked:a.sections.showLogoSection,onCheckedChange:b=>d("showLogoSection",b)}),s.jsx(Ce,{htmlFor:"showLogoSection",children:"Logo Section"})]})]})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Table Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"rowHeight",children:"Row Height (px)"}),s.jsx(Uo,{id:"rowHeight",min:20,max:60,step:1,value:[a.tableSettings.rowHeight],onValueChange:b=>u("rowHeight",b[0]),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Current: ",a.tableSettings.rowHeight,"px"]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"cellPadding",children:"Cell Padding (px)"}),s.jsx(Uo,{id:"cellPadding",min:2,max:20,step:1,value:[a.tableSettings.cellPadding],onValueChange:b=>u("cellPadding",b[0]),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Current: ",a.tableSettings.cellPadding,"px"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showRowStriping",checked:a.tableSettings.showRowStriping,onCheckedChange:b=>u("showRowStriping",b)}),s.jsx(Ce,{htmlFor:"showRowStriping",children:"Enable Row Striping"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"borderWidth",children:"Border Width (px)"}),s.jsx(Uo,{id:"borderWidth",min:.5,max:3,step:.1,value:[a.tableSettings.borderWidth],onValueChange:b=>u("borderWidth",b[0]),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Current: ",a.tableSettings.borderWidth,"px"]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"columnSpacing",children:"Column Spacing (px)"}),s.jsx(Uo,{id:"columnSpacing",min:0,max:20,step:1,value:[a.tableSettings.columnSpacing],onValueChange:b=>u("columnSpacing",b[0]),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Current: ",a.tableSettings.columnSpacing,"px"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showVerticalLines",checked:a.tableSettings.showVerticalLines,onCheckedChange:b=>u("showVerticalLines",b)}),s.jsx(Ce,{htmlFor:"showVerticalLines",children:"Show Vertical Lines"})]})]})]})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Column Order"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"supervisorsOrder",children:"Supervisors Column Order"}),s.jsxs(Wt,{value:a.columnOrder.supervisors,onValueChange:b=>g("supervisors",b),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select order"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"name-badge-position-unit",children:"Name  Badge  Position  Unit"}),s.jsx(ct,{value:"badge-name-position-unit",children:"Badge  Name  Position  Unit"}),s.jsx(ct,{value:"position-name-badge-unit",children:"Position  Name  Badge  Unit"}),s.jsx(ct,{value:"name-position-badge-unit",children:"Name  Position  Badge  Unit"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"officersOrder",children:"Officers Column Order"}),s.jsxs(Wt,{value:a.columnOrder.officers,onValueChange:b=>g("officers",b),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select order"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"name-badge-beat-unit",children:"Name  Badge  Beat  Unit"}),s.jsx(ct,{value:"badge-name-beat-unit",children:"Badge  Name  Beat  Unit"}),s.jsx(ct,{value:"beat-name-badge-unit",children:"Beat  Name  Badge  Unit"}),s.jsx(ct,{value:"name-beat-badge-unit",children:"Name  Beat  Badge  Unit"})]})]})]})]})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Font Sizes (pt)"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"headerFont",children:"Header"}),s.jsx(Uo,{id:"headerFont",min:10,max:24,step:.5,value:[a.fontSizes.header],onValueChange:b=>h("header",b),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Current: ",a.fontSizes.header,"pt"]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"tableHeaderFont",children:"Table Header"}),s.jsx(Uo,{id:"tableHeaderFont",min:8,max:16,step:.5,value:[a.fontSizes.tableHeader],onValueChange:b=>h("tableHeader",b),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Current: ",a.fontSizes.tableHeader,"pt"]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"tableContentFont",children:"Table Content"}),s.jsx(Uo,{id:"tableContentFont",min:8,max:14,step:.5,value:[a.fontSizes.tableContent],onValueChange:b=>h("tableContent",b),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Current: ",a.fontSizes.tableContent,"pt"]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"footerFont",children:"Footer"}),s.jsx(Uo,{id:"footerFont",min:8,max:14,step:.5,value:[a.fontSizes.footer],onValueChange:b=>h("footer",b),className:"mt-2"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Current: ",a.fontSizes.footer,"pt"]})]})]})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Color Settings"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(b=>{const j=a.colorSettings[b.key],S=fie(j);return s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:b.key,children:b.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(St,{id:b.key,value:j,onChange:P=>m(b.key,P.target.value),placeholder:"e.g., 44,62,80",className:"pr-10"}),s.jsx(Ne,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-7 w-7",onClick:()=>y(b.key),title:"Pick color",children:s.jsx(lj,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"w-10 h-10 rounded border cursor-pointer",style:{backgroundColor:S},onClick:()=>y(b.key),title:"Click to pick color"})]}),l[b.key]&&s.jsxs("div",{className:"absolute z-50 mt-1 p-2 bg-white border rounded shadow-lg",children:[s.jsx("input",{type:"color",value:S,onChange:P=>f(b.key,P.target.value),className:"w-full h-8 cursor-pointer"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-sm",children:S}),s.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(b.key),children:"Close"})]})]}),b.description&&s.jsx("div",{className:"text-sm text-gray-500",children:b.description})]},b.key)})})]}),s.jsx(ao,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Additional PDF Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"pageMargins",children:"Page Margins (mm)"}),s.jsx(St,{id:"pageMargins",value:a.pageMargins||"20,20,20,20",onChange:b=>o(j=>({...j,pageMargins:b.target.value})),placeholder:"e.g., 20,20,20,20"}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Top, Right, Bottom, Left"})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"pageSize",children:"Page Size"}),s.jsxs(Wt,{value:a.pageSize||"A4",onValueChange:b=>o(j=>({...j,pageSize:b})),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select page size"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"A4",children:"A4 (210  297 mm)"}),s.jsx(ct,{value:"LETTER",children:"Letter (8.5  11 in)"}),s.jsx(ct,{value:"LEGAL",children:"Legal (8.5  14 in)"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"showPageNumbers",checked:a.showPageNumbers||!0,onCheckedChange:b=>o(j=>({...j,showPageNumbers:b}))}),s.jsx(Ce,{htmlFor:"showPageNumbers",children:"Show Page Numbers"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sr,{id:"compressPDF",checked:a.compressPDF||!1,onCheckedChange:b=>o(j=>({...j,compressPDF:b}))}),s.jsx(Ce,{htmlFor:"compressPDF",children:"Compress PDF File"})]})]})]}),s.jsx("div",{className:"flex justify-end gap-2 pt-6",children:s.jsx(Ne,{onClick:x,disabled:n,className:"bg-green-600 hover:bg-green-700",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tl,{className:"h-4 w-4 mr-2"}),"Save Layout Settings"]})})})]})]})},Xi=e=>{if(!e)return[44,62,80];if(e.includes(",")){const t=e.split(",").map(r=>parseInt(r.trim(),10));if(t.length===3&&t.every(r=>!isNaN(r)))return t}return[44,62,80]},Uv=(e,t)=>{if(!(e!=null&&e.colorSettings))return Xi(tr.colorSettings.primaryColor);switch(t){case"supervisors":return Xi(e.colorSettings.supervisorHeaderBgColor||tr.colorSettings.supervisorHeaderBgColor);case"officers":return Xi(e.colorSettings.officerHeaderBgColor||tr.colorSettings.officerHeaderBgColor);case"special":return Xi(e.colorSettings.specialHeaderBgColor||tr.colorSettings.specialHeaderBgColor);case"pto":return Xi(e.colorSettings.ptoHeaderBgColor||tr.colorSettings.ptoHeaderBgColor);default:return Xi(e.colorSettings.primaryColor||tr.colorSettings.primaryColor)}},Wu=(e,t)=>{if(!e)return[];const r=e[t]||e[t.toLowerCase()]||e[`${t}Data`]||[];return Array.isArray(r)?r:[]},zv=e=>e&&(e.name||e.fullName||e.officerName||`${e.firstName||""} ${e.lastName||""}`.trim())||"Unknown Officer",i4=e=>{if(!e)return"";const t=e.match(/\d+/);return t?t[0]:""},gie=({open:e,onOpenChange:t,previewData:r,layoutSettings:n=tr,selectedDate:i})=>{const{exportToPDF:a}=d5(),[o,l]=w.useState(null);w.useEffect(()=>{r&&(console.log("Preview Data Structure:",r),c())},[r]);const c=()=>{if(!r){l(null);return}const p={shift:r.shift||{name:"Shift Name",start_time:"00:00",end_time:"23:59"},supervisors:Wu(r,"supervisors").map(v=>({name:zv(v),position:v.position||v.rank||"Supervisor",badge:v.badge||v.badgeNumber||v.id||"",unitNumber:v.unitNumber||v.unit||v.carNumber||"",beat:i4(v.position||v.rank||""),...v})),officers:Wu(r,"officers").map(v=>({name:zv(v),position:v.position||v.assignment||v.beat||"",badge:v.badge||v.badgeNumber||v.id||"",unitNumber:v.unitNumber||v.unit||v.carNumber||"",beat:i4(v.position||v.assignment||v.beat||""),...v})),specialAssignmentOfficers:Wu(r,"specialAssignmentOfficers").map(v=>({name:zv(v),position:v.position||v.assignment||v.specialAssignment||"Special Assignment",badge:v.badge||v.badgeNumber||v.id||"",unitNumber:v.unitNumber||v.unit||v.carNumber||"",...v})),ptoRecords:Wu(r,"ptoRecords").map(v=>({name:zv(v),badge:v.badge||v.badgeNumber||v.id||"",ptoType:v.ptoType||v.type||v.absenceType||"PTO",startTime:v.startTime||v.start||"00:00",endTime:v.endTime||v.end||"23:59",...v})),currentSupervisors:r.currentSupervisors||r.supervisorCount||Wu(r,"supervisors").length||0,minSupervisors:r.minSupervisors||r.requiredSupervisors||0,currentOfficers:r.currentOfficers||r.officerCount||Wu(r,"officers").length||0,minOfficers:r.minOfficers||r.requiredOfficers||0};console.log("Processed Preview Data:",p),l(p)},d=async()=>{var p;r&&await a({selectedDate:i,shiftName:((p=r.shift)==null?void 0:p.name)||"Shift",shiftData:r,layoutSettings:n})},u={...tr,...n,fontSizes:{...tr.fontSizes,...(n==null?void 0:n.fontSizes)||{}},sections:{...tr.sections,...(n==null?void 0:n.sections)||{}},tableSettings:{...tr.tableSettings,...(n==null?void 0:n.tableSettings)||{}},colorSettings:{...tr.colorSettings,...(n==null?void 0:n.colorSettings)||{}}},h=Xi(u.colorSettings.primaryColor),m=Xi(u.colorSettings.headerTextColor),f=Xi(u.colorSettings.officerTextColor),g=Xi(u.colorSettings.supervisorTextColor),y=Xi(u.colorSettings.specialAssignmentTextColor),x=Xi(u.colorSettings.ptoTextColor);return o?s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx(Yr,{children:s.jsx(Kr,{children:"PDF Layout Preview"})}),s.jsx("div",{className:"flex-1 overflow-auto border rounded-md p-4 bg-gray-50",children:s.jsxs("div",{className:"bg-white p-6 shadow-lg",style:{minHeight:"842px",width:"595px",margin:"0 auto",fontFamily:"Helvetica, Arial, sans-serif",boxSizing:"border-box"},children:[s.jsxs("div",{className:"flex items-start mb-6",style:{boxSizing:"border-box"},children:[s.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-white font-bold text-xs",style:{backgroundColor:`rgb(${h.join(",")})`,borderRadius:"2px",flexShrink:0},children:"LOGO"}),s.jsxs("div",{className:"ml-4",style:{flex:1},children:[s.jsxs("div",{style:{fontSize:`${u.fontSizes.header}pt`,fontWeight:"bold",color:`rgb(${h.join(",")})`,marginBottom:"2px",lineHeight:"1.2"},children:[o.shift.name,"  ",o.shift.start_time,"-",o.shift.end_time]}),s.jsx("div",{style:{fontSize:`${u.fontSizes.header}pt`,color:`rgb(${h.join(",")})`,lineHeight:"1.2"},children:i.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]})]}),u.sections.showSupervisors&&o.supervisors.length>0&&s.jsx("div",{className:"mb-8",style:{boxSizing:"border-box"},children:s.jsxs("div",{className:"border rounded overflow-hidden",style:{borderColor:"#dee2e6",borderWidth:`${u.tableSettings.borderWidth||1}px`},children:[s.jsxs("div",{style:{backgroundColor:`rgb(${Uv(u,"supervisors").join(",")})`,color:`rgb(${m.join(",")})`,fontSize:`${u.fontSizes.tableHeader}pt`,padding:`${u.tableSettings.cellPadding}px`,display:"flex",fontWeight:"bold",borderBottom:`${u.tableSettings.borderWidth||1}px solid #dee2e6`,alignItems:"center"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"SUPERVISORS"}),s.jsx("div",{style:{width:"8%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"BEAT"}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"BADGE #"}),s.jsx("div",{style:{width:"10%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"UNIT"}),s.jsx("div",{style:{width:"32%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"NOTES"})]}),o.supervisors.map((p,v)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",fontSize:`${u.fontSizes.tableContent}pt`,padding:`${u.tableSettings.cellPadding}px`,minHeight:`${u.tableSettings.rowHeight}px`,display:"flex",alignItems:"center",borderBottom:v<o.supervisors.length-1?"1px solid #dee2e6":"none",borderTop:v===0?"none":"1px solid #dee2e6"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${g.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.name}),s.jsx("div",{style:{width:"8%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${g.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.beat}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${g.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.badge}),s.jsx("div",{style:{width:"10%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${g.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.unitNumber}),s.jsx("div",{style:{width:"32%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${g.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.notes||p.comments||"Partnership details..."})]},v))]})}),u.sections.showOfficers&&o.officers.length>0&&s.jsx("div",{className:"mb-8",style:{boxSizing:"border-box"},children:s.jsxs("div",{className:"border rounded overflow-hidden",style:{borderColor:"#dee2e6",borderWidth:`${u.tableSettings.borderWidth||1}px`},children:[s.jsxs("div",{style:{backgroundColor:`rgb(${Uv(u,"officers").join(",")})`,color:`rgb(${m.join(",")})`,fontSize:`${u.fontSizes.tableHeader}pt`,padding:`${u.tableSettings.cellPadding}px`,display:"flex",fontWeight:"bold",borderBottom:`${u.tableSettings.borderWidth||1}px solid #dee2e6`,alignItems:"center"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"OFFICERS"}),s.jsx("div",{style:{width:"8%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"BEAT"}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"BADGE #"}),s.jsx("div",{style:{width:"10%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"UNIT"}),s.jsx("div",{style:{width:"32%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"NOTES"})]}),o.officers.map((p,v)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",fontSize:`${u.fontSizes.tableContent}pt`,padding:`${u.tableSettings.cellPadding}px`,minHeight:`${u.tableSettings.rowHeight}px`,display:"flex",alignItems:"center",borderBottom:v<o.officers.length-1?"1px solid #dee2e6":"none",borderTop:v===0?"none":"1px solid #dee2e6"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${f.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.name}),s.jsx("div",{style:{width:"8%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${f.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.beat}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${f.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.badge}),s.jsx("div",{style:{width:"10%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${f.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.unitNumber}),s.jsx("div",{style:{width:"32%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${f.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.notes||p.comments||"Regular assignment..."})]},v))]})}),u.sections.showSpecialAssignments&&o.specialAssignmentOfficers.length>0&&s.jsx("div",{className:"mb-8",style:{boxSizing:"border-box"},children:s.jsxs("div",{className:"border rounded overflow-hidden",style:{borderColor:"#dee2e6",borderWidth:`${u.tableSettings.borderWidth||1}px`},children:[s.jsxs("div",{style:{backgroundColor:`rgb(${Uv(u,"special").join(",")})`,color:`rgb(${m.join(",")})`,fontSize:`${u.fontSizes.tableHeader}pt`,padding:`${u.tableSettings.cellPadding}px`,display:"flex",fontWeight:"bold",borderBottom:`${u.tableSettings.borderWidth||1}px solid #dee2e6`,alignItems:"center"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"SPECIAL ASSIGNMENT OFFICERS"}),s.jsx("div",{style:{width:"22%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"ASSIGNMENT"}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"BADGE #"}),s.jsx("div",{style:{width:"10%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"UNIT"}),s.jsx("div",{style:{width:"18%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"NOTES"})]}),o.specialAssignmentOfficers.map((p,v)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",fontSize:`${u.fontSizes.tableContent}pt`,padding:`${u.tableSettings.cellPadding}px`,minHeight:`${u.tableSettings.rowHeight}px`,display:"flex",alignItems:"center",borderBottom:v<o.specialAssignmentOfficers.length-1?"1px solid #dee2e6":"none",borderTop:v===0?"none":"1px solid #dee2e6"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${y.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.name}),s.jsx("div",{style:{width:"22%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${y.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.position}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${y.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.badge}),s.jsx("div",{style:{width:"10%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${y.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.unitNumber}),s.jsx("div",{style:{width:"18%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${y.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.notes||p.comments||"Special duty..."})]},v))]})}),u.sections.showPTO&&o.ptoRecords.length>0&&s.jsx("div",{className:"mb-8",style:{boxSizing:"border-box"},children:s.jsxs("div",{className:"border rounded overflow-hidden",style:{borderColor:"#dee2e6",borderWidth:`${u.tableSettings.borderWidth||1}px`},children:[s.jsxs("div",{style:{backgroundColor:`rgb(${Uv(u,"pto").join(",")})`,color:`rgb(${m.join(",")})`,fontSize:`${u.fontSizes.tableHeader}pt`,padding:`${u.tableSettings.cellPadding}px`,display:"flex",fontWeight:"bold",borderBottom:`${u.tableSettings.borderWidth||1}px solid #dee2e6`,alignItems:"center"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`},children:"PTO OFFICERS"}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"BADGE #"}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"TYPE"}),s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,textAlign:"center"},children:"TIME"})]}),o.ptoRecords.map((p,v)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",fontSize:`${u.fontSizes.tableContent}pt`,padding:`${u.tableSettings.cellPadding}px`,minHeight:`${u.tableSettings.rowHeight}px`,display:"flex",alignItems:"center",borderBottom:v<o.ptoRecords.length-1?"1px solid #dee2e6":"none",borderTop:v===0?"none":"1px solid #dee2e6"},children:[s.jsx("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${x.join(",")})`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.name}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${x.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.badge}),s.jsx("div",{style:{width:"15%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${x.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p.ptoType}),s.jsxs("div",{style:{width:"35%",padding:`0 ${u.tableSettings.columnSpacing||4}px`,color:`rgb(${x.join(",")})`,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[p.startTime,"-",p.endTime]})]},v))]})}),u.sections.showStaffingSummary&&s.jsxs("div",{className:"mt-8 pt-4 border-t",style:{borderColor:"#dee2e6",borderTopWidth:`${u.tableSettings.borderWidth||1}px`,boxSizing:"border-box"},children:[s.jsxs("div",{style:{fontSize:`${u.fontSizes.footer}pt`,fontWeight:"bold",color:`rgb(${h.join(",")})`,marginBottom:"4px"},children:["STAFFING: Supervisors ",o.currentSupervisors,"/",o.minSupervisors,"  Officers ",o.currentOfficers,"/",o.minOfficers]}),s.jsxs("div",{style:{fontSize:`${u.fontSizes.footer}pt`,color:`rgb(${h.join(",")})`,textAlign:"right"},children:["Generated: ",new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]})]})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",onClick:()=>t(!1),children:"Close"}),s.jsxs(Ne,{onClick:d,children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export Preview as PDF"]})]})]})}):s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx(Yr,{children:s.jsx(Kr,{children:"PDF Layout Preview"})}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-500",children:"Loading preview data..."})]})})]})})},a4=({settings:e,handleToggle:t,handleRecipientChange:r,isPending:n})=>{const i=(e==null?void 0:e.anniversary_alert_recipients)||["admin","supervisor"],a=o=>i.includes(o);return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Anniversary & Birthday Alerts"]}),s.jsx(en,{children:"Configure automatic alerts for hire anniversaries and birthdays"})]}),s.jsxs(gt,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Ce,{htmlFor:"enable_anniversary_alerts",className:"font-medium flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Hire Date Anniversaries"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts when officers reach their hire date anniversary"})]}),s.jsx(sr,{id:"enable_anniversary_alerts",checked:(e==null?void 0:e.enable_anniversary_alerts)||!1,onCheckedChange:o=>t("enable_anniversary_alerts",o),disabled:n})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Ce,{htmlFor:"enable_birthday_alerts",className:"font-medium flex items-center gap-2",children:[s.jsx(ef,{className:"h-4 w-4"}),"Birthday Alerts"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send alerts on officers' birthdays (requires birthday in profile)"})]}),s.jsx(sr,{id:"enable_birthday_alerts",checked:(e==null?void 0:e.enable_birthday_alerts)||!1,onCheckedChange:o=>t("enable_birthday_alerts",o),disabled:n||!(e!=null&&e.enable_anniversary_alerts)})]}),((e==null?void 0:e.enable_anniversary_alerts)||(e==null?void 0:e.enable_birthday_alerts))&&s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Alert Recipients"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select who receives anniversary and birthday alerts"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"recipient_admin",checked:a("admin"),onCheckedChange:o=>r("admin",o),disabled:n}),s.jsx(Ce,{htmlFor:"recipient_admin",className:"text-sm",children:"Administrators"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"recipient_supervisor",checked:a("supervisor"),onCheckedChange:o=>r("supervisor",o),disabled:n}),s.jsx(Ce,{htmlFor:"recipient_supervisor",className:"text-sm",children:"Supervisors"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"recipient_officer",checked:a("officer"),onCheckedChange:o=>r("officer",o),disabled:n}),s.jsx(Ce,{htmlFor:"recipient_officer",className:"text-sm",children:"Officer Themselves"})]})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-muted-foreground",children:"Officers with birthdays"}),s.jsx("p",{className:"font-medium",children:"Coming soon"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-muted-foreground",children:"Next anniversary"}),s.jsx("p",{className:"font-medium",children:"Tomorrow"})]})]})})]})]})},vie=({settings:e,handleToggle:t,isPending:r})=>{const n=(o,l)=>{t(o,l)},i=(o,l)=>{t(o,l)},a=(o,l)=>{t(o,l)};return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Events Dashboard Module"]}),s.jsx(en,{children:"Control the visibility and settings of the upcoming events dashboard module"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Ce,{htmlFor:"enable_events_dashboard",className:"font-medium flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Enable Events Dashboard"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Show the upcoming events module on the main dashboard"})]}),s.jsx(sr,{id:"enable_events_dashboard",checked:(e==null?void 0:e.enable_events_dashboard)||!1,onCheckedChange:o=>a("enable_events_dashboard",o),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Ce,{htmlFor:"show_special_occasions_in_schedule",className:"font-medium flex items-center gap-2",children:[s.jsx(ki,{className:"h-4 w-4"}),"Show Birthday/Anniversary Badges"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Display  and  badges on officer schedule cards for birthdays and anniversaries"})]}),s.jsx(sr,{id:"show_special_occasions_in_schedule",checked:(e==null?void 0:e.show_special_occasions_in_schedule)!==!1,onCheckedChange:o=>a("show_special_occasions_in_schedule",o),disabled:r})]}),((e==null?void 0:e.enable_events_dashboard)||!1)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(Fd,{className:"h-4 w-4"}),"Events Dashboard Visible To Roles"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which user roles can see the events dashboard"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"events_dashboard_visible_to_admins",checked:(e==null?void 0:e.events_dashboard_visible_to_admins)!==!1,onCheckedChange:o=>i("events_dashboard_visible_to_admins",o),disabled:r}),s.jsx(Ce,{htmlFor:"events_dashboard_visible_to_admins",className:"text-sm",children:"Administrators"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"events_dashboard_visible_to_supervisors",checked:(e==null?void 0:e.events_dashboard_visible_to_supervisors)!==!1,onCheckedChange:o=>i("events_dashboard_visible_to_supervisors",o),disabled:r}),s.jsx(Ce,{htmlFor:"events_dashboard_visible_to_supervisors",className:"text-sm",children:"Supervisors"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"events_dashboard_visible_to_officers",checked:(e==null?void 0:e.events_dashboard_visible_to_officers)!==!1,onCheckedChange:o=>i("events_dashboard_visible_to_officers",o),disabled:r}),s.jsx(Ce,{htmlFor:"events_dashboard_visible_to_officers",className:"text-sm",children:"Officers"})]})]})]}),s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Show Event Types in Dashboard"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which types of events to display in the events dashboard"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ef,{className:"h-4 w-4"}),s.jsx(Ce,{htmlFor:"events_dashboard_show_birthdays",className:"text-sm",children:"Birthdays"})]}),s.jsx(sr,{id:"events_dashboard_show_birthdays",checked:(e==null?void 0:e.events_dashboard_show_birthdays)!==!1,onCheckedChange:o=>a("events_dashboard_show_birthdays",o),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ni,{className:"h-4 w-4"}),s.jsx(Ce,{htmlFor:"events_dashboard_show_anniversaries",className:"text-sm",children:"Hire Date Anniversaries"})]}),s.jsx(sr,{id:"events_dashboard_show_anniversaries",checked:(e==null?void 0:e.events_dashboard_show_anniversaries)!==!1,onCheckedChange:o=>a("events_dashboard_show_anniversaries",o),disabled:r})]})]})]}),s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Time Period Display"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose what time period to show events for"}),s.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"scope_current",name:"events_dashboard_month_scope",value:"current",checked:(e==null?void 0:e.events_dashboard_month_scope)==="current",onChange:()=>n("events_dashboard_month_scope","current"),disabled:r,className:"h-4 w-4"}),s.jsx(Ce,{htmlFor:"scope_current",className:"text-sm",children:"Current Month Only"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"scope_upcoming",name:"events_dashboard_month_scope",value:"upcoming",checked:(e==null?void 0:e.events_dashboard_month_scope)==="upcoming",onChange:()=>n("events_dashboard_month_scope","upcoming"),disabled:r,className:"h-4 w-4"}),s.jsx(Ce,{htmlFor:"scope_upcoming",className:"text-sm",children:"Upcoming 30 Days"})]})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"Data Requirements:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-muted-foreground",children:[s.jsxs("li",{children:["Birthdays require ",s.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"birthday"})," field in profiles"]}),s.jsxs("li",{children:["Anniversaries require ",s.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"hire_date"})," field in profiles"]}),s.jsx("li",{children:"Only active officers are shown"})]})]})})]})]})]})},yie=({settings:e,handleToggle:t,isPending:r})=>{const n=(a,o)=>{t(a,o)},i=(a,o)=>{t(a,o)};return s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(L1,{className:"h-5 w-5"}),"Anniversary Countdown Module"]}),s.jsx(en,{children:"Control settings for the personal service anniversary countdown"})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Ce,{htmlFor:"enable_anniversary_countdown",className:"font-medium flex items-center gap-2",children:[s.jsx(L1,{className:"h-4 w-4"}),"Enable Anniversary Countdown",s.jsx(rE,{children:s.jsxs(dz,{children:[s.jsx(uz,{asChild:!0,children:s.jsx(fO,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),s.jsx(nE,{className:"max-w-xs",children:s.jsx("p",{children:"Shows a personal countdown to each officer's next service anniversary. Officers can toggle visibility in their profile menu."})})]})})]})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Show personal service anniversary countdown on dashboard"})]}),s.jsx(sr,{id:"enable_anniversary_countdown",checked:(e==null?void 0:e.enable_anniversary_countdown)!==!1,onCheckedChange:a=>n("enable_anniversary_countdown",a),disabled:r})]}),((e==null?void 0:e.enable_anniversary_countdown)||!1)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(mO,{className:"h-4 w-4"}),"Anniversary Countdown Visible To"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which user roles see the anniversary countdown by default"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"anniversary_countdown_admins",checked:(e==null?void 0:e.anniversary_countdown_admins)!==!1,onCheckedChange:a=>i("anniversary_countdown_admins",a),disabled:r}),s.jsx(Ce,{htmlFor:"anniversary_countdown_admins",className:"text-sm",children:"Administrators"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"anniversary_countdown_supervisors",checked:(e==null?void 0:e.anniversary_countdown_supervisors)!==!1,onCheckedChange:a=>i("anniversary_countdown_supervisors",a),disabled:r}),s.jsx(Ce,{htmlFor:"anniversary_countdown_supervisors",className:"text-sm",children:"Supervisors"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{id:"anniversary_countdown_officers",checked:(e==null?void 0:e.anniversary_countdown_officers)!==!1,onCheckedChange:a=>i("anniversary_countdown_officers",a),disabled:r}),s.jsx(Ce,{htmlFor:"anniversary_countdown_officers",className:"text-sm",children:"Officers"})]})]})]}),s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(LS,{className:"h-4 w-4"}),"Display Options"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Ce,{htmlFor:"anniversary_show_progress_bar",className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(LS,{className:"h-3 w-3"}),"Show Year Progress Bar"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Display a progress bar showing completion of current service year"})]}),s.jsx(sr,{id:"anniversary_show_progress_bar",checked:(e==null?void 0:e.anniversary_show_progress_bar)!==!1,onCheckedChange:a=>n("anniversary_show_progress_bar",a),disabled:r})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Ce,{htmlFor:"anniversary_show_milestone_badges",className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ni,{className:"h-3 w-3"}),"Show Milestone Badges"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Display badges for service milestones (5, 10, 20, 25 years)"})]}),s.jsx(sr,{id:"anniversary_show_milestone_badges",checked:(e==null?void 0:e.anniversary_show_milestone_badges)!==!1,onCheckedChange:a=>n("anniversary_show_milestone_badges",a),disabled:r})]})]})]}),s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs(Ce,{className:"font-medium flex items-center gap-2",children:[s.jsx(ki,{className:"h-4 w-4"}),"Notification Settings"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"anniversary_enable_notifications",className:"text-sm font-medium",children:"Enable Anniversary Notifications"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Send notifications when officers approach their anniversary"})]}),s.jsx(sr,{id:"anniversary_enable_notifications",checked:(e==null?void 0:e.anniversary_enable_notifications)!==!1,onCheckedChange:a=>n("anniversary_enable_notifications",a),disabled:r})]}),((e==null?void 0:e.anniversary_enable_notifications)||!1)&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-2 pl-6 border-l-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"anniversary_notify_days_before",className:"text-sm font-medium",children:"Notify Days Before"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"How many days before anniversary to send notification"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("select",{id:"anniversary_notify_days_before",value:(e==null?void 0:e.anniversary_notify_days_before)||7,onChange:a=>t("anniversary_notify_days_before",parseInt(a.target.value)),disabled:r,className:"border rounded px-2 py-1 text-sm w-24",children:[s.jsx("option",{value:1,children:"1 day"}),s.jsx("option",{value:3,children:"3 days"}),s.jsx("option",{value:7,children:"7 days"}),s.jsx("option",{value:14,children:"14 days"}),s.jsx("option",{value:30,children:"30 days"})]})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"anniversary_notify_on_day",className:"text-sm font-medium",children:"Notify on Anniversary Day"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Send notification on the actual anniversary date"})]}),s.jsx(sr,{id:"anniversary_notify_on_day",checked:(e==null?void 0:e.anniversary_notify_on_day)!==!1,onCheckedChange:a=>n("anniversary_notify_on_day",a),disabled:r})]})]})})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"Requirements & Notes:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-muted-foreground",children:[s.jsxs("li",{children:["Requires ",s.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"hire_date"})," field in officer profiles"]}),s.jsx("li",{children:"Officers can toggle visibility in their profile dropdown"}),s.jsx("li",{children:"Countdown automatically calculates based on hire_date"}),s.jsx("li",{children:"Shows years of service and days until next anniversary"}),s.jsx("li",{children:"Special celebration display on anniversary day"})]})]})})]})]})]})},Dw=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],Mw=e=>{const t=e.toLowerCase();return t.includes("admin")?{officers:0,supervisors:0}:t.includes("supervisor")||t.includes("command")?{officers:0,supervisors:1}:t.includes("day")||t.includes("morning")?{officers:8,supervisors:1}:t.includes("evening")||t.includes("swing")?{officers:9,supervisors:1}:t.includes("night")||t.includes("graveyard")?{officers:8,supervisors:1}:{officers:0,supervisors:0}},o4=e=>[...e].sort((t,r)=>{const n=t.start_time||"00:00",i=r.start_time||"00:00",[a,o]=n.split(":").map(Number),[l,c]=i.split(":").map(Number),d=a*60+o,u=l*60+c,h=t.crosses_midnight||n>i,m=r.crosses_midnight||i>n;return h&&!m?1:!h&&m?-1:d-u}),xie=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[i,a]=w.useState(!0),[o,l]=w.useState(!1),[c,d]=w.useState({shift_type_id:"",day_of_week:1,minimum_officers:0,minimum_supervisors:0});w.useEffect(()=>{u()},[]),w.useEffect(()=>{if(c.shift_type_id){const p=e.find(v=>v.id===c.shift_type_id);if(p){const v=Mw(p.name);d(b=>({...b,minimum_officers:v.officers,minimum_supervisors:v.supervisors}))}}},[c.shift_type_id,e]);const u=async()=>{try{a(!0);const{data:p,error:v}=await se.from("shift_types").select("*").order("start_time");if(v)throw v;t(p||[]);const{data:b,error:j}=await se.from("minimum_staffing").select(`
          *,
          shift_type:shift_type_id (id, name, start_time, end_time, crosses_midnight)
        `);if(j)throw j;const S=(b||[]).sort((P,M)=>{var L,T;const I=((L=P.shift_type)==null?void 0:L.name)||"",O=((T=M.shift_type)==null?void 0:T.name)||"";return I!==O?I.localeCompare(O):P.day_of_week-M.day_of_week});n(S)}catch(p){console.error("Error fetching data:",p),ge.error("Failed to load staffing rules")}finally{a(!1)}},h=async()=>{if(!c.shift_type_id){ge.error("Please select a shift type");return}if(c.minimum_officers<0){ge.error("Minimum officers cannot be negative");return}if(c.minimum_supervisors<0){ge.error("Minimum supervisors cannot be negative");return}if(r.find(v=>v.shift_type_id===c.shift_type_id&&v.day_of_week===c.day_of_week)){ge.error("A rule already exists for this shift and day");return}l(!0);try{const{data:v,error:b}=await se.from("minimum_staffing").insert([{shift_type_id:c.shift_type_id,day_of_week:c.day_of_week,minimum_officers:c.minimum_officers,minimum_supervisors:c.minimum_supervisors}]).select(`
          *,
          shift_type:shift_type_id (id, name, start_time, end_time, crosses_midnight)
        `).single();if(b)throw b;const j=[...r,v].sort((S,P)=>{var O,L;const M=((O=S.shift_type)==null?void 0:O.name)||"",I=((L=P.shift_type)==null?void 0:L.name)||"";return M!==I?M.localeCompare(I):S.day_of_week-P.day_of_week});n(j),d({shift_type_id:"",day_of_week:1,minimum_officers:0,minimum_supervisors:0}),ge.success("Staffing rule added successfully")}catch(v){console.error("Error adding rule:",v),ge.error("Failed to add staffing rule")}finally{l(!1)}},m=async(p,v,b)=>{if(b<0){ge.error("Value cannot be negative");return}l(!0);try{const{error:j}=await se.from("minimum_staffing").update({[v]:b}).eq("id",p);if(j)throw j;n(r.map(S=>S.id===p?{...S,[v]:b}:S)),ge.success("Rule updated successfully")}catch(j){console.error("Error updating rule:",j),ge.error("Failed to update rule")}finally{l(!1)}},f=async p=>{l(!0);try{const{error:v}=await se.from("minimum_staffing").delete().eq("id",p);if(v)throw v;n(r.filter(b=>b.id!==p)),ge.success("Rule deleted successfully")}catch(v){console.error("Error deleting rule:",v),ge.error("Failed to delete rule")}finally{l(!1)}},g=async p=>{const v=e.find(b=>b.id===p);if(v){l(!0);try{const j=r.filter(L=>L.shift_type_id===p).map(L=>L.day_of_week),S=Mw(v.name),P=Dw.filter(L=>!j.includes(L.value)).map(L=>({shift_type_id:p,day_of_week:L.value,minimum_officers:S.officers,minimum_supervisors:S.supervisors}));if(P.length===0){ge.info("Rules already exist for all days");return}const{data:M,error:I}=await se.from("minimum_staffing").insert(P).select(`
          *,
          shift_type:shift_type_id (id, name, start_time, end_time, crosses_midnight)
        `);if(I)throw I;const O=[...r,...M||[]].sort((L,T)=>{var A,q;const k=((A=L.shift_type)==null?void 0:A.name)||"",E=((q=T.shift_type)==null?void 0:q.name)||"";return k!==E?k.localeCompare(E):L.day_of_week-T.day_of_week});n(O),ge.success(`Added ${P.length} rules for ${v.name}`)}catch(b){console.error("Error adding rules:",b),ge.error("Failed to add rules")}finally{l(!1)}}},x=(()=>{const p={};return r.forEach(v=>{var j;const b=((j=v.shift_type)==null?void 0:j.name)||"Unknown Shift";p[b]||(p[b]=[]),p[b].push(v)}),p})();return i?s.jsx(pt,{children:s.jsxs(gt,{className:"flex justify-center items-center py-8",children:[s.jsx(Ci,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading staffing rules..."})]})}):s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsx(ar,{children:"Minimum Staffing Configuration"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Set minimum staffing requirements for each shift and day of the week. Use 0 for shifts with no minimum requirement."})]}),s.jsxs(gt,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[s.jsx("h3",{className:"font-semibold",children:"Add New Staffing Rule"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"shift_type",children:"Shift Type *"}),s.jsxs(Wt,{value:c.shift_type_id,onValueChange:p=>d({...c,shift_type_id:p}),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:e.map(p=>s.jsxs(ct,{value:p.id,children:[p.name," (",p.start_time," - ",p.end_time,")"]},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"day_of_week",children:"Day of Week *"}),s.jsxs(Wt,{value:c.day_of_week.toString(),onValueChange:p=>d({...c,day_of_week:parseInt(p)}),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select day"})}),s.jsx(qt,{children:Dw.map(p=>s.jsx(ct,{value:p.value.toString(),children:p.label},p.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"minimum_officers",children:"Min Officers"}),s.jsx(St,{type:"number",min:"0",value:c.minimum_officers,onChange:p=>{const v=parseInt(p.target.value);d({...c,minimum_officers:v>=0?v:0})},className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter 0 if no minimum required"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"minimum_supervisors",children:"Min Supervisors"}),s.jsx(St,{type:"number",min:"0",value:c.minimum_supervisors,onChange:p=>{const v=parseInt(p.target.value);d({...c,minimum_supervisors:v>=0?v:0})},className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter 0 if no minimum required"})]})]}),s.jsxs(Ne,{onClick:h,disabled:o||!c.shift_type_id,className:"w-full",children:[o?s.jsx(Ci,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Quick Setup"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Add rules for all 7 days to a shift (will skip existing days)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o4(e).map(p=>{const v=r.filter(j=>j.shift_type_id===p.id),b=Mw(p.name);return s.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>g(p.id),disabled:o||v.length===7,className:"flex flex-col items-start h-auto py-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ti,{className:"h-3 w-3 mr-1"}),s.jsx("span",{className:"font-medium",children:p.name})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[v.length,"/7 days  Default: ",b.officers," off, ",b.supervisors," sup"]})]},p.id)})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Current Staffing Rules"}),r.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No staffing rules configured yet. Add rules above."}):s.jsx("div",{className:"space-y-8",children:Object.entries(x).map(([p,v])=>s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:s.jsx("h4",{className:"font-semibold text-gray-800",children:p})}),s.jsxs(k5,{children:[s.jsx(C5,{children:s.jsxs(Sd,{children:[s.jsx(Aa,{className:"w-32",children:"Day of Week"}),s.jsx(Aa,{children:"Min Officers"}),s.jsx(Aa,{children:"Min Supervisors"}),s.jsx(Aa,{className:"text-right",children:"Actions"})]})}),s.jsx(T5,{children:v.sort((b,j)=>b.day_of_week-j.day_of_week).map(b=>{const j=Dw.find(S=>S.value===b.day_of_week);return s.jsxs(Sd,{children:[s.jsx(xi,{className:"font-medium",children:(j==null?void 0:j.label)||"Unknown Day"}),s.jsx(xi,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(St,{type:"number",min:"0",value:b.minimum_officers,onChange:S=>{const P=parseInt(S.target.value)||0;m(b.id,"minimum_officers",P>=0?P:0)},disabled:o,className:`w-20 ${b.minimum_officers===0?"border-amber-200 bg-amber-50":""}`}),b.minimum_officers===0&&s.jsx("span",{className:"text-xs text-amber-600",children:"No min"})]})}),s.jsx(xi,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(St,{type:"number",min:"0",value:b.minimum_supervisors,onChange:S=>{const P=parseInt(S.target.value)||0;m(b.id,"minimum_supervisors",P>=0?P:0)},disabled:o,className:`w-20 ${b.minimum_supervisors===0?"border-amber-200 bg-amber-50":""}`}),b.minimum_supervisors===0&&s.jsx("span",{className:"text-xs text-amber-600",children:"No min"})]})}),s.jsx(xi,{className:"text-right",children:s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>f(b.id),disabled:o,className:"hover:bg-red-50 hover:text-red-600",children:s.jsx(es,{className:"h-4 w-4"})})})]},b.id)})})]})]},p))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Summary by Shift"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o4(e).map(p=>{const v=r.filter(M=>M.shift_type_id===p.id),b=v.length>0?Math.round(v.reduce((M,I)=>M+I.minimum_officers,0)/v.length*10)/10:0,j=v.length>0?Math.round(v.reduce((M,I)=>M+I.minimum_supervisors,0)/v.length*10)/10:0,S=v.filter(M=>M.minimum_officers===0).length,P=v.filter(M=>M.minimum_supervisors===0).length;return s.jsxs(pt,{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:p.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[v.length,"/7 days configured"]})]}),s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>g(p.id),disabled:o||v.length===7,children:s.jsx(Ti,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Avg. Officers:"}),s.jsxs("span",{className:`font-medium ${b===0?"text-amber-600":""}`,children:[b.toFixed(1),S>0&&` (${S}0)`]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Avg. Supervisors:"}),s.jsxs("span",{className:`font-medium ${j===0?"text-amber-600":""}`,children:[j.toFixed(1),P>0&&` (${P}0)`]})]})]})]},p.id)})})]})]})]})},hm={pdf_supervisor_pto_bg:"255,255,200",pdf_supervisor_pto_border:"255,220,100",pdf_supervisor_pto_text:"139,69,19",pdf_officer_pto_bg:"240,255,240",pdf_officer_pto_border:"144,238,144",pdf_officer_pto_text:"0,100,0",pdf_vacation_bg:"173,216,230",pdf_vacation_border:"100,149,237",pdf_vacation_text:"0,0,139",pdf_sick_bg:"255,200,200",pdf_sick_border:"255,100,100",pdf_sick_text:"139,0,0",pdf_holiday_bg:"255,218,185",pdf_holiday_border:"255,165,0",pdf_holiday_text:"165,42,42",pdf_comp_bg:"221,160,221",pdf_comp_border:"186,85,211",pdf_comp_text:"128,0,128",pdf_off_day_bg:"220,220,220",pdf_off_day_text:"100,100,100",weekly_supervisor_bg:"255,255,255",weekly_supervisor_text:"0,0,0",weekly_officer_bg:"255,255,255",weekly_officer_text:"0,0,0",weekly_ppo_bg:"255,250,240",weekly_ppo_text:"150,75,0",weekly_vacation_bg:"173,216,230",weekly_vacation_text:"0,0,139",weekly_sick_bg:"255,200,200",weekly_sick_text:"139,0,0",weekly_holiday_bg:"255,218,185",weekly_holiday_text:"165,42,42",weekly_comp_bg:"221,160,221",weekly_comp_text:"128,0,128",weekly_pto_bg:"144,238,144",weekly_pto_text:"0,100,0",weekly_off_bg:"240,240,240",weekly_off_text:"100,100,100",schedule_supervisor_bg:"240,248,255",schedule_supervisor_text:"25,25,112",schedule_officer_bg:"248,249,250",schedule_officer_text:"33,37,41",schedule_special_bg:"243,229,245",schedule_special_text:"102,51,153",schedule_pto_bg:"230,255,242",schedule_pto_text:"0,100,0"},fm={show_vacation_pto:!0,show_holiday_pto:!0,show_sick_pto:!1,show_comp_pto:!1},Rw={enable_notifications:!1,enable_mass_alert_sending:!0,show_staffing_overview:!1,enable_vacancy_alerts:!0,enable_pto_request_notifications:!0,enable_pto_status_notifications:!0,enable_supervisor_pto_notifications:!0,enable_schedule_change_notifications:!0,show_vacancy_alert_buttons:!0,show_pto_balances:!1,pto_balances_visible:!1,show_pto_tab:!1,enable_anniversary_alerts:!1,enable_birthday_alerts:!1,anniversary_alert_recipients:["admin","supervisor"],enable_events_dashboard:!0,events_dashboard_visible_to_officers:!0,events_dashboard_visible_to_supervisors:!0,events_dashboard_visible_to_admins:!0,events_dashboard_show_birthdays:!0,events_dashboard_show_anniversaries:!0,events_dashboard_month_scope:"current",enable_anniversary_countdown:!0,anniversary_countdown_admins:!0,anniversary_countdown_supervisors:!0,anniversary_countdown_officers:!0,anniversary_show_progress_bar:!0,anniversary_show_milestone_badges:!0,anniversary_enable_notifications:!0,anniversary_notify_days_before:7,anniversary_notify_on_day:!0},bie=({isAdmin:e=!1,isSupervisor:t=!1})=>{const r=Lr(),[n,i]=w.useState(hm),[a,o]=w.useState(fm),[l,c]=w.useState(!1),[d,u]=w.useState(null),[h,m]=w.useState(["admin","supervisor"]),[f,g]=w.useState(!1),[y,x]=w.useState("notifications"),[p,v]=w.useState(!1),b=async A=>{try{const q=A.toISOString().split("T")[0],{data:U,error:R}=await se.from("pto_requests").select(`
          *,
          officers!inner(
            first_name,
            last_name,
            badge_number
          )
        `).eq("date",q).eq("status","approved");return R?(console.error("Error fetching PTO records:",R),[]):(U==null?void 0:U.map(C=>{var F,X,re,z,Y,J;return{id:C.id,name:`${((F=C.officers)==null?void 0:F.first_name)||""} ${((X=C.officers)==null?void 0:X.last_name)||""}`.trim(),badge:((re=C.officers)==null?void 0:re.badge_number)||"",ptoType:((z=C.pto_type)==null?void 0:z.toUpperCase())||"PTO",startTime:C.start_time||"07:00",endTime:C.end_time||"15:00",isFullShift:C.is_full_shift||!1,firstName:(Y=C.officers)==null?void 0:Y.first_name,lastName:(J=C.officers)==null?void 0:J.last_name}}))||[]}catch(q){return console.error("Error in getPTORecordsForDate:",q),[]}},{data:j,isLoading:S}=bt({queryKey:["website-settings"],queryFn:async()=>{console.log("Fetching website settings...");const{data:A,error:q}=await se.from("website_settings").select("*").single();if(q){if(console.log("Error fetching settings:",q),q.code==="PGRST116"){console.log("No settings found, creating default...");const{data:R,error:C}=await se.from("website_settings").insert({...Rw,color_settings:hm,pto_type_visibility:fm,pdf_layout_settings:tr}).select().single();if(C)throw console.error("Error creating default settings:",C),C;return R}throw q}return{...Rw,...A,color_settings:{...hm,...A.color_settings||{}},pto_type_visibility:{...fm,...A.pto_type_visibility||{}},pdf_layout_settings:{...tr,...A.pdf_layout_settings||{}}}},retry:1,staleTime:0,gcTime:0});w.useEffect(()=>{j!=null&&j.color_settings&&i(j.color_settings),j!=null&&j.pto_type_visibility&&o(j.pto_type_visibility),j!=null&&j.anniversary_alert_recipients&&m(j.anniversary_alert_recipients)},[j]);const P=Xt({mutationFn:async A=>{console.log("Updating settings with ID:",j==null?void 0:j.id,"Updates:",A);const q={...A,id:j==null?void 0:j.id,updated_at:new Date().toISOString()};console.log("Data being sent to Supabase:",q);const{data:U,error:R}=await se.from("website_settings").upsert(q,{onConflict:"id"}).select().single();if(R)throw console.error("Error updating settings:",R),R;return U},onSuccess:A=>{console.log("Settings updated successfully:",A),r.invalidateQueries({queryKey:["website-settings"],refetchType:"active"}),ge.success("Settings updated successfully")},onError:A=>{console.error("Error updating settings:",A),ge.error("Failed to update settings")}}),M=(A,q)=>{P.mutate({id:j==null?void 0:j.id,[A]:q})},I=(A,q)=>{let U=[...h];q&&!U.includes(A)?U.push(A):!q&&U.includes(A)&&(U=U.filter(R=>R!==A)),m(U),P.mutate({id:j==null?void 0:j.id,anniversary_alert_recipients:U})},O=(A,q)=>{const U={...a,[A]:q};o(U),P.mutate({id:j==null?void 0:j.id,pto_type_visibility:U})},L=(A,q)=>{const R=(F=>{if(F=F.replace("#",""),F.length!==6)return"255,255,255";try{const X=parseInt(F.substring(0,2),16),re=parseInt(F.substring(2,4),16),z=parseInt(F.substring(4,6),16);return isNaN(X)||isNaN(re)||isNaN(z)?"255,255,255":`${X},${re},${z}`}catch{return"255,255,255"}})(q),C={...n,[A]:R};i(C),P.mutate({id:j==null?void 0:j.id,color_settings:C})},T=A=>{console.log("Saving PDF layout settings:",A),P.mutate({id:j==null?void 0:j.id,pdf_layout_settings:A})},k=async()=>{var A,q,U,R,C;g(!0);try{const F=new Date().toISOString().split("T")[0];console.log("Fetching shift data for date:",F);const{data:X,error:re}=await se.from("shifts").select(`
          *,
          shift_assignments!inner(
            *,
            officers!inner(
              id,
              first_name,
              last_name,
              badge_number,
              rank,
              unit,
              position,
              is_supervisor,
              is_ppo
            )
          )
        `).eq("date",F).order("created_at",{ascending:!1}).limit(1).single();if(!re&&X){console.log("Found actual shift data:",X);const Y={shift:{name:X.name||"DAY SHIFT",start_time:X.start_time||"07:00",end_time:X.end_time||"15:00"},supervisors:((A=X.shift_assignments)==null?void 0:A.filter(J=>{var ne;return(ne=J.officers)==null?void 0:ne.is_supervisor}).map(J=>{var ne,le,G,he,xe,Se,K,we,Te;return{id:J.officer_id,name:`${((ne=J.officers)==null?void 0:ne.first_name)||""} ${((le=J.officers)==null?void 0:le.last_name)||""}`.trim()||"Unknown Officer",badge:((G=J.officers)==null?void 0:G.badge_number)||"0000",position:((he=J.officers)==null?void 0:he.position)||((xe=J.officers)==null?void 0:xe.rank)||"Supervisor",unitNumber:((Se=J.officers)==null?void 0:Se.unit)||J.unit||"",rank:((K=J.officers)==null?void 0:K.rank)||"",hasPTO:!1,firstName:(we=J.officers)==null?void 0:we.first_name,lastName:(Te=J.officers)==null?void 0:Te.last_name}}))||[],officers:((q=X.shift_assignments)==null?void 0:q.filter(J=>{var ne,le;return!((ne=J.officers)!=null&&ne.is_supervisor)&&!((le=J.officers)!=null&&le.is_ppo)}).map(J=>{var ne,le,G,he,xe,Se,K,we;return{id:J.officer_id,name:`${((ne=J.officers)==null?void 0:ne.first_name)||""} ${((le=J.officers)==null?void 0:le.last_name)||""}`.trim()||"Unknown Officer",badge:((G=J.officers)==null?void 0:G.badge_number)||"0000",position:((he=J.officers)==null?void 0:he.position)||J.beat||"Officer",unitNumber:((xe=J.officers)==null?void 0:xe.unit)||J.unit||"",hasPTO:!1,isPPO:((Se=J.officers)==null?void 0:Se.is_ppo)||!1,firstName:(K=J.officers)==null?void 0:K.first_name,lastName:(we=J.officers)==null?void 0:we.last_name}}))||[],specialAssignmentOfficers:((U=X.shift_assignments)==null?void 0:U.filter(J=>J.is_special_assignment).map(J=>{var ne,le,G,he,xe,Se;return{id:J.officer_id,name:`${((ne=J.officers)==null?void 0:ne.first_name)||""} ${((le=J.officers)==null?void 0:le.last_name)||""}`.trim()||"Unknown Officer",badge:((G=J.officers)==null?void 0:G.badge_number)||"0000",position:J.special_assignment_type||J.position||"Special Assignment",unitNumber:((he=J.officers)==null?void 0:he.unit)||J.unit||"",hasPTO:!1,firstName:(xe=J.officers)==null?void 0:xe.first_name,lastName:(Se=J.officers)==null?void 0:Se.last_name}}))||[],ptoRecords:await b(new Date),currentSupervisors:((R=X.shift_assignments)==null?void 0:R.filter(J=>{var ne;return(ne=J.officers)==null?void 0:ne.is_supervisor}).length)||2,minSupervisors:X.min_supervisors||2,currentOfficers:((C=X.shift_assignments)==null?void 0:C.filter(J=>{var ne,le;return!((ne=J.officers)!=null&&ne.is_supervisor)&&!((le=J.officers)!=null&&le.is_ppo)}).length)||8,minOfficers:X.min_officers||8};console.log("Processed actual data for preview:",Y),u(Y),c(!0);return}console.log("No actual shift data found, using mock data"),u({shift:{name:"DAY SHIFT",start_time:"07:00",end_time:"15:00"},supervisors:[{id:1,name:"SGT. JANE DOE",badge:"1234",position:"District 1 Supervisor",unitNumber:"Unit 1",rank:"Sergeant",hasPTO:!1,firstName:"Jane",lastName:"Doe"},{id:2,name:"LT. JOHN SMITH",badge:"5678",position:"District 2 Supervisor",unitNumber:"Unit 2",rank:"Lieutenant",hasPTO:!1,firstName:"John",lastName:"Smith"}],officers:[{id:3,name:"OFFICER ALEX JONES",badge:"9012",position:"Beat 101",unitNumber:"101",hasPTO:!1,isPPO:!1,firstName:"Alex",lastName:"Jones"},{id:4,name:"OFFICER SAM WILSON",badge:"3456",position:"Beat 102",unitNumber:"102",hasPTO:!1,isPPO:!1,firstName:"Sam",lastName:"Wilson"},{id:5,name:"OFFICER CHRIS TAYLOR",badge:"7891",position:"Beat 103",unitNumber:"103",hasPTO:!1,isPPO:!1,firstName:"Chris",lastName:"Taylor"},{id:6,name:"OFFICER PATRICK MILLER",badge:"2345",position:"Beat 104",unitNumber:"104",hasPTO:!1,isPPO:!1,firstName:"Patrick",lastName:"Miller"}],specialAssignmentOfficers:[{id:7,name:"OFFICER TOM HARRIS",badge:"7890",position:"Traffic Enforcement",unitNumber:"T-1",hasPTO:!1,firstName:"Tom",lastName:"Harris"},{id:8,name:"OFFICER SARAH CONNOR",badge:"1357",position:"K9 Unit",unitNumber:"K9-1",hasPTO:!1,firstName:"Sarah",lastName:"Connor"}],ptoRecords:[{id:9,name:"OFFICER MIKE BROWN",badge:"1111",ptoType:"VACATION",startTime:"07:00",endTime:"15:00",isFullShift:!0,firstName:"Mike",lastName:"Brown"},{id:10,name:"OFFICER LISA WHITE",badge:"2222",ptoType:"SICK",startTime:"07:00",endTime:"11:00",isFullShift:!1,firstName:"Lisa",lastName:"White"}],currentSupervisors:2,minSupervisors:2,currentOfficers:4,minOfficers:8}),c(!0)}catch(F){console.error("Error generating preview data:",F),ge.error("Failed to generate preview")}finally{g(!1)}},E=async()=>{v(!0);const A=ge.loading("Resetting all settings to defaults...");try{i(hm),o(fm),m(["admin","supervisor"]);const q={id:j==null?void 0:j.id,color_settings:hm,pto_type_visibility:fm,anniversary_alert_recipients:["admin","supervisor"],pdf_layout_settings:tr,...Rw},{data:U,error:R}=await se.from("website_settings").upsert(q,{onConflict:"id"}).select().single();if(R)throw R;r.invalidateQueries({queryKey:["website-settings"],refetchType:"active"}),await r.refetchQueries({queryKey:["website-settings"]}),ge.dismiss(A),ge.success("All settings have been reset to defaults")}catch(q){console.error("Error resetting settings:",q),ge.error("Failed to reset settings")}finally{v(!1)}};return S?s.jsx(pt,{children:s.jsxs(gt,{className:"flex justify-center items-center py-8",children:[s.jsx(Ci,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading settings..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(fl,{value:y,onValueChange:x,className:"w-full",children:[s.jsxs(sa,{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 h-auto",children:[" ",s.jsx(er,{value:"notifications",className:"py-2",children:"Notifications"}),s.jsx(er,{value:"pdf",className:"py-2",children:"PDF Layout"}),s.jsx(er,{value:"pto",className:"py-2",children:"PTO Settings"}),s.jsx(er,{value:"events",className:"py-2",children:"Events Dashboard"}),s.jsxs(er,{value:"staffing",className:"py-2",children:[" ","Staffing Rules"]}),s.jsx(er,{value:"colors",className:"py-2",children:"Colors"}),s.jsx(er,{value:"alerts",className:"py-2",children:"Alerts"}),s.jsx(er,{value:"system",className:"py-2",children:"System"})]}),s.jsxs(Un,{value:"notifications",className:"space-y-6 mt-6",children:[s.jsx(Xne,{settings:j,handleToggle:M,isPending:P.isPending}),s.jsx(a4,{settings:j,handleToggle:M,handleRecipientChange:I,isPending:P.isPending}),s.jsx(KC,{settings:j,handleToggle:M,isPending:P.isPending}),s.jsx(GC,{ptoVisibility:a,handlePtoVisibilityToggle:O,isPending:P.isPending})]}),s.jsx(Un,{value:"pdf",className:"space-y-6 mt-6",children:s.jsx(pie,{settings:j,onSave:T,onPreview:k,isPending:P.isPending,isPreviewLoading:f})}),s.jsx(Un,{value:"staffing",className:"space-y-6 mt-6",children:s.jsx(xie,{})}),s.jsxs(Un,{value:"pto",className:"space-y-6 mt-6",children:[s.jsx(KC,{settings:j,handleToggle:M,isPending:P.isPending}),s.jsx(GC,{ptoVisibility:a,handlePtoVisibilityToggle:O,isPending:P.isPending})]}),s.jsxs(Un,{value:"events",className:"space-y-6 mt-6",children:[s.jsx(vie,{settings:j,handleToggle:M,isPending:P.isPending}),s.jsx(yie,{settings:j,handleToggle:M,isPending:P.isPending})]}),s.jsxs(Un,{value:"colors",className:"space-y-6 mt-6",children:[s.jsx(Qne,{colorSettings:n,handleColorChange:L,isPending:P.isPending,settings:j,ptoVisibility:a,updateSettingsMutation:P,setColorSettings:i}),s.jsx($ne,{colorSettings:n,handleColorChange:L,resetToDefaults:E,isPending:P.isPending||p})]}),s.jsxs(Un,{value:"alerts",className:"space-y-6 mt-6",children:[(e||t)&&s.jsx(Kse,{}),s.jsx(a4,{settings:j,handleToggle:M,handleRecipientChange:I,isPending:P.isPending})]}),s.jsxs(Un,{value:"system",className:"space-y-6 mt-6",children:[(e||t)&&s.jsx(ese,{}),s.jsx(qse,{}),s.jsx(Gse,{})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Ne,{variant:"outline",onClick:E,disabled:S||P.isPending||p,children:p||P.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"h-4 w-4 mr-2 animate-spin"}),p?"Resetting...":"Saving..."]}):"Reset All Settings to Defaults"})}),s.jsx(gie,{open:l,onOpenChange:c,previewData:d,layoutSettings:(j==null?void 0:j.pdf_layout_settings)||tr,selectedDate:new Date})]})},wie=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState("default"),[i,a]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(null),u=Lr();w.useEffect(()=>{let j=!0;(async()=>{try{console.log(" [AUTH] Getting current user...");const{data:{user:M},error:I}=await se.auth.getUser();if(I){console.error(" [AUTH] Error getting user:",I);return}console.log(" [AUTH] Current user:",{id:M==null?void 0:M.id,email:M==null?void 0:M.email,hasId:!!(M!=null&&M.id)}),j&&(d((M==null?void 0:M.id)||null),console.log(" [AUTH] Set user ID in state:",M==null?void 0:M.id));const O="Notification"in window&&"serviceWorker"in navigator;if(t(O),console.log(" [AUTH] Notifications supported:",O),O){const L=z2.getInstance();l(L),await L.initialize();const T=Notification.permission;n(T),a(T==="granted"),console.log(" [AUTH] Notification permission:",T)}}catch(M){console.error(" [AUTH] Error initializing notifications:",M)}})();const{data:{subscription:P}}=se.auth.onAuthStateChange(async(M,I)=>{var O,L,T;console.log(" [AUTH] Auth state changed:",M,"User ID:",(O=I==null?void 0:I.user)==null?void 0:O.id),j&&(d(((L=I==null?void 0:I.user)==null?void 0:L.id)||null),console.log(" [AUTH] Updated user ID in state:",(T=I==null?void 0:I.user)==null?void 0:T.id),u.invalidateQueries({queryKey:["in-app-notifications"]}),u.invalidateQueries({queryKey:["unread-notifications-count"]}))});return()=>{j=!1,P.unsubscribe()}},[u]);const{data:h,isLoading:m}=bt({queryKey:["in-app-notifications",c],queryFn:async()=>{if(!c)return console.log(" [QUERY] No user ID, skipping notification fetch"),[];console.log(" [QUERY] Fetching notifications for user:",c);try{const{data:j,error:S}=await se.from("notifications").select("*").eq("user_id",c).order("created_at",{ascending:!1}).limit(50);if(S)throw console.error(" [QUERY] Error fetching notifications:",S),S;return console.log(` [QUERY] Found ${(j==null?void 0:j.length)||0} notifications for user ${c}`),j}catch(j){return console.error(" [QUERY] Failed to fetch notifications:",j),[]}},enabled:!!c,refetchInterval:3e4}),{data:f}=bt({queryKey:["unread-notifications-count",c],queryFn:async()=>{if(!c)return console.log(" No user ID, skipping unread count"),0;try{const{count:j,error:S}=await se.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",c).eq("is_read",!1);return S?(console.error(" Error fetching unread count:",S),0):(console.log(` User ${c} has ${j||0} unread notifications`),j||0)}catch(j){return console.error(" Failed to fetch unread count:",j),0}},enabled:!!c,refetchInterval:3e4}),g=Xt({mutationFn:async j=>{if(!c)throw new Error("No user ID");const{error:S}=await se.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",j).eq("user_id",c);if(S)throw S},onSuccess:()=>{u.invalidateQueries({queryKey:["in-app-notifications",c]}),u.invalidateQueries({queryKey:["unread-notifications-count",c]})},onError:j=>{console.error(" Error marking notification as read:",j)}}),y=Xt({mutationFn:async()=>{if(!c)throw new Error("No user ID");const{error:j}=await se.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("user_id",c).eq("is_read",!1);if(j)throw j},onSuccess:()=>{u.invalidateQueries({queryKey:["in-app-notifications",c]}),u.invalidateQueries({queryKey:["unread-notifications-count",c]})},onError:j=>{console.error(" Error marking all as read:",j)}}),x=async()=>{if(!o)return!1;try{const j=await o.requestPermission();return n(j),a(j==="granted"),j==="granted"}catch(j){return console.error("Error requesting notification permission:",j),!1}},p=(j,S)=>{o&&i&&o.showNotification(j,S)},v=()=>{o&&i&&o.testNotification()},b=(j,S)=>{o&&i&&o.scheduleShiftReminder(j,S)};return w.useEffect(()=>{console.log(" [HOOK STATE] Current state:",{userId:c,inAppNotificationsCount:h==null?void 0:h.length,unreadCount:f,notificationsLoading:m,queryEnabled:!!c})},[c,h,f,m]),{isSupported:e,permission:r,isEnabled:i,requestPermission:x,showNotification:p,testNotification:v,scheduleShiftReminder:b,notificationService:o,inAppNotifications:h||[],notificationsLoading:m,unreadCount:f||0,markAsRead:j=>g.mutate(j),markAllAsRead:()=>y.mutate(),userId:c}},Nie=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(!1),i=Lr(),{inAppNotifications:a,notificationsLoading:o,unreadCount:l,markAsRead:c,markAllAsRead:d,isEnabled:u,requestPermission:h,userId:m}=wie(),f=async()=>{!u&&!await h()||t(!e)},g=b=>{c(b)},y=async()=>{if(!m){ge.error("User not authenticated");return}const b=(a==null?void 0:a.filter(j=>j.is_read))||[];if(b.length===0){ge.info("No read notifications to clear");return}n(!0);try{console.log(" Attempting to delete read notifications for user:",m),console.log(" Read notifications to delete:",b.length);const{error:j,count:S}=await se.from("notifications").delete({count:"exact"}).eq("user_id",m).eq("is_read",!0);j?(console.error(" Error clearing read notifications:",j),ge.error("Failed to clear notifications: "+j.message)):(console.log(" Successfully deleted notifications. Count:",S),ge.success(`Cleared ${S||b.length} read notification${(S||b.length)>1?"s":""}`),await i.invalidateQueries({queryKey:["in-app-notifications",m]}),await i.invalidateQueries({queryKey:["unread-notifications-count",m]}),console.log(" Queries invalidated, refetching..."))}catch(j){console.error(" Exception while clearing notifications:",j),ge.error("Failed to clear notifications")}finally{n(!1)}},x=b=>{switch(b){case"pto_request":return s.jsx(pr,{className:"h-4 w-4"});case"pto_status":return s.jsx(Uh,{className:"h-4 w-4"});case"manual_alert":return s.jsx(ki,{className:"h-4 w-4"});default:return s.jsx(ki,{className:"h-4 w-4"})}},p=b=>{switch(b){case"pto_request":return"bg-blue-50 border-blue-200";case"pto_status":return"bg-green-50 border-green-200";case"manual_alert":return"bg-orange-50 border-orange-200";default:return"bg-gray-50 border-gray-200"}},v=(a==null?void 0:a.filter(b=>b.is_read).length)||0;return s.jsxs(Mr,{open:e,onOpenChange:t,children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"ghost",size:"icon",className:"relative",onClick:f,children:[s.jsx(ki,{className:"h-5 w-5"}),l>0&&s.jsx(Re,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",variant:"destructive",children:l>9?"9+":l})]})}),s.jsxs(Tr,{className:"w-80 p-0",align:"end",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold",children:"Notifications"}),l>0&&s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>d(),className:"text-xs",children:"Mark all as read"})]})}),s.jsx(P5,{className:"h-[400px]",children:o?s.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading notifications..."}):!a||a.length===0?s.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No notifications"}):s.jsx("div",{className:"p-1",children:a.map(b=>s.jsx("div",{className:$e("p-3 border-b cursor-pointer transition-colors hover:bg-accent",p(b.type),!b.is_read&&"font-medium"),onClick:()=>g(b.id),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-0.5",children:x(b.type)}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium",children:b.title}),!b.is_read&&s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:b.message}),s.jsx("p",{className:"text-xs text-muted-foreground",children:zK(new Date(b.created_at),{addSuffix:!0})})]})]})},b.id))})}),v>0&&s.jsx("div",{className:"p-3 border-t",children:s.jsx(Ne,{variant:"outline",size:"sm",className:"w-full",onClick:y,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-gray-600 mr-2"}),"Clearing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Clear Read Notifications (",v,")"]})})})]})]})},jie=({userId:e,userEmail:t,onSuccess:r,children:n})=>{const[i,a]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(!1),[m,f]=w.useState(!1),[g,y]=w.useState(!1),[x,p]=w.useState(!1),v=Xt({mutationFn:async()=>{if(!i)throw new Error("Please enter your current password");if(!o)throw new Error("Please enter a new password");if(!c)throw new Error("Please confirm your new password");if(o.length<6)throw new Error("New password must be at least 6 characters");if(o!==c)throw new Error("New passwords do not match");const{error:j}=await se.auth.signInWithPassword({email:t,password:i});if(j)throw new Error("Current password is incorrect");const{data:{session:S}}=await se.auth.getSession();if(!S)throw new Error("Session expired. Please try again.");const P=await fetch("https://ywghefarrcwbnraqyfgk.supabase.co/functions/v1/update-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},body:JSON.stringify({userId:e,newPassword:o})}),M=await P.json();if(!P.ok)throw new Error(M.error||"Failed to change password");return await Ir.log({user_id:e,user_email:t,action_type:"password_change",table_name:"auth.users",record_id:e,description:"User changed their own password"}),M},onSuccess:()=>{ge.success("Password changed successfully"),a(""),l(""),d(""),p(!1),r&&r()},onError:j=>{ge.error(j.message||"Failed to change password")}}),b=()=>{v.mutate()};return s.jsxs(rn,{open:x,onOpenChange:p,children:[s.jsx(yc,{asChild:!0,children:n}),s.jsxs(Vr,{className:"sm:max-w-md",onInteractOutside:j=>j.preventDefault(),children:[s.jsxs(Yr,{children:[s.jsxs(Kr,{className:"flex items-center gap-2",children:[s.jsx(Ry,{className:"h-5 w-5"}),"Change Your Password"]}),s.jsx(as,{children:"Update your account password. You'll need to enter your current password first."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"current-password",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{id:"current-password",type:u?"text":"password",placeholder:"Enter current password",value:i,onChange:j=>a(j.target.value),className:"pr-10"}),s.jsx(Ne,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>h(!u),children:u?s.jsx(kb,{className:"h-4 w-4"}):s.jsx(Fd,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"new-password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{id:"new-password",type:m?"text":"password",placeholder:"Enter new password",value:o,onChange:j=>l(j.target.value),className:"pr-10"}),s.jsx(Ne,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>f(!m),children:m?s.jsx(kb,{className:"h-4 w-4"}):s.jsx(Fd,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters long"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{id:"confirm-password",type:g?"text":"password",placeholder:"Confirm new password",value:c,onChange:j=>d(j.target.value),className:"pr-10"}),s.jsx(Ne,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>y(!g),children:g?s.jsx(kb,{className:"h-4 w-4"}):s.jsx(Fd,{className:"h-4 w-4"})})]})]}),s.jsx(Ne,{onClick:b,disabled:v.isPending||!i||!o||!c,className:"w-full",children:v.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"h-4 w-4 animate-spin mr-2"}),"Changing Password..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ry,{className:"h-4 w-4 mr-2"}),"Change Password"]})}),s.jsxs("div",{className:"p-3 border rounded-lg bg-amber-50 dark:bg-amber-950/20",children:[s.jsx("h4",{className:"font-medium text-sm text-amber-800 dark:text-amber-300",children:"Security Notice"}),s.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-1",children:[" Your password will be updated immediately",s.jsx("br",{})," You'll need to use the new password on your next login",s.jsx("br",{})," Make sure to remember your new password"]})]})]})]})]})},_ie=({userId:e,isAdminOrSupervisor:t=!1})=>{const[r,n]=w.useState(null),[i,a]=w.useState(null),[o,l]=w.useState(!1),[c,d]=w.useState(""),[u,h]=w.useState(null),[m,f]=w.useState(!1),[g,y]=w.useState("directory"),{data:x}=ml(),{data:p,isLoading:v}=bt({queryKey:["all-officers"],queryFn:async()=>{const{data:P,error:M}=await se.from("profiles").select("*");if(M)throw M;const{data:I,error:O}=await se.from("user_roles").select("user_id, role");if(O)throw O;return(await Promise.all(P.map(async k=>{const{data:E}=await se.rpc("get_service_credit",{profile_id:k.id});return{...k,service_credit:E||0,roles:(I==null?void 0:I.filter(A=>A.user_id===k.id).map(A=>A.role))||[]}}))).sort((k,E)=>{var U,R;const A=((U=k.full_name.split(" ").pop())==null?void 0:U.toLowerCase())||"",q=((R=E.full_name.split(" ").pop())==null?void 0:R.toLowerCase())||"";return A.localeCompare(q)})}}),b=P=>{var I;const M=((I=P.rank)==null?void 0:I.toLowerCase())||"";return M.includes("lieutenant")||M.includes("lt")?"LT Seniority":M.includes("sergeant")||M.includes("sgt")?"SGT Seniority":"Service Credit"},j=P=>{var O;const M=((O=P.rank)==null?void 0:O.toLowerCase())||"",I=[];return P.hire_date&&I.push(s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(xt,{className:"h-2 w-2"}),s.jsxs("span",{children:["Hire: ",Pe(new Date(P.hire_date),"MMM yyyy")]})]},"hire")),(M.includes("lieutenant")||M.includes("lt"))&&P.promotion_date_lieutenant?I.push(s.jsxs("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["LT: ",Pe(new Date(P.promotion_date_lieutenant),"MMM yyyy")]})]},"lt-since")):(M.includes("sergeant")||M.includes("sgt"))&&P.promotion_date_sergeant&&I.push(s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["SGT: ",Pe(new Date(P.promotion_date_sergeant),"MMM yyyy")]})]},"sgt-since")),M.includes("lieutenant")||M.includes("lt")?P.promotion_date_sergeant&&I.push(s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["SGT: ",Pe(new Date(P.promotion_date_sergeant),"MMM yyyy")]})]},"sgt-promo")):!M.includes("sergeant")&&!M.includes("sgt")&&(P.promotion_date_sergeant&&I.push(s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["SGT: ",Pe(new Date(P.promotion_date_sergeant),"MMM yyyy")]})]},"sgt-promo")),P.promotion_date_lieutenant&&I.push(s.jsxs("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-500",children:[s.jsx(Qi,{className:"h-2 w-2"}),s.jsxs("span",{children:["LT: ",Pe(new Date(P.promotion_date_lieutenant),"MMM yyyy")]})]},"lt-promo"))),I},S=w.useMemo(()=>{if(!p)return[];if(!c.trim())return p;const P=c.toLowerCase().trim();return p.filter(M=>{var I,O,L,T,k;return((I=M.full_name)==null?void 0:I.toLowerCase().includes(P))||((O=M.email)==null?void 0:O.toLowerCase().includes(P))||((L=M.badge_number)==null?void 0:L.toLowerCase().includes(P))||((T=M.rank)==null?void 0:T.toLowerCase().includes(P))||((k=M.phone)==null?void 0:k.toLowerCase().includes(P))})},[p,c]);return s.jsxs("div",{className:"pb-4",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-background border-b pb-4 px-4 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Staff Management"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage personnel and schedules"})]}),g==="directory"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{size:"sm",onClick:()=>l(!0),className:"h-8 w-8 p-0",children:s.jsx(Ti,{className:"h-4 w-4"})}),s.jsxs(XD,{open:m,onOpenChange:f,children:[s.jsx(bte,{asChild:!0,children:s.jsx(Ne,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(oj,{className:"h-4 w-4"})})}),s.jsxs(h5,{side:"bottom",className:"h-[80vh]",children:[s.jsx(f5,{children:s.jsx(m5,{children:"Search & Filter"})}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search officers...",value:c,onChange:P=>d(P.target.value),className:"pl-10",autoFocus:!0})]}),c&&s.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[S.length," ",S.length===1?"officer":"officers"," found"]})]})]})]})]})]}),s.jsxs(fl,{defaultValue:"directory",value:g,onValueChange:y,children:[s.jsxs(sa,{className:"grid w-full grid-cols-2",children:[s.jsxs(er,{value:"directory",children:[s.jsx(jr,{className:"h-4 w-4 mr-2"}),"Directory"]}),s.jsxs(er,{value:"schedules",children:[s.jsx(xt,{className:"h-4 w-4 mr-2"}),"Schedules"]})]}),s.jsx(Un,{value:"directory",className:"mt-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search officers...",value:c,onChange:P=>d(P.target.value),className:"pl-10"}),c&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx(Re,{variant:"secondary",className:"text-xs",children:S.length})})]})}),s.jsx(Un,{value:"schedules",className:"mt-0",children:s.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Manage weekly and monthly officer schedules"})})]})]}),s.jsx("div",{className:"px-4 mt-4",children:g==="directory"?v?s.jsx("div",{className:"flex justify-center items-center h-32",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading officers..."})}):!p||p.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(jr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No officers found."}),s.jsxs(Ne,{onClick:()=>l(!0),className:"flex items-center gap-2 mx-auto",children:[s.jsx(Ti,{className:"h-4 w-4"}),"Create First Officer"]})]}):s.jsx("div",{className:"space-y-3",children:S.length===0&&c?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Bd,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:['No officers found for "',c,'"']}),s.jsx(Ne,{variant:"outline",onClick:()=>d(""),size:"sm",children:"Clear search"})]}):S.map(P=>{var M,I;return s.jsx("div",{className:"p-3 border rounded-lg bg-card",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-base truncate",children:P.full_name}),s.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[P.rank&&s.jsx(Re,{variant:"secondary",className:"text-xs capitalize",children:P.rank}),P.roles&&P.roles.length>0&&P.roles.map((O,L)=>s.jsx(Re,{variant:"outline",className:"text-xs capitalize",children:O},L))]})]}),s.jsxs(ig,{children:[s.jsx(ag,{asChild:!0,children:s.jsx(Ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(sB,{className:"h-4 w-4"})})}),s.jsxs(gf,{align:"end",children:[s.jsxs(Ds,{onClick:()=>n(P),children:[s.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),s.jsxs(Ds,{onClick:()=>a(P),children:[s.jsx(xt,{className:"h-4 w-4 mr-2"}),"Manage Schedule"]}),s.jsxs(Ds,{onClick:()=>h(P),children:[s.jsx(xt,{className:"h-4 w-4 mr-2"}),"Bulk PTO"]})]})]})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[P.badge_number&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-muted-foreground w-24",children:"Badge:"}),s.jsx("span",{children:P.badge_number})]}),P.email&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-muted-foreground w-24",children:"Email:"}),s.jsx("span",{className:"truncate",children:P.email})]}),P.phone&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-muted-foreground w-24",children:"Phone:"}),s.jsx("span",{children:P.phone})]})]}),x!=null&&x.show_pto_balances&&(x!=null&&x.pto_balances_visible)?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Vacation:"})]}),s.jsxs("span",{className:"font-medium text-sm",children:[P.vacation_hours||0,"h"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Sick:"})]}),s.jsxs("span",{className:"font-medium text-sm",children:[P.sick_hours||0,"h"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Comp:"})]}),s.jsxs("span",{className:"font-medium text-sm",children:[P.comp_hours||0,"h"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Holiday:"})]}),s.jsxs("span",{className:"font-medium text-sm",children:[P.holiday_hours||0,"h"]})]})]}),s.jsxs("div",{className:"pt-2 border-t space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ni,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[b(P),":"]}),s.jsxs("span",{className:"font-medium text-sm ml-1",children:[((M=P.service_credit)==null?void 0:M.toFixed(1))||0," yrs"]}),P.service_credit_override!==null&&s.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-500 ml-1",children:"(Adj)"})]}),s.jsx("div",{className:"space-y-1 text-xs pl-4",children:j(P)})]})]}):s.jsxs("div",{className:"pt-2 border-t space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ni,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[b(P),":"]}),s.jsxs("span",{className:"font-medium text-sm ml-1",children:[((I=P.service_credit)==null?void 0:I.toFixed(1))||0," yrs"]})]}),s.jsx("div",{className:"space-y-1 text-xs pl-4",children:j(P)}),s.jsx("div",{className:"text-xs text-muted-foreground italic",children:"PTO managed as indefinite"})]})]})},P.id)})}):s.jsx(AR,{userId:e,isAdminOrSupervisor:t,isMobile:!0})}),r&&s.jsx(ix,{officer:r,open:!!r,onOpenChange:P=>!P&&n(null)}),i&&s.jsx(OR,{officer:i,open:!!i,onOpenChange:P=>!P&&a(null)}),o&&s.jsx(ix,{officer:null,open:!!o,onOpenChange:P=>!P&&l(!1)}),u&&s.jsx(ER,{officer:u,open:!!u,onOpenChange:P=>!P&&h(null)})]})},Sie=({onSubscribed:e})=>{const{user:t,isLoading:r}=ff(),n=(t==null?void 0:t.id)||"",[i,a]=w.useState("loading"),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState("");w.useEffect(()=>{console.log(" PoliceNotificationSubscribe auth status:",{hasUser:!!t,userId:t==null?void 0:t.id,email:t==null?void 0:t.email,authLoading:r,browserPermission:Notification.permission}),!t&&!r&&(h(" No authenticated user found. Please log in."),console.error("No authenticated user for notifications"))},[t,r]),w.useEffect(()=>{(async()=>{if(!n||r){console.log(" Waiting for user authentication...");return}try{console.log(" Fetching profile for user:",n);const{data:v,error:b}=await se.from("profiles").select("*").eq("id",n).single();if(b){if(console.error(" Error fetching profile:",b),b.code==="PGRST116"){h(" User profile not found in database. Creating profile..."),await m();return}return}console.log(" Profile fetched:",{id:v.id,email:v.email,subscribed:v.notification_subscribed}),d(v),h(" Profile loaded successfully"),g()}catch(v){console.error(" Error in fetchUserProfile:",v),h(" Failed to load profile")}})()},[n,r]);const m=async()=>{var p;if(t)try{console.log(" Creating profile for user:",t.id);const{data:v,error:b}=await se.from("profiles").insert({id:t.id,email:t.email,full_name:((p=t.email)==null?void 0:p.split("@")[0])||"Officer",badge_number:"UNASSIGNED",role:"officer",active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();return b?(console.error(" Failed to create profile:",b),h(" Failed to create user profile"),null):(console.log(" Profile created:",v),d(v),h(" Profile created successfully"),v)}catch(v){return console.error(" Error creating profile:",v),h(" Error creating profile"),null}},f=async p=>{try{if(!n)return console.error(" No user ID available to store notification status"),h(" No user ID available"),!1;console.log(" Storing notification status in profile:",{profileUserId:n,subscribed:p,timestamp:new Date().toISOString()});const{data:v,error:b}=await se.from("profiles").select("id").eq("id",n).single();console.log(" Profile existence check:",{exists:!!v,checkError:b}),v||(console.log(" Profile not found, creating..."),await m());const{error:j}=await se.from("profiles").update({notification_subscribed:p,notification_subscribed_at:p?new Date().toISOString():null,notification_provider:p?"browser":null,updated_at:new Date().toISOString()}).eq("id",n);return j?(console.error(" Database error:",j),h(` Database error: ${j.message}`),!1):(console.log(" Notification status stored successfully in profiles table"),h(" Notification status saved to database"),d(S=>({...S,notification_subscribed:p,notification_subscribed_at:p?new Date().toISOString():null,notification_provider:p?"browser":null})),!0)}catch(v){return console.error(" Error storing notification status:",v),h(" Error saving to database"),!1}},g=async()=>{try{const p=Notification.permission;if(console.log(" Browser notification permission:",p),p==="denied"){a("blocked"),h(" Notifications blocked in browser settings");return}const v=(c==null?void 0:c.notification_subscribed)||!1;console.log(" Notification status check:",{isSubscribed:v,permission:p}),v&&p==="granted"?(a("subscribed"),h(" Subscribed to push notifications")):(a("unsubscribed"),h(p==="granted"?" Browser allows notifications but subscription not active":p==="default"?" Notifications not enabled yet":" Not subscribed to notifications"))}catch(p){console.error(" Check subscription error:",p),a("unsubscribed"),h(" Error checking notification status")}};w.useEffect(()=>{r||c&&g()},[c,r]);const y=async()=>{var p;if(!n){h(" Please log in first"),alert("You must be logged in to enable notifications.");return}l(!0),h(" Enabling notifications...");try{console.log(" Starting browser notification subscription...");const v=await Notification.requestPermission();console.log("Browser permission result:",v),v==="granted"?await f(!0)?(a("subscribed"),h(" Successfully subscribed!"),alert(" Success! You will now receive shift alerts and emergency notifications."),e==null||e()):(h(" Could not save subscription. Please try again."),alert("Failed to save notification settings. Please try again.")):v==="denied"?(a("blocked"),h(" Notifications blocked by user"),alert("Notifications are required for shift alerts. Please enable in browser settings.")):(h(" Permission request cancelled"),alert("Notifications are required for shift alerts."))}catch(v){console.error(" Subscription error:",v),h(` Error: ${v.message}`),(p=v.message)!=null&&p.includes("permission")?alert("Please allow notifications in your browser settings."):alert("Failed to enable notifications. Please try again or contact IT support.")}finally{l(!1)}},x=async()=>{if(confirm("Are you sure you want to stop receiving notifications?")){l(!0),h(" Disabling notifications...");try{await f(!1)?(a("unsubscribed"),h(" Notifications disabled"),alert("Notifications have been disabled.")):(h(" Failed to disable notifications"),alert("Failed to disable notifications."))}catch(p){console.error("Unsubscribe error:",p),h(" Failed to disable notifications"),alert("Failed to disable notifications.")}finally{l(!1)}}};return r||i==="loading"?s.jsxs("div",{className:"p-6 border border-blue-200 rounded-lg bg-blue-50",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(Ci,{className:"h-5 w-5 animate-spin text-blue-600"}),s.jsx("span",{className:"text-blue-700 font-medium",children:r?"Checking authentication...":"Loading notification service..."})]}),u&&s.jsx("p",{className:"text-xs text-blue-600 mt-2 text-center",children:u})]}):t?i==="blocked"?s.jsxs("div",{className:"p-6 border border-red-300 rounded-lg bg-red-50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(IS,{className:"h-6 w-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-red-900",children:"Notifications Blocked"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Please enable notifications in your browser settings to receive shift alerts."})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-red-100 rounded border border-red-200",children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"To fix this:"}),s.jsxs("ol",{className:"text-sm text-red-700 mt-1 list-decimal list-inside space-y-1",children:[s.jsx("li",{children:"Click the lock icon () in your browser's address bar"}),s.jsx("li",{children:'Find "Notifications" in the permissions list'}),s.jsx("li",{children:'Change from "Block" to "Allow"'}),s.jsx("li",{children:"Refresh this page and try again"})]})]}),u&&s.jsx("p",{className:"text-xs text-red-600 mt-2",children:u})]}):i==="subscribed"?s.jsxs("div",{className:"p-6 border border-green-300 rounded-lg bg-green-50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(tf,{className:"h-6 w-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-green-900",children:"Notifications Enabled"}),s.jsx("p",{className:"text-sm text-green-700 mt-1",children:"You will receive real-time alerts for shift changes, emergencies, and announcements."})]})]}),(c==null?void 0:c.badge_number)&&s.jsxs("p",{className:"text-sm text-green-600 mb-3",children:["Badge: ",c.badge_number,"  Registered for notifications"]}),s.jsx("div",{className:"mt-4 flex gap-2",children:s.jsx(Ne,{onClick:x,variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Disable Notifications"})}),u&&s.jsx("p",{className:"text-xs text-green-600 mt-2",children:u})]}):s.jsxs("div",{className:"p-6 border border-blue-300 rounded-lg bg-blue-50 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:s.jsx(ki,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"Police Department Notifications"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Get real-time alerts for shift changes, emergencies, and department announcements"}),(c==null?void 0:c.badge_number)&&s.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["Officer: ",c.full_name,"  Badge: ",c.badge_number]})]})]}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-blue-800",children:"Shift change notifications"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-blue-800",children:"Emergency alerts"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-blue-800",children:"Schedule updates"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-blue-800",children:"Department announcements"})]})]}),s.jsx(Ne,{onClick:y,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 text-lg",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"mr-2 h-5 w-5 animate-spin"}),"Enabling Notifications..."]}):" Enable Police Notifications"}),s.jsxs("p",{className:"text-xs text-blue-600 mt-3 text-center",children:[s.jsx("strong",{children:"Required:"})," All officers must enable notifications to receive critical updates"]}),u&&s.jsx("p",{className:"text-xs text-blue-600 mt-2 text-center",children:u}),!1]}):s.jsx("div",{className:"p-6 border border-yellow-300 rounded-lg bg-yellow-50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(IS,{className:"h-6 w-6 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-yellow-900",children:"Authentication Required"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Please log in to enable police department notifications."})]})]})})},yd=class yd{constructor(){fr(this,"serviceWorkerRegistration",null);fr(this,"isPWA",!1);fr(this,"handleServiceWorkerMessage",t=>{const{data:r}=t;r.type==="BACKGROUND_CHECK_ANNIVERSARIES"&&(console.log(" Received background check request from service worker"),this.performAnniversaryCheck())})}static getInstance(){return yd.instance||(yd.instance=new yd),yd.instance}async initialize(){if("serviceWorker"in navigator)try{this.serviceWorkerRegistration=await navigator.serviceWorker.ready,console.log(" BackgroundTaskManager initialized"),this.isPWA=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,this.isPWA&&this.setupBackgroundTasks()}catch(t){console.error(" Failed to initialize BackgroundTaskManager:",t)}}setupBackgroundTasks(){var t;console.log(" Setting up background tasks for PWA"),this.scheduleAnniversaryCheck(),(t=this.serviceWorkerRegistration)!=null&&t.active&&navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage)}scheduleAnniversaryCheck(){var t;(t=this.serviceWorkerRegistration)!=null&&t.sync?this.serviceWorkerRegistration.sync.register("anniversary-check").then(()=>{console.log(" Background sync registered for anniversary check")}).catch(r=>{console.error(" Background sync registration failed:",r),this.schedulePeriodicCheck()}):this.schedulePeriodicCheck()}schedulePeriodicCheck(){var t;(t=this.serviceWorkerRegistration)!=null&&t.active&&this.serviceWorkerRegistration.active.postMessage({type:"SCHEDULE_ANNIVERSARY_CHECK"})}async performAnniversaryCheck(){var t;try{console.log(" Performing background anniversary check");const{data:{user:r}}=await se.auth.getUser();if(r){const{error:n}=await se.rpc("check_anniversary_alerts");n?console.error(" Background anniversary check failed:",n):(console.log(" Background anniversary check completed"),(t=this.serviceWorkerRegistration)!=null&&t.active&&this.serviceWorkerRegistration.active.postMessage({type:"ANNIVERSARY_CHECK_COMPLETED",timestamp:new Date().toISOString()}))}}catch(r){console.error(" Error in background anniversary check:",r)}}async sendPushNotification(t,r,n){if(!this.serviceWorkerRegistration){console.warn(" Service worker not available for push notification");return}try{const i={body:r,icon:"/icon-192.png",badge:"/badge-96.png",vibrate:[200,100,200],data:{url:(n==null?void 0:n.url)||"/",notificationId:(n==null?void 0:n.notificationId)||Date.now().toString(),type:(n==null?void 0:n.type)||"general"},actions:[{action:"view",title:"View"},{action:"dismiss",title:"Dismiss"}]};await this.serviceWorkerRegistration.showNotification(t,i),console.log(" Push notification sent:",t)}catch(i){console.error(" Failed to send push notification:",i)}}destroy(){var t;(t=this.serviceWorkerRegistration)!=null&&t.active&&navigator.serviceWorker.removeEventListener("message",this.handleServiceWorkerMessage)}};fr(yd,"instance");let sN=yd;const Wm=sN.getInstance(),l4=async()=>{var e;try{console.log(" Checking for anniversaries and birthdays...");const{data:t,error:r}=await se.from("website_settings").select("enable_anniversary_alerts, enable_birthday_alerts, anniversary_alert_recipients").single();if(r){console.error("Error fetching settings:",r);return}const{error:n}=await se.rpc("check_anniversary_alerts");n?(console.error("Error checking anniversaries:",n),"serviceWorker"in navigator&&((e=(await navigator.serviceWorker.ready).active)==null||e.postMessage({type:"ANNIVERSARY_CHECK_ERROR",error:n.message}))):(console.log(" Anniversary check completed"),(t!=null&&t.enable_anniversary_alerts||t!=null&&t.enable_birthday_alerts)&&await Pie("Anniversary check complete","Daily anniversary check completed successfully"))}catch(t){console.error("Error in anniversary checker:",t)}},Pie=async(e,t)=>{try{Wm?await Wm.sendPushNotification(e,t,{type:"anniversary-check",url:"/dashboard"}):"serviceWorker"in navigator&&Notification.permission==="granted"&&await(await navigator.serviceWorker.ready).showNotification(e,{body:t,icon:"/icon-192.png",badge:"/badge-96.png",tag:"anniversary-check",requireInteraction:!1,silent:!0})}catch(r){console.error("Error sending background notification:",r)}},yI=()=>{console.log(" Setting up daily checks"),l4();const e=setInterval(l4,24*60*60*1e3);return()=>{clearInterval(e)}},kie=({userRole:e})=>{const[t,r]=w.useState(new Date),{data:n,isLoading:i,error:a}=bt({queryKey:["website-settings-events"],queryFn:async()=>{console.log(" Fetching website settings for events dashboard...");const{data:x,error:p}=await se.from("website_settings").select("*").single();return p?(console.error(" Error fetching settings:",p),null):(console.log(" Settings loaded:",{enable_events_dashboard:x.enable_events_dashboard,visible_to_officers:x.events_dashboard_visible_to_officers,visible_to_supervisors:x.events_dashboard_visible_to_supervisors,visible_to_admins:x.events_dashboard_visible_to_admins,show_birthdays:x.events_dashboard_show_birthdays,show_anniversaries:x.events_dashboard_show_anniversaries,month_scope:x.events_dashboard_month_scope}),x)}}),o=()=>{if(!n||!n.enable_events_dashboard)return!1;let x=!1;switch(e){case"admin":x=n.events_dashboard_visible_to_admins!==!1;break;case"supervisor":x=n.events_dashboard_visible_to_supervisors!==!1;break;case"officer":x=n.events_dashboard_visible_to_officers!==!1;break;default:x=!1;break}return x},{data:l,isLoading:c,error:d}=bt({queryKey:["dashboard-events",t.getMonth(),t.getFullYear()],queryFn:async()=>{try{console.log(" Fetching events for month:",t.getMonth()+1,t.getFullYear());const{data:x,error:p}=await se.from("profiles").select("id, full_name, birthday, hire_date, rank, badge_number, active").eq("active",!0).order("full_name",{ascending:!0});if(p)throw console.error(" Error fetching profiles:",p),p;console.log(" Profiles found:",(x==null?void 0:x.length)||0);const v=[],b=t.getFullYear(),j=(n==null?void 0:n.events_dashboard_month_scope)||"current",S=new Date;let P,M;j==="current"?(P=ln(t),M=ca(t)):(P=S,M=lr(S,30)),console.log(" Date range for events:",{scope:j,startDate:Pe(P,"yyyy-MM-dd"),endDate:Pe(M,"yyyy-MM-dd")}),x==null||x.forEach((O,L)=>{console.log(` Profile ${L+1}:`,{name:O.full_name,birthday:O.birthday,hire_date:O.hire_date})}),x==null||x.forEach(O=>{if(O.birthday&&(n==null?void 0:n.events_dashboard_show_birthdays)!==!1)try{const L=It(O.birthday),T=new Date(b,L.getMonth(),L.getDate());if(nk(T,{start:P,end:M})){const k=b-L.getFullYear();console.log(` Birthday found for ${O.full_name}:`,{date:Pe(T,"yyyy-MM-dd"),age:k}),v.push({id:`${O.id}-birthday-${L.getDate()}`,officer_name:O.full_name||"Unknown Officer",officer_id:O.id,event_type:"birthday",event_date:T.toISOString(),years:k,rank:O.rank,badge_number:O.badge_number})}}catch(L){console.error(`Error processing birthday for ${O.full_name}:`,L)}if(O.hire_date&&(n==null?void 0:n.events_dashboard_show_anniversaries)!==!1)try{const L=It(O.hire_date),T=new Date(b,L.getMonth(),L.getDate());if(nk(T,{start:P,end:M})){const k=b-L.getFullYear();console.log(` Anniversary found for ${O.full_name}:`,{date:Pe(T,"yyyy-MM-dd"),yearsOfService:k}),v.push({id:`${O.id}-anniversary-${L.getDate()}`,officer_name:O.full_name||"Unknown Officer",officer_id:O.id,event_type:"anniversary",event_date:T.toISOString(),years:k,rank:O.rank,badge_number:O.badge_number})}}catch(L){console.error(`Error processing anniversary for ${O.full_name}:`,L)}}),console.log(" Total events found:",v.length);const I=v.sort((O,L)=>new Date(O.event_date).getTime()-new Date(L.event_date).getTime());return console.log(" Events sorted and ready:",I),I}catch(x){return console.error(" Error fetching events:",x),[]}},enabled:o()&&!i}),u=x=>{r(p=>x==="prev"?Gx(p):bs(p,1))},h=x=>{switch(x){case"anniversary":return s.jsx(ni,{className:"h-4 w-4 text-blue-500"});case"birthday":return s.jsx(ef,{className:"h-4 w-4 text-pink-500"});default:return s.jsx(xt,{className:"h-4 w-4"})}},m=x=>{switch(x){case"anniversary":return"bg-blue-50 text-blue-700 border-blue-200";case"birthday":return"bg-pink-50 text-pink-700 border-pink-200";default:return"bg-gray-50"}},f=x=>{const p=new Date(x);return Pe(p,"MMM d")},g=x=>{const p=new Date(x),v=new Date;return p.getDate()===v.getDate()&&p.getMonth()===v.getMonth()&&p.getFullYear()===v.getFullYear()};if(!o())return console.log(" Module not shown - settings check failed"),null;const y=i||c;return s.jsxs(pt,{className:"w-full",children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Upcoming Events - ",Pe(t,"MMMM yyyy")]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ne,{variant:"outline",size:"icon",onClick:()=>u("prev"),disabled:y,className:"h-8 w-8",children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsx(Ne,{variant:"outline",size:"icon",onClick:()=>u("next"),disabled:y,className:"h-8 w-8",children:s.jsx(Ri,{className:"h-4 w-4"})})]})]}),s.jsx(en,{children:(n==null?void 0:n.events_dashboard_month_scope)==="current"?`Birthdays and hire date anniversaries for ${Pe(t,"MMMM yyyy")}`:"Birthdays and hire date anniversaries in the next 30 days"})]}),s.jsxs(gt,{children:[d&&s.jsxs(vo,{variant:"destructive",className:"mb-4",children:[s.jsx(oR,{children:"Error Loading Events"}),s.jsx(yo,{children:d.message})]}),y?s.jsx("div",{className:"space-y-3",children:[1,2,3].map(x=>s.jsx(vs,{className:"h-16 w-full"},x))}):!l||l.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(xt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:(n==null?void 0:n.events_dashboard_month_scope)==="current"?`No upcoming events for ${Pe(t,"MMMM")}`:"No upcoming events in the next 30 days"}),s.jsxs(vo,{className:"mt-4",children:[s.jsx(fO,{className:"h-4 w-4"}),s.jsxs(yo,{className:"text-sm",children:["Make sure officers have their ",s.jsx("strong",{children:"birthday"})," and ",s.jsx("strong",{children:"hire_date"}),"fields filled in their profiles."]})]})]}):s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:l.map(x=>s.jsx("div",{className:`p-3 rounded-lg border ${m(x.event_type)}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[h(x.event_type),s.jsx("span",{className:"font-medium",children:x.officer_name}),g(x.event_date)&&s.jsx(Re,{variant:"default",className:"text-xs",children:"Today"}),x.rank&&s.jsx(Re,{variant:"outline",className:"text-xs",children:x.rank}),x.badge_number&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:x.badge_number})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm ml-6",children:[s.jsx(Re,{variant:"secondary",className:"text-xs",children:x.event_type==="anniversary"?`Year ${x.years}`:`Age ${x.years}`}),s.jsx("span",{className:"text-muted-foreground",children:f(x.event_date)})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium capitalize",children:x.event_type}),s.jsx("div",{className:"text-xs text-muted-foreground",children:x.event_type==="anniversary"?"Hire Date":"Birthday"})]})]})},x.id))}),l&&l.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold text-pink-600",children:l.filter(x=>x.event_type==="birthday").length}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Birthdays"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold text-blue-600",children:l.filter(x=>x.event_type==="anniversary").length}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Anniversaries"})]})]}),e==="admin"&&s.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-muted-foreground",children:[s.jsxs("p",{children:["Debug info: Found ",(l==null?void 0:l.length)||0," events for ",Pe(t,"MMMM yyyy")]}),s.jsxs("p",{children:["Settings: Module ",n!=null&&n.enable_events_dashboard?"enabled":"disabled"]})]})]})]})};function Cie(e,t=[]){let r=[];function n(a,o){const l=w.createContext(o);l.displayName=a+"Context";const c=r.length;r=[...r,o];const d=h=>{var p;const{scope:m,children:f,...g}=h,y=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,x=w.useMemo(()=>g,Object.values(g));return s.jsx(y.Provider,{value:x,children:f})};d.displayName=a+"Provider";function u(h,m){var y;const f=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,g=w.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=r.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[n,Tie(i,...t)]}function Tie(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Oie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xI=Oie.reduce((e,t)=>{const r=Wx(`Primitive.${t}`),n=w.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),A5="Progress",D5=100,[Eie]=Cie(A5),[Aie,Die]=Eie(A5),bI=w.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:a=Mie,...o}=e;(i||i===0)&&!c4(i)&&console.error(Rie(`${i}`,"Progress"));const l=c4(i)?i:D5;n!==null&&!d4(n,l)&&console.error(Iie(`${n}`,"Progress"));const c=d4(n,l)?n:null,d=lx(c)?a(c,l):void 0;return s.jsx(Aie,{scope:r,value:c,max:l,children:s.jsx(xI.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":lx(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":jI(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});bI.displayName=A5;var wI="ProgressIndicator",NI=w.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,i=Die(wI,r);return s.jsx(xI.div,{"data-state":jI(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});NI.displayName=wI;function Mie(e,t){return`${Math.round(e/t*100)}%`}function jI(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function lx(e){return typeof e=="number"}function c4(e){return lx(e)&&!isNaN(e)&&e>0}function d4(e,t){return lx(e)&&!isNaN(e)&&e<=t&&e>=0}function Rie(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${D5}\`.`}function Iie(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${D5} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _I=bI,Lie=NI;const SI=w.forwardRef(({className:e,value:t,...r},n)=>s.jsx(_I,{ref:n,className:$e("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(Lie,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));SI.displayName=_I.displayName;const Fie=({userId:e,userRole:t,websiteSettings:r})=>{const[n,i]=w.useState(null),[a,o]=w.useState(0),[l,c]=w.useState(null),[d,u]=w.useState(!1),h=()=>{if(!(r!=null&&r.enable_anniversary_countdown))return!1;switch(t){case"admin":return(r==null?void 0:r.anniversary_countdown_admins)!==!1;case"supervisor":return(r==null?void 0:r.anniversary_countdown_supervisors)!==!1;case"officer":return(r==null?void 0:r.anniversary_countdown_officers)!==!1;default:return!1}},{data:m,isLoading:f}=bt({queryKey:["profile-anniversary",e],queryFn:async()=>{const{data:x,error:p}=await se.from("profiles").select("hire_date, show_anniversary_countdown, full_name").eq("id",e).single();if(p)throw p;return x},enabled:!!e&&h()});if(w.useEffect(()=>{if(m!=null&&m.hire_date){const x=new Date,p=m.hire_date;console.log("Processing anniversary for:",m.full_name),console.log("Hire date string:",p);const[v,b,j]=p.split("-").map(Number),S=new Date(v,b-1,j);console.log("Parsed hire date:",S.toDateString()),console.log("Today:",x.toDateString());const P=new Date(x.getFullYear(),x.getMonth(),x.getDate());new Date(S.getFullYear(),S.getMonth(),S.getDate());let M=x.getFullYear()-S.getFullYear();const I=new Date(x.getFullYear(),S.getMonth(),S.getDate());console.log("This year anniversary:",I.toDateString());const O=P.getTime(),L=I.getTime();console.log("Today millis:",O),console.log("Anniversary millis:",L),console.log("Comparison:",O>=L?"Has passed":"Not yet"),O<L&&M--,o(M),console.log("Years of service (completed):",M);let T=x.getFullYear();O>=L&&(T=x.getFullYear()+1);const k=new Date(T,S.getMonth(),S.getDate());c(k),console.log("Next anniversary:",k.toDateString());const E=x.getMonth()===S.getMonth()&&x.getDate()===S.getDate();if(u(E),E)i(0),console.log(" TODAY IS THE ANNIVERSARY!");else{const A=k.getTime()-P.getTime(),q=Math.ceil(A/(1e3*60*60*24));i(q),console.log("Days until next anniversary:",q)}console.log(`--- Calculation Complete ---
`)}},[m==null?void 0:m.hire_date]),f)return s.jsx(pt,{children:s.jsx(gt,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading anniversary data..."})]})})});if(!h()||!(m!=null&&m.show_anniversary_countdown)||!(m!=null&&m.hire_date))return null;const y=(()=>{if(!(m!=null&&m.hire_date)||!l)return 0;It(m.hire_date);const x=new Date(l.getFullYear()-1,l.getMonth(),l.getDate()),p=365,v=t6(new Date,x);return Math.min(Math.max(v/p*100,0),100)})();return s.jsxs(pt,{className:"border-primary/20",children:[s.jsx(ir,{className:"pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jc,{className:"h-5 w-5 text-primary"}),s.jsx(ar,{className:"text-lg",children:"Service Anniversary"})]})})}),s.jsx(gt,{children:d?s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 mb-2",children:s.jsx(aB,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-primary",children:" Happy Anniversary!"}),s.jsxs("p",{className:"text-muted-foreground",children:["Congratulations on ",a," ",a===1?"year":"years"," of service!"]}),s.jsxs(Re,{variant:"default",className:"text-sm py-1",children:[s.jsx(oB,{className:"h-3 w-3 mr-1"}),a," Year",a!==1?"s":""," Milestone"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Years of Service"}),s.jsxs("p",{className:"text-2xl font-bold",children:[a," ",s.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"years"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Next Anniversary"}),s.jsx("p",{className:"text-lg font-semibold",children:l?Pe(l,"MMM d, yyyy"):"N/A"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center text-muted-foreground",children:[s.jsx(L1,{className:"h-3 w-3 mr-1"}),n===1?"1 day until":`${n} days until`]}),s.jsxs("span",{className:"font-medium",children:["Year ",a+1]})]}),(r==null?void 0:r.anniversary_show_progress_bar)!==!1&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(SI,{value:y,className:"h-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Year ",a]}),s.jsxs("span",{children:[Math.round(y),"%"]}),s.jsxs("span",{children:["Year ",a+1]})]})]})]}),(r==null?void 0:r.anniversary_show_milestone_badges)!==!1&&s.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[a>=5&&s.jsx(Re,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"5+ Years"}),a>=10&&s.jsx(Re,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"10+ Years"}),a>=15&&s.jsx(Re,{variant:"outline",className:"bg-indigo-50 text-indigo-700 border-indigo-200",children:"15+ Years"}),a>=20&&s.jsxs(Re,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[s.jsx(dj,{className:"h-3 w-3 mr-1"}),"20+ Years (Retirement Eligible)"]}),a>=25&&s.jsxs(Re,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:[s.jsx(ni,{className:"h-3 w-3 mr-1"}),"25+ Years"]}),a>=30&&s.jsxs(Re,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[s.jsx(ni,{className:"h-3 w-3 mr-1"}),"30+ Years"]}),a>=35&&s.jsxs(Re,{variant:"outline",className:"bg-rose-50 text-rose-700 border-rose-200",children:[s.jsx(ni,{className:"h-3 w-3 mr-1"}),"35+ Years"]}),a>=40&&s.jsxs(Re,{variant:"outline",className:"bg-violet-50 text-violet-700 border-violet-200",children:[s.jsx(ni,{className:"h-3 w-3 mr-1"}),"40+ Years"]})]})]})})]})},PI=(e,t,r,n)=>{const i=Lr(),a=["schedule",e.toISOString(),t.toISOString(),r,n],o=Xt({mutationFn:async d=>{if(console.log(" Updating position:",d),!d.scheduleId){if(console.log("Creating new schedule exception for new assignment"),!d.officerId||!d.date||!d.shiftTypeId)throw new Error("Missing required fields for new assignment");const{error:u}=await se.from("schedule_exceptions").insert({officer_id:d.officerId,date:d.date,shift_type_id:d.shiftTypeId,is_off:!1,position_name:d.positionName,unit_number:d.unitNumber||null,notes:d.notes||null,custom_start_time:null,custom_end_time:null});if(u)throw u;return}if(d.type==="recurring"){const{data:u,error:h}=await se.from("schedule_exceptions").select("id, position_name, unit_number, notes").eq("officer_id",d.officerId).eq("date",d.date).eq("shift_type_id",d.shiftTypeId).eq("is_off",!1);if(h)throw h;if(u&&u.length>0){const{error:m}=await se.from("schedule_exceptions").update({position_name:d.positionName,unit_number:d.unitNumber,notes:d.notes}).eq("id",u[0].id);if(m)throw m}else{const{error:m}=await se.from("schedule_exceptions").insert({officer_id:d.officerId,date:d.date,shift_type_id:d.shiftTypeId,is_off:!1,position_name:d.positionName,unit_number:d.unitNumber,notes:d.notes,custom_start_time:null,custom_end_time:null});if(m)throw m}}else{const{error:u}=await se.from("schedule_exceptions").update({position_name:d.positionName,unit_number:d.unitNumber,notes:d.notes}).eq("id",d.scheduleId);if(u)throw u}},onSuccess:()=>{ge.success("Position updated"),i.invalidateQueries({queryKey:a})},onError:d=>{console.error(" Error updating position:",d),ge.error(d.message||"Failed to update position")}}),l=Xt({mutationFn:async d=>{if(console.log(" Removing officer from schedule:",d),!d.scheduleId)throw new Error("Missing schedule ID");if(d.type==="exception"){const{error:u}=await se.from("schedule_exceptions").delete().eq("id",d.scheduleId);if(u)throw u}else if(d.type==="recurring"){const{error:u}=await se.from("recurring_schedules").update({end_date:new Date().toISOString().split("T")[0]}).eq("id",d.scheduleId);if(u)throw u}},onSuccess:()=>{ge.success("Officer removed from schedule"),i.invalidateQueries({queryKey:a})},onError:d=>{console.error(" Error removing officer:",d),ge.error(d.message||"Failed to remove officer")}}),c=Xt({mutationFn:async d=>{var j,S;if(console.log(" Removing PTO:",d),!d.id)throw new Error("Missing PTO ID");if(!d.officerId)throw new Error("Missing officer ID");const{data:u,error:h}=await se.from("schedule_exceptions").select("id, officer_id, date, shift_type_id, reason, custom_start_time, custom_end_time").eq("id",d.id).single();if(h){console.error("Error fetching PTO record:",h);const{data:P,error:M}=await se.from("schedule_exceptions").select("id, officer_id, date, shift_type_id, reason, custom_start_time, custom_end_time").eq("officer_id",d.officerId).eq("date",d.date).eq("is_off",!0);if(M)throw new Error(`Could not find PTO record: ${h.message}`);if(!P||P.length===0)throw new Error("No PTO record found for this officer and date");const I=P[0];console.log("Found alternative PTO record:",I),d.id=I.id,d.shiftTypeId=I.shift_type_id||d.shiftTypeId,d.ptoType=I.reason||d.ptoType,d.startTime=I.custom_start_time||d.startTime,d.endTime=I.custom_end_time||d.endTime}const{data:m,error:f}=await se.from("shift_types").select("start_time, end_time").eq("id",d.shiftTypeId).single();f&&!((j=f.message)!=null&&j.includes("No rows found"))&&console.error("Error fetching shift data:",f);const g=d.startTime||(m==null?void 0:m.start_time)||"00:00",y=d.endTime||(m==null?void 0:m.end_time)||"23:59",p=((P,M)=>{try{const[I,O]=P.split(":").map(Number),[L,T]=M.split(":").map(Number),k=I*60+O;return(L*60+T-k)/60}catch(I){return console.error("Error calculating hours:",I),8}})(g,y),v=(S=WD.find(P=>P.value===d.ptoType))==null?void 0:S.column;if(v){const{data:P,error:M}=await se.from("profiles").select("*").eq("id",d.officerId).single();if(M)console.error("Error fetching profile:",M);else if(P){const I=P[v],{error:O}=await se.from("profiles").update({[v]:(I||0)+p}).eq("id",d.officerId);O&&console.error("Error restoring PTO balance:",O)}}const{error:b}=await se.from("schedule_exceptions").delete().eq("id",d.id);if(b)throw console.error("Error deleting PTO exception:",b),b;return await se.from("schedule_exceptions").delete().eq("officer_id",d.officerId).eq("date",d.date).eq("shift_type_id",d.shiftTypeId).eq("is_off",!1),console.log(" PTO successfully removed"),{success:!0}},onSuccess:()=>{ge.success("PTO removed and balance restored"),i.invalidateQueries({queryKey:a})},onError:d=>{console.error(" Mutation error:",d),ge.error(d.message||"Failed to remove PTO")}});return{updatePositionMutation:o,removeOfficerMutation:l,removePTOMutation:c,queryKey:a}},Bie=e=>{if(!e)return{abbreviation:"PTO",icon:s.jsx(qS,{className:"h-3 w-3"}),colorClass:"text-green-700"};const t=e.toLowerCase();return t.includes("vacation")?{abbreviation:"Vac",icon:s.jsx(rf,{className:"h-3 w-3"}),colorClass:"text-blue-700"}:t.includes("holiday")?{abbreviation:"Hol",icon:s.jsx(Z9,{className:"h-3 w-3"}),colorClass:"text-orange-700"}:t.includes("sick")?{abbreviation:"Sick",icon:s.jsx(J9,{className:"h-3 w-3"}),colorClass:"text-red-700"}:t.includes("comp")?{abbreviation:"Comp",icon:s.jsx(dj,{className:"h-3 w-3"}),colorClass:"text-purple-700"}:{abbreviation:e.substring(0,3),icon:s.jsx(qS,{className:"h-3 w-3"}),colorClass:"text-green-700"}},Iw=({officer:e,dateStr:t,officerId:r,officerName:n,isAdminOrSupervisor:i,isSupervisor:a=!1,isPPO:o=!1,isRegularRecurringDay:l=!1,isSpecialAssignment:c,onAssignPTO:d,onRemovePTO:u,onEditAssignment:h,onRemoveOfficer:m,isUpdating:f=!1})=>{var k;const g=e&&e.shiftInfo,y=e==null?void 0:e.shiftInfo,x=(y==null?void 0:y.hasPTO)===!0||(y==null?void 0:y.ptoData)&&y.ptoData.ptoType,p=(k=y==null?void 0:y.ptoData)==null?void 0:k.ptoType,v=y==null?void 0:y.position,b=(y==null?void 0:y.isOff)===!0,j=x&&p,P=v&&(c?c(v):(E=>E?["other","special","training","detail","court","extra"].some(q=>E.toLowerCase().includes(q)):!1)(v)),M=$e("relative group h-8 flex items-center justify-center",j&&"border-l-2",j&&(p==null?void 0:p.toLowerCase().includes("vacation"))&&"bg-blue-50 border-blue-400",j&&(p==null?void 0:p.toLowerCase().includes("holiday"))&&"bg-orange-50 border-orange-400",j&&(p==null?void 0:p.toLowerCase().includes("sick"))&&"bg-red-50 border-red-400",j&&(p==null?void 0:p.toLowerCase().includes("comp"))&&"bg-purple-50 border-purple-400",j&&!(p!=null&&p.toLowerCase().includes("vacation"))&&!(p!=null&&p.toLowerCase().includes("holiday"))&&!(p!=null&&p.toLowerCase().includes("sick"))&&!(p!=null&&p.toLowerCase().includes("comp"))&&"bg-green-50 border-green-400",P&&!j&&"bg-purple-50 border-l-2 border-purple-400",l&&!j&&!P&&"bg-green-50 border-l-2 border-green-400",!l&&!g&&!j&&"bg-gray-100 border-l-2 border-gray-300",b&&!j&&"bg-gray-200 border-l-2 border-gray-400"),I=()=>{var E;if(!g&&!l)return s.jsx("span",{className:"text-xs text-muted-foreground",children:"-"});if(l&&!g)return s.jsx("div",{className:"flex flex-col items-center",children:s.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Recur"})});if(j){const A=Bie(p);return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:`${A.colorClass.replace("text-","text-")}`,children:A.icon}),s.jsx("span",{className:`text-xs font-medium ${A.colorClass}`,children:A.abbreviation})]}),((E=y==null?void 0:y.ptoData)==null?void 0:E.isFullShift)===!1&&v&&s.jsx("div",{className:"text-[10px] mt-0.5 truncate max-w-[70px] opacity-80",title:v,children:v})]})}return P&&v?s.jsx("div",{className:"flex flex-col items-center",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(dj,{className:"h-3 w-3 text-purple-600"}),s.jsx("div",{className:"text-xs truncate max-w-[70px] text-purple-700",title:v,children:v})]})}):v?s.jsx("div",{className:"flex flex-col items-center",children:s.jsx("div",{className:"text-xs truncate max-w-[80px]",title:v,children:v})}):l?s.jsx("div",{className:"flex flex-col items-center",children:s.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Recur"})}):b&&!j?s.jsx(Re,{variant:"outline",className:"text-xs text-gray-600 border-gray-400 bg-gray-200",children:"Off"}):s.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})},O=()=>{d&&(e!=null&&e.shiftInfo)?d(e.shiftInfo,t,r,n):ge.info("PTO assignment coming soon")},L=()=>{u&&(e!=null&&e.shiftInfo)?u(e.shiftInfo,t,r):ge.info("Remove PTO coming soon")},T=()=>{h&&e?h(e,t):ge.info("Edit assignment coming soon")};return s.jsxs("div",{className:M,children:[s.jsx("div",{className:"h-full flex items-center justify-center w-full",children:I()}),g&&i&&s.jsxs(ig,{children:[s.jsx(ag,{asChild:!0,children:s.jsx(Ne,{variant:"ghost",size:"icon",className:"absolute top-0 right-0 h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity",disabled:f,children:s.jsx(aj,{className:"h-3 w-3"})})}),s.jsxs(gf,{align:"end",className:"w-40",children:[!j&&!(y!=null&&y.isOff)&&s.jsxs(Ds,{onClick:O,disabled:f,children:[s.jsx(rf,{className:"h-3 w-3 mr-2"}),"Assign PTO"]}),j&&s.jsxs(Ds,{onClick:L,disabled:f,children:[s.jsx(es,{className:"h-3 w-3 mr-2"}),"Remove PTO"]}),!j&&!(y!=null&&y.isOff)&&s.jsxs(Ds,{onClick:T,disabled:f,children:[s.jsx(Qo,{className:"h-3 w-3 mr-2"}),"Edit Assignment"]})]})]})]})},qie=({currentWeekStart:e,selectedShiftId:t,shiftTypes:r,isAdminOrSupervisor:n,onPreviousWeek:i,onNextWeek:a,onToday:o,onAssignPTO:l,onRemovePTO:c,onEditAssignment:d,onRemoveOfficer:u,isUpdating:h=!1,overtimeExceptions:m=[]})=>{const f=w.useMemo(()=>Array.from({length:7},(S,P)=>{const M=lr(e,P),I=M.getDay();return{date:M,dateStr:Pe(M,"yyyy-MM-dd"),dayName:Pe(M,"EEE").toUpperCase(),formattedDate:Pe(M,"MMM d"),isToday:tn(M,new Date),dayOfWeek:I}}),[e]),g=S=>{if(!S)return!1;const P=S.toLowerCase();return P.includes("supervisor")||P.includes("sgt")||P.includes("sergeant")||P.includes("lieutenant")||P.includes("chief")||P.includes("captain")},{data:y,isLoading:x,error:p}=bt({queryKey:["weekly-schedule-mobile",t,e.toISOString()],queryFn:async()=>{if(console.log(" Mobile query started for shift:",t,"week:",Pe(e,"yyyy-MM-dd")),!t)return console.log(" No shift ID selected"),null;const S=Pe(e,"yyyy-MM-dd"),P=Pe(tu(e,{weekStartsOn:0}),"yyyy-MM-dd");console.log(" Fetching data for date range:",S,"to",P);try{console.log(" Fetching exceptions...");const{data:M,error:I}=await se.from("schedule_exceptions").select(`
            *,
            profiles:officer_id (
              id, full_name, badge_number, rank, hire_date, 
              promotion_date_sergeant, promotion_date_lieutenant,
              service_credit_override
            )
          `).eq("shift_type_id",t).gte("date",S).lte("date",P).order("date",{ascending:!0});if(I)throw I;console.log(" Exceptions fetched:",M==null?void 0:M.length,"records"),console.log(" Fetching recurring schedules...");const{data:O,error:L}=await se.from("recurring_schedules").select(`
            *,
            profiles:officer_id (
              id, full_name, badge_number, rank, hire_date,
              promotion_date_sergeant, promotion_date_lieutenant,
              service_credit_override
            )
          `).eq("shift_type_id",t).or(`end_date.is.null,end_date.gte.${S}`);if(L)throw L;console.log(" Recurring fetched:",O==null?void 0:O.length,"records"),console.log(" Fetching all recurring schedules for primary shift determination...");const{data:T,error:k}=await se.from("recurring_schedules").select("officer_id, shift_type_id, day_of_week").order("officer_id");k&&console.error("Error fetching all recurring schedules:",k);const E=new Map;if(T){const ae=new Map;T.forEach(H=>{const Oe=H.officer_id,pe=H.shift_type_id;ae.has(Oe)||ae.set(Oe,new Map);const je=ae.get(Oe);je.set(pe,(je.get(pe)||0)+1)}),ae.forEach((H,Oe)=>{let pe=0,je=null;H.forEach((_e,W)=>{_e>pe&&(pe=_e,je=W)}),je&&E.set(Oe,je)})}const{data:A,error:q}=await se.from("minimum_staffing").select("*").eq("shift_type_id",t);q&&console.error("Error fetching minimum staffing:",q);const U=new Map;A==null||A.forEach(ae=>{U.has(ae.day_of_week)||U.set(ae.day_of_week,new Map),U.get(ae.day_of_week).set(ae.shift_type_id,{minimumOfficers:ae.minimum_officers||0,minimumSupervisors:ae.minimum_supervisors||0})});const R=new Map,C=new Map,F=new Map;O==null||O.forEach(ae=>{C.has(ae.officer_id)||C.set(ae.officer_id,new Set),C.get(ae.officer_id).add(ae.day_of_week)}),M==null||M.forEach(ae=>{const H=`${ae.officer_id}-${ae.date}`;F.set(H,ae)}),console.log(" Processing weekly data...");const X=(ae,H,Oe)=>{if(!ae)return null;const pe=ae.toLowerCase();return pe.includes("lieutenant")||pe.includes("chief")?Oe||H||null:(pe.includes("sergeant")||pe.includes("sgt"))&&H||null},re=new Map,z=new Map;f.forEach(ae=>{const H=(M==null?void 0:M.filter(je=>je.date===ae.dateStr))||[],Oe=(O==null?void 0:O.filter(je=>je.day_of_week===ae.dayOfWeek))||[],pe=new Set;H.forEach(je=>{const _e=je.officer_id;pe.add(_e);const W=je.profiles||{},te=W.hire_date,Z=W.promotion_date_sergeant,me=W.promotion_date_lieutenant,$=W.service_credit_override||0,ke=W.badge_number||"9999",ce=W.full_name||"Unknown",Ie=W.rank||"Officer",Fe=je.is_extra_shift===!0;console.log("MOBILE OVERTIME CHECK for officer:",{officerName:W.full_name,isExtraShift:je.is_extra_shift,exceptionId:je.id,date:ae.dateStr,assignedToTargetMap:Fe?"overtime":"regular"});const Le=Fe?z:re;if(!Le.has(_e)){const Ye=X(Ie,Z,me);Le.set(_e,{officerId:_e,officerName:ce,badgeNumber:ke,rank:Ie,service_credit:0,hire_date:te,promotion_date_sergeant:Z,promotion_date_lieutenant:me,service_credit_override:$,promotion_date:Ye||te,recurringDays:C.get(_e)||new Set,weeklySchedule:{},primaryShiftId:E.get(_e),isExtraShift:Fe})}const Ue=je.is_off===!0&&!!je.reason,Ve={officerId:_e,officerName:ce,badgeNumber:ke,rank:Ie,service_credit:0,date:ae.dateStr,dayOfWeek:ae.dayOfWeek,isRegularRecurringDay:!1,isExtraShift:Fe,is_extra_shift:je.is_extra_shift||!1,shiftInfo:{scheduleId:je.id,scheduleType:"exception",position:je.position_name,isOff:je.is_off||!1,hasPTO:Ue,ptoData:Ue?{ptoType:je.reason,isFullShift:!0}:void 0,reason:je.reason,isExtraShift:Fe,is_extra_shift:je.is_extra_shift||!1,custom_start_time:je.custom_start_time,custom_end_time:je.custom_end_time}};Ue&&console.log(" PTO Found for",ce,"on",ae.dateStr,":",{ptoType:je.reason});const rt=Le.get(_e);rt?rt.weeklySchedule[ae.dateStr]=Ve:(console.error(` Officer data is undefined for ID: ${_e}`),console.error(" Item causing error:",je))}),Oe.forEach(je=>{const _e=je.officer_id;if(pe.has(_e))return;const W=je.profiles||{},te=W.hire_date,Z=W.promotion_date_sergeant,me=W.promotion_date_lieutenant,$=W.service_credit_override||0,ke=W.badge_number||"9999",ce=W.full_name||"Unknown",Ie=W.rank||"Officer",Fe=!1,Le=re;if(!Le.has(_e)){const rt=X(Ie,Z,me);Le.set(_e,{officerId:_e,officerName:ce,badgeNumber:ke,rank:Ie,service_credit:0,hire_date:te,promotion_date_sergeant:Z,promotion_date_lieutenant:me,service_credit_override:$,promotion_date:rt||te,recurringDays:C.get(_e)||new Set,weeklySchedule:{},primaryShiftId:E.get(_e),isExtraShift:Fe})}const Ue={officerId:_e,officerName:ce,badgeNumber:ke,rank:Ie,service_credit:0,date:ae.dateStr,dayOfWeek:ae.dayOfWeek,isRegularRecurringDay:!0,isExtraShift:Fe,is_extra_shift:!1,shiftInfo:{scheduleId:je.id,scheduleType:"recurring",position:je.position_name,isOff:je.is_off||!1,hasPTO:!1,ptoData:void 0,reason:je.reason,isExtraShift:Fe,is_extra_shift:!1}},Ve=Le.get(_e);Ve?Ve.weeklySchedule[ae.dateStr]=Ue:(console.error(` Officer data is undefined for ID: ${_e}`),console.error(" Item causing error:",je))})}),console.log(" Total unique officers found:",{regular:re.size,overtime:z.size,total:re.size+z.size}),console.log(" Fetching service credits via RPC...");const Y=[...Array.from(re.keys()),...Array.from(z.keys())],J=[...new Set(Y)],ne=new Map;if(J.length>0)for(const ae of J)try{const{data:H,error:Oe}=await se.rpc("get_service_credit",{profile_id:ae});if(!Oe&&H!==null){const pe=parseFloat(H);ne.set(ae,isNaN(pe)?0:pe)}else console.log(`No service credit data for officer ${ae}:`,Oe),ne.set(ae,0)}catch(H){console.error(`Error fetching service credit for officer ${ae}:`,H),ne.set(ae,0)}re.forEach(ae=>{ae.service_credit=ne.get(ae.officerId)||0,Object.values(ae.weeklySchedule).forEach(H=>{H.service_credit=ae.service_credit})}),z.forEach(ae=>{ae.service_credit=ne.get(ae.officerId)||0,Object.values(ae.weeklySchedule).forEach(H=>{H.service_credit=ae.service_credit})});const le=Array.from(re.values()),G=Array.from(z.values()),he=le.map(ae=>({id:ae.officerId,full_name:ae.officerName,officerName:ae.officerName,badge_number:ae.badgeNumber,badgeNumber:ae.badgeNumber,rank:ae.rank,service_credit:ae.service_credit,serviceCredit:ae.service_credit,hire_date:ae.hire_date,service_credit_override:ae.service_credit_override||0,promotion_date_sergeant:ae.promotion_date_sergeant,promotion_date_lieutenant:ae.promotion_date_lieutenant}));console.log(" Sorting officers consistently...");const xe=pf(he),Se=xe.filter(ae=>Es({rank:ae.rank})).map(ae=>{const H=le.find(Oe=>Oe.officerId===ae.id);return H&&(H.service_credit=ae.service_credit),H}).filter(Boolean),K=xe.filter(ae=>{var H;return!Es({rank:ae.rank})&&((H=ae.rank)==null?void 0:H.toLowerCase())!=="probationary"}).map(ae=>{const H=le.find(Oe=>Oe.officerId===ae.id);return H&&(H.service_credit=ae.service_credit),H}).filter(Boolean),we=xe.filter(ae=>{var H;return((H=ae.rank)==null?void 0:H.toLowerCase())==="probationary"}).map(ae=>{const H=le.find(Oe=>Oe.officerId===ae.id);return H&&(H.service_credit=ae.service_credit),H}).filter(Boolean),Te={};return f.forEach(ae=>{Te[ae.dateStr]=[]}),G.forEach(ae=>{Object.entries(ae.weeklySchedule||{}).forEach(([H,Oe])=>{(Oe==null?void 0:Oe.is_extra_shift)===!0&&Te[H]&&Te[H].push(Oe)})}),console.log(" Data processing complete:",{supervisors:Se.length,regularOfficers:K.length,ppos:we.length,overtimeOfficers:G.length,overtimeDaysWithAssignments:Object.entries(Te).filter(([ae,H])=>H.length>0).map(([ae,H])=>({date:ae,count:H.length}))}),{supervisors:Se,regularOfficers:K,ppos:we,overtimeOfficers:G,overtimeByDate:Te,minimumStaffing:U,dailySchedules:f.map(ae=>({date:ae.dateStr,dayOfWeek:ae.dayOfWeek,officers:[...Array.from(re.values()).map(H=>H.weeklySchedule[ae.dateStr]).filter(Boolean),...Array.from(z.values()).map(H=>H.weeklySchedule[ae.dateStr]).filter(Boolean)]}))}}catch(M){throw console.error(" Error in mobile schedule query:",M),M}},enabled:!!t,retry:1}),v=S=>S&&(S.toLowerCase().includes("other")||S.toLowerCase().includes("special")||S.toLowerCase().includes("training")||S.toLowerCase().includes("detail")||S.toLowerCase().includes("court")||S.toLowerCase().includes("extra")||S&&!os.includes(S)),b=S=>{if(!(y!=null&&y.minimumStaffing))return{minimumOfficers:0,minimumSupervisors:0};if(y.minimumStaffing instanceof Map){const M=y.minimumStaffing.get(S);if(M instanceof Map)return M.get(t)||{minimumOfficers:0,minimumSupervisors:0}}const P=y.minimumStaffing[S];return P&&typeof P=="object"?P[t]||{minimumOfficers:0,minimumSupervisors:0}:{minimumOfficers:0,minimumSupervisors:0}};if(x)return s.jsxs("div",{className:"space-y-3",children:[s.jsx(vs,{className:"h-8 w-3/4 mx-auto"}),s.jsx(vs,{className:"h-64 w-full"})]});if(p)return console.error("Query error details:",p),s.jsxs("div",{className:"text-center py-8 text-destructive",children:[s.jsx("p",{className:"font-semibold mb-2",children:"Error loading schedule"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:p.message||"Unknown error occurred"}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Retry"})]});if(!t)return s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(jc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Please select a shift to view schedule"})]});if(!y)return s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedule data available"});const j=y.overtimeOfficers&&y.overtimeOfficers.length>0;return s.jsxs("div",{className:"space-y-4",children:[s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(Ne,{variant:"outline",size:"icon",onClick:i,children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold",children:[Pe(e,"MMM d")," - ",Pe(lr(e,6),"MMM d")]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:Pe(e,"yyyy")})]}),s.jsx(Ne,{variant:"outline",size:"icon",onClick:a,children:s.jsx(Ri,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(Ne,{variant:"outline",size:"sm",onClick:o,children:"Today"})})]})}),s.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:s.jsxs("div",{className:"min-w-[800px]",children:[s.jsxs("div",{className:"grid grid-cols-9 bg-muted/50 border rounded-t-lg",children:[s.jsx("div",{className:"p-2 font-semibold border-r text-sm",children:"Empl#"}),s.jsx("div",{className:"p-2 font-semibold border-r text-sm",children:"NAME"}),f.map(({dateStr:S,dayName:P,formattedDate:M,isToday:I,dayOfWeek:O})=>{var J,ne,le,G;const L=b(O),T=L.minimumSupervisors||0,k=L.minimumOfficers||0,E=(J=y.dailySchedules)==null?void 0:J.find(he=>he.date===S),A=((ne=y.overtimeByDate)==null?void 0:ne[S])||[],q=A.filter(he=>{var Se;const xe=((Se=he.shiftInfo)==null?void 0:Se.position)||"";return g(xe)}).length||0,R=(((le=E==null?void 0:E.officers)==null?void 0:le.filter(he=>{var ae,H,Oe,pe,je;const xe=Es(he),Se=((ae=he.shiftInfo)==null?void 0:ae.hasPTO)&&((Oe=(H=he.shiftInfo)==null?void 0:H.ptoData)==null?void 0:Oe.isFullShift),K=v((pe=he.shiftInfo)==null?void 0:pe.position),we=he.shiftInfo&&!he.shiftInfo.isOff&&!Se&&!K,Te=((je=he.shiftInfo)==null?void 0:je.is_extra_shift)===!0||he.is_extra_shift===!0;return xe&&we&&!Te}).length)||0)+q,C=A.filter(he=>{var Se;const xe=((Se=he.shiftInfo)==null?void 0:Se.position)||"";return!g(xe)&&!v(xe)}).length||0,X=(((G=E==null?void 0:E.officers)==null?void 0:G.filter(he=>{var H,Oe,pe,je,_e,W;const xe=!Es(he),Se=((H=he.rank)==null?void 0:H.toLowerCase())!=="probationary",K=((Oe=he.shiftInfo)==null?void 0:Oe.hasPTO)&&((je=(pe=he.shiftInfo)==null?void 0:pe.ptoData)==null?void 0:je.isFullShift),we=v((_e=he.shiftInfo)==null?void 0:_e.position),Te=he.shiftInfo&&!he.shiftInfo.isOff&&!K&&!we,ae=((W=he.shiftInfo)==null?void 0:W.is_extra_shift)===!0||he.is_extra_shift===!0;return xe&&Se&&Te&&!ae}).length)||0)+C,re=T>0&&R<T,z=k>0&&X<k,Y=JD(T,k);return s.jsxs("div",{className:`p-2 text-center font-semibold border-r text-sm ${I?"bg-primary/10":""}`,children:[s.jsx("div",{children:P}),s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:M}),Y?s.jsxs(s.Fragment,{children:[s.jsxs(Re,{variant:re?"destructive":"outline",className:"text-xs mb-1",children:[R," / ",T," Sup"]}),s.jsxs(Re,{variant:z?"destructive":"outline",className:"text-xs",children:[X," / ",k," Ofc"]})]}):s.jsx(Re,{variant:"outline",className:"text-xs",children:"No minimums"})]},S)})]}),s.jsxs("div",{className:"grid grid-cols-9 border-b bg-gray-100",children:[s.jsx("div",{className:"p-2 border-r text-sm"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"SUPERVISORS"}),f.map(({dateStr:S,dayOfWeek:P})=>{var q,U,R;const M=(q=y.dailySchedules)==null?void 0:q.find(C=>C.date===S),O=b(P).minimumSupervisors||0,T=(((U=y.overtimeByDate)==null?void 0:U[S])||[]).filter(C=>{var X;const F=((X=C.shiftInfo)==null?void 0:X.position)||"";return g(F)}).length||0,E=(((R=M==null?void 0:M.officers)==null?void 0:R.filter(C=>{var J,ne,le,G,he;const F=Es(C),X=((J=C.shiftInfo)==null?void 0:J.hasPTO)&&((le=(ne=C.shiftInfo)==null?void 0:ne.ptoData)==null?void 0:le.isFullShift),re=v((G=C.shiftInfo)==null?void 0:G.position),z=C.shiftInfo&&!C.shiftInfo.isOff&&!X&&!re,Y=((he=C.shiftInfo)==null?void 0:he.is_extra_shift)===!0||C.is_extra_shift===!0;return F&&z&&!Y}).length)||0)+T,A=O>0&&E<O;return s.jsxs("div",{className:"p-2 text-center border-r text-sm bg-gray-100",children:[s.jsxs("div",{className:`font-medium ${A?"text-red-600":""}`,children:[E," ",O>0?`/ ${O}`:""]}),O===0&&s.jsx("div",{className:"text-xs text-muted-foreground",children:"No min"})]},S)})]}),y.supervisors.map(S=>{var M;return f.some(({dateStr:I})=>{var L;const O=S.weeklySchedule[I];return(O==null?void 0:O.is_extra_shift)===!0||((L=O==null?void 0:O.shiftInfo)==null?void 0:L.is_extra_shift)===!0})?(console.log("Skipping supervisor officer with overtime shifts from regular rows:",S.officerName),null):s.jsxs("div",{className:"grid grid-cols-9 border-b hover:bg-muted/30",children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:S.badgeNumber}),s.jsxs("div",{className:"p-2 border-r font-medium text-sm",children:[fn(S.officerName),s.jsx("div",{className:"text-xs opacity-80",children:go(S.rank)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",((M=S.service_credit)==null?void 0:M.toFixed(1))||"0.0"]})]}),f.map(({dateStr:I})=>{const O=S.weeklySchedule[I];return s.jsx("div",{className:"p-2 border-r",children:s.jsx(Iw,{officer:O,dateStr:I,officerId:S.officerId,officerName:S.officerName,isAdminOrSupervisor:n,isSupervisor:!0,isRegularRecurringDay:(O==null?void 0:O.isRegularRecurringDay)||!1,isSpecialAssignment:v,onAssignPTO:l,onRemovePTO:c,onEditAssignment:d,onRemoveOfficer:u,isUpdating:h})},I)})]},S.officerId)}),s.jsxs("div",{className:"grid grid-cols-9 border-b bg-gray-200",children:[s.jsx("div",{className:"p-2 border-r text-sm"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"OFFICERS"}),f.map(({dateStr:S,dayOfWeek:P})=>{var q,U,R;const M=(q=y.dailySchedules)==null?void 0:q.find(C=>C.date===S),O=b(P).minimumOfficers||0,T=(((U=y.overtimeByDate)==null?void 0:U[S])||[]).filter(C=>{var X;const F=((X=C.shiftInfo)==null?void 0:X.position)||"";return!g(F)&&!v(F)}).length||0,E=(((R=M==null?void 0:M.officers)==null?void 0:R.filter(C=>{var ne,le,G,he,xe,Se;const F=!Es(C),X=((ne=C.rank)==null?void 0:ne.toLowerCase())!=="probationary",re=((le=C.shiftInfo)==null?void 0:le.hasPTO)&&((he=(G=C.shiftInfo)==null?void 0:G.ptoData)==null?void 0:he.isFullShift),z=v((xe=C.shiftInfo)==null?void 0:xe.position),Y=C.shiftInfo&&!C.shiftInfo.isOff&&!re&&!z,J=((Se=C.shiftInfo)==null?void 0:Se.is_extra_shift)===!0||C.is_extra_shift===!0;return F&&X&&Y&&!J}).length)||0)+T,A=O>0&&E<O;return s.jsxs("div",{className:"p-2 text-center border-r text-sm font-medium bg-gray-200",children:[s.jsxs("div",{className:`font-medium ${A?"text-red-600":""}`,children:[E," ",O>0?`/ ${O}`:""]}),O===0&&s.jsx("div",{className:"text-xs text-muted-foreground",children:"No min"})]},S)})]}),y.regularOfficers.map(S=>{var M;return f.some(({dateStr:I})=>{var L;const O=S.weeklySchedule[I];return(O==null?void 0:O.is_extra_shift)===!0||((L=O==null?void 0:O.shiftInfo)==null?void 0:L.is_extra_shift)===!0})?(console.log("Skipping officer with overtime shifts from regular rows:",S.officerName),null):s.jsxs("div",{className:"grid grid-cols-9 border-b hover:bg-muted/30",children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:S.badgeNumber}),s.jsxs("div",{className:"p-2 border-r font-medium text-sm",children:[fn(S.officerName),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",((M=S.service_credit)==null?void 0:M.toFixed(1))||"0.0"]})]}),f.map(({dateStr:I})=>{const O=S.weeklySchedule[I];return s.jsx("div",{className:"p-2 border-r",children:s.jsx(Iw,{officer:O,dateStr:I,officerId:S.officerId,officerName:S.officerName,isAdminOrSupervisor:n,isRegularRecurringDay:(O==null?void 0:O.isRegularRecurringDay)||!1,isSpecialAssignment:v,onAssignPTO:l,onRemovePTO:c,onEditAssignment:d,onRemoveOfficer:u,isUpdating:h})},I)})]},S.officerId)}),y.ppos.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-9 border-t-2 border-blue-200 bg-blue-50",children:[s.jsx("div",{className:"p-2 border-r text-sm"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"PPO"}),f.map(({dateStr:S,dayOfWeek:P})=>{var O,L;const M=(O=y.dailySchedules)==null?void 0:O.find(T=>T.date===S);b(P);const I=((L=M==null?void 0:M.officers)==null?void 0:L.filter(T=>{var R,C,F,X,re;const k=!Es(T),E=((R=T.rank)==null?void 0:R.toLowerCase())==="probationary",A=((C=T.shiftInfo)==null?void 0:C.hasPTO)&&((X=(F=T.shiftInfo)==null?void 0:F.ptoData)==null?void 0:X.isFullShift),q=T.shiftInfo&&!T.shiftInfo.isOff&&!A,U=((re=T.shiftInfo)==null?void 0:re.is_extra_shift)===!0||T.is_extra_shift===!0;return k&&E&&q&&!U}).length)||0;return s.jsx("div",{className:"p-2 text-center border-r text-sm font-medium bg-blue-50",children:I},S)})]}),y.ppos.map(S=>{var M;return f.some(({dateStr:I})=>{var L;const O=S.weeklySchedule[I];return(O==null?void 0:O.is_extra_shift)===!0||((L=O==null?void 0:O.shiftInfo)==null?void 0:L.is_extra_shift)===!0})?(console.log("Skipping PPO officer with overtime shifts from regular rows:",S.officerName),null):s.jsxs("div",{className:"grid grid-cols-9 border-b hover:bg-blue-50/50 bg-blue-50/30",children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:S.badgeNumber}),s.jsxs("div",{className:"p-2 border-r font-medium text-sm flex items-center gap-2",children:[fn(S.officerName),s.jsx(Re,{variant:"outline",className:"text-xs border-blue-300 bg-blue-100",children:"PPO"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",((M=S.service_credit)==null?void 0:M.toFixed(1))||"0.0"]})]}),f.map(({dateStr:I})=>{const O=S.weeklySchedule[I];return s.jsx("div",{className:"p-2 border-r",children:s.jsx(Iw,{officer:O,dateStr:I,officerId:S.officerId,officerName:S.officerName,isAdminOrSupervisor:n,isPPO:!0,isRegularRecurringDay:(O==null?void 0:O.isRegularRecurringDay)||!1,isSpecialAssignment:v,onAssignPTO:l,onRemovePTO:c,onEditAssignment:d,onRemoveOfficer:u,isUpdating:h})},I)})]},S.officerId)})]}),j&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-9 border-t-2 border-orange-300 bg-orange-50",children:[s.jsx("div",{className:"p-2 border-r text-sm"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"OVERTIME"}),f.map(({dateStr:S})=>{var M,I;const P=((I=(M=y.overtimeByDate)==null?void 0:M[S])==null?void 0:I.length)||0;return s.jsx("div",{className:"p-2 text-center border-r text-sm font-medium bg-orange-50",children:P},S)})]}),s.jsxs("div",{className:"grid grid-cols-9 border-b hover:bg-orange-50/50 bg-orange-50/30",children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:"OT"}),s.jsx("div",{className:"p-2 border-r font-medium text-sm flex items-center gap-2",children:"Overtime Assignments"}),f.map(({dateStr:S})=>{var M;const P=((M=y.overtimeByDate)==null?void 0:M[S])||[];return s.jsx("div",{className:"p-2 border-r",children:P.length>0?s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:P.map(I=>{var O,L,T;return s.jsxs("div",{className:"text-xs p-1 bg-orange-100 rounded border border-orange-200",children:[s.jsx("div",{className:"font-medium truncate",children:fn(I.officerName||"")}),s.jsx("div",{className:"text-xs text-orange-700 truncate",children:((O=I.shiftInfo)==null?void 0:O.position)||"Extra Duty"}),((L=I.shiftInfo)==null?void 0:L.custom_start_time)&&s.jsxs("div",{className:"text-xs text-orange-600",children:[I.shiftInfo.custom_start_time,"-",I.shiftInfo.custom_end_time]}),((T=I.shiftInfo)==null?void 0:T.reason)&&s.jsx("div",{className:"text-xs text-orange-500 italic",children:I.shiftInfo.reason}),s.jsx("div",{className:"text-xs text-orange-800 mt-1",children:" Overtime Shift"})]},`${I.officerId}-${S}`)})}):s.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"-"})},S)})]})]})]})}),s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"Quick Legend"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-50 border-l-2 border-green-400"}),s.jsx("span",{children:"Recurring Day"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-blue-50 border-l-2 border-blue-400"}),s.jsx("span",{children:"Vacation (Vac)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-orange-50 border-l-2 border-orange-400"}),s.jsx("span",{children:"Holiday (Hol)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-red-50 border-l-2 border-red-400"}),s.jsx("span",{children:"Sick (Sick)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-purple-50 border-l-2 border-purple-400"}),s.jsx("span",{children:"Comp (Comp)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-purple-50 border-l-2 border-purple-400"}),s.jsx("span",{children:"Special Assignment"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-orange-50 border-l-2 border-orange-400"}),s.jsx("span",{children:"Overtime (is_extra_shift)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-gray-100 border-l-2 border-gray-300"}),s.jsx("span",{children:"Not Scheduled"})]})]})]})})]})},Uie=({currentMonth:e,selectedShiftId:t,shiftTypes:r,onPreviousMonth:n,onNextMonth:i,onToday:a})=>{const o=ln(e),l=ca(e),c=o.getDay(),d=qa({start:o,end:l}),u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],{data:h,isLoading:m}=bt({queryKey:["mobile-monthly-schedule",t,e.toISOString()],queryFn:async()=>{if(!t)return null;const g=Pe(o,"yyyy-MM-dd"),y=Pe(l,"yyyy-MM-dd"),{data:x,error:p}=await se.from("schedule_exceptions").select(`
          *,
          profiles:officer_id (
            id, full_name, badge_number, rank, hire_date
          )
        `).eq("shift_type_id",t).gte("date",g).lte("date",y).order("date",{ascending:!0});if(p)throw p;const{data:v,error:b}=await se.from("recurring_schedules").select(`
          *,
          profiles:officer_id (
            id, full_name, badge_number, rank, hire_date
          )
        `).eq("shift_type_id",t).or(`end_date.is.null,end_date.gte.${g}`);if(b)throw b;const j={};return d.forEach(S=>{const P=Pe(S,"yyyy-MM-dd");j[P]={officerCount:0,supervisorCount:0,ptoCount:0}}),v==null||v.forEach(S=>{d.forEach(P=>{var M;if(P.getDay()===S.day_of_week){const I=Pe(P,"yyyy-MM-dd");if(j[I]){const O=Es({rank:(M=S.profiles)==null?void 0:M.rank});j[I].officerCount+=1,O&&(j[I].supervisorCount+=1),S.pto_type&&(j[I].ptoCount+=1)}}})}),x==null||x.forEach(S=>{var M;const P=S.date;if(j[P]){const I=Es({rank:(M=S.profiles)==null?void 0:M.rank});j[P].officerCount+=1,I&&(j[P].supervisorCount+=1),S.pto_type&&(j[P].ptoCount+=1)}}),j},enabled:!!t}),f=h?{totalOfficers:Object.values(h).reduce((g,y)=>g+y.officerCount,0),totalSupervisors:Object.values(h).reduce((g,y)=>g+y.supervisorCount,0),totalPTO:Object.values(h).reduce((g,y)=>g+y.ptoCount,0)}:null;return m?s.jsxs("div",{className:"space-y-3",children:[s.jsx(vs,{className:"h-8 w-3/4 mx-auto"}),s.jsx(vs,{className:"h-64 w-full"})]}):t?s.jsxs("div",{className:"space-y-4",children:[s.jsx(pt,{children:s.jsx(gt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(Ne,{variant:"outline",size:"icon",onClick:n,children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-lg",children:Pe(e,"MMMM yyyy")}),s.jsx(Ne,{variant:"ghost",size:"sm",onClick:a,children:"Today"})]}),s.jsx(Ne,{variant:"outline",size:"icon",onClick:i,children:s.jsx(Ri,{className:"h-4 w-4"})})]})})}),s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:u.map(g=>s.jsx("div",{className:"text-center text-xs font-medium text-muted-foreground p-1",children:g},g))}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:c}).map((g,y)=>s.jsx("div",{className:"h-10"},`empty-${y}`)),d.map(g=>{const y=Pe(g,"yyyy-MM-dd"),x=h==null?void 0:h[y],p=yp(g),v=mo(g,e),b=x?x.officerCount:0;return s.jsxs("div",{className:`
                    h-10 flex flex-col items-center justify-center rounded-lg text-sm
                    ${p?"bg-primary text-primary-foreground font-semibold":"bg-background hover:bg-muted"}
                    ${v?"":"opacity-30"}
                  `,children:[s.jsx("div",{children:Pe(g,"d")}),x&&b>0&&s.jsx("div",{className:"text-[8px] mt-1",children:s.jsx(Re,{variant:"outline",className:"h-3 px-1",children:b})})]},y)})]})]})}),f&&s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Month Summary"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{className:"p-2 bg-blue-50 rounded",children:[s.jsx("div",{className:"text-lg font-bold",children:f.totalSupervisors}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Supervisors"})]}),s.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[s.jsx("div",{className:"text-lg font-bold",children:f.totalOfficers-f.totalSupervisors}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Officers"})]}),s.jsxs("div",{className:"p-2 bg-green-50 rounded",children:[s.jsx("div",{className:"text-lg font-bold",children:f.totalPTO}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"PTO Days"})]})]})]})}),s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Legend"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),s.jsx("span",{children:"Today"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"h-4",children:"3"}),s.jsx("span",{children:"Number of officers scheduled"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-muted"}),s.jsx("span",{children:"Other month"})]})]})]})})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(jc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Please select a shift to view schedule"})]})},zie=e=>[...e].sort((t,r)=>{const n=t.service_credit||0,i=r.service_credit||0;if(n!==i)return console.log(`Service credit sort: ${t.full_name} (${n}) vs ${r.full_name} (${i}) -> ${n-i}`),n-i;const a=m=>{const f=m.badge_number||m.badgeNumber;if(!f)return 9999;const g=parseInt(f);return isNaN(g)?9999:g},o=a(t),l=a(r);if(o!==l)return console.log(`Badge sort (equal credits): ${t.full_name} (${o}) vs ${r.full_name} (${l}) -> ${l-o} (DESCENDING)`),l-o;const c=(m="")=>{if(!m)return"";const f=m.trim().split(/\s+/);return f[f.length-1]||""},d=c(t.full_name),u=c(r.full_name),h=d.localeCompare(u);return console.log(`Last name sort (equal credits & badges): ${t.full_name} (${d}) vs ${r.full_name} (${u}) -> ${h}`),h}),Hie=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("lieutenant")||t.includes("lt")||t.includes("chief")||t.includes("deputy")||t.includes("probationary")||t.includes("ppo")},Wie=({selectedShiftId:e,setSelectedShiftId:t,shiftTypes:r,isAdminOrSupervisor:n})=>{var f;const[i,a]=w.useState(new Date().getFullYear()),[o,l]=w.useState(""),{data:c,isLoading:d}=bt({queryKey:["mobile-force-list",e,i],queryFn:async()=>{if(!e)return null;const g=`${i}-01-01`,y=`${i}-12-31`,{data:x,error:p}=await se.from("recurring_schedules").select(`
          officer_id,
          profiles!recurring_schedules_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank,
            hire_date,
            promotion_date_sergeant,
            promotion_date_lieutenant,
            service_credit_override
          )
        `).eq("shift_type_id",e).or(`end_date.is.null,end_date.gte.${g}`).lte("start_date",y);if(p)throw console.error("Error fetching recurring schedules:",p),p;const{data:v,error:b}=await se.from("forced_dates").select("*").gte("forced_date",g).lte("forced_date",y).order("forced_date",{ascending:!1});b&&console.error("Error fetching forced dates:",b);const j=new Map,S=[];x==null||x.forEach(O=>{O.profiles&&(Hie(O.profiles.rank)?S.push({name:O.profiles.full_name,rank:O.profiles.rank}):j.has(O.profiles.id)||j.set(O.profiles.id,O.profiles))});const P=Array.from(j.values());S.length>0&&console.log(" Officers excluded from force list (Lieutenants/Chiefs/PPOs):",S),console.log(` Included officers for force list: ${P.length}`),console.log(" Fetching service credits for officers...");const M=await Promise.all(P.map(async O=>{try{const{data:L,error:T}=await se.rpc("get_service_credit",{profile_id:O.id});if(T)return console.error(`Error fetching service credit for ${O.full_name}:`,T),{...O,service_credit:0,forceCount:(v==null?void 0:v.filter(E=>E.officer_id===O.id).length)||0};const k=parseFloat(L)||0;return console.log(`Officer ${O.full_name} - Service Credit: ${k}`),{...O,service_credit:k,forceCount:(v==null?void 0:v.filter(E=>E.officer_id===O.id).length)||0}}catch(L){return console.error(`Error fetching service credit for ${O.full_name}:`,L),{...O,service_credit:0,forceCount:(v==null?void 0:v.filter(T=>T.officer_id===O.id).length)||0}}}));console.log(" Sorting for Force List...");const I=zie(M);return{officers:I,forcedDates:v||[],summary:{totalOfficers:I.length,totalForced:(v==null?void 0:v.length)||0}}},enabled:!!e}),u=((f=c==null?void 0:c.officers)==null?void 0:f.filter(g=>{var x,p;if(!o)return!0;const y=o.toLowerCase();return g.full_name.toLowerCase().includes(y)||((x=g.badge_number)==null?void 0:x.toLowerCase().includes(y))||((p=g.rank)==null?void 0:p.toLowerCase().includes(y))}))||[],h=u.filter(g=>{var x;const y=((x=g.rank)==null?void 0:x.toLowerCase())||"";return(y.includes("sergeant")||y.includes("sgt"))&&!y.includes("lieutenant")&&!y.includes("lt")&&!y.includes("chief")&&!y.includes("deputy")}),m=u.filter(g=>{var p;const y=((p=g.rank)==null?void 0:p.toLowerCase())||"";return!(y.includes("sergeant")||y.includes("sgt"))});return dt.useEffect(()=>{if(c!=null&&c.officers&&c.officers.length>0){console.log(" Force List Officers Summary:"),console.log(`Total included: ${c.officers.length}`),console.log(`Sergeants: ${h.length}`),console.log(`Regular Officers: ${m.length}`),console.log(" Force List Officers (first 15):"),c.officers.slice(0,15).forEach((y,x)=>{var p;console.log(`${x+1}. ${y.full_name} - Rank: ${y.rank} - SC: ${(p=y.service_credit)==null?void 0:p.toFixed(1)} - Badge: ${y.badge_number} - Force Count: ${y.forceCount}`)});const g=c.officers.filter(y=>y.service_credit_override&&y.service_credit_override>0);g.length>0&&console.log(" Officers with service credit override:",g.map(y=>({name:y.full_name,override:y.service_credit_override,service_credit:y.service_credit})))}},[c,h.length,m.length]),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Force List"})]}),s.jsx(Re,{variant:"outline",children:i})]}),s.jsx(pt,{children:s.jsx(gt,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ce,{children:"Select Year"}),s.jsxs(Wt,{value:i.toString(),onValueChange:g=>a(parseInt(g)),children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{children:[2023,2024,2025,2026].map(g=>s.jsx(ct,{value:g.toString(),children:g},g))})]})]})})}),s.jsx(pt,{children:s.jsx(gt,{className:"p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search officers...",value:o,onChange:g=>l(g.target.value),className:"pl-10"})]})})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl font-bold",children:h.length}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Sergeants"})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl font-bold",children:m.length}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Officers"})]})]}),d?s.jsx("div",{className:"text-center py-8",children:"Loading force list..."}):e?u.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No officers found"}):s.jsxs("div",{className:"space-y-4",children:[h.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Sergeants (",h.length,")"]}),s.jsx("div",{className:"space-y-2",children:h.map(g=>{var y;return s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:fn(g.full_name)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["#",g.badge_number,"  ",go(g.rank)]})]}),s.jsxs(Re,{variant:g.forceCount>0?"default":"outline",children:[g.forceCount," forced"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Service Credit:"}),s.jsxs(Re,{variant:"outline",children:[((y=g.service_credit)==null?void 0:y.toFixed(1))||"0.0"," yrs"]})]}),g.service_credit_override&&g.service_credit_override>0&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["(Override: ",g.service_credit_override," yrs)"]})]})},g.id)})})]}),m.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Officers (",m.length,")"]}),s.jsxs("div",{className:"space-y-2",children:[m.slice(0,10).map(g=>{var y;return s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:fn(g.full_name)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["#",g.badge_number]})]}),s.jsxs(Re,{variant:g.forceCount>0?"default":"outline",children:[g.forceCount," forced"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Service:"}),s.jsxs(Re,{variant:"outline",children:[((y=g.service_credit)==null?void 0:y.toFixed(1))||"0.0"," yrs"]})]}),g.service_credit_override&&g.service_credit_override>0&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["(Override: ",g.service_credit_override," yrs)"]})]})},g.id)}),m.length>10&&s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["+",m.length-10," more officers"]})]})]})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select a shift"}),s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Force List Info"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"default",className:"h-5",children:"2"}),s.jsx("span",{children:"Number of times officer has been forced"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"h-5",children:"0.5 yrs"}),s.jsx("span",{children:"Service credit (sorted LEAST to MOST)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"h-5",children:"Sgt"}),s.jsx("span",{children:"Sergeants only (Lieutenants/Chiefs excluded)"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("div",{className:"text-xs text-yellow-600",children:"(Override: X yrs) - Manual service credit override applied"})}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.jsx("strong",{children:"Important:"}),s.jsx("br",{})," Lieutenants and Chiefs are NOT included",s.jsx("br",{})," PPOs/Probationary officers are NOT included",s.jsx("br",{})," Only Sergeants and Regular Officers are included"]})}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.jsx("strong",{children:"Sorting Priority:"}),s.jsx("br",{}),"1. Service Credit (least to most)",s.jsx("br",{}),"2. Badge Number (higher to lower when service credits equal)",s.jsx("br",{}),"3. Last Name (A-Z)"]})})]})]})})]})},Vie=({selectedShiftId:e,setSelectedShiftId:t,shiftTypes:r})=>{const[n,i]=w.useState(new Date().getFullYear()),[a,o]=w.useState(!1),l=cl(new Date),{data:c,isLoading:d}=bt({queryKey:["mobile-vacation-list",e,n],queryFn:async()=>{if(!e)return null;const x=`${n}-01-01`,p=`${n}-12-31`,{data:v,error:b}=await se.from("schedule_exceptions").select(`
          *,
          profiles!schedule_exceptions_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank,
            hire_date,
            promotion_date_sergeant,
            promotion_date_lieutenant,
            service_credit_override
          )
        `).eq("is_off",!0).gte("date",x).lte("date",p).eq("shift_type_id",e).order("date",{ascending:!0});if(b)throw b;console.log("Mobile - Total PTO exceptions:",v==null?void 0:v.length);const j=v==null?void 0:v.filter(T=>{if(!T.reason)return!1;const k=T.reason.toLowerCase();return k.includes("vacation")||k.includes("holiday")||k==="vac"||k==="hol"});console.log("Mobile - Filtered vacation/holiday:",j==null?void 0:j.length);const{data:S}=await se.from("profiles").select("id, full_name, badge_number, rank, hire_date, promotion_date_sergeant, promotion_date_lieutenant, service_credit_override"),P=new Map;S==null||S.forEach(T=>{P.set(T.id,T)});const M=new Map;j==null||j.forEach(T=>{const k=T.officer_id,E=P.get(k)||T.profiles;if(!M.has(k)){const C=B2({id:E==null?void 0:E.id,full_name:E==null?void 0:E.full_name,badge_number:E==null?void 0:E.badge_number,rank:E==null?void 0:E.rank,hire_date:E==null?void 0:E.hire_date,service_credit_override:(E==null?void 0:E.service_credit_override)||0,promotion_date_sergeant:E==null?void 0:E.promotion_date_sergeant,promotion_date_lieutenant:E==null?void 0:E.promotion_date_lieutenant});M.set(k,{officer:E,serviceCredit:C,vacationDays:[],vacationBlocks:[]})}const A=M.get(k),q=It(T.date);let U=T.reason||"Vacation";const R=U.toLowerCase();R.includes("vacation")||R==="vac"?U="Vacation":(R.includes("holiday")||R==="hol")&&(U="Holiday"),A.vacationDays.push({date:q,ptoType:U})}),M.forEach((T,k)=>{T.vacationDays.sort((q,U)=>q.date.getTime()-U.date.getTime());const E=[];let A=[];T.vacationDays.forEach((q,U)=>{if(A.length===0)A.push(q);else{const R=A[A.length-1].date;Math.abs((q.date.getTime()-R.getTime())/(1e3*60*60*24))===1&&q.ptoType===A[0].ptoType?A.push(q):(A.length>0&&E.push({startDate:A[0].date,endDate:A[A.length-1].date,daysCount:A.length,type:A[0].ptoType,dates:A.map(F=>F.date)}),A=[q])}}),A.length>0&&E.push({startDate:A[0].date,endDate:A[A.length-1].date,daysCount:A.length,type:A[0].ptoType,dates:A.map(q=>q.date)}),T.vacationBlocks=E,T.totalDays=T.vacationDays.length});const I=Array.from(M.values()).map(T=>{var k,E,A,q,U,R,C,F,X,re;return{id:(k=T.officer)==null?void 0:k.id,full_name:(E=T.officer)==null?void 0:E.full_name,officerName:(A=T.officer)==null?void 0:A.full_name,badge_number:(q=T.officer)==null?void 0:q.badge_number,badgeNumber:(U=T.officer)==null?void 0:U.badge_number,rank:(R=T.officer)==null?void 0:R.rank,service_credit:T.serviceCredit,serviceCredit:T.serviceCredit,hire_date:(C=T.officer)==null?void 0:C.hire_date,service_credit_override:((F=T.officer)==null?void 0:F.service_credit_override)||0,promotion_date_sergeant:(X=T.officer)==null?void 0:X.promotion_date_sergeant,promotion_date_lieutenant:(re=T.officer)==null?void 0:re.promotion_date_lieutenant}}),L=pf(I).map(T=>{const k=M.get(T.id);return k?(k.serviceCredit=T.service_credit,k):null}).filter(Boolean);return{officers:L,summary:{totalOfficers:L.length,totalDays:(j==null?void 0:j.length)||0,averageDays:L.length>0?((j==null?void 0:j.length)||0)/L.length:0},rawData:j||[]}},enabled:!!e}),u=dt.useMemo(()=>c!=null&&c.officers?a?c.officers.map(x=>{const p=x.vacationBlocks.filter(b=>ru(b.endDate,l)),v=p.reduce((b,j)=>b+j.daysCount,0);return{...x,vacationBlocks:p,totalDays:v}}).filter(x=>x.totalDays>0):c.officers:[],[c==null?void 0:c.officers,a,l]),h=()=>{console.log("Export vacation list")},m=(x,p)=>tn(x,p)?Pe(x,"MMM d"):`${Pe(x,"MMM d")} - ${Pe(p,"MMM d")}`,f=x=>{const p=x.toLowerCase();return p.includes("vacation")||p==="vac"?s.jsx(Re,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-200",children:"Vac"}):p.includes("holiday")||p==="hol"?s.jsx(Re,{className:"bg-orange-100 text-orange-800 hover:bg-orange-100 border-orange-200",children:"Hol"}):s.jsx(Re,{variant:"outline",children:x})},g=x=>{var v;if(!x)return"";const p=((v=x.rank)==null?void 0:v.toLowerCase())||"";return Es(x)?"border-l-4 border-green-500":p==="probationary"?"border-l-4 border-blue-500":"border-l-4 border-gray-300"},y=dt.useMemo(()=>{const x=u.reduce((v,b)=>v+b.totalDays,0),p=u.length;return{totalOfficers:p,totalDays:x,averageDays:p>0?x/p:0}},[u]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rf,{className:"h-5 w-5"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Vacation List"})]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:h,children:[s.jsx(Ai,{className:"h-4 w-4 mr-1"}),"Export"]})]}),s.jsx(pt,{children:s.jsx(gt,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ce,{children:"Select Year"}),s.jsxs(Wt,{value:n.toString(),onValueChange:x=>i(parseInt(x)),children:[s.jsx(Bt,{children:s.jsx(Vt,{})}),s.jsx(qt,{children:[2023,2024,2025,2026,2027].map(x=>s.jsx(ct,{value:x.toString(),children:x},x))})]})]})})}),s.jsx(pt,{children:s.jsx(gt,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(oj,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx(Ce,{className:"font-medium",children:"Only Remaining"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a?"Show future dates only":"Show all dates"})]})]}),s.jsx(sr,{checked:a,onCheckedChange:o})]})})}),c&&s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center border border-blue-100",children:[s.jsx("div",{className:"text-xl font-bold",children:y.totalOfficers}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Officers"})]}),s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center border border-green-100",children:[s.jsx("div",{className:"text-xl font-bold",children:y.totalDays}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Days"})]}),s.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg text-center border border-purple-100",children:[s.jsx("div",{className:"text-xl font-bold",children:y.averageDays.toFixed(1)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg per Officer"})]})]}),d?s.jsx("div",{className:"text-center py-8",children:"Loading vacation data..."}):e?c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold",children:"Officers"}),u.length===0?s.jsx(pt,{children:s.jsx(gt,{className:"p-6 text-center text-muted-foreground",children:a?"No future vacation or holiday dates found":"No vacation or holiday data found for "+n})}):u.map(({officer:x,totalDays:p,vacationBlocks:v,serviceCredit:b})=>s.jsx(pt,{className:`${g(x)}`,children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:fn(x.full_name)}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs(Re,{variant:"outline",className:"text-xs",children:["#",x.badge_number]}),s.jsx(Re,{variant:"outline",className:"text-xs",children:go(x.rank)}),b>0&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:["SC: ",b.toFixed(1)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold",children:p}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"days"})]})]}),v.length>0?s.jsx("div",{className:"space-y-2",children:v.map((j,S)=>{const P=ru(j.endDate,l);return s.jsxs("div",{className:`p-3 border rounded ${!P&&!a?"opacity-60 bg-gray-50":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[f(j.type),s.jsx("span",{className:`text-sm font-medium ${!P&&!a?"line-through":""}`,children:m(j.startDate,j.endDate)})]}),s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[j.daysCount,"d"]})]}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:[Pe(j.startDate,"MMM d, yyyy")," - ",Pe(j.endDate,"MMM d, yyyy")]}),!P&&!a&&s.jsx("span",{className:"text-red-500",children:"Past"})]})]},S)})}):s.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No vacation scheduled"})]})},x.id))]}),s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"Vacation List Info"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-200",children:"Vac"}),s.jsx("span",{children:"Vacation time off"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{className:"bg-orange-100 text-orange-800 hover:bg-orange-100 border-orange-200",children:"Hol"}),s.jsx("span",{children:"Holiday time off"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded border-l-4 border-green-500"}),s.jsx("span",{children:"Supervisor"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded border-l-4 border-blue-500"}),s.jsx("span",{children:"Probationary Officer (PPO)"})]}),s.jsx(ao,{className:"my-2"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a?"Showing only future vacation/holiday dates":"Showing all vacation/holiday dates for "+n}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Only Vacation and Holiday PTO types are shown"})]})]})})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No vacation data found"}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(xt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Please select a shift"})]})]})},Yie=({isAdminOrSupervisor:e,selectedShiftId:t,setSelectedShiftId:r,shiftTypes:n})=>{const[i,a]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState(!1),{data:u,isLoading:h,refetch:m}=bt({queryKey:["mobile-beat-preferences",t],queryFn:async()=>{if(!t)return null;const{data:p,error:v}=await se.from("recurring_schedules").select(`
          officer_id,
          profiles!recurring_schedules_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank,
            hire_date,
            promotion_date_sergeant,
            promotion_date_lieutenant,
            service_credit_override
          )
        `).eq("shift_type_id",t).is("end_date",null);if(v)throw console.error("Error fetching recurring schedules:",v),v;const{data:b,error:j}=await se.from("officer_beat_preferences").select("*");j&&console.error("Error fetching beat preferences:",j);const S=new Map;p==null||p.forEach(k=>{k.profiles&&!S.has(k.profiles.id)&&S.set(k.profiles.id,k.profiles)});const P=Array.from(S.values()),M=P.filter(k=>{var E;return!Es(k)&&((E=k.rank)==null?void 0:E.toLowerCase())!=="probationary"}),I=await Promise.all(M.map(async k=>{try{const{data:E}=await se.rpc("get_service_credit",{profile_id:k.id});return{...k,service_credit:E||0}}catch(E){return console.error(`Error fetching service credit for officer ${k.id}:`,E),{...k,service_credit:0}}})),O=I.map(k=>cte(k)),T=pf(O).map(k=>{const E=I.find(q=>q.id===k.id),A=b==null?void 0:b.find(q=>q.officer_id===k.id);return{...E,service_credit:k.service_credit,preferences:A||null}}).filter(Boolean);return console.log("Beat preferences - Officers found:",{totalRecurring:p==null?void 0:p.length,uniqueOfficers:P.length,nonSupervisorOfficers:M.length,sortedOfficers:T.length}),{officers:T,preferences:b||[]}},enabled:!!t}),f=os.filter(p=>p!=="Supervisor"&&p!=="Other (Custom)"),g=p=>u==null?void 0:u.preferences.find(v=>v.officer_id===p),y=p=>{const v=g(p.id);a(p.id),l({officer:p,preferences:v?{first_choice:v.first_choice||"",second_choice:v.second_choice||"",third_choice:v.third_choice||"",unavailable_beats:v.unavailable_beats||[],notes:v.notes||""}:{first_choice:"",second_choice:"",third_choice:"",unavailable_beats:[],notes:""}}),d(!0)},x=async()=>{if(!o||!i)return;const{first_choice:p,second_choice:v,third_choice:b,unavailable_beats:j,notes:S}=o.preferences;if(!p||!v||!b){alert("Please select all three beat preferences");return}const P=[p,v,b];if(new Set(P).size!==3){alert("Please select three different beats");return}try{const{error:I}=await se.from("officer_beat_preferences").upsert({officer_id:i,first_choice:p,second_choice:v,third_choice:b,unavailable_beats:j||[],notes:S||"",updated_at:new Date().toISOString()},{onConflict:"officer_id"});if(I)throw I;alert("Beat preferences saved successfully"),d(!1),a(null),l(null),m()}catch(I){console.error("Error saving preferences:",I),alert(`Error saving preferences: ${I.message||"Unknown error"}`)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bi,{className:"h-5 w-5"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Beat Preferences"})]}),s.jsxs(Ne,{size:"sm",variant:"outline",children:[s.jsx(Ai,{className:"h-4 w-4 mr-1"}),"Export"]})]}),s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Available Beats"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[f.slice(0,12).map(p=>s.jsx(Re,{variant:"outline",className:"text-xs",children:p.replace("District ","D")},p)),f.length>12&&s.jsxs(Re,{variant:"outline",className:"text-xs",children:["+",f.length-12," more"]})]})]})}),h?s.jsx("div",{className:"text-center py-8",children:"Loading beat preferences..."}):t?u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Officers (",u.officers.length,")"]}),s.jsxs("div",{className:"space-y-2",children:[u.officers.slice(0,10).map(p=>{var j;const v=g(p.id),b=v&&(v.first_choice||v.second_choice||v.third_choice);return s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:fn(p.full_name)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["#",p.badge_number,"  ",((j=p.service_credit)==null?void 0:j.toFixed(1))||"0.0"," yrs"]})]}),b?s.jsx(Re,{variant:"outline",className:"bg-green-50",children:"Has Prefs"}):s.jsx(Re,{variant:"outline",children:"No Prefs"})]}),b?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.first_choice&&s.jsxs(Re,{variant:"outline",className:"bg-green-50 border-green-200 text-green-800 text-xs",children:["1st: ",v.first_choice]}),v.second_choice&&s.jsxs(Re,{variant:"outline",className:"bg-blue-50 border-blue-200 text-blue-800 text-xs",children:["2nd: ",v.second_choice]}),v.third_choice&&s.jsxs(Re,{variant:"outline",className:"bg-purple-50 border-purple-200 text-purple-800 text-xs",children:["3rd: ",v.third_choice]})]}),v.unavailable_beats&&v.unavailable_beats.length>0&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Unavailable: ",v.unavailable_beats.slice(0,2).join(", "),v.unavailable_beats.length>2&&` +${v.unavailable_beats.length-2}`]})]}):s.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No preferences set"}),e&&s.jsxs(Ne,{size:"sm",variant:"outline",className:"w-full mt-3",onClick:()=>y(p),children:[b?"Edit":"Set"," Preferences"]})]})},p.id)}),u.officers.length>10&&s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["+",u.officers.length-10," more officers"]})]})]}),s.jsx(rn,{open:c,onOpenChange:d,children:s.jsxs(Vr,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[s.jsx(Yr,{children:s.jsxs(Kr,{children:["Edit Preferences for ",o?fn(o.officer.full_name):""]})}),o&&s.jsxs("div",{className:"space-y-4 py-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{className:"text-sm",children:"1st Choice"}),s.jsxs(Wt,{value:o.preferences.first_choice,onValueChange:p=>l({...o,preferences:{...o.preferences,first_choice:p}}),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select 1st choice"})}),s.jsx(qt,{children:f.map(p=>s.jsx(ct,{value:p,children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{className:"text-sm",children:"2nd Choice"}),s.jsxs(Wt,{value:o.preferences.second_choice,onValueChange:p=>l({...o,preferences:{...o.preferences,second_choice:p}}),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select 2nd choice"})}),s.jsx(qt,{children:f.map(p=>s.jsx(ct,{value:p,children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{className:"text-sm",children:"3rd Choice"}),s.jsxs(Wt,{value:o.preferences.third_choice,onValueChange:p=>l({...o,preferences:{...o.preferences,third_choice:p}}),children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select 3rd choice"})}),s.jsx(qt,{children:f.map(p=>s.jsx(ct,{value:p,children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{className:"text-sm",children:"Notes"}),s.jsx(vf,{value:o.preferences.notes||"",onChange:p=>l({...o,preferences:{...o.preferences,notes:p.target.value}}),placeholder:"Additional notes...",className:"min-h-[80px]"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",className:"flex-1",onClick:()=>{d(!1),a(null),l(null)},children:"Cancel"}),s.jsxs(Ne,{className:"flex-1",onClick:x,children:[s.jsx(tl,{className:"h-4 w-4 mr-1"}),"Save"]})]})]})]})})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No beat data found"}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select a shift"})]})},kI=({officerName:e,date:t,onSave:r,open:n,onOpenChange:i,isUpdating:a=!1,officerId:o,shiftTypeId:l,shiftStartTime:c="08:00",shiftEndTime:d="17:00",onSuccess:u})=>{const[h,m]=w.useState("vacation"),[f,g]=w.useState(!0),[y,x]=w.useState(c),[p,v]=w.useState(d);w.useEffect(()=>{f&&(x(c),v(d))},[c,d,f]);const b=I=>{g(I),I&&(x(c),v(d))},j=()=>{const I={officerId:o,date:t,shiftTypeId:l,ptoType:h,isFullShift:f,startTime:f?c:y,endTime:f?d:p,isOff:!0,reason:h,custom_start_time:f?null:y,custom_end_time:f?null:p};console.log(" Saving PTO data:",I),r(I)},P=(()=>{const I=[];for(let O=0;O<24;O++){const L=O.toString().padStart(2,"0");I.push(`${L}:00`),O<23&&I.push(`${L}:30`)}return I})(),M=`${c} - ${d}`;return s.jsx(rn,{open:n,onOpenChange:i,children:s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Assign PTO"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["For ",e," on ",Pe(new Date(t),"MMM d, yyyy")]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Shift: ",M]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"PTO Type"}),s.jsxs(Wt,{value:h,onValueChange:m,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select PTO type"})}),s.jsxs(qt,{children:[s.jsx(ct,{value:"vacation",children:"Vacation"}),s.jsx(ct,{value:"sick",children:"Sick Leave"}),s.jsx(ct,{value:"holiday",children:"Holiday"}),s.jsx(ct,{value:"comp",children:"Comp Time"}),s.jsx(ct,{value:"other",children:"Other"})]})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Ce,{htmlFor:"full-day",children:"Full Day"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:f?`Full shift (${c} - ${d})`:"Partial day (select times below)"})]}),s.jsx(sr,{id:"full-day",checked:f,onCheckedChange:b})]})}),!f&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"start-time",children:"Start Time"}),s.jsxs(Wt,{value:y,onValueChange:x,children:[s.jsx(Bt,{id:"start-time",children:s.jsx(Vt,{})}),s.jsx(qt,{className:"max-h-[200px]",children:P.map(I=>s.jsx(ct,{value:I,children:I},I))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"end-time",children:"End Time"}),s.jsxs(Wt,{value:p,onValueChange:v,children:[s.jsx(Bt,{id:"end-time",children:s.jsx(Vt,{})}),s.jsx(qt,{className:"max-h-[200px]",children:P.map(I=>s.jsx(ct,{value:I,children:I},I))})]})]})]})}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",className:"flex-1",onClick:()=>i(!1),disabled:a,children:"Cancel"}),s.jsx(Ne,{onClick:j,className:"flex-1",disabled:a,children:a?"Saving...":"Save"})]})]})]})})},CI=({editingAssignment:e,onClose:t,onSave:r,isUpdating:n=!1})=>{var v,b;const[i,a]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(""),[m,f]=w.useState(!1);w.useEffect(()=>{var j,S,P,M,I,O;if(e){const L=((S=(j=e.officer)==null?void 0:j.shiftInfo)==null?void 0:S.position)||"";L&&!os.includes(L)?(a("other-custom"),l(L),f(!0)):(a(L||""),l(""),f(!1)),d(((M=(P=e.officer)==null?void 0:P.shiftInfo)==null?void 0:M.unitNumber)||""),h(((O=(I=e.officer)==null?void 0:I.shiftInfo)==null?void 0:O.notes)||"")}},[e]);const g=j=>{a(j),f(j==="other-custom"),j!=="other-custom"&&l("")},y=()=>{var M,I,O,L,T,k,E,A,q,U,R;if(!e){console.error("No assignment data available");return}const j=i==="other-custom"&&o.trim()?o.trim():i;if(!j){console.error("Position is required"),toast.error("Position is required");return}const S=!((I=(M=e.officer)==null?void 0:M.shiftInfo)!=null&&I.scheduleId)||((L=(O=e.officer)==null?void 0:O.shiftInfo)==null?void 0:L.scheduleId)==="new"||((k=(T=e.officer)==null?void 0:T.shiftInfo)==null?void 0:k.scheduleType)==="new",P={scheduleId:S?"new":(A=(E=e.officer)==null?void 0:E.shiftInfo)==null?void 0:A.scheduleId,type:S?"new":(U=(q=e.officer)==null?void 0:q.shiftInfo)==null?void 0:U.scheduleType,positionName:j,unitNumber:c.trim()||void 0,notes:u.trim()||void 0,date:e.dateStr,officerId:e.officerId||((R=e.officer)==null?void 0:R.officerId),shiftTypeId:e.shiftTypeId,isNewAssignment:S};console.log(" Saving assignment data (new?",S,"):",P),r(P)};if(!e)return null;const x=e.officerName||((v=e.officer)==null?void 0:v.officerName)||((b=e.officer)==null?void 0:b.full_name)||"Unknown Officer",p=Pe(new Date(e.dateStr),"MMM d, yyyy");return s.jsx(rn,{open:!!e,onOpenChange:j=>!j&&t(),children:s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsxs(Yr,{children:[s.jsx(Kr,{children:"Edit Assignment"}),s.jsxs(as,{className:"text-sm",children:["For ",x," on ",p]})]}),s.jsxs("div",{className:"space-y-4 py-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"position-select",children:"Position *"}),s.jsxs(Wt,{value:i,onValueChange:g,children:[s.jsx(Bt,{id:"position-select",children:s.jsx(Vt,{placeholder:"Select position"})}),s.jsxs(qt,{children:[os.map(j=>s.jsx(ct,{value:j,children:j},j)),s.jsx(ct,{value:"other-custom",children:"Other (Custom)"})]})]}),m&&s.jsxs("div",{className:"pt-2",children:[s.jsx(Ce,{htmlFor:"custom-position",children:"Custom Position *"}),s.jsx(St,{id:"custom-position",placeholder:"Enter custom position name",value:o,onChange:j=>l(j.target.value),className:"mt-1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"unit-number",children:"Unit Number"}),s.jsx(St,{id:"unit-number",placeholder:"e.g., 101, 202, etc.",value:c,onChange:j=>d(j.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),s.jsx(vf,{id:"notes",placeholder:"Add any notes about this assignment...",value:u,onChange:j=>h(j.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",className:"flex-1",onClick:t,disabled:n,children:"Cancel"}),s.jsx(Ne,{onClick:y,className:"flex-1",disabled:n||!i||i==="other-custom"&&!o.trim(),children:n?"Saving...":"Save Assignment"})]}),i==="other-custom"&&!o.trim()&&s.jsx("p",{className:"text-xs text-destructive mt-2",children:"Please enter a custom position name"})]})]})})},TI=({userRole:e="officer",isAdminOrSupervisor:t=!1,userCurrentShift:r})=>{const[n,i]=w.useState("weekly"),[a,o]=w.useState(""),[l,c]=w.useState(jn(new Date,{weekStartsOn:0})),[d,u]=w.useState(new Date),[h,m]=w.useState(!1),[f,g]=w.useState(!1),[y,x]=w.useState(null),[p,v]=w.useState(null),{userEmail:b}=ff(),{data:j,isLoading:S}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:G,error:he}=await se.from("shift_types").select("*").order("start_time");if(he)throw he;return G}});w.useEffect(()=>{j&&j.length>0&&!a&&r&&r!=="all"&&(j.some(he=>he.id===r)?(console.log(" Mobile: Setting user's assigned shift:",r),o(r)):console.log(" Mobile: User's assigned shift not found. No auto-selection."))},[j,r,a]);const P=PI(l,d,n,a),{data:M}=bt({queryKey:["overtime-exceptions-mobile",a,l.toISOString()],queryFn:async()=>{if(!a)return[];const G=Pe(l,"yyyy-MM-dd"),he=Pe(lr(l,6),"yyyy-MM-dd"),{data:xe,error:Se}=await se.from("schedule_exceptions").select("*").eq("is_extra_shift",!0).eq("shift_type_id",a).gte("date",G).lte("date",he).order("date");return Se?(console.error("Error fetching overtime exceptions:",Se),[]):xe||[]},enabled:!!a&&n==="weekly"}),I=Lr(),{updatePositionMutation:O,removeOfficerMutation:L,removePTOMutation:T}=P,k=G=>({vacation:"vacation_hours",sick:"sick_hours",holiday:"holiday_hours",comp:"comp_time_hours",other:"other_pto_hours"})[G]||null,E=(G,he)=>{try{const[xe,Se]=G.split(":").map(Number),[K,we]=he.split(":").map(Number),Te=xe*60+Se;return(K*60+we-Te)/60}catch(xe){return console.error("Error calculating hours:",xe),8}},A=Xt({mutationFn:async G=>{console.log(" Assigning PTO on mobile:",G);const he=G.isFullShift?G.startTime||"00:00":G.startTime,xe=G.isFullShift?G.endTime||"23:59":G.endTime,{data:Se,error:K}=await se.from("schedule_exceptions").select("id").eq("officer_id",G.officerId).eq("date",G.date).eq("shift_type_id",G.shiftTypeId);if(K)throw K;let we;if(Se&&Se.length>0){const{error:ae}=await se.from("schedule_exceptions").update({is_off:!0,reason:G.ptoType,custom_start_time:G.isFullShift?null:he,custom_end_time:G.isFullShift?null:xe,position_name:null,unit_number:null,notes:`PTO: ${G.ptoType}`}).eq("id",Se[0].id);if(ae)throw ae;we=Se[0].id}else{const{data:ae,error:H}=await se.from("schedule_exceptions").insert({officer_id:G.officerId,date:G.date,shift_type_id:G.shiftTypeId,is_off:!0,reason:G.ptoType,custom_start_time:G.isFullShift?null:he,custom_end_time:G.isFullShift?null:xe,position_name:null,unit_number:null,notes:`PTO: ${G.ptoType}`}).select("id").single();if(H)throw H;we=ae.id}const Te=k(G.ptoType);if(Te){const{data:ae,error:H}=await se.from("profiles").select("*").eq("id",G.officerId).single();if(H)console.error("Error fetching profile:",H);else if(ae){let Oe;if(G.isFullShift){const _e=j==null?void 0:j.find(W=>W.id===G.shiftTypeId);_e!=null&&_e.start_time&&(_e!=null&&_e.end_time)?Oe=E(_e.start_time,_e.end_time):Oe=8}else Oe=E(he,xe);const pe=ae[Te],{error:je}=await se.from("profiles").update({[Te]:Math.max(0,(pe||0)-Oe)}).eq("id",G.officerId);je&&console.error("Error updating PTO balance:",je)}}return{id:we,success:!0}},onSuccess:()=>{ge.success("PTO assigned successfully"),I.invalidateQueries({queryKey:["weekly-schedule-mobile",a,l.toISOString()]})},onError:G=>{console.error(" Error assigning PTO:",G),ge.error(G.message||"Failed to assign PTO")}}),q=()=>c(G=>qj(G)),U=()=>c(G=>dl(G,1)),R=()=>u(G=>Gx(G)),C=()=>u(G=>bs(G,1)),F=()=>{c(jn(new Date,{weekStartsOn:0})),u(new Date)},X=(G,he,xe,Se)=>{console.log(" Opening PTO dialog for:",Se,he);const K=j==null?void 0:j.find(ae=>ae.id===a),we=(K==null?void 0:K.start_time)||"08:00",Te=(K==null?void 0:K.end_time)||"17:00";x({id:xe,name:Se,date:he,schedule:G,shiftStartTime:we,shiftEndTime:Te}),m(!0)},re=async G=>{if(!y||!a){ge.error("Missing required information");return}console.log(" Saving PTO:",G),A.mutate({...G,officerId:y.id,date:y.date,shiftTypeId:a},{onSuccess:()=>{try{Ir.logPTOAssignment(y.id,G.ptoType,y.date,b,`Assigned ${G.ptoType} PTO via mobile`)}catch(he){console.error("Failed to log PTO audit:",he)}m(!1),x(null)}})},z=async(G,he,xe)=>{var Te,ae,H,Oe,pe;console.log(" Checking PTO schedule data for removal:",{schedule:G,date:he,officerId:xe,hasPTO:G==null?void 0:G.hasPTO,ptoData:G==null?void 0:G.ptoData,isOff:G==null?void 0:G.isOff,reason:G==null?void 0:G.reason,id:G==null?void 0:G.id,scheduleType:G==null?void 0:G.scheduleType});let Se=(G==null?void 0:G.id)||((Te=G==null?void 0:G.ptoData)==null?void 0:Te.id),K=(G==null?void 0:G.reason)||((ae=G==null?void 0:G.ptoData)==null?void 0:ae.ptoType)||"PTO";if(!Se&&(G!=null&&G.hasPTO||G!=null&&G.reason)){console.log(" Searching for PTO record in database...");try{const{data:je,error:_e}=await se.from("schedule_exceptions").select("id, reason").eq("officer_id",xe).eq("date",he).eq("shift_type_id",a).eq("is_off",!0);if(_e){console.error("Error searching for PTO:",_e),ge.error("Could not find PTO record");return}je&&je.length>0&&(Se=je[0].id,K=je[0].reason||K,console.log(" Found PTO record:",{ptoId:Se,ptoType:K}))}catch(je){console.error("Search error:",je)}}if(!Se&&(G==null?void 0:G.scheduleType)==="recurring"){console.log(" This appears to be a recurring schedule with PTO, checking database...");try{const{data:je,error:_e}=await se.from("schedule_exceptions").select("id, reason").eq("officer_id",xe).eq("date",he).eq("shift_type_id",a).eq("is_off",!0);if(!_e&&je&&je.length>0)Se=je[0].id,K=je[0].reason||K,console.log(" Found overriding PTO exception:",{ptoId:Se,ptoType:K});else{console.log(" No PTO exception found for this recurring day"),ge.error("Cannot remove PTO: No PTO record found");return}}catch(je){console.error("Error checking for PTO exception:",je),ge.error("Error finding PTO data");return}}if(!Se){console.error(" Missing PTO ID after all attempts:",{scheduleId:G==null?void 0:G.id,ptoDataId:(H=G==null?void 0:G.ptoData)==null?void 0:H.id,hasPTO:G==null?void 0:G.hasPTO,reason:G==null?void 0:G.reason}),ge.error("Cannot remove PTO: Missing PTO data");return}const we={id:Se,officerId:xe,date:he,shiftTypeId:a,ptoType:K,startTime:((Oe=G==null?void 0:G.ptoData)==null?void 0:Oe.startTime)||(G==null?void 0:G.custom_start_time)||"00:00",endTime:((pe=G==null?void 0:G.ptoData)==null?void 0:pe.endTime)||(G==null?void 0:G.custom_end_time)||"23:59"};console.log(" Removing PTO with data:",we),T.mutate(we,{onSuccess:()=>{try{Ir.logPTORemoval(xe,we.ptoType,he,b,`Removed ${we.ptoType} PTO on mobile`)}catch(je){console.error("Failed to log PTO removal audit:",je)}ge.success("PTO removed successfully"),I.invalidateQueries({queryKey:["weekly-schedule-mobile",a,l.toISOString()]})},onError:je=>{console.error(" Error removing PTO:",je),ge.error(`Failed to remove PTO: ${je.message||"Unknown error"}`)}})},Y=(G,he)=>{console.log(" Opening assignment editor for:",G.officerName,he),v({officer:G,dateStr:he,shiftTypeId:a,officerId:G.officerId,officerName:G.officerName}),g(!0)},J=(G,he,xe)=>{console.log(" Removing officer on mobile:",{scheduleId:G,type:he,officerData:xe}),L.mutate({scheduleId:G,type:he,officerData:xe},{onSuccess:()=>{ge.success("Officer removed from schedule"),I.invalidateQueries({queryKey:["weekly-schedule-mobile",a,l.toISOString()]})},onError:Se=>{console.error(" Error removing officer:",Se),ge.error("Failed to remove officer")}})},ne=G=>{console.log(" Saving assignment:",G),O.mutate(G,{onSuccess:()=>{try{Ir.logAssignmentUpdate(G.officerId||(p==null?void 0:p.officerId),(p==null?void 0:p.officerName)||"Unknown Officer",G.positionName,(p==null?void 0:p.dateStr)||"",b,"Updated assignment via mobile")}catch(he){console.error("Failed to log assignment audit:",he)}ge.success("Assignment updated successfully"),g(!1),v(null),I.invalidateQueries({queryKey:["weekly-schedule-mobile",a,l.toISOString()]})},onError:he=>{console.error(" Error updating assignment:",he),ge.error(he.message||"Failed to update assignment")}})},le=()=>{switch(n){case"weekly":return s.jsx(qie,{currentWeekStart:l,selectedShiftId:a,shiftTypes:j||[],isAdminOrSupervisor:t,onPreviousWeek:q,onNextWeek:U,onToday:F,onAssignPTO:X,onRemovePTO:z,onEditAssignment:Y,onRemoveOfficer:J,isUpdating:A.isPending||O.isPending,overtimeExceptions:M||[]});case"monthly":return s.jsx(Uie,{currentMonth:d,selectedShiftId:a,shiftTypes:j||[],onPreviousMonth:R,onNextMonth:C,onToday:F});case"force-list":return s.jsx(Wie,{selectedShiftId:a,setSelectedShiftId:o,shiftTypes:j||[],isAdminOrSupervisor:t});case"vacation-list":return s.jsx(Vie,{selectedShiftId:a,setSelectedShiftId:o,shiftTypes:j||[]});case"beat-preferences":return s.jsx(Yie,{isAdminOrSupervisor:t,selectedShiftId:a,setSelectedShiftId:o,shiftTypes:j||[]});default:return s.jsx("div",{children:"Select a view"})}};return S?s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsx(vs,{className:"h-6 w-1/2 mb-4"}),s.jsx(vs,{className:"h-64 w-full"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jc,{className:"h-5 w-5"}),s.jsx("h3",{className:"font-semibold",children:"The Book"})]}),t&&s.jsxs(Ne,{size:"sm",variant:"outline",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export"]})]}),s.jsxs(Wt,{value:a,onValueChange:o,children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select Shift"})}),s.jsx(qt,{children:j==null?void 0:j.map(G=>s.jsxs(ct,{value:G.id,children:[G.name," (",G.start_time," - ",G.end_time,")"]},G.id))})]})]})}),s.jsx(pt,{children:s.jsx(gt,{className:"p-0",children:s.jsxs(fl,{value:n,onValueChange:G=>i(G),children:[s.jsxs(sa,{className:"w-full grid grid-cols-5 h-12 rounded-none",children:[s.jsxs(er,{value:"weekly",className:"flex-col h-full py-2 text-xs",children:[s.jsx(xt,{className:"h-4 w-4 mb-1"}),"Weekly"]}),s.jsxs(er,{value:"monthly",className:"flex-col h-full py-2 text-xs",children:[s.jsx(jc,{className:"h-4 w-4 mb-1"}),"Monthly"]}),s.jsxs(er,{value:"force-list",className:"flex-col h-full py-2 text-xs",children:[s.jsx(jr,{className:"h-4 w-4 mb-1"}),"Force"]}),s.jsxs(er,{value:"vacation-list",className:"flex-col h-full py-2 text-xs",children:[s.jsx(rf,{className:"h-4 w-4 mb-1"}),"Vacation"]}),s.jsxs(er,{value:"beat-preferences",className:"flex-col h-full py-2 text-xs",children:[s.jsx(bi,{className:"h-4 w-4 mb-1"}),"Beats"]})]}),s.jsx("div",{className:"p-4",children:a?le():s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(xt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Please select a shift to view schedule"})]})})]})})}),y&&s.jsx(kI,{open:h,onOpenChange:m,officerName:y.name,date:y.date,officerId:y.id,shiftTypeId:a,shiftStartTime:y.shiftStartTime,shiftEndTime:y.shiftEndTime,onSave:re,isUpdating:A.isPending}),s.jsx(CI,{editingAssignment:p,onClose:()=>{g(!1),v(null)},onSave:ne,isUpdating:O.isPending})]})},mm={pdf_supervisor_pto_bg:"255,255,200",pdf_supervisor_pto_border:"255,220,100",pdf_supervisor_pto_text:"139,69,19",pdf_officer_pto_bg:"240,255,240",pdf_officer_pto_border:"144,238,144",pdf_officer_pto_text:"0,100,0",pdf_vacation_bg:"173,216,230",pdf_vacation_border:"100,149,237",pdf_vacation_text:"0,0,139",pdf_sick_bg:"255,200,200",pdf_sick_border:"255,100,100",pdf_sick_text:"139,0,0",pdf_holiday_bg:"255,218,185",pdf_holiday_border:"255,165,0",pdf_holiday_text:"165,42,42",pdf_comp_bg:"221,160,221",pdf_comp_border:"186,85,211",pdf_comp_text:"128,0,128",pdf_off_day_bg:"220,220,220",pdf_off_day_text:"100,100,100",weekly_supervisor_bg:"255,255,255",weekly_supervisor_text:"0,0,0",weekly_officer_bg:"255,255,255",weekly_officer_text:"0,0,0",weekly_ppo_bg:"255,250,240",weekly_ppo_text:"150,75,0",weekly_vacation_bg:"173,216,230",weekly_vacation_text:"0,0,139",weekly_sick_bg:"255,200,200",weekly_sick_text:"139,0,0",weekly_holiday_bg:"255,218,185",weekly_holiday_text:"165,42,42",weekly_comp_bg:"221,160,221",weekly_comp_text:"128,0,128",weekly_pto_bg:"144,238,144",weekly_pto_text:"0,100,0",weekly_off_bg:"240,240,240",weekly_off_text:"100,100,100"},M5=()=>{const{data:e,isLoading:t,error:r}=bt({queryKey:["website-settings"],queryFn:async()=>{const{data:a,error:o}=await se.from("website_settings").select("*").single();if(o)return o.code==="PGRST116"?{color_settings:mm}:(console.error("Error fetching color settings:",o),{color_settings:mm});const l=a!=null&&a.color_settings?{...mm,...a.color_settings}:mm;return{...a,color_settings:l}},retry:1,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0}),n=(e==null?void 0:e.color_settings)||mm,i=a=>{try{const o=a.split(",").map(l=>parseInt(l.trim()));return o.length===3&&o.every(l=>!isNaN(l))?[o[0],o[1],o[2]]:[255,255,255]}catch{return[255,255,255]}};return{colors:n,getColorArray:i,isLoading:t,error:r,pdf:{supervisorPTO:{bg:i(n.pdf_supervisor_pto_bg),border:i(n.pdf_supervisor_pto_border),text:i(n.pdf_supervisor_pto_text)},officerPTO:{bg:i(n.pdf_officer_pto_bg),border:i(n.pdf_officer_pto_border),text:i(n.pdf_officer_pto_text)},vacation:{bg:i(n.pdf_vacation_bg),border:i(n.pdf_vacation_border),text:i(n.pdf_vacation_text)},sick:{bg:i(n.pdf_sick_bg),border:i(n.pdf_sick_border),text:i(n.pdf_sick_text)},holiday:{bg:i(n.pdf_holiday_bg),border:i(n.pdf_holiday_border),text:i(n.pdf_holiday_text)},comp:{bg:i(n.pdf_comp_bg),border:i(n.pdf_comp_border),text:i(n.pdf_comp_text)},offDay:{bg:i(n.pdf_off_day_bg),text:i(n.pdf_off_day_text)}},weekly:{supervisor:{bg:`rgb(${n.weekly_supervisor_bg})`,text:`rgb(${n.weekly_supervisor_text})`},officer:{bg:`rgb(${n.weekly_officer_bg})`,text:`rgb(${n.weekly_officer_text})`},ppo:{bg:`rgb(${n.weekly_ppo_bg})`,text:`rgb(${n.weekly_ppo_text})`},vacation:{bg:`rgb(${n.weekly_vacation_bg})`,text:`rgb(${n.weekly_vacation_text})`},sick:{bg:`rgb(${n.weekly_sick_bg})`,text:`rgb(${n.weekly_sick_text})`},holiday:{bg:`rgb(${n.weekly_holiday_bg})`,text:`rgb(${n.weekly_holiday_text})`},comp:{bg:`rgb(${n.weekly_comp_bg})`,text:`rgb(${n.weekly_comp_text})`},pto:{bg:`rgb(${n.weekly_pto_bg})`,text:`rgb(${n.weekly_pto_text})`},off:{bg:`rgb(${n.weekly_off_bg})`,text:`rgb(${n.weekly_off_text})`}}}},Ts={supervisor:{bg:"rgb(240, 249, 255)",text:"rgb(0, 75, 150)"},officer:{bg:"rgb(240, 255, 240)",text:"rgb(0, 100, 0)"},ppo:{bg:"rgb(255, 250, 240)",text:"rgb(150, 75, 0)"},pto:{bg:"rgb(144, 238, 144)",text:"rgb(0, 100, 0)"},vacation:{bg:"rgb(173, 216, 230)",text:"rgb(0, 0, 139)"},sick:{bg:"rgb(255, 200, 200)",text:"rgb(139, 0, 0)"},holiday:{bg:"rgb(255, 218, 185)",text:"rgb(165, 42, 42)"},comp:{bg:"rgb(221, 160, 221)",text:"rgb(128, 0, 128)"},off:{bg:"rgb(240, 240, 240)",text:"rgb(100, 100, 100)"}},Lw=({officer:e,dateStr:t,officerId:r,officerName:n,isAdminOrSupervisor:i,onAssignPTO:a,onRemovePTO:o,onEditAssignment:l,onRemoveOfficer:c,isUpdating:d=!1,isPPO:u=!1,partnerInfo:h=null})=>{var k,E,A,q,U,R;let m=Ts;try{m=M5().weekly}catch{console.warn("Color settings not available, using fallback colors")}const f=!!e,g=(k=e==null?void 0:e.shiftInfo)==null?void 0:k.isOff,y=(E=e==null?void 0:e.shiftInfo)==null?void 0:E.hasPTO,x=(A=e==null?void 0:e.shiftInfo)==null?void 0:A.position,p=(q=e==null?void 0:e.shiftInfo)==null?void 0:q.ptoData,v=((U=e==null?void 0:e.shiftInfo)==null?void 0:U.scheduleType)==="exception",b=e==null?void 0:e.isRegularRecurringDay,j=v&&!g&&!y&&!b,S=x&&(x.toLowerCase().includes("other")||x&&!os.includes(x)),P=y&&((p==null?void 0:p.isFullShift)===!0||!(p!=null&&p.isFullShift)),M=y&&(p==null?void 0:p.isFullShift)===!1,I=u&&h?`Partner with ${h}`:x,O=C=>{var X,re,z,Y,J,ne,le,G,he,xe;const F=(C==null?void 0:C.toLowerCase())||"";return F.includes("vacation")||F==="vacation"?{bg:((X=m.vacation)==null?void 0:X.bg)||Ts.vacation.bg,text:((re=m.vacation)==null?void 0:re.text)||Ts.vacation.text}:F.includes("sick")||F==="sick"?{bg:((z=m.sick)==null?void 0:z.bg)||Ts.sick.bg,text:((Y=m.sick)==null?void 0:Y.text)||Ts.sick.text}:F.includes("holiday")||F==="holiday"?{bg:((J=m.holiday)==null?void 0:J.bg)||Ts.holiday.bg,text:((ne=m.holiday)==null?void 0:ne.text)||Ts.holiday.text}:F.includes("comp")||F==="comp"?{bg:((le=m.comp)==null?void 0:le.bg)||Ts.comp.bg,text:((G=m.comp)==null?void 0:G.text)||Ts.comp.text}:{bg:((he=m.pto)==null?void 0:he.bg)||Ts.pto.bg,text:((xe=m.pto)==null?void 0:xe.text)||Ts.pto.text}},L=()=>{var C,F;return y?O(p==null?void 0:p.ptoType).bg:g?((C=m.off)==null?void 0:C.bg)||Ts.off.bg:u?((F=m.ppo)==null?void 0:F.bg)||Ts.ppo.bg:"bg-white"},T=()=>{var C,F;return y?O(p==null?void 0:p.ptoType).text:g?((C=m.off)==null?void 0:C.text)||Ts.off.text:u?((F=m.ppo)==null?void 0:F.text)||Ts.ppo.text:"text-foreground"};return f?s.jsxs("div",{className:`
        p-2 border-r min-h-10 relative group
        ${j?"border-orange-300":""}
      `,style:{backgroundColor:L(),color:T()},children:[y?s.jsxs("div",{className:"text-center",children:[s.jsx(Re,{className:"text-xs mb-1",style:{backgroundColor:O(p==null?void 0:p.ptoType).bg,color:O(p==null?void 0:p.ptoType).text,borderColor:O(p==null?void 0:p.ptoType).text},children:(p==null?void 0:p.ptoType)||"PTO"}),M&&I&&s.jsx("div",{className:"text-xs mt-1 truncate opacity-90",children:I}),M&&s.jsx("div",{className:"text-xs font-medium mt-1 opacity-90",children:"Partial Day"}),P&&I&&s.jsx("div",{className:"text-xs mt-1 truncate opacity-70 italic",children:I})]}):g?s.jsx("div",{className:"text-center font-medium",children:"DD"}):s.jsxs("div",{className:"text-center",children:[j&&s.jsx(Re,{variant:"outline",className:"text-xs mb-1 border-orange-300",style:{backgroundColor:"rgb(255, 247, 237)",color:"rgb(194, 65, 12)"},children:"Extra Shift"}),S&&!j&&s.jsx(Re,{variant:"outline",className:"text-xs mb-1 border-purple-300",style:{backgroundColor:"rgb(250, 245, 255)",color:"rgb(126, 34, 206)"},children:"Special"}),I&&s.jsx("div",{className:"text-sm font-medium truncate",children:I})]}),i&&e.shiftInfo&&s.jsxs("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[!g&&!y&&s.jsx(Ne,{size:"icon",variant:"secondary",className:"h-6 w-6 bg-blue-100 hover:bg-blue-200 text-blue-700 border border-blue-200 shadow-sm",onClick:C=>{C.stopPropagation(),l(e,t)},title:"Edit Assignment",children:s.jsx(Zd,{className:"h-3 w-3"})}),j&&s.jsx(Ne,{size:"icon",variant:"secondary",className:"h-6 w-6 bg-red-100 hover:bg-red-200 text-red-700 border border-red-200 shadow-sm",onClick:C=>{C.stopPropagation(),c(e)},disabled:d,title:"Remove Extra Shift",children:s.jsx(es,{className:"h-3 w-3"})}),!g&&!y&&s.jsx(Ne,{size:"icon",variant:"secondary",className:"h-6 w-6 bg-green-100 hover:bg-green-200 text-green-700 border border-green-200 shadow-sm",onClick:C=>{C.stopPropagation(),a(e.shiftInfo,t,r,n)},title:"Assign PTO",children:s.jsx(pr,{className:"h-3 w-3"})}),y&&s.jsx(Ne,{size:"icon",variant:"secondary",className:"h-6 w-6 bg-orange-100 hover:bg-orange-200 text-orange-700 border border-orange-200 shadow-sm",onClick:C=>{C.stopPropagation(),o(e.shiftInfo,t,r)},disabled:d,title:"Remove PTO",children:s.jsx(es,{className:"h-3 w-3"})})]})]}):s.jsx("div",{className:"p-2 border-r min-h-10 relative",style:{backgroundColor:((R=m.off)==null?void 0:R.bg)||Ts.off.bg}})},u4=({currentDate:e,selectedShiftId:t,schedules:r,isAdminOrSupervisor:n,weeklyColors:i,onDateNavigation:a,onEventHandlers:o,mutations:l,navigateToDailySchedule:c,getLastName:d,getRankPriority:u,isSupervisorByRank:h,onDateChange:m,officerProfiles:f,queryKey:g=["weekly-schedule",t],refetchScheduleData:y})=>{const[x,p]=w.useState(e),[v,b]=w.useState(!1),[j,S]=w.useState(e),[P,M]=w.useState(r),[I,O]=w.useState(new Map),[L,T]=w.useState(!1),k=Lr(),{data:E,isLoading:A}=bt({queryKey:["overtime-exceptions",x.toISOString(),t],queryFn:async()=>{console.log("Fetching overtime exceptions for week...");const H=Pe(x,"yyyy-MM-dd"),Oe=Pe(lr(x,6),"yyyy-MM-dd"),{data:pe,error:je}=await se.from("schedule_exceptions").select("*").eq("is_extra_shift",!0).eq("shift_type_id",t).gte("date",H).lte("date",Oe).order("date");if(je)return console.error("Error fetching overtime exceptions:",je),[];if(!pe||pe.length===0)return[];const _e=[...new Set(pe.map($=>$.officer_id))],{data:W,error:te}=await se.from("profiles").select("id, full_name, badge_number, rank, hire_date, promotion_date_sergeant, promotion_date_lieutenant, service_credit_override").in("id",_e);if(te)return console.error("Error fetching officer profiles for overtime:",te),pe.map($=>({...$,profiles:null}));const Z=new Map;W==null||W.forEach($=>{Z.set($.id,{...$,service_credit_override:$.service_credit_override||0})});const me=pe.map($=>({...$,profiles:Z.get($.officer_id)||null}));return console.log(`Found ${me.length} overtime exceptions for this week`),me},enabled:!!t});w.useEffect(()=>{r&&M(r)},[r]);const{data:q,isLoading:U}=bt({queryKey:["officer-profiles-weekly"],queryFn:async()=>{console.log("Fetching officer profiles for WeeklyView...");const{data:H,error:Oe}=await se.from("profiles").select("id, full_name, badge_number, rank, hire_date, promotion_date_sergeant, promotion_date_lieutenant, service_credit_override");if(Oe)return console.error("Error fetching officer profiles:",Oe),new Map;const pe=new Map;return H.forEach(je=>{pe.set(je.id,{...je,service_credit_override:je.service_credit_override||0})}),console.log(`Fetched ${pe.size} officer profiles`),pe},enabled:!f}),R=dt.useMemo(()=>f||q||new Map,[f,q]);w.useEffect(()=>{p(e),S(e)},[e]),w.useEffect(()=>{m&&m(x)},[x,m]),w.useEffect(()=>{v&&S(x)},[v,x]);const C=w.useMemo(()=>{try{return Array.from({length:7},(H,Oe)=>{const pe=lr(x,Oe),je=pe.getDay();return{date:pe,dateStr:Pe(pe,"yyyy-MM-dd"),dayName:Pe(pe,"EEE").toUpperCase(),formattedDate:Pe(pe,"MMM d"),isToday:tn(pe,new Date),dayOfWeek:je}})}catch(H){return console.error("Error creating weekDays:",H),[]}},[x]),F=async(H,Oe,pe,je)=>{if(console.log(" [WeeklyView] handleAssignPTO called:",{schedule:H,date:Oe,officerId:pe,officerName:je}),!o.onAssignPTO){console.error(" No onAssignPTO handler provided");return}try{ge.loading("Assigning PTO..."),await o.onAssignPTO(H,Oe,pe,je),console.log(" [WeeklyView] Invalidating queries..."),await k.invalidateQueries({queryKey:["weekly-schedule",t],refetchType:"all"}),await k.invalidateQueries({queryKey:["schedule-data","weekly",t,x.toISOString()],refetchType:"all"}),console.log(" [WeeklyView] Refetching data..."),await k.refetchQueries({queryKey:["weekly-schedule",t],type:"active"}),y&&(console.log(" [WeeklyView] Calling parent refetch function..."),await y()),await k.refetchQueries({queryKey:["schedule-data","weekly",t,x.toISOString()],type:"active"}),console.log(" [WeeklyView] PTO assignment completed, cache refreshed"),ge.success("PTO assigned successfully")}catch(_e){console.error(" [WeeklyView] Error assigning PTO:",_e),ge.error("Failed to assign PTO")}finally{ge.dismiss()}},X=async(H,Oe,pe)=>{if(console.log(" [WeeklyView] handleRemovePTO called:",{schedule:H,date:Oe,officerId:pe}),!!o.onRemovePTO)try{ge.loading("Removing PTO..."),await o.onRemovePTO(H,Oe,pe),await k.invalidateQueries({queryKey:["weekly-schedule",t],refetchType:"all"}),await k.invalidateQueries({queryKey:["schedule-data","weekly",t,x.toISOString()],refetchType:"all"}),await k.refetchQueries({queryKey:["weekly-schedule",t],type:"active"}),y&&await y(),await k.refetchQueries({queryKey:["schedule-data","weekly",t,x.toISOString()],type:"active"}),ge.success("PTO removed successfully")}catch(je){ge.error("Failed to remove PTO"),console.error("Error removing PTO:",je)}finally{ge.dismiss()}},re=(H,Oe)=>{var te,Z,me,$,ke,ce,Ie,Fe,Le,Ue,Ve,rt;const pe=(H==null?void 0:H.scheduleType)==="exception"||((te=H==null?void 0:H.shiftInfo)==null?void 0:te.scheduleType)==="exception",je=((Z=H==null?void 0:H.shiftInfo)==null?void 0:Z.hasPTO)===!0||((me=H==null?void 0:H.shiftInfo)==null?void 0:me.isOff)===!0&&(($=H==null?void 0:H.shiftInfo)==null?void 0:$.reason)||pe&&((ke=H==null?void 0:H.shiftInfo)==null?void 0:ke.isOff)===!0&&((ce=H==null?void 0:H.shiftInfo)==null?void 0:ce.reason),_e=((Ie=H==null?void 0:H.shiftInfo)==null?void 0:Ie.reason)||((Le=(Fe=H==null?void 0:H.shiftInfo)==null?void 0:Fe.ptoData)==null?void 0:Le.ptoType),W=((Ue=H==null?void 0:H.shiftInfo)==null?void 0:Ue.ptoData)||(je?{ptoType:_e,isFullShift:!0,startTime:(Ve=H==null?void 0:H.shiftInfo)==null?void 0:Ve.custom_start_time,endTime:(rt=H==null?void 0:H.shiftInfo)==null?void 0:rt.custom_end_time}:void 0);return{hasPTO:je,ptoType:_e,ptoData:W}},z=H=>{var pe;return H?((pe=H.shiftInfo)==null?void 0:pe.is_extra_shift)===!0||H.is_extra_shift===!0:!1},Y=H=>{const Oe=jn(H,{weekStartsOn:0});p(Oe),S(Oe),b(!1),m&&m(Oe)},J=w.useMemo(()=>{console.log("Processing regular officers data (excluding overtime)...");try{if(!P||!P.dailySchedules)return console.log("No schedule data available"),{allOfficers:new Map,regularOfficers:[]};const H=new Map,Oe=new Map;P.recurring&&P.recurring.forEach(W=>{W.officer_id&&(Oe.has(W.officer_id)||Oe.set(W.officer_id,new Set),Oe.get(W.officer_id).add(W.day_of_week))});const pe={...P,dailySchedules:P.dailySchedules.map(W=>{var te;return{...W,officers:((te=W.officers)==null?void 0:te.filter(Z=>{var me,$;return!(Z!=null&&Z.officerId)||Z.officerId===((me=Z==null?void 0:Z.shiftInfo)==null?void 0:me.scheduleId)?(console.warn(" Filtering invalid officer data:",{officerId:Z==null?void 0:Z.officerId,scheduleId:($=Z==null?void 0:Z.shiftInfo)==null?void 0:$.scheduleId,officerName:Z==null?void 0:Z.officerName}),!1):!0}))||[]}})},je={};C.forEach(W=>{W.dateStr&&(je[W.dateStr]={})}),pe.dailySchedules.forEach(W=>{if(!W.officers||!Array.isArray(W.officers))return;je[W.date]||(je[W.date]={}),W.officers.filter(Z=>{var $;const me=(($=Z==null?void 0:Z.shiftInfo)==null?void 0:$.is_extra_shift)===!0;return me&&console.log(`Filtering out overtime officer: ${Z.officerName} on ${W.date}`),!me}).forEach(Z=>{var Ve,rt,Ye,We,it,ft,ue,Ke,Qe,ht,Dt,yt,ut;if(!Z||!Z.officerId){console.warn("Skipping officer with missing officerId:",Z);return}if(z(Z)){console.log("Skipping overtime officer from regular processing:",Z.officerName);return}const me=Z.officerId;if(!me){console.error("Officer ID is undefined or null:",Z);return}if(!H.has(me)){let Ut=null;Z.hire_date||Z.promotion_date_sergeant||Z.promotion_date_lieutenant?Ut={hire_date:Z.hire_date,promotion_date_sergeant:Z.promotion_date_sergeant,promotion_date_lieutenant:Z.promotion_date_lieutenant,service_credit_override:Z.service_credit_override||0}:R&&R instanceof Map&&R.has(me)?Ut=R.get(me):Ut={hire_date:Z.hire_date||null,promotion_date_sergeant:Z.promotion_date_sergeant||null,promotion_date_lieutenant:Z.promotion_date_lieutenant||null,service_credit_override:Z.service_credit_override||0},H.set(me,{officerId:me,officerName:Z.officerName||Z.full_name||"Unknown",badgeNumber:Z.badgeNumber||Z.badge_number||"9999",rank:Z.rank||"Officer",hire_date:(Ut==null?void 0:Ut.hire_date)||null,promotion_date_sergeant:(Ut==null?void 0:Ut.promotion_date_sergeant)||null,promotion_date_lieutenant:(Ut==null?void 0:Ut.promotion_date_lieutenant)||null,service_credit_override:(Ut==null?void 0:Ut.service_credit_override)||0,recurringDays:Oe.get(me)||new Set,weeklySchedule:{},service_credit:0})}const $=((Ve=Oe.get(me))==null?void 0:Ve.has(W.dayOfWeek))||!1,ke=!$||Z.scheduleType==="exception"||((rt=Z.shiftInfo)==null?void 0:rt.scheduleType)==="exception",{hasPTO:ce,ptoType:Ie,ptoData:Fe}=re(Z,W),Le={officerId:me,officerName:Z.officerName||Z.full_name||"Unknown",badgeNumber:Z.badgeNumber||Z.badge_number||"9999",rank:Z.rank||"Officer",service_credit:0,date:W.date,dayOfWeek:W.dayOfWeek,scheduleId:Z.scheduleId||((Ye=Z.shiftInfo)==null?void 0:Ye.scheduleId),scheduleType:ke?"exception":"recurring",isRegularRecurringDay:$&&!ce,shiftInfo:{scheduleId:((We=Z.shiftInfo)==null?void 0:We.scheduleId)||Z.scheduleId,scheduleType:ke?"exception":"recurring",position:((it=Z.shiftInfo)==null?void 0:it.position)||Z.position||"",unitNumber:(ft=Z.shiftInfo)==null?void 0:ft.unitNumber,notes:(ue=Z.shiftInfo)==null?void 0:ue.notes,isOff:ce||((Ke=Z.shiftInfo)==null?void 0:Ke.isOff)||!1,hasPTO:ce,ptoData:ce?Fe||{ptoType:Ie||"PTO",isFullShift:!0,startTime:(Qe=Z.shiftInfo)==null?void 0:Qe.custom_start_time,endTime:(ht=Z.shiftInfo)==null?void 0:ht.custom_end_time}:void 0,reason:((Dt=Z.shiftInfo)==null?void 0:Dt.reason)||Ie,custom_start_time:(yt=Z.shiftInfo)==null?void 0:yt.custom_start_time,custom_end_time:(ut=Z.shiftInfo)==null?void 0:ut.custom_end_time}},Ue=H.get(me);Ue&&(Ue.weeklySchedule||(Ue.weeklySchedule={}),Ue.weeklySchedule[W.date]=Le),je[W.date][me]||(je[W.date][me]=Le)})});const _e=Array.from(H.values()).map(W=>({...W,service_credit:I.get(W.officerId)||W.service_credit||0}));return console.log(`Final regular officers count: ${_e.length}`),console.log(`Final all officers map size: ${H.size}`),{allOfficers:H,regularOfficers:_e,scheduleByDateAndOfficer:je}}catch(H){return console.error("Error in processedOfficersData:",H),console.trace(),{allOfficers:new Map,regularOfficers:[],scheduleByDateAndOfficer:{}}}},[P,R,I,C]),ne=w.useMemo(()=>{console.log("Processing overtime data...");const H=C||[];if(!E||E.length===0)return{overtimeByDate:{},overtimeOfficers:[]};const Oe={};H.forEach(_e=>{_e&&_e.dateStr&&(Oe[_e.dateStr]=[])});const pe=new Map;E.forEach(_e=>{const W=_e.officer_id,te=_e.date;if(!pe.has(W)){const $=_e.profiles;pe.set(W,{officerId:W,officerName:($==null?void 0:$.full_name)||"Unknown",badgeNumber:($==null?void 0:$.badge_number)||"9999",rank:($==null?void 0:$.rank)||"Officer",weeklySchedule:{}})}const Z=pe.get(W),me={officerId:W,officerName:Z.officerName,badgeNumber:Z.badgeNumber,rank:Z.rank,date:te,scheduleId:_e.id,scheduleType:"exception",isExtraShift:!0,shiftInfo:{scheduleId:_e.id,scheduleType:"exception",position:_e.position_name||_e.position||"Extra Duty",unitNumber:_e.unit_number,notes:_e.notes,isOff:!1,hasPTO:!1,isExtraShift:!0,is_extra_shift:!0,custom_start_time:_e.custom_start_time,custom_end_time:_e.custom_end_time,reason:_e.reason}};Z.weeklySchedule||(Z.weeklySchedule={}),Z.weeklySchedule[te]=me,Oe[te]&&Oe[te].push(me)});const je=Array.from(pe.values()).map(_e=>({..._e,service_credit:I.get(_e.officerId)||0}));return{overtimeByDate:Oe,overtimeOfficers:je}},[E,C,I]);w.useEffect(()=>{const H=async()=>{const{allOfficers:Oe}=J,{overtimeOfficers:pe}=ne,je=[...Array.from(Oe.keys()),...pe.map(te=>te.officerId)],_e=[...new Set(je)];if(_e.length===0)return;T(!0);const W=new Map;console.log(`Fetching service credits for ${_e.length} officers via RPC...`);for(const te of _e)try{const{data:Z,error:me}=await se.rpc("get_service_credit",{profile_id:te});if(!me&&Z!==null){const $=parseFloat(Z);W.set(te,isNaN($)?0:$)}else W.set(te,0)}catch(Z){console.error(`Error fetching service credit for officer ${te}:`,Z),W.set(te,0)}O(W),T(!1)};(J.allOfficers.size>0||ne.overtimeOfficers.length>0)&&H()},[J.allOfficers,ne.overtimeOfficers]);const le=J.regularOfficers.map(H=>({id:H.officerId,full_name:H.officerName,officerName:H.officerName,badge_number:H.badgeNumber,badgeNumber:H.badgeNumber,rank:H.rank,service_credit:H.service_credit||0,hire_date:H.hire_date,service_credit_override:H.service_credit_override||0,promotion_date_sergeant:H.promotion_date_sergeant,promotion_date_lieutenant:H.promotion_date_lieutenant})),he=pf(le).map(H=>{const Oe=J.regularOfficers.find(pe=>pe.officerId===H.id);return Oe?{...Oe,service_credit:H.service_credit}:null}).filter(Boolean),xe=(H,Oe)=>!H||typeof H!="object"?(console.warn("Invalid officer object in safeGetWeeklySchedule:",H),null):!H.weeklySchedule||typeof H.weeklySchedule!="object"?null:H.weeklySchedule[Oe],Se=he.filter(H=>{const Oe=h(H),pe=C.some(({dateStr:je})=>{var W;const _e=xe(H,je);return((W=_e==null?void 0:_e.shiftInfo)==null?void 0:W.is_extra_shift)===!0});return Oe&&!pe}),K=he.filter(H=>{var _e;const Oe=!h(H),pe=((_e=H.rank)==null?void 0:_e.toLowerCase())!=="probationary",je=C.some(({dateStr:W})=>{var Z;const te=xe(H,W);return((Z=te==null?void 0:te.shiftInfo)==null?void 0:Z.is_extra_shift)===!0});return Oe&&pe&&!je}),we=he.filter(H=>{var _e;const Oe=!h(H),pe=((_e=H.rank)==null?void 0:_e.toLowerCase())==="probationary",je=C.some(({dateStr:W})=>{var Z;const te=xe(H,W);return((Z=te==null?void 0:te.shiftInfo)==null?void 0:Z.is_extra_shift)===!0});return Oe&&pe&&!je}),Te=H=>GD(P.minimumStaffing,H,t),ae=H=>{var pe;const Oe=(pe=P.dailySchedules)==null?void 0:pe.find(je=>je.date===H);return KD(Oe)};return P?U&&!f&&!R||A?s.jsx("div",{className:"text-center py-8",children:"Loading officer data..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-lg font-bold",children:[Pe(x,"MMM d")," - ",Pe(lr(x,6),"MMM d, yyyy")]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{variant:"outline",size:"sm",onClick:a.goToPrevious,children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs(Mr,{open:v,onOpenChange:b,children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(jc,{className:"h-4 w-4"}),"Jump to Week"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"end",children:s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Select a week"}),s.jsx(Dr,{mode:"single",selected:j,onSelect:H=>{H&&Y(H)},className:"rounded-md border"}),s.jsxs("div",{className:"flex items-center justify-between pt-2",children:[s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>{const H=jn(new Date,{weekStartsOn:0});Y(H)},children:"This Week"}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>{const H=dl(x,1);Y(H)},children:"Next Week"})]})]})})})]})," ",s.jsx(Ne,{variant:"outline",size:"sm",onClick:a.goToNext,children:s.jsx(Ri,{className:"h-4 w-4"})}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:a.goToCurrent,children:"Today"})]})]}),s.jsx("div",{className:"mobile-scroll overflow-x-auto",children:s.jsxs("div",{className:"border rounded-lg overflow-hidden min-w-[900px]",children:[s.jsxs("div",{className:"grid grid-cols-9 bg-muted/50 border-b",children:[s.jsx("div",{className:"p-2 font-semibold border-r",children:"Empl#"}),s.jsx("div",{className:"p-2 font-semibold border-r",children:"NAME"}),C.map(({dateStr:H,dayName:Oe,formattedDate:pe,isToday:je,dayOfWeek:_e})=>{const{supervisorCount:W,officerCount:te}=ae(H),{minimumOfficers:Z,minimumSupervisors:me}=Te(_e),$=Z>0&&te<Z,ke=me>0&&W<me;return s.jsxs("div",{className:`p-2 text-center font-semibold border-r ${je?"bg-primary/10":""}`,children:[s.jsxs(Ne,{variant:"ghost",size:"sm",className:"h-auto p-0 font-semibold hover:bg-transparent hover:underline",onClick:()=>c(H),children:[s.jsx("div",{children:Oe}),s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:pe})]}),s.jsxs(Re,{variant:ke?"destructive":"outline",className:"text-xs mb-1",children:[W," / ",me," Sup",me===0&&" (No min)"]}),s.jsxs(Re,{variant:$?"destructive":"outline",className:"text-xs",children:[te," / ",Z," Ofc",Z===0&&" (No min)"]})]},H)})]}),s.jsxs("div",{className:"grid grid-cols-9 border-b",children:[s.jsx("div",{className:"p-2 border-r"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"SUPERVISORS"}),C.map(({dateStr:H,dayOfWeek:Oe})=>{const{supervisorCount:pe}=ae(H),{minimumSupervisors:je}=Te(Oe),_e=je>0&&pe<je;return s.jsxs("div",{className:"p-2 text-center border-r text-sm",children:[s.jsxs("div",{className:_e?"text-red-600 font-bold":"",children:[pe," ",je>0?`/ ${je}`:""]}),je===0&&s.jsx("div",{className:"text-xs text-muted-foreground",children:"No min"})]},H)})]}),Se.map(H=>{var Oe,pe,je;return s.jsxs("div",{className:"grid grid-cols-9 border-b hover:bg-muted/30",style:{backgroundColor:(Oe=i.supervisor)==null?void 0:Oe.bg,color:(pe=i.supervisor)==null?void 0:pe.text},children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:H.badgeNumber}),s.jsxs("div",{className:"p-2 border-r font-medium",children:[d(H.officerName||""),s.jsx("div",{className:"text-xs opacity-80",children:H.rank||"Officer"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",((je=H.service_credit)==null?void 0:je.toFixed(1))||"0.0"]})]}),C.map(({dateStr:_e})=>{var te;const W=xe(H,_e);return s.jsx(Lw,{officer:W,dateStr:_e,officerId:H.officerId,officerName:H.officerName,isAdminOrSupervisor:n,onAssignPTO:Z=>F(Z,_e,H.officerId,H.officerName),onRemovePTO:Z=>X(Z,_e,H.officerId),onEditAssignment:()=>{o.onEditAssignment&&o.onEditAssignment(H,_e)},onRemoveOfficer:()=>{var Z,me;o.onRemoveOfficer&&o.onRemoveOfficer(((Z=W==null?void 0:W.shiftInfo)==null?void 0:Z.scheduleId)||(W==null?void 0:W.scheduleId),((me=W==null?void 0:W.shiftInfo)==null?void 0:me.scheduleType)||(W==null?void 0:W.scheduleType),H)},isUpdating:l.removeOfficerMutation.isPending},`${_e}-${H.officerId}-${(te=W==null?void 0:W.shiftInfo)!=null&&te.hasPTO?"pto":"no-pto"}`)})]},H.officerId)}),s.jsxs("div",{className:"grid grid-cols-9 border-b bg-muted/30",children:[s.jsx("div",{className:"p-2 border-r"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"OFFICERS"}),C.map(({dateStr:H,dayOfWeek:Oe})=>{const{officerCount:pe}=ae(H),{minimumOfficers:je}=Te(Oe),_e=je>0&&pe<je;return s.jsxs("div",{className:"p-2 text-center border-r text-sm font-medium",children:[s.jsxs("div",{className:_e?"text-red-600 font-bold":"",children:[pe," ",je>0?`/ ${je}`:""]}),je===0&&s.jsx("div",{className:"text-xs text-muted-foreground",children:"No min"})]},H)})]}),s.jsx("div",{children:K.map(H=>{var pe,je,_e;return C.some(({dateStr:W})=>{var Z;const te=xe(H,W);return((Z=te==null?void 0:te.shiftInfo)==null?void 0:Z.is_extra_shift)===!0})?(console.log("Skipping officer with overtime shifts from regular rows:",H.officerName),null):s.jsxs("div",{className:"grid grid-cols-9 border-b hover:bg-muted/30",style:{backgroundColor:(pe=i.officer)==null?void 0:pe.bg,color:(je=i.officer)==null?void 0:je.text},children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:H.badgeNumber}),s.jsxs("div",{className:"p-2 border-r font-medium",children:[d(H.officerName||""),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",((_e=H.service_credit)==null?void 0:_e.toFixed(1))||"0.0"]})]}),C.map(({dateStr:W})=>{var Z;const te=xe(H,W);return s.jsx(Lw,{officer:te,dateStr:W,officerId:H.officerId,officerName:H.officerName,isAdminOrSupervisor:n,onAssignPTO:me=>F(me,W,H.officerId,H.officerName),onRemovePTO:me=>X(me,W,H.officerId),onEditAssignment:()=>{o.onEditAssignment&&o.onEditAssignment(H,W)},onRemoveOfficer:()=>{var me,$;o.onRemoveOfficer&&o.onRemoveOfficer(((me=te==null?void 0:te.shiftInfo)==null?void 0:me.scheduleId)||(te==null?void 0:te.scheduleId),(($=te==null?void 0:te.shiftInfo)==null?void 0:$.scheduleType)||(te==null?void 0:te.scheduleType),H)},isUpdating:l.removeOfficerMutation.isPending},`${W}-${H.officerId}-${(Z=te==null?void 0:te.shiftInfo)!=null&&Z.hasPTO?"pto":"no-pto"}`)})]},H.officerId)})}),we.map(H=>{var pe,je,_e,W;return C.some(({dateStr:te})=>{var me;const Z=xe(H,te);return((me=Z==null?void 0:Z.shiftInfo)==null?void 0:me.is_extra_shift)===!0})?(console.log("Skipping PPO officer with overtime shifts from regular rows:",H.officerName),null):s.jsxs("div",{className:"grid grid-cols-9 border-b hover:opacity-90 transition-opacity",style:{backgroundColor:(pe=i.ppo)==null?void 0:pe.bg,color:(je=i.ppo)==null?void 0:je.text},children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:H.badgeNumber}),s.jsxs("div",{className:"p-2 border-r font-medium flex items-center gap-2",children:[d(H.officerName||""),s.jsx(Re,{variant:"outline",className:"text-xs border-blue-300",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",color:(_e=i.ppo)==null?void 0:_e.text},children:"PPO"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",((W=H.service_credit)==null?void 0:W.toFixed(1))||"0.0"]})]}),C.map(({dateStr:te})=>{var $,ke;const Z=xe(H,te);let me=null;if(($=Z==null?void 0:Z.shiftInfo)!=null&&$.position){const ce=Z.shiftInfo.position.match(/Partner with\s+(.+)/i);ce&&(me=ce[1])}return s.jsx(Lw,{officer:Z,dateStr:te,officerId:H.officerId,officerName:H.officerName,isAdminOrSupervisor:n,onAssignPTO:ce=>F(ce,te,H.officerId,H.officerName),onRemovePTO:ce=>X(ce,te,H.officerId),onEditAssignment:()=>{o.onEditAssignment&&o.onEditAssignment(H,te)},onRemoveOfficer:()=>{var ce,Ie;o.onRemoveOfficer&&o.onRemoveOfficer(((ce=Z==null?void 0:Z.shiftInfo)==null?void 0:ce.scheduleId)||(Z==null?void 0:Z.scheduleId),((Ie=Z==null?void 0:Z.shiftInfo)==null?void 0:Ie.scheduleType)||(Z==null?void 0:Z.scheduleType),H)},isUpdating:l.removeOfficerMutation.isPending,isPPO:!0,partnerInfo:me},`${te}-${H.officerId}-${(ke=Z==null?void 0:Z.shiftInfo)!=null&&ke.hasPTO?"pto":"no-pto"}`)})]},H.officerId)}),ne.overtimeOfficers.length>0&&s.jsxs("div",{className:"border-t-2 border-orange-300",children:[s.jsxs("div",{className:"grid grid-cols-9 border-b",style:{backgroundColor:"#fff3cd",color:"#856404"},children:[s.jsx("div",{className:"p-2 border-r"}),s.jsx("div",{className:"p-2 border-r text-sm font-medium",children:"OVERTIME"}),C.map(({dateStr:H})=>{var pe;const Oe=((pe=ne.overtimeByDate[H])==null?void 0:pe.length)||0;return s.jsx("div",{className:"p-2 text-center border-r text-sm font-medium",children:Oe},H)})]}),s.jsxs("div",{className:"grid grid-cols-9 border-b hover:opacity-90 transition-opacity",style:{backgroundColor:"#fff3cd",color:"#856404"},children:[s.jsx("div",{className:"p-2 border-r text-sm font-mono",children:"OT"}),s.jsx("div",{className:"p-2 border-r font-medium",children:"Overtime Assignments"}),C.map(({dateStr:H})=>{const Oe=ne.overtimeByDate[H]||[];return s.jsx("div",{className:"p-2 border-r",children:Oe.length>0?s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Oe.map(pe=>{var je,_e,W;return s.jsxs("div",{className:"text-xs p-1 bg-orange-100 rounded border border-orange-200",children:[s.jsx("div",{className:"font-medium truncate",children:d(pe.officerName||"")}),s.jsx("div",{className:"text-xs text-orange-700 truncate",children:((je=pe.shiftInfo)==null?void 0:je.position)||"Extra Duty"}),((_e=pe.shiftInfo)==null?void 0:_e.custom_start_time)&&s.jsxs("div",{className:"text-xs text-orange-600",children:[pe.shiftInfo.custom_start_time,"-",pe.shiftInfo.custom_end_time]}),((W=pe.shiftInfo)==null?void 0:W.reason)&&s.jsx("div",{className:"text-xs text-orange-500 italic",children:pe.shiftInfo.reason})]},`${pe.officerId}-${H}`)})}):s.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"-"})},H)})]})]})]})})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedule data available"})},Kie=({currentDate:e,selectedShiftId:t,schedules:r,isAdminOrSupervisor:n,weeklyColors:i,onDateNavigation:a,onEventHandlers:o,mutations:l,navigateToDailySchedule:c,getLastName:d,getRankAbbreviation:u=go,onDateChange:h})=>{const[m,f]=w.useState(!1),[g,y]=w.useState(e);w.useEffect(()=>{y(e)},[e]),w.useEffect(()=>{h&&h(e)},[]),w.useEffect(()=>{m&&y(e)},[m,e]);const x=ln(e),p=ca(e),v=x.getDay(),b=p.getDay(),j=Array.from({length:v},(O,L)=>lr(x,-v+L)),S=Array.from({length:6-b},(O,L)=>lr(p,L+1)),P=qa({start:x,end:p}),M=[...j,...P,...S];if(!r)return s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedule data available"});const I=O=>{const L=ln(O);f(!1),h&&h(L)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ne,{variant:"outline",size:"sm",onClick:a.goToPrevious,children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold",children:Pe(e,"MMMM yyyy")}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Month of ",Pe(e,"MMMM yyyy")]})]}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:a.goToNext,children:s.jsx(Ri,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Mr,{open:m,onOpenChange:f,children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(jc,{className:"h-4 w-4"}),"Jump to Month"]})}),s.jsx(Tr,{className:"w-auto p-0",align:"end",children:s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Select a month"}),s.jsx(Dr,{mode:"single",selected:g,onSelect:O=>{O&&I(O)},className:"rounded-md border"}),s.jsxs("div",{className:"flex items-center justify-between pt-2",children:[s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>{const O=ln(new Date);I(O)},children:"This Month"}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>{const O=bs(e,1);I(O)},children:"Next Month"})]})]})})})]}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:a.goToCurrent,children:"Today"})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(O=>s.jsx("div",{className:"text-center font-medium text-sm py-2 bg-muted/50 rounded",children:O},O))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:M.map(O=>{var Y,J,ne,le;const L=Pe(O,"yyyy-MM-dd"),T=O.getDay(),k=(Y=r.dailySchedules)==null?void 0:Y.find(G=>G.date===L),E=mo(O,e),A=tn(O,new Date),{minimumOfficers:q,minimumSupervisors:U}=GD(r.minimumStaffing,T,t),{supervisorCount:R,officerCount:C}=E&&k?KD(k):{supervisorCount:0,officerCount:0},F=E&&C<q,X=E&&R<U,re=E&&(F||X),z=((J=k==null?void 0:k.officers)==null?void 0:J.filter(G=>{var xe,Se,K,we,Te;if(!((xe=G.shiftInfo)!=null&&xe.hasPTO)||!((Se=G.shiftInfo)!=null&&Se.ptoData))return!1;const he=((Te=(we=(K=G.shiftInfo)==null?void 0:K.ptoData)==null?void 0:we.ptoType)==null?void 0:Te.toLowerCase())||"";return he.includes("vacation")||he.includes("holiday")||he.includes("sick")||he.includes("comp")}))||[];return s.jsxs("div",{className:`
                min-h-32 p-2 border rounded-lg text-sm flex flex-col
                ${E?"bg-card":"bg-muted/20 text-muted-foreground"}
                ${A?"border-primary ring-2 ring-primary":"border-border"}
                hover:bg-accent/50 transition-colors
                ${re?"bg-red-50 border-red-200":""}
              `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx(Ne,{variant:"ghost",size:"sm",className:`
                    h-6 w-6 p-0 text-xs font-medium hover:bg-primary hover:text-primary-foreground
                    ${A?"bg-primary text-primary-foreground":""}
                    ${E?"":"text-muted-foreground"}
                  `,onClick:()=>c(L),title:`View daily schedule for ${Pe(O,"MMM d, yyyy")}`,children:Pe(O,"d")}),s.jsxs("div",{className:"flex flex-col gap-1",children:[re&&s.jsx(Re,{variant:"destructive",className:"text-xs h-4",children:"Understaffed"}),z.length>0&&s.jsxs(Re,{variant:"outline",className:"text-xs h-4 border-green-200",style:{backgroundColor:(ne=i.pto)==null?void 0:ne.bg,color:(le=i.pto)==null?void 0:le.text},children:["PTO: ",z.length]}),E&&!re&&s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs(Re,{variant:"outline",className:"text-xs h-4",children:[R,"/",U," Sup"]}),s.jsxs(Re,{variant:"outline",className:"text-xs h-4",children:[C,"/",q," Ofc"]})]})]})]}),s.jsx("div",{className:"space-y-1 flex-1 overflow-y-auto",children:z.length>0?s.jsx("div",{className:"space-y-1",children:z.map(G=>{var H,Oe,pe,je,_e,W,te,Z;const he=((H=G.rank)==null?void 0:H.toLowerCase().includes("lieutenant"))||((Oe=G.rank)==null?void 0:Oe.toLowerCase().includes("sergeant"))||((pe=G.rank)==null?void 0:pe.toLowerCase().includes("sgt"))||((je=G.rank)==null?void 0:je.toLowerCase().includes("lt"))||((_e=G.rank)==null?void 0:_e.toLowerCase().includes("chief"));(W=G.rank)==null||W.toLowerCase();const xe=u(G.rank),Se=((Z=(te=G.shiftInfo)==null?void 0:te.ptoData)==null?void 0:Z.ptoType)||"PTO",K=me=>{var ke,ce,Ie,Fe,Le,Ue,Ve,rt,Ye,We,it,ft,ue,Ke,Qe;const $=(me==null?void 0:me.toLowerCase())||"";return $.includes("vacation")||$==="vacation"?{bg:((ke=i.vacation)==null?void 0:ke.bg)||"rgb(173, 216, 230)",text:((ce=i.vacation)==null?void 0:ce.text)||"rgb(0, 0, 139)",border:((Ie=i.vacation)==null?void 0:Ie.border)||"rgb(100, 149, 237)"}:$.includes("holiday")||$==="holiday"?{bg:((Fe=i.holiday)==null?void 0:Fe.bg)||"rgb(255, 218, 185)",text:((Le=i.holiday)==null?void 0:Le.text)||"rgb(165, 42, 42)",border:((Ue=i.holiday)==null?void 0:Ue.border)||"rgb(255, 165, 0)"}:$.includes("sick")||$==="sick"?{bg:((Ve=i.sick)==null?void 0:Ve.bg)||"rgb(255, 200, 200)",text:((rt=i.sick)==null?void 0:rt.text)||"rgb(139, 0, 0)",border:((Ye=i.sick)==null?void 0:Ye.border)||"rgb(255, 100, 100)"}:$.includes("comp")||$==="comp"?{bg:((We=i.comp)==null?void 0:We.bg)||"rgb(221, 160, 221)",text:((it=i.comp)==null?void 0:it.text)||"rgb(128, 0, 128)",border:((ft=i.comp)==null?void 0:ft.border)||"rgb(186, 85, 211)"}:{bg:((ue=i.pto)==null?void 0:ue.bg)||"rgb(144, 238, 144)",text:((Ke=i.pto)==null?void 0:Ke.text)||"rgb(0, 100, 0)",border:((Qe=i.pto)==null?void 0:Qe.border)||"rgb(0, 100, 0)"}},we=me=>me==="Sgt"?"bg-gray-100 text-gray-800 border-gray-300":"bg-yellow-100 text-yellow-800 border-yellow-300",Te=K(Se),ae=we(xe);return s.jsxs("div",{className:"text-xs p-1 rounded border flex items-center justify-between group hover:opacity-90",style:{backgroundColor:Te.bg,borderColor:Te.border,color:Te.text},children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:`font-medium truncate ${E?"":"opacity-70"}`,children:d(G.officerName)}),he&&s.jsx(Re,{variant:"outline",className:`h-3 text-[8px] px-1 ${ae}`,children:xe})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:`text-[10px] font-medium ${E?"":"opacity-70"}`,children:Se}),n&&E&&s.jsx(Ne,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-100 hover:text-red-600",onClick:me=>{me.stopPropagation(),o.onRemovePTO(G.shiftInfo,L,G.officerId)},disabled:l.removePTOMutation.isPending,title:"Remove PTO",children:s.jsx(es,{className:"h-3 w-3"})})]})]},G.officerId)})}):s.jsx("div",{className:`text-xs text-center py-2 ${E?"text-muted-foreground":"text-muted-foreground/70"}`,children:"No PTO"})}),re&&s.jsxs("div",{className:"mt-1 text-[10px] space-y-0.5 text-red-600",children:[X&&s.jsxs("div",{children:["Sup: ",R,"/",U]}),F&&s.jsxs("div",{children:["Ofc: ",C,"/",q]})]}),!E&&s.jsx("div",{className:"text-[8px] text-muted-foreground text-center mt-1",children:Pe(O,"MMM")})]},O.toISOString())})})]})},Gie=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("lieutenant")||t.includes("lt")||t.includes("chief")||t.includes("deputy")||t.includes("probationary")||t.includes("ppo")},Jie=(e,t)=>[...e].sort((r,n)=>{const i=r.service_credit||0,a=n.service_credit||0;if(i!==a)return i-a;const o=m=>{const f=m.badge_number||m.badgeNumber;if(!f)return 9999;const g=parseInt(f);return isNaN(g)?9999:g},l=o(r),c=o(n);if(l!==c)return c-l;const d=(m="")=>{if(!m)return"";const f=m.trim().split(/\s+/);return f[f.length-1]||""},u=d(r.full_name),h=d(n.full_name);return u.localeCompare(h)}),Zie=({selectedShiftId:e,setSelectedShiftId:t,shiftTypes:r,isAdminOrSupervisor:n})=>{var A,q,U;const i=Lr(),[a,o]=w.useState({startDate:oh(new Date),endDate:wv(new Date)}),[l,c]=w.useState(null),[d,u]=w.useState(null),{data:h}=bt({queryKey:["forced-dates"],queryFn:async()=>{const{data:R,error:C}=await se.from("forced_dates").select("*").order("forced_date",{ascending:!1});return C?(console.error("Error fetching forced dates:",C),[]):R}}),m=Xt({mutationFn:async({officerId:R,forcedDate:C,isRed:F,notes:X})=>{const{data:re,error:z}=await se.from("forced_dates").upsert({officer_id:R,forced_date:C,is_red:F,notes:X||null},{onConflict:"officer_id,forced_date"});if(z)throw z;return re},onSuccess:(R,C)=>{var F;Ir.logDatabaseOperation("UPSERT","forced_dates",(F=R==null?void 0:R[0])==null?void 0:F.id,void 0,C,`Forced date added for officer ${C.officerId}`),ge.success("Forced date saved"),i.invalidateQueries({queryKey:["forced-dates"]}),u(null)},onError:R=>{ge.error("Error saving forced date"),console.error("Error saving forced date:",R)}}),f=Xt({mutationFn:async R=>{const{error:C}=await se.from("forced_dates").delete().eq("id",R);if(C)throw C},onSuccess:(R,C)=>{Ir.logDatabaseOperation("DELETE","forced_dates",C,void 0,void 0,"Forced date removed"),ge.success("Forced date removed"),i.invalidateQueries({queryKey:["forced-dates"]})},onError:R=>{ge.error("Error removing forced date"),console.error("Error removing forced date:",R)}}),{data:g,isLoading:y}=bt({queryKey:["force-list",e,a.startDate],queryFn:async()=>{if(!e)return null;const R=a.startDate.getFullYear(),C=`${R}-01-01`,F=`${R}-12-31`,{data:X,error:re}=await se.from("recurring_schedules").select(`
          officer_id,
          start_date,
          end_date,
          profiles!recurring_schedules_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank,
            service_credit_override,
            hire_date,
            promotion_date_sergeant,
            promotion_date_lieutenant
          )
        `).eq("shift_type_id",e).or(`end_date.is.null,end_date.gte.${C}`).lte("start_date",F);if(re)throw console.error("Error fetching recurring schedules for force list:",re),re;const z=new Map,Y=[];X==null||X.forEach(le=>{le.profiles&&(Gie(le.profiles.rank)?Y.push({name:le.profiles.full_name,rank:le.profiles.rank}):z.has(le.profiles.id)||z.set(le.profiles.id,le.profiles))});const J=Array.from(z.values());Y.length>0&&console.log(" Officers excluded from force list (Lieutenants/Chiefs/PPOs):",Y),console.log(` Included officers for force list: ${J.length}`),console.log(" Fetching service credits for officers...");const ne=await Promise.all(J.map(async le=>{try{const{data:G,error:he}=await se.rpc("get_service_credit",{profile_id:le.id});if(he)return console.error(`Error fetching service credit for ${le.full_name}:`,he),{...le,service_credit:0};const xe=parseFloat(G)||0;return console.log(`Officer ${le.full_name} - Service Credit: ${xe}`),{...le,service_credit:xe}}catch(G){return console.error(`Error fetching service credit for ${le.full_name}:`,G),{...le,service_credit:0}}}));return{officers:ne||[],totalCount:ne.length}},enabled:!!e}),x=R=>(h==null?void 0:h.filter(C=>C.officer_id===R))||[],p=R=>x(R).length,v=R=>{const C=x(R);return C.length===0?null:C.reduce((F,X)=>{const re=It(F.forced_date);return It(X.forced_date).getTime()>re.getTime()?X:F})},b=R=>{if(R==null)return"0.0";const C=parseFloat(R);return isNaN(C)?"0.0":C.toFixed(1)},j=(g==null?void 0:g.officers)||[],S=Jie(j),P=S.filter(R=>{var F;const C=((F=R==null?void 0:R.rank)==null?void 0:F.toLowerCase())||"";return(C.includes("sergeant")||C.includes("sgt"))&&!C.includes("lieutenant")&&!C.includes("lt")&&!C.includes("chief")&&!C.includes("deputy")}),M=S.filter(R=>{var X;const C=((X=R==null?void 0:R.rank)==null?void 0:X.toLowerCase())||"";return!(C.includes("sergeant")||C.includes("sgt"))}),I=()=>{o(R=>({...R,startDate:oh(lr(R.startDate,-365)),endDate:wv(lr(R.endDate,-365))}))},O=()=>{o(R=>({...R,startDate:oh(lr(R.startDate,365)),endDate:wv(lr(R.endDate,365))}))},L=()=>{o({startDate:oh(new Date),endDate:wv(new Date)})},T=(R,C)=>{u({officerId:R,officerName:C,date:new Date,isRed:!1,notes:""})},k=()=>{!d||!d.date||m.mutate({officerId:d.officerId,forcedDate:Pe(d.date,"yyyy-MM-dd"),isRed:d.isRed,notes:d.notes})},E=R=>{confirm("Are you sure you want to remove this forced date?")&&f.mutate(R)};return s.jsx("div",{className:"space-y-4",children:s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Force List",(g==null?void 0:g.totalCount)!==void 0&&s.jsxs(Re,{variant:"outline",className:"ml-2",children:[g.totalCount," officers"]})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:["Shift: ",((A=r==null?void 0:r.find(R=>R.id===e))==null?void 0:A.name)||"Not selected"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"date-range",children:"Calendar Year"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Mr,{open:l==="start",onOpenChange:R=>c(R?"start":null),children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!a.startDate&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),a.startDate?Pe(a.startDate,"PPP"):"Start date"]})}),s.jsx(Tr,{className:"w-auto p-0",children:s.jsx(Dr,{mode:"single",selected:a.startDate,onSelect:R=>{R&&(o(C=>({...C,startDate:R})),c("end"))},initialFocus:!0})})]}),s.jsx("span",{className:"text-muted-foreground",children:"to"}),s.jsxs(Mr,{open:l==="end",onOpenChange:R=>c(R?"end":null),children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:$e("w-full justify-start text-left font-normal",!a.endDate&&"text-muted-foreground"),children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),a.endDate?Pe(a.endDate,"PPP"):"End date"]})}),s.jsx(Tr,{className:"w-auto p-0",children:s.jsx(Dr,{mode:"single",selected:a.endDate,onSelect:R=>{R&&(o(C=>({...C,endDate:R})),c(null))},initialFocus:!0})})]})]}),s.jsx("div",{className:"text-center pt-1",children:s.jsx(Re,{variant:"secondary",children:Pe(a.startDate,"yyyy")})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Navigation"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ne,{variant:"outline",size:"sm",onClick:I,children:[s.jsx(ua,{className:"h-4 w-4"}),"Prev Year"]}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:L,children:"Current Year"}),s.jsxs(Ne,{variant:"outline",size:"sm",onClick:O,children:["Next Year",s.jsx(Ri,{className:"h-4 w-4"})]})]})]})]})]}),s.jsx(gt,{children:e?y?s.jsx("div",{className:"text-center py-8",children:"Loading force list..."}):((q=g==null?void 0:g.officers)==null?void 0:q.length)===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No officers scheduled for ",(U=r==null?void 0:r.find(R=>R.id===e))==null?void 0:U.name," shift in ",Pe(a.startDate,"yyyy")]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-10 bg-muted/50 p-3 font-semibold border rounded-t-lg",children:[s.jsx("div",{className:"col-span-2",children:"Officer"}),s.jsx("div",{className:"col-span-1",children:"Badge #"}),s.jsx("div",{className:"col-span-1",children:"Rank"}),s.jsx("div",{className:"col-span-1 text-center",children:"Service Credit"}),s.jsx("div",{className:"col-span-1 text-center",children:"Force Count"}),s.jsx("div",{className:"col-span-2",children:"Forced Dates"}),s.jsx("div",{className:"col-span-1",children:"Actions"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-lg font-semibold border-b pb-2",children:["Sergeants (",P.length,")"]}),P.map(R=>{const C=x(R.id),F=p(R.id),X=v(R.id);return s.jsxs("div",{className:"grid grid-cols-10 p-3 border rounded-lg hover:bg-muted/30 items-center",children:[s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"font-medium",children:[fn(R.full_name),s.jsx(Re,{variant:"outline",className:"ml-2 text-xs",children:go(R.rank)})]})}),s.jsx("div",{className:"col-span-1",children:R.badge_number}),s.jsx("div",{className:"col-span-1",children:s.jsx(Re,{variant:"secondary",className:"text-xs",children:go(R.rank)})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx(Re,{variant:"outline",className:"text-xs font-mono",children:b(R.service_credit)})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx(Re,{variant:F===0?"outline":"default",className:F===0?"":"bg-blue-600",children:F})}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.map(re=>s.jsxs(Re,{variant:"outline",className:`text-xs ${re.is_red?"bg-red-100 text-red-800 border-red-300":"bg-gray-100 text-gray-800 border-gray-300"}`,children:[Pe(It(re.forced_date),"MMM d"),s.jsx(Ne,{variant:"ghost",size:"icon",className:"h-3 w-3 ml-1 hover:bg-red-100 hover:text-red-600",onClick:()=>re.id&&E(re.id),title:"Remove forced date",children:s.jsx(Ms,{className:"h-2 w-2"})})]},re.id)),C.length===0&&s.jsx("span",{className:"text-sm text-muted-foreground italic",children:"Never forced"})]}),X&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Last: ",Pe(It(X.forced_date),"MMM d, yyyy")]})]}),s.jsx("div",{className:"col-span-1",children:n?s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>T(R.id,R.full_name),title:"Add forced date",children:[s.jsx(pr,{className:"h-3 w-3 mr-1"}),"Force"]}):s.jsx(Re,{variant:"secondary",className:"text-xs",children:"View Only"})})]},R.id)})]}),M.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-lg font-semibold border-b pb-2 mt-4",children:["Officers (",M.length,")"]}),M.map(R=>{const C=x(R.id),F=p(R.id),X=v(R.id);return s.jsxs("div",{className:"grid grid-cols-10 p-3 border rounded-lg hover:bg-muted/30 items-center",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"font-medium",children:fn(R.full_name)})}),s.jsx("div",{className:"col-span-1",children:R.badge_number}),s.jsx("div",{className:"col-span-1",children:s.jsx(Re,{variant:"secondary",className:"text-xs",children:go(R.rank)})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx(Re,{variant:"outline",className:"text-xs font-mono",children:b(R.service_credit)})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx(Re,{variant:F===0?"outline":"default",className:F===0?"":"bg-blue-600",children:F})}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.map(re=>s.jsxs(Re,{variant:"outline",className:`text-xs ${re.is_red?"bg-red-100 text-red-800 border-red-300":"bg-gray-100 text-gray-800 border-gray-300"}`,children:[Pe(It(re.forced_date),"MMM d"),s.jsx(Ne,{variant:"ghost",size:"icon",className:"h-3 w-3 ml-1 hover:bg-red-100 hover:text-red-600",onClick:()=>re.id&&E(re.id),title:"Remove forced date",children:s.jsx(Ms,{className:"h-2 w-2"})})]},re.id)),C.length===0&&s.jsx("span",{className:"text-sm text-muted-foreground italic",children:"Never forced"})]}),X&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Last: ",Pe(It(X.forced_date),"MMM d, yyyy")]})]}),s.jsx("div",{className:"col-span-1",children:n?s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>T(R.id,R.full_name),title:"Add forced date",children:[s.jsx(pr,{className:"h-3 w-3 mr-1"}),"Force"]}):s.jsx(Re,{variant:"secondary",className:"text-xs",children:"View Only"})})]},R.id)})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add Forced Date for ",fn(d.officerName)]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"forced-date",children:"Date"}),s.jsxs(Mr,{children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[s.jsx(xt,{className:"mr-2 h-4 w-4"}),d.date?Pe(d.date,"PPP"):"Pick a date"]})}),s.jsx(Tr,{className:"w-auto p-0",children:s.jsx(Dr,{mode:"single",selected:d.date||void 0,onSelect:R=>{R&&u(C=>C?{...C,date:R}:null)},initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"force-color",children:"Color"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(Ne,{type:"button",variant:d.isRed?"default":"outline",className:d.isRed?"bg-red-600 hover:bg-red-700":"",onClick:()=>u(R=>R?{...R,isRed:!0}:null),children:"Red"}),s.jsx(Ne,{type:"button",variant:d.isRed?"outline":"default",className:d.isRed?"":"bg-gray-800 hover:bg-gray-900",onClick:()=>u(R=>R?{...R,isRed:!1}:null),children:"Black"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Red: Special/emergency forced shift",s.jsx("br",{}),"Black: Regular forced shift"]})]}),s.jsxs("div",{children:[s.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),s.jsx(St,{id:"notes",value:d.notes,onChange:R=>u(C=>C?{...C,notes:R.target.value}:null),placeholder:"Any notes about this forced shift"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",onClick:()=>u(null),children:"Cancel"}),s.jsx(Ne,{onClick:k,disabled:!d.date||m.isPending,children:m.isPending?"Saving...":"Save"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:P.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Sergeants"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:M.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Officers"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:P.length+M.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Force"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-300",children:"Black Date"}),s.jsx("span",{className:"text-sm",children:"Regular forced shift"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"bg-red-100 text-red-800 border-red-300",children:"Red Date"}),s.jsx("span",{className:"text-sm",children:"Special/emergency forced shift"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"default",className:"bg-blue-600",children:"3"}),s.jsx("span",{className:"text-sm",children:"Force count (shows total forced shifts)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"h-5",children:"Sgt"}),s.jsx("span",{className:"text-sm",children:"Sergeants only (Lieutenants/Chiefs/PPOs excluded)"})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Force List Information"}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Included:"})," Sergeants and Regular Officers only"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Excluded:"})," Lieutenants, Chiefs, Deputy Chiefs, and PPOs/Probationary officers"]}),s.jsx("p",{children:s.jsx("strong",{children:"Sorting Priority:"})}),s.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[s.jsx("li",{children:"Service Credit (least to most)"}),s.jsx("li",{children:"Badge Number (higher to lower when service credits equal)"}),s.jsx("li",{children:"Last Name (A-Z)"})]})]})]})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select a shift from the Weekly or Monthly tab first"})})]})})},Xie=(e,t=0,r=null,n=null,i=null)=>{if(t&&t>0)return t;let a=null;if(i){const o=i.toLowerCase();(o.includes("sergeant")||o.includes("sgt"))&&r?a=new Date(r):(o.includes("lieutenant")||o.includes("lt"))&&n?a=new Date(n):o.includes("chief")&&n&&(a=new Date(n))}if(!a&&e&&(a=new Date(e)),!a)return 0;try{const o=new Date,l=o.getFullYear()-a.getFullYear(),c=o.getMonth()-a.getMonth(),d=o.getDate()-a.getDate(),u=l+c/12+d/365;return Math.max(0,Math.round(u*10)/10)}catch(o){return console.error("Error calculating service credit:",o),0}},Qie=({selectedShiftId:e,setSelectedShiftId:t,shiftTypes:r})=>{var p;const[n,i]=w.useState(new Date().getFullYear()),[a,o]=w.useState(!1),l=cl(new Date),{data:c}=bt({queryKey:["pto-types-debug",e,n],queryFn:async()=>{const{data:v,error:b}=await se.from("schedule_exceptions").select("reason").eq("is_off",!0).eq("shift_type_id",e).limit(100);if(b)return console.error("Error fetching PTO types:",b),[];const j=[...new Set(v.map(S=>S.reason))];return console.log("Available PTO types in database:",j),j},enabled:!!e}),{data:d,isLoading:u}=bt({queryKey:["vacation-list",e,n],queryFn:async()=>{if(!e)return null;const v=`${n}-01-01`,b=`${n}-12-31`,{data:j,error:S}=await se.from("schedule_exceptions").select(`
          *,
          profiles!schedule_exceptions_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank,
            hire_date,
            promotion_date_sergeant,
            promotion_date_lieutenant,
            service_credit_override
          )
        `).eq("is_off",!0).gte("date",v).lte("date",b).eq("shift_type_id",e).order("date",{ascending:!0});if(S)throw S;console.log("Total PTO exceptions fetched:",j==null?void 0:j.length),console.log("PTO reason distribution:",j==null?void 0:j.reduce((T,k)=>(T[k.reason]=(T[k.reason]||0)+1,T),{}));const P=j==null?void 0:j.filter(T=>{if(!T.reason)return!1;const k=T.reason.toLowerCase();return k.includes("vacation")||k.includes("holiday")||k==="vac"||k==="hol"});console.log("Filtered vacation/holiday exceptions:",P==null?void 0:P.length);const{data:M}=await se.from("profiles").select("id, full_name, badge_number, rank, hire_date, promotion_date_sergeant, promotion_date_lieutenant, service_credit_override"),I=new Map;M==null||M.forEach(T=>{I.set(T.id,T)});const O=new Map;P==null||P.forEach(T=>{const k=T.officer_id,E=I.get(k)||T.profiles;if(!O.has(k)){const C=Xie((E==null?void 0:E.hire_date)||null,(E==null?void 0:E.service_credit_override)||0,(E==null?void 0:E.promotion_date_sergeant)||null,(E==null?void 0:E.promotion_date_lieutenant)||null,(E==null?void 0:E.rank)||null);O.set(k,{officer:E,serviceCredit:C,vacationDays:[],vacationBlocks:[]})}const A=O.get(k),q=It(T.date);let U=T.reason||"Vacation";const R=U.toLowerCase();R.includes("vacation")||R==="vac"?U="Vacation":(R.includes("holiday")||R==="hol")&&(U="Holiday"),A.vacationDays.push({date:q,ptoType:U})}),O.forEach((T,k)=>{T.vacationDays.sort((q,U)=>q.date.getTime()-U.date.getTime());const E=[];let A=[];T.vacationDays.forEach((q,U)=>{if(A.length===0)A.push(q);else{const R=A[A.length-1].date;Math.abs((q.date.getTime()-R.getTime())/(1e3*60*60*24))===1&&q.ptoType===A[0].ptoType?A.push(q):(A.length>0&&E.push({startDate:A[0].date,endDate:A[A.length-1].date,daysCount:A.length,type:A[0].ptoType,dates:A.map(F=>F.date)}),A=[q])}}),A.length>0&&E.push({startDate:A[0].date,endDate:A[A.length-1].date,daysCount:A.length,type:A[0].ptoType,dates:A.map(q=>q.date)}),T.vacationBlocks=E,T.totalDays=T.vacationDays.length});const L=Array.from(O.values());return console.log("Processed officers with vacation:",L.length),{officers:L,summary:{totalOfficers:L.length,totalDays:(P==null?void 0:P.length)||0,averageDays:L.length>0?((P==null?void 0:P.length)||0)/L.length:0},rawData:P||[]}},enabled:!!e}),h=w.useMemo(()=>{if(!(d!=null&&d.officers))return[];let v=[...d.officers];a&&(v=v.map(S=>{const P=S.vacationBlocks.filter(I=>ru(I.endDate,l)),M=P.reduce((I,O)=>I+O.daysCount,0);return{...S,vacationBlocks:P,totalDays:M}}).filter(S=>S.totalDays>0));const b=v.map(S=>{var P,M,I,O,L;return{id:(P=S.officer)==null?void 0:P.id,full_name:(M=S.officer)==null?void 0:M.full_name,badge_number:(I=S.officer)==null?void 0:I.badge_number,badgeNumber:(O=S.officer)==null?void 0:O.badge_number,rank:(L=S.officer)==null?void 0:L.rank,service_credit:S.serviceCredit,serviceCredit:S.serviceCredit}});return pf(b).map(S=>v.find(M=>{var I;return((I=M.officer)==null?void 0:I.id)===S.id}))},[d==null?void 0:d.officers,a,l]),m=()=>{ge.info("Export feature coming soon!")},f=(v,b)=>tn(v,b)?Pe(v,"MMM d"):`${Pe(v,"MMM d")} - ${Pe(b,"MMM d")}`,g=v=>{const b=v.toLowerCase();return b.includes("vacation")||b==="vac"?s.jsx(Re,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-200",children:"Vac"}):b.includes("holiday")||b==="hol"?s.jsx(Re,{className:"bg-orange-100 text-orange-800 hover:bg-orange-100 border-orange-200",children:"Hol"}):s.jsx(Re,{variant:"outline",children:v})},y=v=>{var j;if(!v)return"";const b=((j=v.rank)==null?void 0:j.toLowerCase())||"";return Es(v)?"bg-green-50 border-l-4 border-green-500":b==="probationary"?"bg-blue-50 border-l-4 border-blue-500":"border-l-4 border-gray-200"},x=w.useMemo(()=>{const v=h.reduce((j,S)=>j+S.totalDays,0),b=h.length;return{totalOfficers:b,totalDays:v,averageDays:b>0?v/b:0}},[h]);return s.jsx("div",{className:"space-y-4",children:s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(rf,{className:"h-5 w-5"}),"Vacation List - ",n]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:["Shift: ",((p=r==null?void 0:r.find(v=>v.id===e))==null?void 0:p.name)||"Not selected"]}),s.jsxs(Ne,{onClick:m,size:"sm",variant:"outline",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"year-select",children:"Year"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ne,{variant:"outline",size:"icon",className:"h-10 w-10",onClick:()=>i(v=>v-1),children:s.jsx(ua,{className:"h-4 w-4"})}),s.jsx("select",{id:"year-select",value:n.toString(),onChange:v=>i(parseInt(v.target.value)),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[2023,2024,2025,2026,2027].map(v=>s.jsx("option",{value:v.toString(),children:v},v))}),s.jsx(Ne,{variant:"outline",size:"icon",className:"h-10 w-10",onClick:()=>i(v=>v+1),children:s.jsx(Ri,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ce,{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(sr,{checked:a,onCheckedChange:o,id:"only-remaining-toggle"}),s.jsxs("span",{className:"text-sm flex items-center gap-2",children:[s.jsx(oj,{className:"h-3 w-3"}),"Only Remaining"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground pl-10",children:a?"Showing only future vacation/holiday dates":"Showing all vacation/holiday dates for "+n})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{children:"Summary"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:x.totalOfficers}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Officers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:x.totalDays}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Days"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:x.averageDays>0?x.averageDays.toFixed(1):"0.0"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Days"})]})]})]})]})]}),s.jsx(gt,{children:e?u?s.jsxs("div",{className:"space-y-4",children:[s.jsx(vs,{className:"h-8 w-full"}),s.jsx(vs,{className:"h-64 w-full"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-12 bg-muted/50 p-3 font-semibold border rounded-t-lg text-sm",children:[s.jsx("div",{className:"col-span-1",children:"#"}),s.jsx("div",{className:"col-span-3",children:"Officer"}),s.jsx("div",{className:"col-span-2",children:"Rank"}),s.jsx("div",{className:"col-span-1 text-center",children:"Days"}),s.jsx("div",{className:"col-span-5",children:"Vacation/Holiday Periods"})]}),s.jsx("div",{className:"max-h-[600px] overflow-y-auto border rounded-b-lg",children:h.length===0?s.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[a?"No future vacation or holiday dates found for "+n:"No vacation or holiday data found for "+n,s.jsx("p",{className:"text-xs mt-2",children:'Check if there are PTO exceptions marked as "Vacation" or "Holiday" in the schedule.'})]}):h.map(({officer:v,totalDays:b,vacationBlocks:j,serviceCredit:S},P)=>s.jsxs("div",{className:`grid grid-cols-12 p-3 border-b hover:bg-muted/30 items-center ${y(v)}`,children:[s.jsx("div",{className:"col-span-1 font-mono text-sm",children:v.badge_number||"N/A"}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("div",{className:"font-medium",children:fn(v.full_name)}),S>0&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["SC: ",S.toFixed(1)]})]}),s.jsx("div",{className:"col-span-2",children:s.jsx(Re,{variant:"outline",className:Es(v)?"border-green-300":"",children:go(v.rank)})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("div",{className:"font-bold text-lg",children:b})}),s.jsx("div",{className:"col-span-5",children:s.jsx("div",{className:"flex flex-col gap-2",children:j.map((M,I)=>{const O=ru(M.endDate,l);return s.jsxs("div",{className:`flex items-center justify-between gap-2 p-2 border rounded ${!O&&!a?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[g(M.type),s.jsx("span",{className:`text-sm font-medium ${!O&&!a?"line-through":""}`,children:f(M.startDate,M.endDate)}),M.daysCount>1&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[M.daysCount,"d"]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[Pe(M.startDate,"MM/dd"),!O&&!a&&" (past)"]})]},I)})})})]},v.id))}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground pt-2",children:[s.jsxs("div",{children:["Showing ",h.length," officer",h.length!==1?"s":"",a&&" (future dates only)"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-green-100 border border-green-300"}),s.jsx("span",{children:"Supervisor"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-blue-100 border border-blue-300"}),s.jsx("span",{children:"PPO"})]})]})]}),s.jsx(ao,{className:"my-4"}),s.jsxs("div",{className:"pt-2",children:[s.jsx("h4",{className:"font-semibold mb-3 text-sm",children:"PTO Types"}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-200",children:"Vac"}),s.jsx("span",{className:"text-sm",children:"Vacation"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{className:"bg-orange-100 text-orange-800 hover:bg-orange-100 border-orange-200",children:"Hol"}),s.jsx("span",{className:"text-sm",children:"Holiday"})]})]}),s.jsxs("div",{className:"mt-3 text-xs text-muted-foreground",children:[s.jsx("p",{children:"Note: Shows only Vacation and Holiday PTO types."}),s.jsx("p",{className:"mt-1",children:'When "Only Remaining" is enabled, past dates are hidden. When disabled, past dates are faded.'})]})]})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(xt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Please select a shift from the Weekly or Monthly tab first"})]})})]})})},Ar={primary:[41,128,185],secondary:[52,152,219],accent:[155,89,182],success:[39,174,96],warning:[243,156,18],danger:[231,76,60],light:[248,249,250],dark:[44,62,80],gray:[108,117,125],border:[222,226,230]},$ie=()=>"data:image/png;base64,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",eae=e=>{if(!e)return"";const t=e.trim().split(/\s+/);return t[t.length-1]||""},tae=e=>{if(!e)return"OFC";const t={probationary:"OFC","police officer":"OFC","police officer ii":"OFC II","police officer iii":"OFC III","senior police officer":"SP/O",corporal:"Cpl",sergeant:"Sgt",lieutenant:"Lt",captain:"Capt",major:"Maj","assistant chief":"A/C","deputy chief":"D/C",chief:"Chief"},r=e.toLowerCase();return t[r]||"OFC"},rae=(e,t,r)=>{const n=$ie();try{return e.addImage(n,"PNG",t,r,20,20),20}catch(i){console.error("Error drawing logo:",i);const a=20;return e.setFillColor(Ar.primary[0],Ar.primary[1],Ar.primary[2]),e.rect(t,r,a,a,"F"),e.setFontSize(6),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.text("LOGO",t+a/2,r+a/2,{align:"center",baseline:"middle"}),a}},nae=()=>({exportToPDF:w.useCallback(async({selectedDate:t,shiftName:r,beatData:n,shiftTypes:i,selectedShiftId:a})=>{try{if(console.log("Beat Preferences PDF Export - Received data:",{selectedDate:t,shiftName:r}),!n||!t)throw new Error("No beat data or date provided for PDF export");const o=new Tt("portrait","mm","a4"),l=o.internal.pageSize.getWidth(),c=o.internal.pageSize.getHeight();rae(o,15,15);const d=i==null?void 0:i.find(b=>b.id===a),u=`Beat Preferences - ${(d==null?void 0:d.name)||r||"Shift"}`;o.setFontSize(18),o.setFont("helvetica","bold"),o.setTextColor(Ar.dark[0],Ar.dark[1],Ar.dark[2]),o.text(u,l/2,28,{align:"center"}),o.setFontSize(10),o.setFont("helvetica","normal"),o.setTextColor(Ar.gray[0],Ar.gray[1],Ar.gray[2]),o.text(`Generated: ${Pe(new Date,"MMM d, yyyy h:mm a")}`,l-15,38,{align:"right"}),o.setFontSize(9),o.setTextColor(Ar.dark[0],Ar.dark[1],Ar.dark[2]),o.text("Sorted by Seniority (highest to lowest)",15,45);const m=[...n.officers.map(b=>{var S;const j=n.preferences.find(P=>P.officer_id===b.id);return[tae(b.rank),eae(b.full_name)||"-",b.badge_number||"-",`${((S=b.service_credit)==null?void 0:S.toFixed(1))||"0.0"} yrs`,(j==null?void 0:j.first_choice)||"-",(j==null?void 0:j.second_choice)||"-",(j==null?void 0:j.third_choice)||"-"]})].sort((b,j)=>{const S=parseFloat(b[3].replace(" yrs",""));return parseFloat(j[3].replace(" yrs",""))-S});Fse(o,{head:[["Rank","Officer","Badge #","Seniority","1st Choice","2nd Choice","3rd Choice"]],body:m,startY:50,margin:{left:15,right:15},headStyles:{fillColor:[Ar.primary[0],Ar.primary[1],Ar.primary[2]],textColor:255,fontStyle:"bold",fontSize:10,cellPadding:4},bodyStyles:{fontSize:9,textColor:Ar.dark,cellPadding:3},alternateRowStyles:{fillColor:[Ar.light[0],Ar.light[1],Ar.light[2]]},styles:{cellPadding:3,lineColor:[Ar.border[0],Ar.border[1],Ar.border[2]],lineWidth:.1,overflow:"linebreak",valign:"middle"},columnStyles:{0:{cellWidth:20,halign:"center"},1:{cellWidth:28,halign:"left"},2:{cellWidth:22,halign:"center"},3:{cellWidth:25,halign:"center"},4:{cellWidth:30,halign:"center"},5:{cellWidth:30,halign:"center"},6:{cellWidth:30,halign:"center"}},didDrawCell:b=>{if(b.column.index>=4&&b.column.index<=6&&b.cell.raw!=="-"){const j=[[0,100,0],[0,0,150],[128,0,128]],S=b.column.index-4;o.setTextColor(j[S][0],j[S][1],j[S][2])}else o.setTextColor(Ar.dark[0],Ar.dark[1],Ar.dark[2])}});const f=o.lastAutoTable.finalY||c-30,g=n.preferences.filter(b=>b.first_choice&&b.second_choice&&b.third_choice).length;o.setFontSize(8),o.setTextColor(Ar.gray[0],Ar.gray[1],Ar.gray[2]),o.text(`Total Officers: ${n.officers.length} | Officers with Complete Preferences: ${g}`,l/2,f+10,{align:"center"});const y=Pe(t,"yyyy-MM-dd"),x=Pe(t,"EEEE").toUpperCase(),v=`Beat_Preferences_${(d==null?void 0:d.name.replace(/\s+/g,"_"))||r.replace(/\s+/g,"_")}_${x}_${y}.pdf`;return o.save(v),{success:!0,filename:v}}catch(o){return console.error("Beat Preferences PDF export error:",o),{success:!1,error:o}}},[])}),sae=({isAdminOrSupervisor:e,selectedShiftId:t,setSelectedShiftId:r,shiftTypes:n})=>{var I,O,L;const[i,a]=w.useState(!0),[o,l]=w.useState(null),{exportToPDF:c}=nae(),[d,u]=w.useState({}),[h,m]=w.useState([]),f=os.filter(T=>T!=="Supervisor"&&T!=="Other (Custom)"),{data:g,isLoading:y,refetch:x}=bt({queryKey:["beat-preferences",t],queryFn:async()=>{if(!t)return null;const{data:T,error:k}=await se.from("recurring_schedules").select(`
          officer_id,
          profiles!recurring_schedules_officer_id_fkey (
            id,
            full_name,
            badge_number,
            rank,
            service_credit_override
          )
        `).eq("shift_type_id",t).is("end_date",null);if(k)throw console.error("Error fetching recurring schedules:",k),k;const{data:E,error:A}=await se.from("officer_beat_preferences").select("*");if(A)return console.error("Error fetching beat preferences:",A),{officers:[],preferences:[]};const U=((T==null?void 0:T.map(F=>F.profiles))||[]).filter(F=>{var X;return!Es(F)&&((X=F.rank)==null?void 0:X.toLowerCase())!=="probationary"}),R=Array.from(new Map(U.map(F=>[F.id,F])).values());return{officers:await Promise.all(R.map(async F=>{const{data:X}=await se.rpc("get_service_credit",{profile_id:F.id});return{...F,service_credit:X||0}})),preferences:E||[]}},enabled:!!t});w.useEffect(()=>{if(g!=null&&g.officers){const T=g.officers.map(E=>({id:E.id,full_name:E.full_name,badge_number:E.badge_number,rank:E.rank,service_credit:E.service_credit})),k=pf(T);m(k)}else m([])},[g]);const p=async()=>{var T;try{if(!t||!g){ge.error("No data available for export");return}const k=await c({selectedDate:new Date,shiftName:((T=n==null?void 0:n.find(E=>E.id===t))==null?void 0:T.name)||"Shift",beatData:{officers:h,preferences:g.preferences||[]},shiftTypes:n,selectedShiftId:t});if(k.success)ge.success("PDF exported successfully");else throw k.error}catch(k){console.error("PDF export error:",k),ge.error("Error exporting PDF")}},v=T=>{if(!(g==null?void 0:g.officers.find(A=>A.id===T)))return;const E=g==null?void 0:g.preferences.find(A=>A.officer_id===T);u(E?{[T]:{...E,officer_id:T,unavailable_beats:E.unavailable_beats||[],notes:E.notes||""}}:{[T]:{officer_id:T,first_choice:"",second_choice:"",third_choice:"",unavailable_beats:[],notes:""}}),l(T)},b=async T=>{const k=d[T];if(!k)return;if(!k.first_choice||!k.second_choice||!k.third_choice){ge.error("Please select all three beat preferences");return}const E=[k.first_choice,k.second_choice,k.third_choice];if(new Set(E).size!==3){ge.error("Please select three different beats");return}const q=E.filter(U=>(k.unavailable_beats||[]).includes(U));if(q.length>0){ge.error(`Cannot mark ${q.join(", ")} as both preferred and unavailable`);return}try{const{error:U}=await se.from("officer_beat_preferences").upsert({officer_id:T,first_choice:k.first_choice,second_choice:k.second_choice,third_choice:k.third_choice,unavailable_beats:k.unavailable_beats||[],notes:k.notes||"",updated_at:new Date().toISOString()},{onConflict:"officer_id"});if(U)throw console.error("Supabase error:",U),U;ge.success("Beat preferences saved successfully"),l(null),x()}catch(U){console.error("Full error details:",U),ge.error(`Error saving preferences: ${U.message||"Unknown error"}`)}},j=T=>{l(null)},S=(T,k,E)=>{u(A=>({...A,[T]:{...A[T],[k]:E}}))},P=(T,k)=>{const E=d[T];if(!E)return;if([E.first_choice,E.second_choice,E.third_choice].includes(k)){ge.error(`Cannot mark ${k} as both preferred and unavailable`);return}u(q=>{const U=q[T],R=[...U.unavailable_beats||[]],C=R.indexOf(k);return C>-1?R.splice(C,1):R.push(k),{...q,[T]:{...U,unavailable_beats:R}}})},M=T=>!T||!T.first_choice&&!T.second_choice&&!T.third_choice?s.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No preferences set"}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.first_choice&&s.jsxs(Re,{variant:"outline",className:"bg-green-50 border-green-200 text-green-800",children:["1st: ",T.first_choice]}),T.second_choice&&s.jsxs(Re,{variant:"outline",className:"bg-blue-50 border-blue-200 text-blue-800",children:["2nd: ",T.second_choice]}),T.third_choice&&s.jsxs(Re,{variant:"outline",className:"bg-purple-50 border-purple-200 text-purple-800",children:["3rd: ",T.third_choice]})]}),T.unavailable_beats&&T.unavailable_beats.length>0&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Unavailable: ",T.unavailable_beats.join(", ")]}),T.notes&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Notes: ",T.notes]})]});return s.jsx("div",{className:"space-y-4",children:s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(bi,{className:"h-5 w-5"}),"Beat Preferences"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:["Shift: ",((I=n==null?void 0:n.find(T=>T.id===t))==null?void 0:I.name)||"Not selected"]}),s.jsxs(Ne,{onClick:p,size:"sm",variant:"outline",disabled:!t||y,children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sr,{checked:i,onCheckedChange:a,disabled:!e}),s.jsx(Ce,{children:"Show All Beats"})]}),e?s.jsx("div",{className:"text-sm text-green-600",children:" Edit mode enabled. You can edit beat preferences for officers."}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"View-only mode. Only supervisors and admins can edit beat preferences."})]})]}),s.jsx(gt,{children:t?y?s.jsx("div",{className:"text-center py-8",children:"Loading beat preferences..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"bg-green-50 border-green-200 text-green-800",children:"1st Choice"}),s.jsx("span",{className:"text-sm",children:"First Priority"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"bg-blue-50 border-blue-200 text-blue-800",children:"2nd Choice"}),s.jsx("span",{className:"text-sm",children:"Second Priority"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Re,{variant:"outline",className:"bg-purple-50 border-purple-200 text-purple-800",children:"3rd Choice"}),s.jsx("span",{className:"text-sm",children:"Third Priority"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Re,{variant:"outline",className:"bg-amber-50 border-amber-200 text-amber-800",children:[((L=(O=h[0])==null?void 0:O.service_credit)==null?void 0:L.toFixed(1))||"0.0"," yrs"]}),s.jsx("span",{className:"text-sm",children:"Highest Seniority First"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Officers (",h.length,")"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[(g==null?void 0:g.preferences.filter(T=>T.first_choice&&T.second_choice&&T.third_choice).length)||0," with preferences"]})]}),s.jsx("div",{className:"space-y-4",children:h.length===0?s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No officers found for this shift"}):h.map(T=>{var A,q,U,R,C;const k=g==null?void 0:g.preferences.find(F=>F.officer_id===T.id),E=o===T.id;return s.jsx(pt,{children:s.jsxs(gt,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[fn(T.full_name),T.rank&&s.jsx(Re,{variant:"outline",className:"ml-2",children:go(T.rank)})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Badge: ",T.badge_number]})]}),s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[((A=T.service_credit)==null?void 0:A.toFixed(1))||"0.0"," yrs"]})]}),e?E?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ne,{size:"sm",onClick:()=>b(T.id),children:[s.jsx(tl,{className:"h-3 w-3 mr-1"}),"Save"]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>j(T.id),children:[s.jsx(Ms,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}):s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>v(T.id),children:[s.jsx(Qo,{className:"h-3 w-3 mr-1"}),"Edit"]}):s.jsx(Re,{variant:"secondary",className:"text-xs",children:"View Only"})]}),E?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{className:"text-sm font-medium",children:"Priority Preferences *"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Ce,{htmlFor:`first-${T.id}`,className:"text-xs",children:"1st Choice"}),s.jsxs("select",{id:`first-${T.id}`,value:((q=d[T.id])==null?void 0:q.first_choice)||"",onChange:F=>S(T.id,"first_choice",F.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[s.jsx("option",{value:"",children:"Select 1st Choice"}),f.map(F=>s.jsx("option",{value:F,children:F},F))]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Ce,{htmlFor:`second-${T.id}`,className:"text-xs",children:"2nd Choice"}),s.jsxs("select",{id:`second-${T.id}`,value:((U=d[T.id])==null?void 0:U.second_choice)||"",onChange:F=>S(T.id,"second_choice",F.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[s.jsx("option",{value:"",children:"Select 2nd Choice"}),f.map(F=>s.jsx("option",{value:F,children:F},F))]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Ce,{htmlFor:`third-${T.id}`,className:"text-xs",children:"3rd Choice"}),s.jsxs("select",{id:`third-${T.id}`,value:((R=d[T.id])==null?void 0:R.third_choice)||"",onChange:F=>S(T.id,"third_choice",F.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[s.jsx("option",{value:"",children:"Select 3rd Choice"}),f.map(F=>s.jsx("option",{value:F,children:F},F))]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{className:"text-sm font-medium",children:"Unavailable Beats"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:f.map(F=>{var z,Y,J,ne,le;const X=((Y=(z=d[T.id])==null?void 0:z.unavailable_beats)==null?void 0:Y.includes(F))||!1,re=[(J=d[T.id])==null?void 0:J.first_choice,(ne=d[T.id])==null?void 0:ne.second_choice,(le=d[T.id])==null?void 0:le.third_choice].includes(F);return s.jsx("button",{type:"button",onClick:()=>P(T.id,F),disabled:re,className:`
                                            px-2 py-1 text-xs border rounded transition-colors
                                            ${X?"bg-red-100 border-red-300 text-red-800":"bg-gray-100 border-gray-300 text-gray-800"}
                                            ${re?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"}
                                          `,title:re?"Cannot mark preferred beat as unavailable":"",children:F.replace("District ","D")},F)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:`notes-${T.id}`,className:"text-sm font-medium",children:"Notes"}),s.jsx(vf,{id:`notes-${T.id}`,value:((C=d[T.id])==null?void 0:C.notes)||"",onChange:F=>u(X=>({...X,[T.id]:{...X[T.id],notes:F.target.value}})),placeholder:"Any notes about beat preferences...",className:"min-h-[80px] text-sm"})]})]}):M(k)]})},T.id)})})]})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select a shift from the Weekly or Monthly tab first"})})]})})},iae={supervisorPTO:{bg:[255,255,200],border:[255,220,100],text:[139,69,19]},officerPTO:{bg:[240,255,240],border:[144,238,144],text:[0,100,0]},sickTime:{bg:[255,200,200],border:[255,100,100],text:[139,0,0]},offDay:{bg:[220,220,220],text:[100,100,100]},vacation:{bg:[173,216,230],border:[100,149,237],text:[0,0,139]},sick:{bg:[255,200,200],border:[255,100,100],text:[139,0,0]},holiday:{bg:[255,218,185],border:[255,165,0],text:[165,42,42]},comp:{bg:[221,160,221],border:[186,85,211],text:[128,0,128]}},dn=e=>{try{const t=e.split(",").map(r=>parseInt(r.trim()));return t.length===3&&t.every(r=>!isNaN(r))?[t[0],t[1],t[2]]:[255,255,255]}catch{return[255,255,255]}},OI=e=>e?{supervisorPTO:{bg:dn(e.pdf_supervisor_pto_bg||"255,255,200"),border:dn(e.pdf_supervisor_pto_border||"255,220,100"),text:dn(e.pdf_supervisor_pto_text||"139,69,19")},officerPTO:{bg:dn(e.pdf_officer_pto_bg||"240,255,240"),border:dn(e.pdf_officer_pto_border||"144,238,144"),text:dn(e.pdf_officer_pto_text||"0,100,0")},sickTime:{bg:dn(e.pdf_sick_time_bg||"255,200,200"),border:dn(e.pdf_sick_time_border||"255,100,100"),text:dn(e.pdf_sick_time_text||"139,0,0")},offDay:{bg:dn(e.pdf_off_day_bg||"220,220,220"),text:dn(e.pdf_off_day_text||"100,100,100")},vacation:{bg:dn(e.pdf_vacation_bg||"173,216,230"),border:dn(e.pdf_vacation_border||"100,149,237"),text:dn(e.pdf_vacation_text||"0,0,139")},sick:{bg:dn(e.pdf_sick_bg||"255,200,200"),border:dn(e.pdf_sick_border||"255,100,100"),text:dn(e.pdf_sick_text||"139,0,0")},holiday:{bg:dn(e.pdf_holiday_bg||"255,218,185"),border:dn(e.pdf_holiday_border||"255,165,0"),text:dn(e.pdf_holiday_text||"165,42,42")},comp:{bg:dn(e.pdf_comp_bg||"221,160,221"),border:dn(e.pdf_comp_border||"186,85,211"),text:dn(e.pdf_comp_text||"128,0,128")}}:iae,aae=e=>e?e.toLowerCase().includes("other")||e&&!os.includes(e):!1,h4=e=>e?e.toLowerCase().startsWith("district")?e.replace(/district\s*/i,""):e:"",iN=e=>{if(!e)return 99;const t=Object.keys(Ia).find(r=>r.toLowerCase()===e.toLowerCase());return t?Ia[t]:99},Fw=e=>iN(e.rank||"")<Ia.Officer,EI=(e,t,r)=>{const n=(e==null?void 0:e.toLowerCase())||"";return n.includes("vacation")||n==="vacation"?{backgroundColor:r.vacation.bg,borderColor:r.vacation.border,textColor:r.vacation.text}:n.includes("sick")||n==="sick"?{backgroundColor:r.sick.bg,borderColor:r.sick.border,textColor:r.sick.text}:n.includes("holiday")||n==="holiday"?{backgroundColor:r.holiday.bg,borderColor:r.holiday.border,textColor:r.holiday.text}:n.includes("comp")||n==="comp"?{backgroundColor:r.comp.bg,borderColor:r.comp.border,textColor:r.comp.text}:t?{backgroundColor:r.supervisorPTO.bg,borderColor:r.supervisorPTO.border,textColor:r.supervisorPTO.text}:{backgroundColor:r.officerPTO.bg,borderColor:r.officerPTO.border,textColor:r.officerPTO.text}},oae=e=>{if(!e)return"Ofc";const t=e.toLowerCase();return t.includes("sergeant")||t.includes("sgt")?"Sgt":t.includes("lieutenant")||t.includes("lt")?"LT":t.includes("deputy")||t.includes("deputy chief")?"DC":t.includes("chief")&&!t.includes("deputy")?"CHIEF":"Ofc"},lae=async e=>{const{startDate:t,endDate:r,shiftName:n,scheduleData:i,colorSettings:a}=e;try{const{default:o}=await xh(async()=>{const{default:y}=await Promise.resolve().then(()=>HD);return{default:y}},void 0,import.meta.url),l=OI(a),c=new o("portrait","mm","a4"),d=c.internal.pageSize.getWidth(),u=c.internal.pageSize.getHeight(),h=y=>{var p,v;if(console.log("getCellDisplay officer:",y),!y)return{text:"",color:l.offDay.text,fillColor:l.offDay.bg};const x=y.shiftInfo;if(!x)return{text:" ",color:[0,0,150],fillColor:[255,255,255]};if(x.hasPTO){const b=((p=x.ptoData)==null?void 0:p.ptoType)||"PTO",j=Fw({rank:y.rank}),S=EI(b,j,l);let P=b;if((v=x.ptoData)!=null&&v.isFullShift)return b.length>8&&(P=b.substring(0,8)),{text:P.toUpperCase(),color:S.textColor,fillColor:S.backgroundColor};{const M=x.position||"",I=h4(M);return P=I?I+"*":"PTO*",{text:P,color:[0,100,0],fillColor:[255,255,224]}}}else{if(x.isOff)return{text:"OFF",color:[100,100,100],fillColor:l.offDay.bg};if(x.position){const b=x.position,j=h4(b),S=aae(b);let P=j;return j.length>8&&(j.includes("/")?P=j.replace(/[^0-9/]/g,""):P=j.substring(0,8)),{text:P,color:S?[139,69,19]:[0,100,0],fillColor:S?[255,248,220]:[255,255,255]}}else return{text:" ",color:[0,0,150],fillColor:[255,255,255]}}},m=[];let f=jn(t,{weekStartsOn:0});for(;f<=r;){const y=lr(f,6);m.push({start:f,end:y>r?r:y}),f=dl(f,1)}for(const[y,x]of m.entries()){y>0&&c.addPage();let p=10;c.setFontSize(16),c.setFont("helvetica","bold"),c.setTextColor(41,128,185),c.text(n.toUpperCase(),d/2,p,{align:"center"}),p+=8,c.setFontSize(14),c.setTextColor(0,0,0),c.text(`${Pe(x.start,"MM/dd/yy")} - ${Pe(x.end,"MM/dd/yy")}`,d/2,p,{align:"center"}),p+=10;const v=Array.from({length:7},(R,C)=>{const F=lr(x.start,C);return F>r?null:{date:F,dateStr:Pe(F,"yyyy-MM-dd"),dayName:Pe(F,"EEE").toUpperCase(),formattedDate:Pe(F,"MMM d"),dayOfWeek:F.getDay(),isToday:tn(F,new Date)}}).filter(R=>R!==null),b=new Map;i==null||i.forEach(R=>{const C=It(R.date);C>=x.start&&C<=x.end&&R.officers.forEach(F=>{b.has(F.officerId)||b.set(F.officerId,{officerId:F.officerId,officerName:F.officerName,badgeNumber:F.badgeNumber,rank:F.rank,service_credit:F.service_credit,weeklySchedule:{},recurringDays:new Set});const X=b.get(F.officerId);X&&(X.weeklySchedule[R.date]=F)})});const j=Array.from(b.values()).filter(R=>Fw(R)).sort((R,C)=>{const F=iN(R.rank||""),X=iN(C.rank||"");return F!==X?F-X:fn(R.officerName).localeCompare(fn(C.officerName))}),S=Array.from(b.values()).filter(R=>!Fw(R)),P=S.filter(R=>{var C;return((C=R.rank)==null?void 0:C.toLowerCase())==="probationary"}).sort((R,C)=>{const F=R.service_credit||0,X=C.service_credit||0;return X!==F?X-F:fn(R.officerName).localeCompare(fn(C.officerName))}),M=S.filter(R=>{var C;return((C=R.rank)==null?void 0:C.toLowerCase())!=="probationary"}).sort((R,C)=>{const F=R.service_credit||0,X=C.service_credit||0;return X!==F?X-F:fn(R.officerName).localeCompare(fn(C.officerName))}),I=5,O=d-I*2,L=15,T=30,k=(O-L-T)/7,E=O,A=I;c.setFillColor(41,128,185),c.rect(A,p,E,10,"F"),c.setFontSize(10),c.setFont("helvetica","bold"),c.setTextColor(255,255,255);let q=A;c.text("Empl#",q+5,p+7),q+=L,c.text("NAME",q+5,p+7),q+=T,v.forEach(R=>{c.setFontSize(9),c.text(R.dayName,q+k/2,p+4,{align:"center"}),c.setFontSize(8),c.text(R.formattedDate,q+k/2,p+7,{align:"center"}),q+=k}),p+=10;const U=(R,C=!1)=>{var F;c.setFontSize(8),c.setFont("helvetica","normal");for(const X of R){p>u-15&&(c.addPage(),p=10),q=A,c.setFillColor(255,255,255),c.rect(q,p,E,7,"F"),c.setTextColor(0,0,0),c.text(((F=X.badgeNumber)==null?void 0:F.toString())||"",q+5,p+4.5),q+=L;let re=fn(X.officerName);C&&(re+=" (PPO)"),c.text(re,q+5,p+4.5),q+=T,v.forEach(z=>{const Y=X.weeklySchedule[z.dateStr],J=h(Y);c.setFillColor(...J.fillColor),c.rect(q,p,k,7,"F"),c.setDrawColor(200,200,200),c.rect(q,p,k,7,"S"),J.text&&(c.setTextColor(...J.color),c.text(J.text,q+k/2,p+4,{align:"center"})),q+=k}),p+=7}};j.length>0&&(U(j),p+=3),M.length>0&&(U(M),p+=3),P.length>0&&U(P,!0)}c.setFontSize(6),c.setTextColor(100,100,100),c.text(`Generated on ${Pe(new Date,"MMM d, yyyy 'at' h:mm a")}`,d/2,u-5,{align:"center"});const g=`Weekly_Schedule_${n.replace(/\s+/g,"_")}_${Pe(t,"yyyy-MM-dd")}_to_${Pe(r,"yyyy-MM-dd")}.pdf`;return c.save(g),{success:!0}}catch(o){return console.error("PDF export error:",o),{success:!1,error:o}}},cae=async e=>{var o;const{startDate:t,endDate:r,shiftName:n,scheduleData:i,colorSettings:a}=e;try{const{default:l}=await xh(async()=>{const{default:P}=await Promise.resolve().then(()=>HD);return{default:P}},void 0,import.meta.url),c=OI(a),d=new l("landscape","mm","a4"),u=d.internal.pageSize.getWidth(),h=d.internal.pageSize.getHeight(),m=typeof t=="string"?It(t):t,f=typeof r=="string"?It(r):r;if(!ta(m)||!ta(f))throw new Error(`Invalid date range provided: ${t} to ${r}`);const g=m<f?m:f,y=f>m?f:m,x=VY({start:g,end:y}),p=P=>{if(!P)return 99;const M=Object.keys(Ia).find(I=>I.toLowerCase()===P.toLowerCase());return M?Ia[M]:99},v=P=>p(P.rank||"")<Ia.Officer;for(const[P,M]of x.entries()){P>0&&d.addPage();const I=ln(M),O=ca(M),L=I.getDay(),T=O.getDay(),k=Array.from({length:L},(ne,le)=>lr(I,-L+le)),E=Array.from({length:6-T},(ne,le)=>lr(O,le+1)),A=qa({start:I,end:O}),q=[...k,...A,...E];let U=10;d.setFontSize(16),d.setFont("helvetica","bold"),d.setTextColor(41,128,185),d.text(`${n.toUpperCase()} - ${Pe(M,"MMMM yyyy").toUpperCase()} - HOLIDAY/VACATION SCHEDULE`,u/2,U,{align:"center"}),x.length>1&&(U+=6,d.setFontSize(10),d.setTextColor(100,100,100),d.text(`Selected Range: ${Pe(g,"MMM d, yyyy")} - ${Pe(y,"MMM d, yyyy")}`,u/2,U,{align:"center"})),U+=15;const R=(u-20)/7,C=(h-40)/6,F=10;let X=U;const re=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let z=F;d.setFillColor(41,128,185),d.rect(F,X,u-20,8,"F"),d.setFontSize(9),d.setFont("helvetica","bold"),d.setTextColor(255,255,255),re.forEach(ne=>{d.text(ne,z+R/2,X+5.5,{align:"center"}),z+=R}),X+=8;let Y=0,J=0;for(const ne of q){const le=Pe(ne,"yyyy-MM-dd"),G=mo(ne,M),he=tn(ne,new Date),xe=ne>=g&&ne<=y,Se=F+J*R,K=X+Y*C;if(he?d.setFillColor(255,251,230):G&&xe?d.setFillColor(255,255,255):G?d.setFillColor(245,245,245):d.setFillColor(240,240,240),d.rect(Se,K,R,C,"F"),d.setDrawColor(200,200,200),d.rect(Se,K,R,C,"S"),d.setFontSize(10),G&&xe?(d.setFont("helvetica","bold"),d.setTextColor(0,0,0)):G?(d.setFont("helvetica","normal"),d.setTextColor(150,150,150)):(d.setFont("helvetica","normal"),d.setTextColor(200,200,200)),d.text(Pe(ne,"d"),Se+2,K+5),G&&xe){const we=i==null?void 0:i.find(pe=>pe.date===le),Te=((o=we==null?void 0:we.officers)==null?void 0:o.filter(pe=>{var je,_e,W,te,Z,me,$,ke,ce;return((je=pe.shiftInfo)==null?void 0:je.hasPTO)&&((W=(_e=pe.shiftInfo)==null?void 0:_e.ptoData)==null?void 0:W.isFullShift)&&(((me=(Z=(te=pe.shiftInfo)==null?void 0:te.ptoData)==null?void 0:Z.ptoType)==null?void 0:me.toLowerCase().includes("holiday"))||((ce=(ke=($=pe.shiftInfo)==null?void 0:$.ptoData)==null?void 0:ke.ptoType)==null?void 0:ce.toLowerCase().includes("vacation")))}))||[];if(Te.length>0){let pe=K+10;d.setFontSize(7),d.setFont("helvetica","bold"),d.setFillColor(144,238,144),d.roundedRect(Se+R-20,pe,18,4,1,1,"F"),d.setTextColor(0,100,0),d.text(`H/V: ${Te.length}`,Se+R-11,pe+3,{align:"center"})}let ae=K+15;d.setFontSize(6),d.setFont("helvetica","normal");const H=Math.floor((C-15)/3);Te.slice(0,H).forEach((pe,je)=>{var Fe,Le;const _e=v(pe),W=((Le=(Fe=pe.shiftInfo)==null?void 0:Fe.ptoData)==null?void 0:Le.ptoType)||"PTO",te=oae(pe.rank),Z=pe.badgeNumber||"",me=EI(W,_e,c);d.setFillColor(...me.backgroundColor),d.rect(Se+2,ae,R-4,2.5,"F"),d.setDrawColor(...me.borderColor),d.rect(Se+2,ae,R-4,2.5,"S"),d.setTextColor(...me.textColor);let ke=`${fn(pe.officerName)} #${Z}`;_e&&(ke+=` (${te})`),d.text(ke,Se+3,ae+1.8);const Ie=(Ue=>{const Ve=Ue.toLowerCase();return Ve.includes("vacation")||Ve==="vacation"?"vac":Ve.includes("holiday")||Ve==="holiday"?"hol":Ve.includes("sick")||Ve==="sick"?"sick":Ve.includes("comp")||Ve==="comp"?"comp":Ue.length>6?Ue.substring(0,6):Ue})(W);d.text(Ie,Se+R-10,ae+1.8),ae+=3}),Te.length>H&&(d.setTextColor(100,100,100),d.text(`+${Te.length-H} more`,Se+3,ae+1.5))}else G?(d.setFontSize(6),d.setTextColor(180,180,180),d.setFont("helvetica","italic"),d.text("Not Selected",Se+R/2,K+C/2,{align:"center"})):(d.setFontSize(6),d.setTextColor(200,200,200),d.setFont("helvetica","italic"),d.text("No Data",Se+R/2,K+C/2,{align:"center"}));J++,J>=7&&(J=0,Y++)}}d.setFontSize(6),d.setTextColor(100,100,100),d.text(`Generated on ${Pe(new Date,"MMM d, yyyy 'at' h:mm a")}`,u/2,h-5,{align:"center"}),d.setFontSize(7),d.setTextColor(0,0,0);let b=h-15,j=10;d.setFillColor(...c.vacation.bg),d.rect(j,b-2,5,3,"F"),d.text("Vacation",j+7,b),j+=25,d.setFillColor(...c.holiday.bg),d.rect(j,b-2,5,3,"F"),d.text("Holiday",j+7,b),j+=25;const S=`Monthly_PTO_Schedule_${n.replace(/\s+/g,"_")}_${Pe(g,"yyyy-MM")}_to_${Pe(y,"yyyy-MM")}.pdf`;return d.save(S),{success:!0}}catch(l){return console.error("Monthly PDF export error:",l),{success:!1,error:l}}},dae=({open:e,onOpenChange:t,selectedShiftId:r,shiftTypes:n,activeView:i,userEmail:a})=>{const[o,l]=w.useState(),[c,d]=w.useState(!1),[u,h]=w.useState(!1),{pdf:m}=M5(),{data:f,isLoading:g}=bt({queryKey:["export-schedule-data",r,o==null?void 0:o.from,o==null?void 0:o.to],queryFn:async()=>{var O,L;if(!r||!(o!=null&&o.from)||!(o!=null&&o.to))return null;const p=qa({start:o.from,end:o.to}).map(T=>Pe(T,"yyyy-MM-dd"));console.log(" Fetching export data for:",{dates:p.length,from:o.from,to:o.to,shiftId:r});const{data:v,error:b}=await se.from("recurring_schedules").select(`
          *,
          profiles:officer_id (
            id, full_name, badge_number, rank, hire_date
          ),
          shift_types (
            id, name, start_time, end_time
          )
        `).eq("shift_type_id",r).or(`end_date.is.null,end_date.gte.${Pe(o.from,"yyyy-MM-dd")}`);if(b)throw console.error("Error fetching recurring schedules:",b),b;const{data:j,error:S}=await se.from("schedule_exceptions").select("*").gte("date",Pe(o.from,"yyyy-MM-dd")).lte("date",Pe(o.to,"yyyy-MM-dd")).eq("shift_type_id",r);if(S)throw console.error("Error fetching exceptions:",S),S;const P=[...new Set(j==null?void 0:j.map(T=>T.officer_id).filter(Boolean))];let M=[];if(P.length>0){const{data:T}=await se.from("profiles").select("id, full_name, badge_number, rank, hire_date").in("id",P);M=T||[]}const I=p.map(T=>{const E=It(T).getDay(),A=(v==null?void 0:v.filter(C=>C.day_of_week===E))||[],q=(j==null?void 0:j.filter(C=>C.date===T))||[],R=[...A.map(C=>{var F,X,re,z,Y,J;return{officerId:C.officer_id,officerName:((F=C.profiles)==null?void 0:F.full_name)||"Unknown",badgeNumber:(X=C.profiles)==null?void 0:X.badge_number,rank:(re=C.profiles)==null?void 0:re.rank,shiftInfo:{type:(z=C.shift_types)==null?void 0:z.name,time:`${(Y=C.shift_types)==null?void 0:Y.start_time} - ${(J=C.shift_types)==null?void 0:J.end_time}`,position:C.position_name,scheduleId:C.id,scheduleType:"recurring",isOff:!1,hasPTO:!1}}}),...q.map(C=>{var F,X,re;return{officerId:C.officer_id,officerName:((F=M.find(z=>z.id===C.officer_id))==null?void 0:F.full_name)||"Unknown",badgeNumber:(X=M.find(z=>z.id===C.officer_id))==null?void 0:X.badge_number,rank:(re=M.find(z=>z.id===C.officer_id))==null?void 0:re.rank,shiftInfo:{type:C.is_off?"Off":"Custom",time:C.custom_start_time&&C.custom_end_time?`${C.custom_start_time} - ${C.custom_end_time}`:"",position:C.position_name||"",scheduleId:C.id,scheduleType:"exception",isOff:C.is_off,hasPTO:C.is_off,ptoData:C.is_off?{id:C.id,ptoType:C.reason,isFullShift:!C.custom_start_time&&!C.custom_end_time}:void 0}}})].reduce((C,F)=>{const X=C.findIndex(re=>re.officerId===F.officerId);return X===-1?C.push(F):F.shiftInfo.scheduleType==="exception"&&(C[X]=F),C},[]);return{date:T,dayOfWeek:E,officers:R}});return console.log(" Processed export data:",{dailySchedules:I.length,firstDayOfficers:((L=(O=I[0])==null?void 0:O.officers)==null?void 0:L.length)||0}),{dailySchedules:I}},enabled:!!r&&!!(o!=null&&o.from)&&!!(o!=null&&o.to)&&e,staleTime:1e3*60*5}),y=async()=>{var p,v;if(!(o!=null&&o.from)||!(o!=null&&o.to)){ge.error("Please select a date range");return}if(!r){ge.error("Please select a shift");return}if(!f||!f.dailySchedules){ge.error("No schedule data available to export");return}console.log(" Exporting with:",{dateRange:o,scheduleDataCount:f.dailySchedules.length,firstDay:f.dailySchedules[0]});try{h(!0),ge.info("Generating PDF export...");const b=((p=n==null?void 0:n.find(S=>S.id===r))==null?void 0:p.name)||"Unknown Shift";let j;if(i==="weekly"){const S={startDate:o.from,endDate:o.to,shiftName:b,scheduleData:f.dailySchedules,selectedShiftId:r,colorSettings:m};console.log(" Weekly export options:",S),j=await lae(S)}else if(i==="monthly"){const S={startDate:o.from,endDate:o.to,shiftName:b,scheduleData:f.dailySchedules,colorSettings:m};console.log(" Monthly export options:",S),j=await cae(S)}else{ge.error(`Export not supported for ${i} view`),h(!1);return}if(console.log(" Export result:",j),j.success){try{Ir.logExport(a,`${i.toUpperCase()} Schedule`,`${Pe(o.from,"yyyy-MM-dd")} to ${Pe(o.to,"yyyy-MM-dd")}`,`Exported ${b} ${i} schedule`)}catch(S){console.error("Audit logging failed:",S)}ge.success("PDF exported successfully"),t(!1)}else console.error(" Export failed with error:",j.error),ge.error(`Export failed: ${((v=j.error)==null?void 0:v.message)||"Unknown error"}`)}catch(b){console.error(" Export error:",b),ge.error(`Failed to export PDF: ${b.message||"Unknown error"}`)}finally{h(!1)}},x=p=>{const v=new Date;switch(p){case"week":const b=startOfWeek(v,{weekStartsOn:0}),j=endOfWeek(v,{weekStartsOn:0});l({from:b,to:j});break;case"month":const S=startOfMonth(v),P=endOfMonth(v);l({from:S,to:P});break;case"year":const M=new Date(v.getFullYear(),0,1),I=new Date(v.getFullYear(),11,31);l({from:M,to:I});break}d(!1)};return s.jsx(rn,{open:e,onOpenChange:t,children:s.jsxs(Vr,{className:"sm:max-w-md",children:[s.jsxs(Yr,{children:[s.jsxs(Kr,{className:"flex items-center gap-2",children:[s.jsx(Ai,{className:"h-5 w-5"}),"Export Schedule to PDF"]}),s.jsx(as,{children:"Export recurring schedules and assignments for a specific time period."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"date-range",children:"Date Range"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>x("week"),className:"text-xs",children:"This Week"}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>x("month"),className:"text-xs",children:"This Month"}),s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>x("year"),className:"text-xs",children:"This Year"})]}),s.jsxs(Mr,{open:c,onOpenChange:d,children:[s.jsx(Rr,{asChild:!0,children:s.jsxs(Ne,{id:"date-range",variant:"outline",className:$e("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),disabled:u,children:[s.jsx(I1,{className:"mr-2 h-4 w-4"}),o!=null&&o.from?o.to?s.jsxs(s.Fragment,{children:[Pe(o.from,"MMM d, yyyy")," -"," ",Pe(o.to,"MMM d, yyyy")]}):Pe(o.from,"MMM d, yyyy"):s.jsx("span",{children:"Pick a date range"})]})}),s.jsx(Tr,{className:"w-auto p-0",align:"start",children:s.jsx(Dr,{initialFocus:!0,mode:"range",defaultMonth:o==null?void 0:o.from,selected:o,onSelect:p=>{l(p),p!=null&&p.from&&(p!=null&&p.to)&&d(!1)},numberOfMonths:2,disabled:{before:new Date(2020,0,1)}})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"export-shift",children:"Shift"}),s.jsxs(Wt,{value:r,onValueChange:()=>{},children:[s.jsx(Bt,{children:s.jsx(Vt,{placeholder:"Select shift"})}),s.jsx(qt,{children:n==null?void 0:n.map(p=>s.jsxs(ct,{value:p.id,children:[p.name," (",p.start_time," - ",p.end_time,")"]},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"export-view",children:"View Type"}),s.jsx("div",{className:"p-2 border rounded-md bg-muted/50",children:i==="weekly"?"Weekly Schedule":"Monthly PTO Schedule"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:i==="weekly"?"Exports complete schedule with assignments":"Exports only Holiday & Vacation PTO schedule"})]}),(o==null?void 0:o.from)&&(o==null?void 0:o.to)&&s.jsxs("div",{className:"p-3 bg-muted/50 rounded-md",children:[s.jsx("div",{className:"text-sm font-medium",children:"Export Summary:"}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Exporting ",i," view for ",Pe(o.from,"MMM d, yyyy")," to ",Pe(o.to,"MMM d, yyyy")]}),s.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:i==="weekly"?"File will include: Employee numbers, names, daily assignments, PTO, and staffing counts":"File will include: Officer names with badge numbers, Holiday/Vacation PTO only with rank badges for supervisors"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(Ne,{variant:"outline",onClick:()=>t(!1),disabled:u,children:"Cancel"}),s.jsx(Ne,{onClick:y,disabled:!(o!=null&&o.from)||!(o!=null&&o.to)||!r||u,className:"min-w-[120px]",children:u?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export PDF"]})})]})]})]})})},uae=({userRole:e="officer",isAdminOrSupervisor:t=!1,userCurrentShift:r})=>{var $,ke;const{userEmail:n}=ff(),i=Hp(),a=Lr(),{data:o}=ml(),{weekly:l}=M5(),[c,d]=w.useState(jn(new Date,{weekStartsOn:0})),[u,h]=w.useState(new Date),[m,f]=w.useState("weekly"),[g,y]=w.useState(""),[x,p]=w.useState(!1),[v,b]=w.useState(!1),[j,S]=w.useState(!1),[P,M]=w.useState(null),[I,O]=w.useState(null),L=PI(c,u,m,g),{updatePositionMutation:T,removeOfficerMutation:k={mutate:()=>{console.error("removeOfficerMutation not available"),ge.error("Cannot remove officer: System error")},isPending:!1},removePTOMutation:E={mutate:()=>{console.error("removePTOMutation not available"),ge.error("Cannot remove PTO: System error")},isPending:!1},queryKey:A}=L;console.log(" Mutations initialized:",{hasRemoveOfficerMutation:!!k,hasRemovePTOMutation:!!E});const q=k||{mutate:()=>{console.error("removeOfficerMutation is not available"),ge.error("Cannot remove officer: Mutation not available")},isPending:!1},U=E||{mutate:()=>{console.error("removePTOMutation is not available"),ge.error("Cannot remove PTO: Mutation not available")},isPending:!1},{data:R,isLoading:C}=bt({queryKey:["shift-types"],queryFn:async()=>{const{data:ce,error:Ie}=await se.from("shift_types").select("*").order("start_time");if(Ie)throw Ie;return ce}});w.useEffect(()=>{R&&R.length>0&&!g&&r&&r!=="all"&&(R.some(Ie=>Ie.id===r)?(console.log(" Desktop: Setting user's assigned shift:",r),y(r)):console.log(" Desktop: User's assigned shift not found. No auto-selection."))},[R,r,g]);const{data:F}=bt({queryKey:["all-default-assignments",g],queryFn:async()=>{if(!g)return[];const ce=Pe(new Date,"yyyy-MM-dd"),{data:Ie,error:Fe}=await se.from("officer_default_assignments").select(`
          *,
          profiles:officer_id (
            id, full_name, badge_number, rank, hire_date
          )
        `).eq("shift_type_id",g).or(`end_date.is.null,end_date.gte.${ce}`).lte("start_date",ce);return Fe?(console.error("Error fetching default assignments:",Fe),[]):Ie||[]},enabled:!!g}),X=async ce=>{if(!ce.length)return new Map;const Ie=new Map;for(const Fe of ce)try{const{data:Le,error:Ue}=await se.rpc("get_service_credit",{profile_id:Fe});Ue?(console.error(`Error fetching service credit for officer ${Fe}:`,Ue),Ie.set(Fe,0)):Ie.set(Fe,Le||0)}catch(Le){console.error(`Error fetching service credit for officer ${Fe}:`,Le),Ie.set(Fe,0)}return Ie},re=["schedule-data",m,g,c.toISOString(),u.toISOString()],{data:z,isLoading:Y,error:J}=bt({queryKey:["schedule-data",m,g,c.toISOString(),u.toISOString()],queryFn:async()=>{if(!g)return null;console.log(" [Desktop] Fetching schedule data...");const ce=Pe(m==="weekly"?c:ln(u),"yyyy-MM-dd"),Ie=Pe(m==="weekly"?tu(c,{weekStartsOn:0}):ca(u),"yyyy-MM-dd");console.log(" Desktop date range:",ce,"to",Ie);try{const{data:Fe,error:Le}=await se.from("schedule_exceptions").select(`
            *,
            profiles:officer_id (
              id, full_name, badge_number, rank, hire_date,
              promotion_date_sergeant, promotion_date_lieutenant,
              service_credit_override
            )
          `).eq("shift_type_id",g).gte("date",ce).lte("date",Ie).order("date",{ascending:!0});if(Le)throw Le;const{data:Ue,error:Ve}=await se.from("recurring_schedules").select(`
            *,
            profiles:officer_id (
              id, full_name, badge_number, rank, hire_date,
              promotion_date_sergeant, promotion_date_lieutenant,
              service_credit_override
            )
          `).eq("shift_type_id",g).or(`end_date.is.null,end_date.gte.${ce}`);if(Ve)throw Ve;const{data:rt,error:Ye}=await se.from("minimum_staffing").select("*").eq("shift_type_id",g);Ye&&console.error("Error fetching minimum staffing:",Ye);const We=new Map;rt==null||rt.forEach(ht=>{We.has(ht.day_of_week)||We.set(ht.day_of_week,new Map),We.get(ht.day_of_week).set(ht.shift_type_id,{minimumOfficers:ht.minimum_officers||0,minimumSupervisors:ht.minimum_supervisors||0})});const it=m==="weekly"?qa({start:c,end:tu(c,{weekStartsOn:0})}).map(ht=>Pe(ht,"yyyy-MM-dd")):qa({start:ln(u),end:ca(u)}).map(ht=>Pe(ht,"yyyy-MM-dd")),ft=new Map,ue=new Set;Fe==null||Fe.forEach(ht=>{ht.officer_id&&ue.add(ht.officer_id)}),Ue==null||Ue.forEach(ht=>{ht.officer_id&&ue.add(ht.officer_id)});let Ke=new Map;ue.size>0&&(Ke=await X(Array.from(ue)));const Qe=it.map(ht=>{const Dt=It(ht),yt=Dt.getDay(),ut=(Fe==null?void 0:Fe.filter(lt=>lt.date===ht))||[],Ut=(Ue==null?void 0:Ue.filter(lt=>lt.day_of_week===yt))||[],Ct=[],wt=new Set;return ut.forEach(lt=>{const Yt=lt.officer_id;wt.add(Yt);const at=lt.profiles||{},Sr={officerId:Yt,officerName:at.full_name||"Unknown",badgeNumber:at.badge_number||"9999",rank:at.rank||"Officer",hire_date:at.hire_date,promotion_date_sergeant:at.promotion_date_sergeant,promotion_date_lieutenant:at.promotion_date_lieutenant,service_credit_override:at.service_credit_override||0,service_credit:Ke.get(Yt)||0,date:ht,dayOfWeek:yt,scheduleType:"exception",isException:!0,shiftInfo:{scheduleId:lt.id,scheduleType:"exception",position:lt.position_name,unitNumber:lt.unit_number,isOff:lt.is_off||!1,hasPTO:lt.is_off&&!!lt.reason,ptoData:lt.is_off?{ptoType:lt.reason,isFullShift:!lt.custom_start_time&&!lt.custom_end_time,startTime:lt.custom_start_time,endTime:lt.custom_end_time}:void 0,reason:lt.reason,is_extra_shift:lt.is_extra_shift||!1,custom_start_time:lt.custom_start_time,custom_end_time:lt.custom_end_time}};ft.has(Yt)||ft.set(Yt,{...Sr,weeklySchedule:{}}),Ct.push(Sr)}),Ut.forEach(lt=>{const Yt=lt.officer_id;if(wt.has(Yt))return;wt.add(Yt);const at=lt.profiles||{},Sr={officerId:Yt,officerName:at.full_name||"Unknown",badgeNumber:at.badge_number||"9999",rank:at.rank||"Officer",hire_date:at.hire_date,promotion_date_sergeant:at.promotion_date_sergeant,promotion_date_lieutenant:at.promotion_date_lieutenant,service_credit_override:at.service_credit_override||0,service_credit:Ke.get(Yt)||0,date:ht,dayOfWeek:yt,scheduleType:"recurring",isRegularRecurringDay:!0,shiftInfo:{scheduleId:lt.id,scheduleType:"recurring",position:lt.position_name,unitNumber:lt.unit_number,isOff:!1,hasPTO:!1,is_extra_shift:!1}};ft.has(Yt)||ft.set(Yt,{...Sr,weeklySchedule:{}}),Ct.push(Sr)}),F&&F.forEach(lt=>{const Yt=lt.officer_id;if(!wt.has(Yt)&&lt.day_of_week===yt){wt.add(Yt);const at=lt.profiles||{},Sr={officerId:Yt,officerName:at.full_name||"Unknown",badgeNumber:at.badge_number||"9999",rank:at.rank||"Officer",hire_date:at.hire_date,service_credit:Ke.get(Yt)||0,date:ht,dayOfWeek:yt,scheduleType:"default",isDefaultAssignment:!0,shiftInfo:{scheduleType:"default",position:lt.position_name||"Default Assignment",isDefaultAssignment:!0,isOff:!1,hasPTO:!1,is_extra_shift:!1}};ft.has(Yt)||ft.set(Yt,{...Sr,weeklySchedule:{}}),Ct.push(Sr),console.log(` Added default assignment for ${at.full_name} on ${ht}`)}}),{date:ht,dayOfWeek:yt,officers:Ct,isCurrentMonth:m==="monthly"?mo(Dt,u):!0}});return console.log(" Desktop schedule data fetched:",{dates:it.length,dailySchedules:Qe.length,totalOfficers:Qe.reduce((ht,Dt)=>ht+Dt.officers.length,0),uniqueOfficers:ft.size,defaultAssignmentsApplied:Qe.reduce((ht,Dt)=>ht+Dt.officers.filter(yt=>yt.isDefaultAssignment).length,0)}),{dailySchedules:Qe,dates:it,recurring:Ue||[],exceptions:Fe||[],startDate:ce,endDate:Ie,minimumStaffing:We,officerProfiles:ft,allOfficers:Array.from(ft.values())}}catch(Fe){throw console.error(" Desktop schedule query error:",Fe),Fe}},enabled:!!g&&(m==="weekly"||m==="monthly")}),ne=()=>d(ce=>qj(ce)),le=()=>d(ce=>dl(ce,1)),G=()=>d(jn(new Date,{weekStartsOn:0})),he=()=>h(ce=>Gx(ce)),xe=()=>h(ce=>bs(ce,1)),Se=()=>h(new Date),K=ce=>{i(`/daily-schedule?date=${ce}&shift=${g}`)},we=()=>{try{console.log(" Invalidating schedule queries..."),a.invalidateQueries({queryKey:re,refetchType:"all"}),A&&a.invalidateQueries({queryKey:A,refetchType:"all"}),a.invalidateQueries({queryKey:["officer-profiles-weekly"],refetchType:"all"}),a.invalidateQueries({queryKey:["all-default-assignments",g],refetchType:"all"}),console.log(" Cache invalidated for schedule queries")}catch(ce){console.error(" Error invalidating schedule queries:",ce)}},Te=(ce,Ie,Fe,Le)=>{console.log(" handleAssignPTO called (desktop):",{schedule:ce,date:Ie,officerId:Fe,officerName:Le});const Ue=R==null?void 0:R.find(Ye=>Ye.id===g),Ve=(Ue==null?void 0:Ue.start_time)||"08:00",rt=(Ue==null?void 0:Ue.end_time)||"17:00";M({id:Fe,name:Le,date:Ie,schedule:ce,shiftStartTime:Ve,shiftEndTime:rt}),b(!0)},ae=ce=>({vacation:"vacation_hours",sick:"sick_hours",holiday:"holiday_hours",comp:"comp_time_hours",other:"other_pto_hours"})[ce]||null,H=(ce,Ie)=>{try{const[Fe,Le]=ce.split(":").map(Number),[Ue,Ve]=Ie.split(":").map(Number),rt=Fe*60+Le;return(Ue*60+Ve-rt)/60}catch(Fe){return console.error("Error calculating hours:",Fe),8}},Oe=async ce=>{if(console.log(" Saving PTO for:",P==null?void 0:P.name),!P||!g){ge.error("Missing required information");return}try{ge.loading("Assigning PTO...");const Ie=ce.isFullShift?ce.startTime||"00:00":ce.startTime,Fe=ce.isFullShift?ce.endTime||"23:59":ce.endTime,{data:Le}=await se.from("schedule_exceptions").select("id").eq("officer_id",P.id).eq("date",P.date).eq("shift_type_id",g);if(Le&&Le.length>0?await se.from("schedule_exceptions").update({is_off:!0,reason:ce.ptoType,custom_start_time:ce.isFullShift?null:Ie,custom_end_time:ce.isFullShift?null:Fe}).eq("id",Le[0].id):await se.from("schedule_exceptions").insert({officer_id:P.id,date:P.date,shift_type_id:g,is_off:!0,reason:ce.ptoType,custom_start_time:ce.isFullShift?null:Ie,custom_end_time:ce.isFullShift?null:Fe}),o!=null&&o.show_pto_balances){const Ue=ae(ce.ptoType);if(Ue){const{data:Ve}=await se.from("profiles").select("*").eq("id",P.id).single();if(Ve){let rt=8;ce.isFullShift||(rt=H(Ie,Fe));const Ye=Ve[Ue]||0;await se.from("profiles").update({[Ue]:Math.max(0,Ye-rt)}).eq("id",P.id)}}}Ir.logPTOAssignment(P.id,ce.ptoType,P.date,n,`Assigned ${ce.ptoType} PTO`),b(!1),M(null),we(),ge.success(`${ce.ptoType} PTO assigned successfully`)}catch(Ie){ge.error(Ie.message||"Failed to assign PTO"),console.error("PTO assignment error:",Ie)}finally{ge.dismiss()}},pe=async(ce,Ie,Fe)=>{var Ve,rt,Ye,We,it,ft;if(console.log(" Removing PTO from MonthlyView:",{schedule:ce,date:Ie,officerId:Fe}),!((Ve=ce==null?void 0:ce.ptoData)!=null&&Ve.id)){console.error(" Missing PTO data:",{hasSchedule:!!ce,hasPTOData:!!(ce!=null&&ce.ptoData),ptoDataId:(rt=ce==null?void 0:ce.ptoData)==null?void 0:rt.id}),ge.error("Cannot remove PTO: Missing PTO data");return}if(!Fe){console.error(" Missing officer ID"),ge.error("Cannot remove PTO: Missing officer ID");return}let Le="Unknown Officer";try{const ue=(Ye=z==null?void 0:z.dailySchedules)==null?void 0:Ye.find(Ke=>Ke.date===Ie);if(ue){const Ke=ue.officers.find(Qe=>Qe.officerId===Fe);Le=(Ke==null?void 0:Ke.officerName)||Le}}catch(ue){console.error("Error getting officer name:",ue)}const Ue={id:ce.ptoData.id,officerId:Fe,date:Ie,shiftTypeId:((We=ce.shift)==null?void 0:We.id)||ce.ptoData.shiftTypeId||g,ptoType:ce.ptoData.ptoType||"PTO",startTime:ce.ptoData.startTime||((it=ce.shift)==null?void 0:it.start_time)||"00:00",endTime:ce.ptoData.endTime||((ft=ce.shift)==null?void 0:ft.end_time)||"23:59"};console.log(" Calling removePTOMutation with:",Ue),U.mutate(Ue,{onSuccess:()=>{we();try{Ir.logPTORemoval(Fe,Ue.ptoType,Ie,n,`Removed ${Ue.ptoType} PTO for ${Le} on ${Ie}`),console.log(" PTO removal logged to audit trail")}catch(ue){console.error("Failed to log PTO removal audit:",ue)}ge.success(`PTO (${Ue.ptoType}) removed successfully`)},onError:ue=>{console.error(" Error removing PTO:",ue),ge.error(`Failed to remove PTO: ${ue.message}`)}})},je=(ce,Ie)=>{var rt,Ye,We;console.log("=== EDIT ASSIGNMENT CLICKED (desktop) ==="),console.log("Full officer object:",ce),console.log("Officer shiftInfo:",ce==null?void 0:ce.shiftInfo),console.log("Date:",Ie);const Fe=(ce==null?void 0:ce.officerId)||(ce==null?void 0:ce.officer_id)||(ce==null?void 0:ce.id),Le=(ce==null?void 0:ce.officerName)||(ce==null?void 0:ce.full_name)||"Unknown Officer";console.log("Found officerId:",Fe),console.log("Found officerName:",Le);const Ue=!ce||!ce.shiftInfo||!ce.shiftInfo.scheduleId||ce.shiftInfo.scheduleId==="new"||ce.shiftInfo.scheduleType==="new"||ce.scheduleType==="default";console.log("Is this a new assignment?",Ue);const Ve={...ce,officerId:Fe,officerName:Le,shiftInfo:{...ce==null?void 0:ce.shiftInfo,currentPosition:((rt=ce==null?void 0:ce.shiftInfo)==null?void 0:rt.position)||"",scheduleId:Ue?"new":(Ye=ce==null?void 0:ce.shiftInfo)==null?void 0:Ye.scheduleId,scheduleType:Ue?"new":(We=ce==null?void 0:ce.shiftInfo)==null?void 0:We.scheduleType,isOff:!1}};console.log("Prepared officer data for editing:",Ve),O({officer:Ve,dateStr:Ie,shiftTypeId:g,officerId:Fe,officerName:Le})},_e=async ce=>{var Ie,Fe;if(console.log(" [Desktop] Saving assignment:",ce),!ce.officerId||!ce.date){ge.error("Missing required information");return}try{ge.loading("Saving assignment...");const{data:Le}=await se.from("schedule_exceptions").select("id").eq("officer_id",ce.officerId).eq("date",ce.date).eq("shift_type_id",g);let Ue;if(Le&&Le.length>0){const{error:Ve}=await se.from("schedule_exceptions").update({position_name:ce.positionName,unit_number:ce.unitNumber||null,notes:ce.notes||null,is_off:!1,is_extra_shift:ce.isExtraShift||!1}).eq("id",Le[0].id);if(Ve)throw Ve;Ue={id:Le[0].id,updated:!0}}else{const{data:Ve,error:rt}=await se.from("schedule_exceptions").insert({officer_id:ce.officerId,date:ce.date,shift_type_id:g,position_name:ce.positionName,unit_number:ce.unitNumber||null,notes:ce.notes||null,is_off:!1,is_extra_shift:ce.isExtraShift||!1}).select("id").single();if(rt)throw rt;Ue={id:Ve.id,updated:!1}}we(),Ir.logPositionChange(ce.officerId,(I==null?void 0:I.officerName)||"Unknown",((Fe=(Ie=I==null?void 0:I.officer)==null?void 0:Ie.shiftInfo)==null?void 0:Fe.position)||"None",ce.positionName,n,"Updated assignment on desktop"),O(null),ge.success("Assignment saved successfully")}catch(Le){console.error(" Error saving assignment:",Le),ge.error(Le.message||"Failed to save assignment")}finally{ge.dismiss()}},te={currentDate:m==="weekly"?c:u,selectedShiftId:g,schedules:z||null,shiftTypes:R||[],isAdminOrSupervisor:t,weeklyColors:l,currentWeekStart:c,queryKey:re,onDateChange:ce=>{m==="weekly"?d(ce):m==="monthly"&&h(ce)},onDateNavigation:{goToPrevious:m==="weekly"?ne:he,goToNext:m==="weekly"?le:xe,goToCurrent:m==="weekly"?G:Se},onEventHandlers:{onAssignPTO:Te,onRemovePTO:pe,onEditAssignment:je,onRemoveOfficer:(ce,Ie,Fe)=>{q.mutate({scheduleId:ce,type:Ie,officerData:Fe},{onSuccess:()=>{if(we(),Fe){const Le=(Fe==null?void 0:Fe.officerId)||(Fe==null?void 0:Fe.officer_id)||(Fe==null?void 0:Fe.id),Ue=(Fe==null?void 0:Fe.officerName)||(Fe==null?void 0:Fe.full_name)||"Unknown Officer";Ir.logOfficerRemoval(Le,Ue,n,`Removed ${Ue} from schedule`)}},onError:Le=>{console.error("Error removing officer:",Le),ge.error("Failed to remove officer")}})}},mutations:{removeOfficerMutation:q,removePTOMutation:U,updatePositionMutation:T},navigateToDailySchedule:K,getLastName:fn,getRankAbbreviation:go,getRankPriority:YD,isSupervisorByRank:Es,officerProfiles:(z==null?void 0:z.officerProfiles)||new Map,refetchScheduleData:we,getMinimumStaffing:ce=>{if(!(z!=null&&z.minimumStaffing))return{minimumOfficers:0,minimumSupervisors:0};if(z.minimumStaffing instanceof Map){const Ie=z.minimumStaffing.get(ce);if(Ie instanceof Map)return Ie.get(g)||{minimumOfficers:0,minimumSupervisors:0}}return{minimumOfficers:0,minimumSupervisors:0}}},Z=()=>{switch(m){case"weekly":return s.jsx(u4,{...te,schedules:{...z,dailySchedules:(z==null?void 0:z.dailySchedules)||[],minimumStaffing:(z==null?void 0:z.minimumStaffing)||new Map},refetchScheduleData:we});case"monthly":return s.jsx(Kie,{...te});case"force-list":return s.jsx(Zie,{selectedShiftId:g,setSelectedShiftId:y,shiftTypes:R||[],isAdminOrSupervisor:t});case"vacation-list":return s.jsx(Qie,{selectedShiftId:g,setSelectedShiftId:y,shiftTypes:R||[]});case"beat-preferences":return s.jsx(sae,{isAdminOrSupervisor:t,selectedShiftId:g,setSelectedShiftId:y,shiftTypes:R||[]});default:return s.jsx(u4,{...te})}};return Y||C?s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Schedule"]})}),s.jsx(gt,{children:s.jsx(vs,{className:"h-64 w-full"})})]}):J?s.jsxs(pt,{children:[s.jsx(ir,{children:s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Schedule"]})}),s.jsxs(gt,{children:[s.jsxs("p",{className:"text-red-500",children:["Error loading schedule: ",J.message]}),s.jsx(Ne,{variant:"outline",className:"mt-4",onClick:()=>a.invalidateQueries({queryKey:re}),children:"Retry Loading"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block",children:s.jsxs(pt,{children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Schedule - ",(($=R==null?void 0:R.find(ce=>ce.id===g))==null?void 0:$.name)||"Select Shift"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[t&&s.jsxs(Wt,{value:g,onValueChange:y,children:[s.jsx(Bt,{className:"w-64",children:s.jsx(Vt,{placeholder:"Select Shift"})}),s.jsx(qt,{children:R==null?void 0:R.map(ce=>s.jsxs(ct,{value:ce.id,children:[ce.name," (",ce.start_time," - ",ce.end_time,")"]},ce.id))})]}),(m==="weekly"||m==="monthly")&&s.jsxs(Ne,{onClick:()=>p(!0),size:"sm",variant:"outline",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),!t&&s.jsx("div",{className:"flex items-center gap-3 mt-3",children:s.jsxs(Wt,{value:g,onValueChange:y,children:[s.jsx(Bt,{className:"w-64",children:s.jsx(Vt,{placeholder:"Select Shift"})}),s.jsx(qt,{children:R==null?void 0:R.map(ce=>s.jsxs(ct,{value:ce.id,children:[ce.name," (",ce.start_time," - ",ce.end_time,")"]},ce.id))})]})}),s.jsx(fl,{value:m,onValueChange:ce=>f(ce),className:"mt-4",children:s.jsxs(sa,{className:"grid w-full max-w-2xl grid-cols-5",children:[s.jsxs(er,{value:"weekly",className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Weekly"]}),s.jsxs(er,{value:"monthly",className:"flex items-center gap-2",children:[s.jsx(jc,{className:"h-4 w-4"}),"Monthly"]}),s.jsxs(er,{value:"force-list",className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Force List"]}),s.jsxs(er,{value:"vacation-list",className:"flex items-center gap-2",children:[s.jsx(rf,{className:"h-4 w-4"}),"Vacation List"]}),s.jsxs(er,{value:"beat-preferences",className:"flex items-center gap-2",children:[s.jsx(bi,{className:"h-4 w-4"}),"Beat Preferences"]})]})}),g&&(m==="weekly"||m==="monthly")&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Viewing officers assigned to: ",(ke=R==null?void 0:R.find(ce=>ce.id===g))==null?void 0:ke.name]})]}),s.jsx(gt,{children:!g&&(m==="weekly"||m==="monthly")?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Please select a shift to view the schedule"}):Z()})]})}),s.jsx("div",{className:"block md:hidden",children:s.jsx(TI,{userRole:e,isAdminOrSupervisor:t})}),s.jsx(CI,{editingAssignment:I,onClose:()=>O(null),onSave:_e,isUpdating:T.isPending}),P&&s.jsx(kI,{open:v,onOpenChange:ce=>{b(ce),ce||M(null)},officerName:P.name,date:P.date,officerId:P.id,shiftTypeId:g,shiftStartTime:P.shiftStartTime,shiftEndTime:P.shiftEndTime,onSave:Oe,onSuccess:()=>{b(!1),M(null)},isUpdating:!1}),s.jsx(dae,{open:x,onOpenChange:p,selectedShiftId:g,shiftTypes:R||[],activeView:m,userEmail:n})]})},Bw=768;function AI(){const[e,t]=w.useState(void 0);return w.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Bw-1}px)`),n=()=>{t(window.innerWidth<Bw)};return r.addEventListener("change",n),t(window.innerWidth<Bw),()=>r.removeEventListener("change",n)},[]),e===void 0?!1:e}const hae=({userRole:e,isAdminOrSupervisor:t,userCurrentShift:r})=>AI()?s.jsx(TI,{userRole:e,isAdminOrSupervisor:t,userCurrentShift:r}):s.jsx(uae,{userRole:e,isAdminOrSupervisor:t,userCurrentShift:r}),fae={enable_notifications:!1,enable_mass_alert_sending:!0,enable_vacancy_alerts:!0,enable_pto_request_notifications:!0,enable_pto_status_notifications:!0,enable_supervisor_pto_notifications:!0,enable_schedule_change_notifications:!0,show_vacancy_alert_buttons:!0,show_pto_balances:!1,pto_balances_visible:!1,show_staffing_overview:!0,show_pto_tab:!0},mae=async e=>{try{const t=new Date().toISOString().split("T")[0],r=new Date().getDay();console.log(` Determining shift for user ${e} on ${t}, day ${r}`);const{data:n}=await se.from("recurring_schedules").select(`
        shift_type_id,
        start_date,
        end_date,
        day_of_week,
        shift_types!inner(id, name, start_time, end_time, crosses_midnight)
      `).eq("officer_id",e).eq("is_active",!0).lte("start_date",t).or(`end_date.is.null,end_date.gte.${t}`).order("created_at",{ascending:!1}).limit(1);if(n&&n.length>0){const a=n[0].shift_types;if(a)return console.log(` User ${e} is assigned to shift: ${a.name} (ID: ${a.id})`),a.id}return console.log(` User ${e} has no active schedule found, will use default`),"all"}catch(t){return console.error(" Error determining user shift:",t),"all"}},ql=({isMobile:e,initialTab:t="daily"})=>{var te;const r=Hp(),n=zp(),[i,a]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState(!0),[u,h]=w.useState(!1),[m,f]=w.useState(0),[g,y]=w.useState(t),[x,p]=w.useState(!1),[v,b]=w.useState("all"),[j,S]=w.useState(!1),[P,M]=w.useState({isInstallable:!1,isInstalled:!1,serviceWorkerActive:!1}),[I,O]=w.useState(!0),[L,T]=w.useState("default"),[k,E]=w.useState(!1),A=n.hash.replace("#",""),{primaryRole:q,isAdminOrSupervisor:U,isAdmin:R,isSupervisor:C=!1,loading:F}=AY(i==null?void 0:i.id),X=Lr(),[re,z]=w.useState(()=>localStorage.getItem("pdpd-ui-theme")||"system");w.useEffect(()=>{const Z=()=>{const ke=window.matchMedia("(display-mode: standalone)").matches,ce=window.navigator.standalone===!0,Ie=ke||ce;"serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then(Fe=>{const Le=!!(Fe!=null&&Fe.active);M({isInstallable:!Ie&&Le,isInstalled:Ie,serviceWorkerActive:Le})}):M(Fe=>({...Fe,isInstalled:Ie}))},me=ke=>{ke.preventDefault(),M(ce=>({...ce,isInstallable:!0})),window.deferredPrompt=ke},$=()=>{console.log(" PWA installed successfully"),M(ke=>({...ke,isInstallable:!1,isInstalled:!0}))};return window.addEventListener("beforeinstallprompt",me),window.addEventListener("appinstalled",$),Z(),()=>{window.removeEventListener("beforeinstallprompt",me),window.removeEventListener("appinstalled",$)}},[]);const Y=async()=>{i!=null&&i.id?(localStorage.removeItem(`pwa_prompt_dismissed_${i.id}`),sessionStorage.removeItem(`pwa_prompt_shown_${i.id}`),ge.success("PWA install prompt will appear on next page refresh or login"),P.isInstallable&&!P.isInstalled&&ge.info("The install prompt should appear automatically when available")):ge.error("You need to be logged in to change this setting")};w.useEffect(()=>{i!=null&&i.id&&(console.log(" Setting up anniversary check for user:",i.id),yI())},[i==null?void 0:i.id]),w.useEffect(()=>{const Z=window.document.documentElement;if(Z.classList.remove("light","dark"),re==="system"){const me=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";Z.classList.add(me)}else Z.classList.add(re);localStorage.setItem("pdpd-ui-theme",re)},[re]),w.useEffect(()=>{(async()=>{if(!i){O(!1);return}const me=Notification.permission;if(T(me),i!=null&&i.id){const{data:$}=await se.from("profiles").select("notification_subscribed").eq("id",i.id).single(),ke=($==null?void 0:$.notification_subscribed)||!1;E(ke),console.log(" Browser notification status:",{permission:me,isSubscribed:ke,userId:i.id}),O(!ke&&me==="default")}})()},[i]);const{data:J}=bt({queryKey:["website-settings-dashboard"],queryFn:async()=>{console.log("Fetching website settings for dashboard...");const{data:Z,error:me}=await se.from("website_settings").select("*").single();return me?(console.log("Error fetching website settings:",me),fae):(console.log("Website settings fetched for dashboard:",Z),Z)}}),ne=(Z,me=!0)=>J&&J.hasOwnProperty(Z)?J[Z]:me,le=ne("show_pto_tab",!0);ne("show_staffing_overview",!0),w.useEffect(()=>{A.startsWith("/daily-schedule")?y("daily"):A.startsWith("/the-book")?y("schedule"):A.startsWith("/vacancies")?y("vacancies"):A.startsWith("/staff")?y("staff"):A.startsWith("/time-off")||A.startsWith("/pto")?le?y("requests"):(r("/daily-schedule"),y("daily"),ge.info("PTO tab is currently disabled")):A.startsWith("/settings")?y("settings"):A.startsWith("/dashboard")&&y("daily")},[n,le,r]);const G=Z=>{if(Z==="requests"&&!le){ge.info("PTO tab is currently disabled");return}y(Z);const $={daily:"/daily-schedule",schedule:"/weekly-schedule",vacancies:"/vacancies",staff:"/staff",requests:"/time-off",settings:"/settings"}[Z]||"/dashboard";r($)};w.useEffect(()=>{console.log(" Dashboard Debug:",{user:i==null?void 0:i.id,profile:o==null?void 0:o.id,primaryRole:q,isAdminOrSupervisor:U,roleLoading:F,isMobile:e,activeTab:g,showPtoTab:le,notificationPermission:L,notificationSubscribed:k,showNotificationBanner:I,pwaStatus:P})},[i,o,q,U,F,e,g,le,L,k,I,P]),w.useEffect(()=>{console.log(" userCurrentShift updated:",{value:v,source:"state update"})},[v]);const he="data:image/png;base64,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";Lne((i==null?void 0:i.id)||"");const{data:xe,isLoading:Se}=bt({queryKey:["dashboard-notifications",i==null?void 0:i.id],queryFn:async()=>{if(!(i!=null&&i.id))return[];const{data:Z,error:me}=await se.from("notifications").select(`
          id,
          title,
          message,
          type,
          is_read,
          created_at,
          user_id
        `).eq("user_id",i.id).order("created_at",{ascending:!1}).limit(5);if(me)throw console.error("Error fetching notifications:",me),me;return Z},enabled:!!(i!=null&&i.id)});Xt({mutationFn:async Z=>{const{error:me}=await se.from("notifications").update({is_read:!0}).eq("id",Z);if(me)throw me},onSuccess:()=>{X.invalidateQueries({queryKey:["notifications"]})}});const K=Pe(new Date,"yyyy-MM-dd"),{data:we,isLoading:Te,refetch:ae}=bt({queryKey:["dashboard-stats",K,m],queryFn:async()=>{const Z=new Date;console.log(" Fetching dashboard stats using DailyScheduleView logic for:",K);try{const me=await d0(Z,"all");if(!me||me.length===0)return{staffingBreakdown:{},openVacancies:0};const $={};me.forEach(Ie=>{$[Ie.shift.name]={officers:Ie.currentOfficers,supervisors:Ie.currentSupervisors,total:Ie.currentOfficers+Ie.currentSupervisors,minRequired:{officers:Ie.minOfficers,supervisors:Ie.minSupervisors}}}),console.log(" Dashboard Staffing Counts (from DailyScheduleView):",$);const{count:ke,error:ce}=await se.from("vacancy_alerts").select("*",{count:"exact",head:!0}).eq("status","open");return ce?(console.error("Error fetching vacancies:",ce),{staffingBreakdown:$,openVacancies:0}):{staffingBreakdown:$,openVacancies:ke||0}}catch(me){return console.error("Error fetching schedule data:",me),{staffingBreakdown:{},openVacancies:0}}},enabled:U,refetchInterval:3e4}),H=()=>{f(Z=>Z+1),ge.success("Staffing data refreshed")};w.useEffect(()=>{const Z=se.channel("schedule-changes").on("postgres_changes",{event:"*",schema:"public",table:"schedule_exceptions"},me=>{console.log(" Schedule exception change detected:",me),ae()}).on("postgres_changes",{event:"*",schema:"public",table:"recurring_schedules"},me=>{console.log(" Recurring schedule change detected:",me),ae()}).subscribe();return()=>{se.removeChannel(Z)}},[ae]),w.useEffect(()=>{se.auth.getSession().then(({data:{session:me}})=>{if(!me){r("/auth");return}a(me.user),Oe(me.user.id)});const{data:{subscription:Z}}=se.auth.onAuthStateChange((me,$)=>{me==="SIGNED_OUT"&&r("/auth"),a(($==null?void 0:$.user)??null),$!=null&&$.user&&Oe($.user.id)});return()=>Z.unsubscribe()},[r]),w.useEffect(()=>{(async()=>{if(P.isInstalled&&"serviceWorker"in navigator)try{const me=await navigator.serviceWorker.ready;"sync"in me&&(await me.sync.register("anniversary-check"),console.log(" Background sync registered"))}catch(me){console.warn(" Background sync not available:",me)}})()},[P.isInstalled,i==null?void 0:i.id]);const Oe=async Z=>{try{const{data:me,error:$}=await se.from("profiles").select("*, show_anniversary_countdown").eq("id",Z).single();if($)throw $;l(me),S(!0),console.log(` Starting shift determination for user ${Z}`);const ke=await mae(Z);b(ke),S(!1),console.log(` User's determined shift ID: ${ke}`)}catch(me){console.error("Error fetching profile:",me),S(!1),b("all")}finally{d(!1)}},pe=async()=>{await se.auth.signOut(),ge.success("Signed out successfully"),r("/auth")},je=()=>{switch(re){case"dark":return s.jsx(FS,{className:"h-4 w-4"});case"light":return s.jsx(BS,{className:"h-4 w-4"});case"system":return s.jsx(Cb,{className:"h-4 w-4"});default:return s.jsx(Cb,{className:"h-4 w-4"})}},_e=()=>{switch(re){case"dark":return"Dark mode - Click to change theme";case"light":return"Light mode - Click to change theme";case"system":return"System preference - Click to change theme";default:return"Toggle theme"}};if(c||F||j)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:j?"Determining your shift assignment...":c?"Loading your profile...":"Checking your permissions..."}),j&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Looking up your scheduled shift..."})]})});const W=()=>{if(console.log(" Rendering tab content for:",g),g==="requests"&&!le)return s.jsx(pt,{children:s.jsxs(gt,{className:"p-6 text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 mb-4 rounded-full bg-muted flex items-center justify-center",children:s.jsx(pr,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"PTO Tab Disabled"}),s.jsx("p",{className:"text-muted-foreground",children:"The PTO tab is currently disabled by the administrator."})]})});switch(g){case"daily":return e?s.jsx(ane,{filterShiftId:v,isAdminOrSupervisor:U,userRole:q,userCurrentShift:v}):s.jsx(xte,{isAdminOrSupervisor:U,userCurrentShift:v});case"schedule":return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"The Book"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Schedule management with weekly, monthly, and other views"}),s.jsx(hae,{userRole:q,isAdminOrSupervisor:U,userCurrentShift:v})]});case"vacancies":return U?s.jsx(mne,{}):s.jsx(Fne,{userId:i.id,isAdminOrSupervisor:!1});case"staff":return e?s.jsx(_ie,{userId:i.id,isAdminOrSupervisor:U}):s.jsx(Ine,{userId:i.id,isAdminOrSupervisor:U});case"requests":return s.jsx(une,{userId:i.id,isAdminOrSupervisor:U});case"settings":return s.jsx(bie,{isAdmin:R,isSupervisor:C});default:return s.jsx(pt,{children:s.jsx(gt,{className:"p-6",children:s.jsxs("p",{className:"text-muted-foreground",children:["Tab not found: ",g]})})})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-primary/10",children:[s.jsx("header",{className:"border-b bg-card/50 backdrop-blur-sm sticky top-0 z-10",children:s.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[s.jsx("img",{src:he,alt:"Port Arthur PD Logo",className:"w-12 h-12 md:w-16 md:h-16 object-contain flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-lg md:text-xl font-bold truncate",children:"Port Arthur PD"}),s.jsx("p",{className:"text-xs md:text-sm text-muted-foreground truncate",children:"Shift Scheduler"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-shrink-0",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>p(!x),title:_e(),children:je()}),x&&s.jsx("div",{className:"absolute right-0 mt-2 w-32 bg-card border rounded-lg shadow-lg z-20",children:s.jsxs("div",{className:"p-1",children:[s.jsxs("button",{className:`flex items-center gap-2 w-full p-2 text-sm rounded hover:bg-muted transition-colors ${re==="light"?"bg-muted":""}`,onClick:()=>{z("light"),p(!1)},children:[s.jsx(BS,{className:"h-4 w-4"}),"Light"]}),s.jsxs("button",{className:`flex items-center gap-2 w-full p-2 text-sm rounded hover:bg-muted transition-colors ${re==="dark"?"bg-muted":""}`,onClick:()=>{z("dark"),p(!1)},children:[s.jsx(FS,{className:"h-4 w-4"}),"Dark"]}),s.jsxs("button",{className:`flex items-center gap-2 w-full p-2 text-sm rounded hover:bg-muted transition-colors ${re==="system"?"bg-muted":""}`,onClick:()=>{z("system"),p(!1)},children:[s.jsx(Cb,{className:"h-4 w-4"}),"System"]})]})})]}),s.jsx(Nie,{}),s.jsxs(ig,{children:[s.jsx(ag,{asChild:!0,children:s.jsxs(Ne,{variant:"ghost",className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-right hidden sm:block",children:[s.jsx("p",{className:"font-medium",children:(o==null?void 0:o.full_name)||(i==null?void 0:i.email)}),s.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:q})]}),s.jsx(lB,{className:"h-4 w-4 md:h-5 md:w-5"})]})}),s.jsxs(gf,{align:"end",className:"w-56",children:[s.jsx(YM,{children:"My Account"}),s.jsx(U2,{}),i&&s.jsx(jie,{userId:i.id,userEmail:i.email,children:s.jsxs(Ds,{className:"cursor-pointer",onSelect:Z=>Z.preventDefault(),children:[s.jsx(tB,{className:"h-4 w-4 mr-2"}),"Change Password"]})}),s.jsxs(Ds,{className:"cursor-pointer",onClick:async Z=>{Z.preventDefault();const{data:me}=await se.from("profiles").select("show_anniversary_countdown").eq("id",i.id).single(),$=!(me!=null&&me.show_anniversary_countdown),{error:ke}=await se.from("profiles").update({show_anniversary_countdown:$}).eq("id",i.id);ke||(ge.success(`Anniversary countdown ${$?"enabled":"disabled"}`),Oe(i.id))},children:[s.jsx(xt,{className:"h-4 w-4 mr-2"}),o!=null&&o.show_anniversary_countdown?"Hide":"Show"," Anniversary Countdown"]}),!P.isInstalled&&i&&s.jsxs(Ds,{className:"cursor-pointer",onClick:()=>Y(),children:[s.jsx(Dm,{className:"h-4 w-4 mr-2"}),"Show Install Prompt"]}),s.jsx(U2,{}),s.jsxs(Ds,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:pe,children:[s.jsx(rB,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})}),s.jsxs("main",{className:`container mx-auto px-4 ${e?"pb-24":"py-8"}`,children:[i&&L==="default"&&I&&s.jsx("div",{className:"mb-6",children:s.jsx(Sie,{onSubscribed:()=>{console.log("Officer subscribed to notifications"),O(!1),E(!0),T("granted")}})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:["Welcome back, ",((te=o==null?void 0:o.full_name)==null?void 0:te.split(" ")[0])||"Officer"]}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your schedule and view upcoming shifts"})]}),s.jsx("div",{className:"mb-8",children:s.jsx(kie,{userRole:q})}),i&&(o==null?void 0:o.hire_date)&&(J==null?void 0:J.enable_anniversary_countdown)&&s.jsx("div",{className:"mb-8",children:s.jsx(Fie,{userId:i.id,userRole:q,websiteSettings:J})}),U&&!e&&ne("show_staffing_overview",!0)&&s.jsxs(pt,{className:"mb-8",children:[s.jsxs(ir,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Staffing Overview - ",new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),s.jsxs(Ne,{variant:"outline",size:"sm",onClick:H,disabled:Te,children:[s.jsx(mh,{className:`h-4 w-4 mr-2 ${Te?"animate-spin":""}`}),"Refresh"]})]}),s.jsx(en,{children:"Current staffing counts using the same calculation as Daily Schedule View"})]}),s.jsx(gt,{children:Te?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading staffing data..."})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(we==null?void 0:we.staffingBreakdown)&&Object.entries(we.staffingBreakdown).map(([Z,me])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",children:Z}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Supervisors:"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Re,{variant:me.supervisors>=me.minRequired.supervisors?"default":"destructive",className:"text-xs",children:[me.supervisors," / ",me.minRequired.supervisors]})})]}),s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Officers:"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Re,{variant:me.officers>=me.minRequired.officers?"default":"destructive",className:"text-xs",children:[me.officers," / ",me.minRequired.officers]})})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total:"}),s.jsx("span",{className:"text-sm font-bold",children:me.total})]}),s.jsx("div",{className:"mt-2",children:me.supervisors>=me.minRequired.supervisors&&me.officers>=me.minRequired.officers?s.jsx(Re,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Fully Staffed"}):s.jsx(Re,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Understaffed"})})]},Z)),(!(we!=null&&we.staffingBreakdown)||Object.keys(we.staffingBreakdown).length===0)&&s.jsxs("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:[s.jsx(jr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No staffing data available for today"})]})]})})]}),!e&&s.jsxs(fl,{value:g,onValueChange:G,className:"space-y-6",children:[R?s.jsxs(sa,{className:`w-full overflow-x-auto flex md:grid ${le?"md:grid-cols-6":"md:grid-cols-5"} gap-1`,children:[s.jsxs(er,{value:"daily",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(xt,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Riding List"}),s.jsx("span",{className:"md:hidden",children:"Daily"})]}),s.jsxs(er,{value:"schedule",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(xt,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"The Book"}),s.jsx("span",{className:"md:hidden",children:"Weekly"})]}),s.jsxs(er,{value:"vacancies",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(On,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Vacancies"}),s.jsx("span",{className:"md:hidden",children:"Vacancies"})]}),s.jsxs(er,{value:"staff",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(jr,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Staff"}),s.jsx("span",{className:"md:hidden",children:"Staff"})]}),le&&s.jsxs(er,{value:"requests",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(pr,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"PTO"}),s.jsx("span",{className:"md:hidden",children:"PTO"})]}),s.jsxs(er,{value:"settings",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(cj,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Settings"}),s.jsx("span",{className:"md:hidden",children:"Settings"})]})]}):U?s.jsxs(sa,{className:`w-full overflow-x-auto flex md:grid ${le?"md:grid-cols-5":"md:grid-cols-4"} gap-1`,children:[s.jsxs(er,{value:"daily",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(xt,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Riding List"}),s.jsx("span",{className:"md:hidden",children:"Daily"})]}),s.jsxs(er,{value:"schedule",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(xt,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"The Book"}),s.jsx("span",{className:"md:hidden",children:"Weekly"})]}),s.jsxs(er,{value:"vacancies",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(On,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Vacancies"}),s.jsx("span",{className:"md:hidden",children:"Vacancies"})]}),s.jsxs(er,{value:"staff",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(jr,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Staff"}),s.jsx("span",{className:"md:hidden",children:"Staff"})]}),le&&s.jsxs(er,{value:"requests",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(pr,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"PTO"}),s.jsx("span",{className:"md:hidden",children:"PTO"})]})]}):s.jsxs(sa,{className:`w-full overflow-x-auto flex md:grid ${le?"md:grid-cols-3":"md:grid-cols-2"} gap-1`,children:[s.jsxs(er,{value:"daily",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(xt,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Riding List"}),s.jsx("span",{className:"md:hidden",children:"Daily"})]}),s.jsxs(er,{value:"schedule",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(xt,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"The Book"}),s.jsx("span",{className:"md:hidden",children:"Weekly"})]}),le&&s.jsxs(er,{value:"requests",className:"flex-shrink-0 whitespace-nowrap",children:[s.jsx(pr,{className:"h-4 w-4 md:mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"PTO"}),s.jsx("span",{className:"md:hidden",children:"PTO"})]})]}),s.jsx(Un,{value:g,className:"space-y-6",children:W()})]}),e&&s.jsx("div",{className:"space-y-6",children:W()})]}),e&&s.jsx(qne,{activeTab:g,onTabChange:G,isAdminOrSupervisor:U,isAdmin:R})]})},pae=()=>{const e=Hp(),[t,r]=w.useState(!0),[n,i]=w.useState(""),[a,o]=w.useState(""),[l,c]=w.useState(""),[d,u]=w.useState(!1),[h,m]=w.useState(!1);w.useEffect(()=>{const x=()=>{m(window.innerWidth<768)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const f=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return"unknown"}},g="data:image/png;base64,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";w.useEffect(()=>{se.auth.getSession().then(({data:{session:x}})=>{x&&e("/")})},[e]);const y=async x=>{x.preventDefault(),u(!0);try{if(t){const{data:p,error:v}=await se.auth.signInWithPassword({email:n,password:a});if(v)throw v;if(p.user){const b=await f(),j=navigator.userAgent;await Ir.logLogin(p.user.email,b,j)}ge.success("Welcome back!"),e("/")}else{const{error:p}=await se.auth.signUp({email:n,password:a,options:{emailRedirectTo:`${window.location.origin}/`,data:{full_name:l}}});if(p)throw p;ge.success("Account created! Please check your email to confirm.")}}catch(p){ge.error(p.message||"Authentication failed")}finally{u(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary/10 p-4 py-8",children:s.jsxs("div",{className:`w-full max-w-4xl flex ${h?"flex-col":"flex-row"} gap-8 items-start`,children:[s.jsxs(pt,{className:"w-full max-w-md shadow-lg mx-auto",children:[s.jsxs(ir,{className:"space-y-3 text-center",children:[s.jsx("div",{className:"mx-auto w-32 h-32 flex items-center justify-center",children:s.jsx("img",{src:g,alt:"Port Arthur PD Logo",className:"w-32 h-32 object-contain"})}),s.jsx(ar,{className:"text-2xl",children:"Port Arthur PD"}),s.jsx(en,{children:t?"Sign in to access your schedule":"Create your account"})]}),s.jsxs(gt,{children:[s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!t&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"fullName",children:"Full Name"}),s.jsx(St,{id:"fullName",type:"text",placeholder:"John Doe",value:l,onChange:x=>c(x.target.value),required:!t})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"email",children:"Email"}),s.jsx(St,{id:"email",type:"email",placeholder:"officer@portarthurtx.gov",value:n,onChange:x=>i(x.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ce,{htmlFor:"password",children:"Password"}),s.jsx(St,{id:"password",type:"password",placeholder:"",value:a,onChange:x=>o(x.target.value),required:!0})]}),s.jsx(Ne,{type:"submit",className:"w-full",disabled:d,children:d?"Loading...":t?"Sign In":"Sign Up"})]}),s.jsx("div",{className:"mt-4 text-center text-sm",children:s.jsx("button",{type:"button",onClick:()=>r(!t),className:"text-primary hover:underline",children:t?"Need an account? Sign up":"Already have an account? Sign in"})})]})]}),!h&&s.jsxs("div",{className:"flex-1 space-y-6",children:[s.jsxs(pt,{className:"shadow-lg",children:[s.jsxs(ir,{children:[s.jsxs(ar,{className:"flex items-center gap-2",children:[s.jsx(ki,{className:"h-5 w-5"}),"Department Portal"]}),s.jsx(en,{children:"Access your schedule, request time off, and view department announcements"})]}),s.jsx(gt,{children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{children:" View your daily and weekly schedules"}),s.jsx("p",{children:" Request time off and manage PTO"}),s.jsx("p",{children:" Receive real-time vacancy alerts"}),s.jsx("p",{children:" Access department announcements"}),t&&s.jsx("p",{className:"text-muted-foreground mt-4",children:"Sign in to access your personalized dashboard"})]})})]}),s.jsxs(pt,{className:"shadow-lg",children:[s.jsx(ir,{children:s.jsx(ar,{children:"Department Information"})}),s.jsx(gt,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-blue-700",children:"24/7"}),s.jsx("p",{className:"text-muted-foreground",children:"Operations"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-green-700",children:"129+"}),s.jsx("p",{className:"text-muted-foreground",children:"Officers"})]}),s.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-purple-700",children:"Multiple"}),s.jsx("p",{className:"text-muted-foreground",children:"Shifts"})]}),s.jsxs("div",{className:"text-center p-3 bg-amber-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-amber-700",children:"Real-time"}),s.jsx("p",{className:"text-muted-foreground",children:"Updates"})]})]})})]})]})]})})},gae=()=>{const e=zp();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},vae=({children:e})=>{const[t]=w.useState(()=>new ZV({defaultOptions:{queries:{staleTime:6e4,gcTime:6e5,retry:1,refetchOnWindowFocus:!1}}}));return s.jsxs(XV,{client:t,children:[e,!1]})},yae=e=>{if(!e)return;document.documentElement.classList.contains("dark")&&((e.style.backgroundColor==="rgb(240, 248, 255)"||e.style.backgroundColor==="aliceblue")&&(e.style.backgroundColor="",e.classList.add("bg-card","dark:bg-card")),(e.style.borderColor==="rgb(240, 248, 255)"||e.style.borderColor==="aliceblue")&&(e.style.borderColor="",e.classList.add("border-border","dark:border-border")),(e.style.color==="rgb(255, 255, 255)"||e.style.color==="white")&&(e.style.color="",e.classList.add("text-foreground","dark:text-foreground")))},f4=()=>{if(typeof document>"u"||!document.documentElement.classList.contains("dark"))return;document.querySelectorAll('[style*="background-color"]').forEach(r=>{yae(r)})};function xae(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),i=new Uint8Array(n.length);for(let a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i}const bae=()=>{const e=AI(),[t,r]=w.useState({permission:"default",subscribed:!1}),[n,i]=w.useState({isInstallable:!1,isInstalled:!1,serviceWorkerActive:!1,hasManifest:!1,deferredPrompt:null}),[a,o]=w.useState(!0),[l,c]=w.useState(null),[d,u]=w.useState(!1),[h,m]=w.useState(""),[f,g]=w.useState(!1),[y,x]=w.useState(!1),[p,v]=w.useState(null),[b,j]=w.useState(null),[S,P]=w.useState(null),M=async A=>{if(p)try{const q=JSON.stringify(A),{data:U}=await se.from("user_push_subscriptions").select("id").eq("user_id",p).single();if(U){const{error:R}=await se.from("user_push_subscriptions").update({subscription:q,updated_at:new Date().toISOString(),is_active:!0}).eq("user_id",p);R?console.error(" Failed to update push subscription:",R):console.log(" Push subscription updated in database")}else{const{error:R}=await se.from("user_push_subscriptions").insert({user_id:p,subscription:q,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_active:!0});R?console.error(" Failed to save push subscription:",R):console.log(" Push subscription saved to database")}}catch(q){console.error(" Error saving push subscription:",q)}},I=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window))return console.log(" Push notifications not supported"),null;try{let A=Notification.permission;if(A==="default"&&(console.log(" Requesting notification permission..."),A=await Notification.requestPermission(),r(C=>({...C,permission:A}))),A!=="granted")return console.log(" Notification permission not granted:",A),null;const q=await navigator.serviceWorker.ready;if(j(q),p){const{data:C}=await se.from("user_push_subscriptions").select("subscription, is_active").eq("user_id",p).eq("is_active",!0).single();if(C!=null&&C.subscription)try{const F=JSON.parse(C.subscription),X=await q.pushManager.getSubscription();if(X&&X.endpoint===F.endpoint)return console.log(" Existing push subscription found and valid"),P(F),r(re=>({...re,subscribed:!0})),q}catch{console.log(" Existing subscription invalid, creating new one")}}const U=await q.pushManager.getSubscription();if(U)return console.log(" Already subscribed to push notifications"),P(U),r(C=>({...C,subscribed:!0})),await M(U),q;const R="YOUR_VAPID_PUBLIC_KEY_HERE";if(!R||R==="YOUR_VAPID_PUBLIC_KEY_HERE")return console.log(" VAPID key not configured. Push notifications will work only when app is open."),r(C=>({...C,subscribed:!0})),q;try{const C=await q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xae(R)});return console.log(" Push subscription created:",C),P(C),r(F=>({...F,subscribed:!0})),await M(C),q}catch(C){return console.error(" Push subscription failed:",C),r(F=>({...F,subscribed:!0})),q}}catch(A){return console.error(" Push registration failed:",A),null}},O=async()=>{if(n.serviceWorkerActive&&y){console.log(" Initializing background tasks for PWA");try{if(await Wm.initialize(),yI(),b&&"sync"in b)try{await b.sync.register("anniversary-check"),console.log(" Background sync registered")}catch(A){console.warn(" Background sync not available:",A)}}catch(A){console.error(" Failed to initialize background tasks:",A)}}};w.useEffect(()=>{if(t.permission==="granted"&&n.serviceWorkerActive){const A=setTimeout(()=>{o(!1)},1e4);return c(A),()=>{A&&clearTimeout(A)}}},[t.permission,n.serviceWorkerActive]),w.useEffect(()=>{f4();const A=new MutationObserver(q=>{q.forEach(U=>{U.type==="childList"&&U.addedNodes.forEach(R=>{R.nodeType===1&&f4()})})});return A.observe(document.body,{childList:!0,subtree:!0}),()=>A.disconnect()},[]),w.useEffect(()=>{(async()=>{var C;const{data:{session:q}}=await se.auth.getSession(),U=!!q,R=((C=q==null?void 0:q.user)==null?void 0:C.id)||null;if(x(U),v(R),U&&R){const F=localStorage.getItem(`pwa_prompt_dismissed_${R}`),X=sessionStorage.getItem(`pwa_prompt_shown_${R}`);n.isInstallable&&!n.isInstalled&&!F&&!X&&n.serviceWorkerActive?setTimeout(()=>{g(!0),sessionStorage.setItem(`pwa_prompt_shown_${R}`,"true")},1500):g(!1),O(),n.serviceWorkerActive&&I()}else g(!1)})()},[n.isInstallable,n.isInstalled,n.serviceWorkerActive]),w.useEffect(()=>{const{data:{subscription:A}}=se.auth.onAuthStateChange(async(q,U)=>{var R,C,F,X;if(console.log(" Auth state changed:",q,"User ID:",(R=U==null?void 0:U.user)==null?void 0:R.id),q==="SIGNED_OUT"){const re=(C=U==null?void 0:U.user)==null?void 0:C.id;re&&sessionStorage.removeItem(`pwa_prompt_shown_${re}`),v(null),x(!1),P(null),j(null),Wm.destroy()}else if(q==="SIGNED_IN"){console.log("User signed in, initializing PWA features");const re=(F=U==null?void 0:U.user)==null?void 0:F.id;v(re),x(!0),setTimeout(()=>{n.serviceWorkerActive&&(O(),I())},1e3)}else if(q==="INITIAL_SESSION"){const re=(X=U==null?void 0:U.user)==null?void 0:X.id;v(re),x(!!U)}});return()=>{A.unsubscribe(),Wm.destroy()}},[]),w.useEffect(()=>{console.log(" Initializing PWA functionality...");const A=()=>{const F=window.matchMedia("(display-mode: standalone)").matches,X=window.navigator.standalone===!0,re=F||X,z=document.querySelector('link[rel="manifest"]')!==null;"serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then(Y=>{const J=!!(Y!=null&&Y.active);i(ne=>({...ne,isInstalled:re,serviceWorkerActive:J,hasManifest:z})),Y&&j(Y)}):i(Y=>({...Y,isInstalled:re,hasManifest:z}))},q=F=>{console.log(" PWA install prompt event fired!"),F.preventDefault();const X=F;i(re=>({...re,isInstallable:!0,deferredPrompt:X})),window.deferredPrompt=F,console.log("PWA is installable, will show prompt after login if not dismissed")},U=()=>{console.log(" PWA installed successfully"),i(F=>({...F,isInstallable:!1,isInstalled:!0})),g(!1),window.deferredPrompt=null,ge.success("Police Scheduler installed successfully!"),y&&O()},R=async()=>{if(!("serviceWorker"in navigator)){console.log(" Service Workers not supported");return}try{try{const F=await navigator.serviceWorker.register("/scheduler/service-worker.js",{scope:"/scheduler/",updateViaCache:"none"});console.log(" PWA Service Worker registered:",F.scope),j(F),F.active&&i(X=>({...X,serviceWorkerActive:!0})),navigator.serviceWorker.addEventListener("message",X=>{console.log(" Message from service worker:",X.data),X.data&&X.data.type==="SERVICE_WORKER_READY"&&(console.log(" Service worker ready:",X.data.message),i(re=>({...re,serviceWorkerActive:!0})))})}catch(F){console.error(" PWA service worker registration failed:",F)}}catch(F){console.error(" Service worker registration failed:",F)}};window.addEventListener("beforeinstallprompt",q),window.addEventListener("appinstalled",U),A(),R();const C=setInterval(A,5e3);return()=>{window.removeEventListener("beforeinstallprompt",q),window.removeEventListener("appinstalled",U),clearInterval(C)}},[]),w.useEffect(()=>{console.log(" Setting up browser notifications..."),(async()=>{var R;const q=Notification.permission;console.log(" Browser notification permission:",q),r(C=>({...C,permission:q}));const{data:{session:U}}=await se.auth.getSession();if((R=U==null?void 0:U.user)!=null&&R.id){const{data:C}=await se.from("profiles").select("notification_subscribed").eq("id",U.user.id).single();C!=null&&C.notification_subscribed&&q==="granted"?(r(F=>({...F,subscribed:!0})),u(!1)):q==="default"&&u(!0)}})()},[]);const L=async()=>{var A;console.log(" Requesting browser notification permission..."),m(" Requesting notification permission...");try{const q=await Notification.requestPermission();if(console.log("Browser permission result:",q),q==="granted"){m(" Browser notifications enabled!"),r(R=>({...R,permission:"granted",subscribed:!0}));const{data:{session:U}}=await se.auth.getSession();(A=U==null?void 0:U.user)!=null&&A.id&&await se.from("profiles").update({notification_subscribed:!0,notification_subscribed_at:new Date().toISOString(),notification_provider:"browser"}).eq("id",U.user.id),u(!1),n.serviceWorkerActive&&await I(),ge.success("Notifications enabled! You'll receive shift alerts.")}else q==="denied"?(m(" Notifications blocked in browser settings"),r(U=>({...U,permission:"denied"})),ge.error("Notifications blocked. Please enable them in browser settings.")):(m(" Notification permission not granted"),r(U=>({...U,permission:"default"})))}catch(q){console.error(" Error requesting permission:",q),m(" Failed to request permission"),ge.error("Failed to enable notifications. Please try again.")}setTimeout(()=>{m("")},3e3)},T=async()=>{if(console.log(" Attempting PWA installation..."),n.isInstalled){ge.info("App is already installed!");return}const A=n.deferredPrompt||window.deferredPrompt;if(A)try{console.log(" Showing installation prompt..."),A.prompt();const{outcome:q}=await A.userChoice;console.log(` User choice: ${q}`),q==="accepted"?(console.log(" User accepted PWA installation"),ge.success("Police Scheduler is installing...")):(console.log(" User dismissed PWA installation"),p&&localStorage.setItem(`pwa_prompt_dismissed_${p}`,"true"),ge.info("Installation canceled. You can install later from settings.")),i(U=>({...U,deferredPrompt:null})),g(!1),window.deferredPrompt=null}catch(q){console.error(" Error during PWA installation:",q),E()}else E()},k=async()=>{p&&localStorage.setItem(`pwa_prompt_dismissed_${p}`,"true"),g(!1),ge.info("You can install the app later from Settings.")},E=()=>{const A=/iPad|iPhone|iPod/.test(navigator.userAgent),q=/Android/.test(navigator.userAgent);let U="",R="Install Police Scheduler";A?U=`1. Tap the Share button () at the bottom
2. Scroll down and tap "Add to Home Screen"
3. Tap "Add" in the top right`:q?U=`1. Tap the menu () in your browser
2. Tap "Install app" or "Add to Home screen"
3. Confirm the installation`:(U=`1. Click the menu () in your browser
2. Look for "Install Police Scheduler"
3. Click to install`,R="Install App"),ge(s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-semibold",children:R}),s.jsx("div",{className:"text-sm whitespace-pre-line",children:U})]}),{duration:1e4})};return s.jsx(vae,{children:s.jsxs(rE,{children:[s.jsx(WB,{}),s.jsx(Nq,{}),s.jsx(aH,{children:s.jsxs(iQ,{children:[h&&s.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md animate-slide-down",children:s.jsx("div",{className:`p-4 rounded-lg shadow-lg ${h.includes("")?"bg-green-100 border border-green-300 text-green-800":h.includes("")?"bg-red-100 border border-red-300 text-red-800":"bg-blue-100 border border-blue-300 text-blue-800"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[h.includes("")&&s.jsx(tf,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:h})]})})}),d&&!t.subscribed&&Notification.permission==="default"&&s.jsx("div",{className:"fixed top-0 left-0 right-0 z-40 bg-blue-600 text-white p-4 shadow-lg",children:s.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ki,{className:"h-6 w-6"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold",children:"Police Department Notifications"}),s.jsx("p",{className:"text-sm opacity-90",children:"Required for all officers to receive shift alerts and emergency notifications"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ne,{onClick:L,className:"bg-white text-blue-600 hover:bg-gray-100 font-semibold",children:"Enable Notifications"}),s.jsx(Ne,{onClick:()=>u(!1),variant:"outline",className:"text-white border-white hover:bg-blue-700",children:"Not Now"})]})]})}),f&&y&&n.isInstallable&&!n.isInstalled&&s.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm animate-slide-up",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-blue-200 p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Dm,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900",children:"Install Police Scheduler"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get quick access to your shifts - Recommended for all officers"})]})]}),s.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ms,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsx("span",{children:"Works offline when network is unavailable"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsx("span",{children:"Push notifications for shift changes"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsx("span",{children:"Quick access from home screen like an app"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsx("span",{children:"Background anniversary & birthday alerts"})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs(Ne,{onClick:T,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(Ai,{className:"mr-2 h-4 w-4"}),"Install App"]}),s.jsx(Ne,{onClick:k,variant:"outline",className:"flex-1",children:"Not Now"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"For all 129+ officers  Secure HTTPS connection  Department approved"})]})}),!1,s.jsx("div",{className:e?"mobile-layout":"desktop-layout",children:s.jsxs(nH,{children:[s.jsx(Hi,{path:"/",element:s.jsx(tH,{to:"/dashboard",replace:!0})}),s.jsx(Hi,{path:"/dashboard",element:s.jsx(ql,{isMobile:e})}),s.jsx(Hi,{path:"/auth",element:s.jsx(pae,{})}),s.jsx(Hi,{path:"/daily-schedule",element:s.jsx(ql,{isMobile:e,initialTab:"daily"})}),s.jsx(Hi,{path:"/weekly-schedule",element:s.jsx(ql,{isMobile:e,initialTab:"schedule"})}),s.jsx(Hi,{path:"/vacancies",element:s.jsx(ql,{isMobile:e,initialTab:"vacancies"})}),s.jsx(Hi,{path:"/staff",element:s.jsx(ql,{isMobile:e,initialTab:"staff"})}),s.jsx(Hi,{path:"/time-off",element:s.jsx(ql,{isMobile:e,initialTab:"requests"})}),s.jsx(Hi,{path:"/pto",element:s.jsx(ql,{isMobile:e,initialTab:"requests"})}),s.jsx(Hi,{path:"/settings",element:s.jsx(ql,{isMobile:e,initialTab:"settings"})}),s.jsx(Hi,{path:"*",element:s.jsx(gae,{})})]})})]})})]})})};qT(document.getElementById("root")).render(s.jsx(bae,{}));export{Or as _,Nae as c,P4 as g};
//# sourceMappingURL=main-BLvpoJBL.js.map
