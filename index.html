<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ... other meta tags ... -->

    <!-- OneSignal Push Notification SDK -->
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        // App ID will be injected by Vite during build
        await OneSignal.init({
          appId: "%%ONESIGNAL_APP_ID%%", // This gets replaced at build time
          
          // IMPORTANT: Service worker paths for GitHub Pages subdirectory
          serviceWorkerPath: "/scheduler/OneSignalSDKWorker.js",
          serviceWorkerParam: { scope: "/scheduler/" },
          
          // Development settings
          allowLocalhostAsSecureOrigin: window.location.hostname === 'localhost',
          
          // Prompt settings
          promptOptions: {
            slidedown: {
              enabled: true,
              autoPrompt: true,
              timeDelay: 3,
              pageViews: 1,
              acceptButtonText: "Allow Alerts",
              acceptButtonColor: "#2563eb",
              cancelButtonText: "Not Now",
              cancelButtonColor: "#6b7280",
              title: "PAPD Alert Notifications",
              message: "Stay informed with shift changes, vacancies, and emergency alerts from Port Arthur Police Department.",
            }
          }
        });
        
        console.log("üö® PAPD OneSignal initialized");
        
        // Debug: Check service worker registration
        OneSignal.getRegistration().then(registration => {
          console.log("‚úÖ Service Worker Registration:", registration);
        }).catch(error => {
          console.error("‚ùå Service Worker Error:", error);
        });
      });
    </script>

    <title>Port Arthur PD Scheduler</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
